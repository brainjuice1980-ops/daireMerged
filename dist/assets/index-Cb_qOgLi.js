function L1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function O1(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var sb={exports:{}},Ap={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function Xk(){if(Jw)return Ap;Jw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,a){var l=null;if(a!==void 0&&(l=""+a),o.key!==void 0&&(l=""+o.key),"key"in o){a={};for(var c in o)c!=="key"&&(a[c]=o[c])}else a=o;return o=a.ref,{$$typeof:t,type:r,key:l,ref:o!==void 0?o:null,props:a}}return Ap.Fragment=e,Ap.jsx=n,Ap.jsxs=n,Ap}var Yw;function Qk(){return Yw||(Yw=1,sb.exports=Xk()),sb.exports}var b=Qk(),ab={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function Zk(){if(Ww)return tt;Ww=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,N={};function I(V,re,U){this.props=V,this.context=re,this.refs=N,this.updater=U||C}I.prototype.isReactComponent={},I.prototype.setState=function(V,re){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,re,"setState")},I.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function L(){}L.prototype=I.prototype;function D(V,re,U){this.props=V,this.context=re,this.refs=N,this.updater=U||C}var $=D.prototype=new L;$.constructor=D,k($,I.prototype),$.isPureReactComponent=!0;var G=Array.isArray;function j(){}var q={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function W(V,re,U){var me=U.ref;return{$$typeof:t,type:V,key:re,ref:me!==void 0?me:null,props:U}}function z(V,re){return W(V.type,re,V.props)}function te(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function de(V){var re={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(U){return re[U]})}var xe=/\/+/g;function ue(V,re){return typeof V=="object"&&V!==null&&V.key!=null?de(""+V.key):re.toString(36)}function fe(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(j,j):(V.status="pending",V.then(function(re){V.status==="pending"&&(V.status="fulfilled",V.value=re)},function(re){V.status==="pending"&&(V.status="rejected",V.reason=re)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function K(V,re,U,me,Ce){var Ie=typeof V;(Ie==="undefined"||Ie==="boolean")&&(V=null);var Ve=!1;if(V===null)Ve=!0;else switch(Ie){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(V.$$typeof){case t:case e:Ve=!0;break;case g:return Ve=V._init,K(Ve(V._payload),re,U,me,Ce)}}if(Ve)return Ce=Ce(V),Ve=me===""?"."+ue(V,0):me,G(Ce)?(U="",Ve!=null&&(U=Ve.replace(xe,"$&/")+"/"),K(Ce,re,U,"",function(Xt){return Xt})):Ce!=null&&(te(Ce)&&(Ce=z(Ce,U+(Ce.key==null||V&&V.key===Ce.key?"":(""+Ce.key).replace(xe,"$&/")+"/")+Ve)),re.push(Ce)),1;Ve=0;var rt=me===""?".":me+":";if(G(V))for(var Ue=0;Ue<V.length;Ue++)me=V[Ue],Ie=rt+ue(me,Ue),Ve+=K(me,re,U,Ie,Ce);else if(Ue=T(V),typeof Ue=="function")for(V=Ue.call(V),Ue=0;!(me=V.next()).done;)me=me.value,Ie=rt+ue(me,Ue++),Ve+=K(me,re,U,Ie,Ce);else if(Ie==="object"){if(typeof V.then=="function")return K(fe(V),re,U,me,Ce);throw re=String(V),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function oe(V,re,U){if(V==null)return V;var me=[],Ce=0;return K(V,me,"","",function(Ie){return re.call(U,Ie,Ce++)}),me}function le(V){if(V._status===-1){var re=V._result;re=re(),re.then(function(U){(V._status===0||V._status===-1)&&(V._status=1,V._result=U)},function(U){(V._status===0||V._status===-1)&&(V._status=2,V._result=U)}),V._status===-1&&(V._status=0,V._result=re)}if(V._status===1)return V._result.default;throw V._result}var Ee=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},H={map:oe,forEach:function(V,re,U){oe(V,function(){re.apply(this,arguments)},U)},count:function(V){var re=0;return oe(V,function(){re++}),re},toArray:function(V){return oe(V,function(re){return re})||[]},only:function(V){if(!te(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return tt.Activity=y,tt.Children=H,tt.Component=I,tt.Fragment=n,tt.Profiler=o,tt.PureComponent=D,tt.StrictMode=r,tt.Suspense=h,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,tt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return q.H.useMemoCache(V)}},tt.cache=function(V){return function(){return V.apply(null,arguments)}},tt.cacheSignal=function(){return null},tt.cloneElement=function(V,re,U){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var me=k({},V.props),Ce=V.key;if(re!=null)for(Ie in re.key!==void 0&&(Ce=""+re.key),re)!ee.call(re,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&re.ref===void 0||(me[Ie]=re[Ie]);var Ie=arguments.length-2;if(Ie===1)me.children=U;else if(1<Ie){for(var Ve=Array(Ie),rt=0;rt<Ie;rt++)Ve[rt]=arguments[rt+2];me.children=Ve}return W(V.type,Ce,me)},tt.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:a,_context:V},V},tt.createElement=function(V,re,U){var me,Ce={},Ie=null;if(re!=null)for(me in re.key!==void 0&&(Ie=""+re.key),re)ee.call(re,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ce[me]=re[me]);var Ve=arguments.length-2;if(Ve===1)Ce.children=U;else if(1<Ve){for(var rt=Array(Ve),Ue=0;Ue<Ve;Ue++)rt[Ue]=arguments[Ue+2];Ce.children=rt}if(V&&V.defaultProps)for(me in Ve=V.defaultProps,Ve)Ce[me]===void 0&&(Ce[me]=Ve[me]);return W(V,Ie,Ce)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(V){return{$$typeof:c,render:V}},tt.isValidElement=te,tt.lazy=function(V){return{$$typeof:g,_payload:{_status:-1,_result:V},_init:le}},tt.memo=function(V,re){return{$$typeof:f,type:V,compare:re===void 0?null:re}},tt.startTransition=function(V){var re=q.T,U={};q.T=U;try{var me=V(),Ce=q.S;Ce!==null&&Ce(U,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(j,Ee)}catch(Ie){Ee(Ie)}finally{re!==null&&U.types!==null&&(re.types=U.types),q.T=re}},tt.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},tt.use=function(V){return q.H.use(V)},tt.useActionState=function(V,re,U){return q.H.useActionState(V,re,U)},tt.useCallback=function(V,re){return q.H.useCallback(V,re)},tt.useContext=function(V){return q.H.useContext(V)},tt.useDebugValue=function(){},tt.useDeferredValue=function(V,re){return q.H.useDeferredValue(V,re)},tt.useEffect=function(V,re){return q.H.useEffect(V,re)},tt.useEffectEvent=function(V){return q.H.useEffectEvent(V)},tt.useId=function(){return q.H.useId()},tt.useImperativeHandle=function(V,re,U){return q.H.useImperativeHandle(V,re,U)},tt.useInsertionEffect=function(V,re){return q.H.useInsertionEffect(V,re)},tt.useLayoutEffect=function(V,re){return q.H.useLayoutEffect(V,re)},tt.useMemo=function(V,re){return q.H.useMemo(V,re)},tt.useOptimistic=function(V,re){return q.H.useOptimistic(V,re)},tt.useReducer=function(V,re,U){return q.H.useReducer(V,re,U)},tt.useRef=function(V){return q.H.useRef(V)},tt.useState=function(V){return q.H.useState(V)},tt.useSyncExternalStore=function(V,re,U){return q.H.useSyncExternalStore(V,re,U)},tt.useTransition=function(){return q.H.useTransition()},tt.version="19.2.0",tt}var Kw;function Av(){return Kw||(Kw=1,ab.exports=Zk()),ab.exports}var M=Av();const We=sl(M),eI=L1({__proto__:null,default:We},[M]);var lb={exports:{}},kp={},ub={exports:{}},cb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw;function tI(){return Xw||(Xw=1,(function(t){function e(K,oe){var le=K.length;K.push(oe);e:for(;0<le;){var Ee=le-1>>>1,H=K[Ee];if(0<o(H,oe))K[Ee]=oe,K[le]=H,le=Ee;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var oe=K[0],le=K.pop();if(le!==oe){K[0]=le;e:for(var Ee=0,H=K.length,V=H>>>1;Ee<V;){var re=2*(Ee+1)-1,U=K[re],me=re+1,Ce=K[me];if(0>o(U,le))me<H&&0>o(Ce,U)?(K[Ee]=Ce,K[me]=le,Ee=me):(K[Ee]=U,K[re]=le,Ee=re);else if(me<H&&0>o(Ce,le))K[Ee]=Ce,K[me]=le,Ee=me;else break e}}return oe}function o(K,oe){var le=K.sortIndex-oe.sortIndex;return le!==0?le:K.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],f=[],g=1,y=null,_=3,T=!1,C=!1,k=!1,N=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function $(K){for(var oe=n(f);oe!==null;){if(oe.callback===null)r(f);else if(oe.startTime<=K)r(f),oe.sortIndex=oe.expirationTime,e(h,oe);else break;oe=n(f)}}function G(K){if(k=!1,$(K),!C)if(n(h)!==null)C=!0,j||(j=!0,de());else{var oe=n(f);oe!==null&&fe(G,oe.startTime-K)}}var j=!1,q=-1,ee=5,W=-1;function z(){return N?!0:!(t.unstable_now()-W<ee)}function te(){if(N=!1,j){var K=t.unstable_now();W=K;var oe=!0;try{e:{C=!1,k&&(k=!1,L(q),q=-1),T=!0;var le=_;try{t:{for($(K),y=n(h);y!==null&&!(y.expirationTime>K&&z());){var Ee=y.callback;if(typeof Ee=="function"){y.callback=null,_=y.priorityLevel;var H=Ee(y.expirationTime<=K);if(K=t.unstable_now(),typeof H=="function"){y.callback=H,$(K),oe=!0;break t}y===n(h)&&r(h),$(K)}else r(h);y=n(h)}if(y!==null)oe=!0;else{var V=n(f);V!==null&&fe(G,V.startTime-K),oe=!1}}break e}finally{y=null,_=le,T=!1}oe=void 0}}finally{oe?de():j=!1}}}var de;if(typeof D=="function")de=function(){D(te)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ue=xe.port2;xe.port1.onmessage=te,de=function(){ue.postMessage(null)}}else de=function(){I(te,0)};function fe(K,oe){q=I(function(){K(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(K){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var le=_;_=oe;try{return K()}finally{_=le}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var le=_;_=K;try{return oe()}finally{_=le}},t.unstable_scheduleCallback=function(K,oe,le){var Ee=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ee+le:Ee):le=Ee,K){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=le+H,K={id:g++,callback:oe,priorityLevel:K,startTime:le,expirationTime:H,sortIndex:-1},le>Ee?(K.sortIndex=le,e(f,K),n(h)===null&&K===n(f)&&(k?(L(q),q=-1):k=!0,fe(G,le-Ee))):(K.sortIndex=H,e(h,K),C||T||(C=!0,j||(j=!0,de()))),K},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(K){var oe=_;return function(){var le=_;_=oe;try{return K.apply(this,arguments)}finally{_=le}}}})(cb)),cb}var Qw;function nI(){return Qw||(Qw=1,ub.exports=tI()),ub.exports}var db={exports:{}},sr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function rI(){if(Zw)return sr;Zw=1;var t=Av();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(h,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:h,containerInfo:f,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return sr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sr.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,g)},sr.flushSync=function(h){var f=l.T,g=r.p;try{if(l.T=null,r.p=2,h)return h()}finally{l.T=f,r.p=g,r.d.f()}},sr.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},sr.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},sr.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,y=c(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:T}):g==="script"&&r.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},sr.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=c(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},sr.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=c(g,f.crossOrigin);r.d.L(h,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},sr.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=c(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},sr.requestFormReset=function(h){r.d.r(h)},sr.unstable_batchedUpdates=function(h,f){return h(f)},sr.useFormState=function(h,f,g){return l.H.useFormState(h,f,g)},sr.useFormStatus=function(){return l.H.useHostTransitionStatus()},sr.version="19.2.0",sr}var e_;function U1(){if(e_)return db.exports;e_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),db.exports=rI(),db.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function iI(){if(t_)return kp;t_=1;var t=nI(),e=Av(),n=U1();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var s=i,u=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(u=s.return),i=s.return;while(i)}return s.tag===3?u:null}function l(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function c(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(a(i)!==i)throw Error(r(188))}function f(i){var s=i.alternate;if(!s){if(s=a(i),s===null)throw Error(r(188));return s!==i?null:i}for(var u=i,p=s;;){var w=u.return;if(w===null)break;var E=w.alternate;if(E===null){if(p=w.return,p!==null){u=p;continue}break}if(w.child===E.child){for(E=w.child;E;){if(E===u)return h(w),i;if(E===p)return h(w),s;E=E.sibling}throw Error(r(188))}if(u.return!==p.return)u=w,p=E;else{for(var R=!1,O=w.child;O;){if(O===u){R=!0,u=w,p=E;break}if(O===p){R=!0,p=w,u=E;break}O=O.sibling}if(!R){for(O=E.child;O;){if(O===u){R=!0,u=E,p=w;break}if(O===p){R=!0,p=E,u=w;break}O=O.sibling}if(!R)throw Error(r(189))}}if(u.alternate!==p)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:s}function g(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=g(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),D=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function de(i){return i===null||typeof i!="object"?null:(i=te&&i[te]||i["@@iterator"],typeof i=="function"?i:null)}var xe=Symbol.for("react.client.reference");function ue(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===xe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case I:return"Profiler";case N:return"StrictMode";case G:return"Suspense";case j:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case D:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case $:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case q:return s=i.displayName||null,s!==null?s:ue(i.type)||"Memo";case ee:s=i._payload,i=i._init;try{return ue(i(s))}catch{}}return null}var fe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Ee=[],H=-1;function V(i){return{current:i}}function re(i){0>H||(i.current=Ee[H],Ee[H]=null,H--)}function U(i,s){H++,Ee[H]=i.current,i.current=s}var me=V(null),Ce=V(null),Ie=V(null),Ve=V(null);function rt(i,s){switch(U(Ie,s),U(Ce,i),U(me,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Eu(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Eu(s),i=ir(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}re(me),U(me,i)}function Ue(){re(me),re(Ce),re(Ie)}function Xt(i){i.memoizedState!==null&&U(Ve,i);var s=me.current,u=ir(s,i.type);s!==u&&(U(Ce,i),U(me,u))}function hn(i){Ce.current===i&&(re(me),re(Ce)),Ve.current===i&&(re(Ve),Wa._currentValue=le)}var fr,fs;function nn(i){if(fr===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);fr=s&&s[1]||"",fs=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fr+i+fs}var hr=!1;function Zs(i,s){if(!i||hr)return"";hr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(s){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(pe){var ce=pe}Reflect.construct(i,[],we)}else{try{we.call()}catch(pe){ce=pe}i.call(we.prototype)}}else{try{throw Error()}catch(pe){ce=pe}(we=i())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(pe){if(pe&&ce&&typeof pe.stack=="string")return[pe.stack,ce.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=p.DetermineComponentFrameRoot(),R=E[0],O=E[1];if(R&&O){var Y=R.split(`
`),ae=O.split(`
`);for(w=p=0;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;for(;w<ae.length&&!ae[w].includes("DetermineComponentFrameRoot");)w++;if(p===Y.length||w===ae.length)for(p=Y.length-1,w=ae.length-1;1<=p&&0<=w&&Y[p]!==ae[w];)w--;for(;1<=p&&0<=w;p--,w--)if(Y[p]!==ae[w]){if(p!==1||w!==1)do if(p--,w--,0>w||Y[p]!==ae[w]){var ye=`
`+Y[p].replace(" at new "," at ");return i.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",i.displayName)),ye}while(1<=p&&0<=w);break}}}finally{hr=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?nn(u):""}function Br(i,s){switch(i.tag){case 26:case 27:case 5:return nn(i.type);case 16:return nn("Lazy");case 13:return i.child!==s&&s!==null?nn("Suspense Fallback"):nn("Suspense");case 19:return nn("SuspenseList");case 0:case 15:return Zs(i.type,!1);case 11:return Zs(i.type.render,!1);case 1:return Zs(i.type,!0);case 31:return nn("Activity");default:return""}}function dl(i){try{var s="",u=null;do s+=Br(i,u),u=i,i=i.return;while(i);return s}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var ea=Object.prototype.hasOwnProperty,ki=t.unstable_scheduleCallback,Bn=t.unstable_cancelCallback,hs=t.unstable_shouldYield,ta=t.unstable_requestPaint,Fn=t.unstable_now,ps=t.unstable_getCurrentPriorityLevel,ve=t.unstable_ImmediatePriority,ke=t.unstable_UserBlockingPriority,je=t.unstable_NormalPriority,it=t.unstable_LowPriority,gt=t.unstable_IdlePriority,jn=t.log,ii=t.unstable_setDisableYieldValue,Cn=null,rn=null;function Pn(i){if(typeof jn=="function"&&ii(i),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Cn,i)}catch{}}var Tt=Math.clz32?Math.clz32:Qv,Ii=Math.log,oi=Math.LN2;function Qv(i){return i>>>=0,i===0?32:31-(Ii(i)/oi|0)|0}var nc=256,fl=262144,hl=4194304;function ms(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function rc(i,s,u){var p=i.pendingLanes;if(p===0)return 0;var w=0,E=i.suspendedLanes,R=i.pingedLanes;i=i.warmLanes;var O=p&134217727;return O!==0?(p=O&~E,p!==0?w=ms(p):(R&=O,R!==0?w=ms(R):u||(u=O&~i,u!==0&&(w=ms(u))))):(O=p&~E,O!==0?w=ms(O):R!==0?w=ms(R):u||(u=p&~i,u!==0&&(w=ms(u)))),w===0?0:s!==0&&s!==w&&(s&E)===0&&(E=w&-w,u=s&-s,E>=u||E===32&&(u&4194048)!==0)?s:w}function pl(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Zv(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function If(){var i=hl;return hl<<=1,(hl&62914560)===0&&(hl=4194304),i}function Rf(i){for(var s=[],u=0;31>u;u++)s.push(i);return s}function ml(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function e0(i,s,u,p,w,E){var R=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var O=i.entanglements,Y=i.expirationTimes,ae=i.hiddenUpdates;for(u=R&~u;0<u;){var ye=31-Tt(u),we=1<<ye;O[ye]=0,Y[ye]=-1;var ce=ae[ye];if(ce!==null)for(ae[ye]=null,ye=0;ye<ce.length;ye++){var pe=ce[ye];pe!==null&&(pe.lane&=-536870913)}u&=~we}p!==0&&ic(i,p,0),E!==0&&w===0&&i.tag!==0&&(i.suspendedLanes|=E&~(R&~s))}function ic(i,s,u){i.pendingLanes|=s,i.suspendedLanes&=~s;var p=31-Tt(s);i.entangledLanes|=s,i.entanglements[p]=i.entanglements[p]|1073741824|u&261930}function gm(i,s){var u=i.entangledLanes|=s;for(i=i.entanglements;u;){var p=31-Tt(u),w=1<<p;w&s|i[p]&s&&(i[p]|=s),u&=~w}}function oc(i,s){var u=s&-s;return u=(u&42)!==0?1:Nf(u),(u&(i.suspendedLanes|s))!==0?0:u}function Nf(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Mf(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ym(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:ky(i.type))}function vm(i,s){var u=oe.p;try{return oe.p=i,s()}finally{oe.p=u}}var So=Math.random().toString(36).slice(2),An="__reactFiber$"+So,Gn="__reactProps$"+So,na="__reactContainer$"+So,sc="__reactEvents$"+So,t0="__reactListeners$"+So,n0="__reactHandles$"+So,bm="__reactResources$"+So,gl="__reactMarker$"+So;function Df(i){delete i[An],delete i[Gn],delete i[sc],delete i[t0],delete i[n0]}function ra(i){var s=i[An];if(s)return s;for(var u=i.parentNode;u;){if(s=u[na]||u[An]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(i=dy(i);i!==null;){if(u=i[An])return u;i=dy(i)}return s}i=u,u=i.parentNode}return null}function Gi(i){if(i=i[An]||i[na]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function yl(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Ji(i){var s=i[bm];return s||(s=i[bm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function bn(i){i[gl]=!0}var xm=new Set,wm={};function Eo(i,s){gs(i,s),gs(i+"Capture",s)}function gs(i,s){for(wm[i]=s,i=0;i<s.length;i++)xm.add(s[i])}var _m=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sm={},Em={};function r0(i){return ea.call(Em,i)?!0:ea.call(Sm,i)?!1:_m.test(i)?Em[i]=!0:(Sm[i]=!0,!1)}function ac(i,s,u){if(r0(s))if(u===null)i.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var p=s.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+u)}}function vl(i,s,u){if(u===null)i.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+u)}}function Ri(i,s,u,p){if(p===null)i.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(s,u,""+p)}}function pr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function lc(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function i0(i,s,u){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var w=p.get,E=p.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return w.call(this)},set:function(R){u=""+R,E.call(this,R)}}),Object.defineProperty(i,s,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(R){u=""+R},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function uc(i){if(!i._valueTracker){var s=lc(i)?"checked":"value";i._valueTracker=i0(i,s,""+i[s])}}function bl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var u=s.getValue(),p="";return i&&(p=lc(i)?i.checked?"true":"false":i.value),i=p,i!==u?(s.setValue(i),!0):!1}function xl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var o0=/[\n"\\]/g;function mr(i){return i.replace(o0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function cc(i,s,u,p,w,E,R,O){i.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.type=R:i.removeAttribute("type"),s!=null?R==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+pr(s)):i.value!==""+pr(s)&&(i.value=""+pr(s)):R!=="submit"&&R!=="reset"||i.removeAttribute("value"),s!=null?Pf(i,R,pr(s)):u!=null?Pf(i,R,pr(u)):p!=null&&i.removeAttribute("value"),w==null&&E!=null&&(i.defaultChecked=!!E),w!=null&&(i.checked=w&&typeof w!="function"&&typeof w!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.name=""+pr(O):i.removeAttribute("name")}function dc(i,s,u,p,w,E,R,O){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.type=E),s!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||s!=null)){uc(i);return}u=u!=null?""+pr(u):"",s=s!=null?""+pr(s):u,O||s===i.value||(i.value=s),i.defaultValue=s}p=p??w,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=O?i.checked:!!p,i.defaultChecked=!!p,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(i.name=R),uc(i)}function Pf(i,s,u){s==="number"&&xl(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function ys(i,s,u,p){if(i=i.options,s){s={};for(var w=0;w<u.length;w++)s["$"+u[w]]=!0;for(u=0;u<i.length;u++)w=s.hasOwnProperty("$"+i[u].value),i[u].selected!==w&&(i[u].selected=w),w&&p&&(i[u].defaultSelected=!0)}else{for(u=""+pr(u),s=null,w=0;w<i.length;w++){if(i[w].value===u){i[w].selected=!0,p&&(i[w].defaultSelected=!0);return}s!==null||i[w].disabled||(s=i[w])}s!==null&&(s.selected=!0)}}function fc(i,s,u){if(s!=null&&(s=""+pr(s),s!==i.value&&(i.value=s),u==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=u!=null?""+pr(u):""}function hc(i,s,u,p){if(s==null){if(p!=null){if(u!=null)throw Error(r(92));if(fe(p)){if(1<p.length)throw Error(r(93));p=p[0]}u=p}u==null&&(u=""),s=u}u=pr(s),i.defaultValue=u,p=i.textContent,p===u&&p!==""&&p!==null&&(i.value=p),uc(i)}function si(i,s){if(s){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=s;return}}i.textContent=s}var Tm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lf(i,s,u){var p=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":p?i.setProperty(s,u):typeof u!="number"||u===0||Tm.has(s)?s==="float"?i.cssFloat=u:i[s]=(""+u).trim():i[s]=u+"px"}function Cm(i,s,u){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||s!=null&&s.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var w in s)p=s[w],s.hasOwnProperty(w)&&u[w]!==p&&Lf(i,w,p)}else for(var E in s)s.hasOwnProperty(E)&&Lf(i,E,s[E])}function pc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Am=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),km=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wl(i){return km.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Yi(){}var Of=null;function Uf(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vs=null,ia=null;function Im(i){var s=Gi(i);if(s&&(i=s.stateNode)){var u=i[Gn]||null;e:switch(i=s.stateNode,s.type){case"input":if(cc(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+mr(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var p=u[s];if(p!==i&&p.form===i.form){var w=p[Gn]||null;if(!w)throw Error(r(90));cc(p,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(s=0;s<u.length;s++)p=u[s],p.form===i.form&&bl(p)}break e;case"textarea":fc(i,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&ys(i,!!u.multiple,s,!1)}}}var Bf=!1;function Rm(i,s,u){if(Bf)return i(s,u);Bf=!0;try{var p=i(s);return p}finally{if(Bf=!1,(vs!==null||ia!==null)&&(yd(),vs&&(s=vs,i=ia,ia=vs=null,Im(s),i)))for(s=0;s<i.length;s++)Im(i[s])}}function bs(i,s){var u=i.stateNode;if(u===null)return null;var p=u[Gn]||null;if(p===null)return null;u=p[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,s,typeof u));return u}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ff=!1;if(Wi)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){Ff=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{Ff=!1}var To=null,jf=null,It=null;function Dt(){if(It)return It;var i,s=jf,u=s.length,p,w="value"in To?To.value:To.textContent,E=w.length;for(i=0;i<u&&s[i]===w[i];i++);var R=u-i;for(p=1;p<=R&&s[u-p]===w[E-p];p++);return It=w.slice(i,1<p?1-p:void 0)}function mc(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function gc(){return!0}function Nm(){return!1}function Jn(i){function s(u,p,w,E,R){this._reactName=u,this._targetInst=w,this.type=p,this.nativeEvent=E,this.target=R,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(E):E[O]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?gc:Nm,this.isPropagationStopped=Nm,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),s}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yc=Jn(xs),oa=y({},xs,{view:0,detail:0}),s0=Jn(oa),pn,Sl,ai,El=y({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ai&&(ai&&i.type==="mousemove"?(pn=i.screenX-ai.screenX,Sl=i.screenY-ai.screenY):Sl=pn=0,ai=i),pn)},movementY:function(i){return"movementY"in i?i.movementY:Sl}}),vc=Jn(El),Fr=y({},El,{dataTransfer:0}),Mm=Jn(Fr),Dm=y({},oa,{relatedTarget:0}),bc=Jn(Dm),Pm=y({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),Lm=Jn(Pm),Om=y({},xs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gr=Jn(Om),a0=y({},xs,{data:0}),yr=Jn(a0),l0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Um={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Co={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xc(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Co[i])?!!s[i]:!1}function Tl(){return xc}var zt=y({},oa,{key:function(i){if(i.key){var s=l0[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=mc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Um[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(i){return i.type==="keypress"?mc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?mc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ao=Jn(zt),zf=y({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bm=Jn(zf),qf=y({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),u0=Jn(qf),c0=y({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),d0=Jn(c0),Fm=y({},El,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),wc=Jn(Fm),sa=y({},xs,{newState:0,oldState:0}),f0=Jn(sa),jm=[9,13,27,32],_c=Wi&&"CompositionEvent"in window,ws=null;Wi&&"documentMode"in document&&(ws=document.documentMode);var Hf=Wi&&"TextEvent"in window&&!ws,Vf=Wi&&(!_c||ws&&8<ws&&11>=ws),zm=" ",Sc=!1;function Ec(i,s){switch(i){case"keyup":return jm.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var _s=!1;function vr(i,s){switch(i){case"compositionend":return qm(s);case"keypress":return s.which!==32?null:(Sc=!0,zm);case"textInput":return i=s.data,i===zm&&Sc?null:i;default:return null}}function $f(i,s){if(_s)return i==="compositionend"||!_c&&Ec(i,s)?(i=Dt(),It=jf=To=null,_s=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Vf&&s.locale!=="ko"?null:s.data;default:return null}}var Cl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Cl[i.type]:s==="textarea"}function Jf(i,s,u,p){vs?ia?ia.push(p):ia=[p]:vs=p,s=xu(s,"onChange"),0<s.length&&(u=new yc("onChange","change",null,u,p),i.push({event:u,listeners:s}))}var Al=null,kl=null;function h0(i){ny(i,0)}function Tc(i){var s=yl(i);if(bl(s))return i}function Hm(i,s){if(i==="change")return s}var Ss=!1;if(Wi){var Yf;if(Wi){var Wf="oninput"in document;if(!Wf){var Cc=document.createElement("div");Cc.setAttribute("oninput","return;"),Wf=typeof Cc.oninput=="function"}Yf=Wf}else Yf=!1;Ss=Yf&&(!document.documentMode||9<document.documentMode)}function Kf(){Al&&(Al.detachEvent("onpropertychange",Ki),kl=Al=null)}function Ki(i){if(i.propertyName==="value"&&Tc(kl)){var s=[];Jf(s,kl,i,Uf(i)),Rm(h0,s)}}function Ac(i,s,u){i==="focusin"?(Kf(),Al=s,kl=u,Al.attachEvent("onpropertychange",Ki)):i==="focusout"&&Kf()}function p0(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Tc(kl)}function m0(i,s){if(i==="click")return Tc(s)}function g0(i,s){if(i==="input"||i==="change")return Tc(s)}function aa(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Jt=typeof Object.is=="function"?Object.is:aa;function la(i,s){if(Jt(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var u=Object.keys(i),p=Object.keys(s);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var w=u[p];if(!ea.call(s,w)||!Jt(i[w],s[w]))return!1}return!0}function Vm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $m(i,s){var u=Vm(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=s&&p>=s)return{node:u,offset:s-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Vm(u)}}function Gm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Gm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Jm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=xl(i.document);s instanceof i.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)i=s.contentWindow;else break;s=xl(i.document)}return s}function Xf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var ua=Wi&&"documentMode"in document&&11>=document.documentMode,Z=null,ge=null,he=null,Ne=!1;function Ke(i,s,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ne||Z==null||Z!==xl(p)||(p=Z,"selectionStart"in p&&Xf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),he&&la(he,p)||(he=p,p=xu(ge,"onSelect"),0<p.length&&(s=new yc("onSelect","select",null,s,u),i.push({event:s,listeners:p}),s.target=Z)))}function at(i,s){var u={};return u[i.toLowerCase()]=s.toLowerCase(),u["Webkit"+i]="webkit"+s,u["Moz"+i]="moz"+s,u}var qt={animationend:at("Animation","AnimationEnd"),animationiteration:at("Animation","AnimationIteration"),animationstart:at("Animation","AnimationStart"),transitionrun:at("Transition","TransitionRun"),transitionstart:at("Transition","TransitionStart"),transitioncancel:at("Transition","TransitionCancel"),transitionend:at("Transition","TransitionEnd")},Ct={},kc={};Wi&&(kc=document.createElement("div").style,"AnimationEvent"in window||(delete qt.animationend.animation,delete qt.animationiteration.animation,delete qt.animationstart.animation),"TransitionEvent"in window||delete qt.transitionend.transition);function Es(i){if(Ct[i])return Ct[i];if(!qt[i])return i;var s=qt[i],u;for(u in s)if(s.hasOwnProperty(u)&&u in kc)return Ct[i]=s[u];return i}var br=Es("animationend"),Il=Es("animationiteration"),Ym=Es("animationstart"),ca=Es("transitionrun"),Ic=Es("transitionstart"),Rc=Es("transitioncancel"),wt=Es("transitionend"),Wm=new Map,Nc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nc.push("scrollEnd");function Yn(i,s){Wm.set(i,s),Eo(s,[i])}var Mc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},jr=[],da=0,fa=0;function li(){for(var i=da,s=fa=da=0;s<i;){var u=jr[s];jr[s++]=null;var p=jr[s];jr[s++]=null;var w=jr[s];jr[s++]=null;var E=jr[s];if(jr[s++]=null,p!==null&&w!==null){var R=p.pending;R===null?w.next=w:(w.next=R.next,R.next=w),p.pending=w}E!==0&&Qf(u,w,E)}}function Ts(i,s,u,p){jr[da++]=i,jr[da++]=s,jr[da++]=u,jr[da++]=p,fa|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function Dc(i,s,u,p){return Ts(i,s,u,p),Rl(i)}function Ni(i,s){return Ts(i,null,null,s),Rl(i)}function Qf(i,s,u){i.lanes|=u;var p=i.alternate;p!==null&&(p.lanes|=u);for(var w=!1,E=i.return;E!==null;)E.childLanes|=u,p=E.alternate,p!==null&&(p.childLanes|=u),E.tag===22&&(i=E.stateNode,i===null||i._visibility&1||(w=!0)),i=E,E=E.return;return i.tag===3?(E=i.stateNode,w&&s!==null&&(w=31-Tt(u),i=E.hiddenUpdates,p=i[w],p===null?i[w]=[s]:p.push(s),s.lane=u|536870912),E):null}function Rl(i){if(50<hu)throw hu=0,Xh=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Xi={};function Km(i,s,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(i,s,u,p){return new Km(i,s,u,p)}function Qi(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zr(i,s){var u=i.alternate;return u===null?(u=kn(i.tag,s,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=s,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,s=i.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Xm(i,s){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,s=u.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Pc(i,s,u,p,w,E){var R=0;if(p=i,typeof i=="function")Qi(i)&&(R=1);else if(typeof i=="string")R=X0(i,u,me.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case W:return i=kn(31,u,s,w),i.elementType=W,i.lanes=E,i;case k:return Cs(u.children,w,E,s);case N:R=8,w|=24;break;case I:return i=kn(12,u,s,w|2),i.elementType=I,i.lanes=E,i;case G:return i=kn(13,u,s,w),i.elementType=G,i.lanes=E,i;case j:return i=kn(19,u,s,w),i.elementType=j,i.lanes=E,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:R=10;break e;case L:R=9;break e;case $:R=11;break e;case q:R=14;break e;case ee:R=16,p=null;break e}R=29,u=Error(r(130,i===null?"null":typeof i,"")),p=null}return s=kn(R,u,s,w),s.elementType=i,s.type=p,s.lanes=E,s}function Cs(i,s,u,p){return i=kn(7,i,p,s),i.lanes=u,i}function ha(i,s,u){return i=kn(6,i,null,s),i.lanes=u,i}function Nl(i){var s=kn(18,null,null,0);return s.stateNode=i,s}function Ml(i,s,u){return s=kn(4,i.children!==null?i.children:[],i.key,s),s.lanes=u,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Qm=new WeakMap;function xr(i,s){if(typeof i=="object"&&i!==null){var u=Qm.get(i);return u!==void 0?u:(s={value:i,source:s,stack:dl(s)},Qm.set(i,s),s)}return{value:i,source:s,stack:dl(s)}}var pa=[],ma=0,Qt=null,un=0,qr=[],Hr=0,Zi=null,Mi=1,Vr="";function wr(i,s){pa[ma++]=un,pa[ma++]=Qt,Qt=i,un=s}function Lc(i,s,u){qr[Hr++]=Mi,qr[Hr++]=Vr,qr[Hr++]=Zi,Zi=i;var p=Mi;i=Vr;var w=32-Tt(p)-1;p&=~(1<<w),u+=1;var E=32-Tt(s)+w;if(30<E){var R=w-w%5;E=(p&(1<<R)-1).toString(32),p>>=R,w-=R,Mi=1<<32-Tt(s)+w|u<<w|p,Vr=E+i}else Mi=1<<E|u<<w|p,Vr=i}function ko(i){i.return!==null&&(wr(i,1),Lc(i,1,0))}function As(i){for(;i===Qt;)Qt=pa[--ma],pa[ma]=null,un=pa[--ma],pa[ma]=null;for(;i===Zi;)Zi=qr[--Hr],qr[Hr]=null,Vr=qr[--Hr],qr[Hr]=null,Mi=qr[--Hr],qr[Hr]=null}function ga(i,s){qr[Hr++]=Mi,qr[Hr++]=Vr,qr[Hr++]=Zi,Mi=s.id,Vr=s.overflow,Zi=i}var cn=null,_t=null,ft=!1,Io=null,$r=!1,Zf=Error(r(519));function Ro(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mo(xr(s,i)),Zf}function Dl(i){var s=i.stateNode,u=i.type,p=i.memoizedProps;switch(s[An]=i,s[Gn]=p,u){case"dialog":ut("cancel",s),ut("close",s);break;case"iframe":case"object":case"embed":ut("load",s);break;case"video":case"audio":for(u=0;u<bu.length;u++)ut(bu[u],s);break;case"source":ut("error",s);break;case"img":case"image":case"link":ut("error",s),ut("load",s);break;case"details":ut("toggle",s);break;case"input":ut("invalid",s),dc(s,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":ut("invalid",s);break;case"textarea":ut("invalid",s),hc(s,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||p.suppressHydrationWarning===!0||oy(s.textContent,u)?(p.popover!=null&&(ut("beforetoggle",s),ut("toggle",s)),p.onScroll!=null&&ut("scroll",s),p.onScrollEnd!=null&&ut("scrollend",s),p.onClick!=null&&(s.onclick=Yi),s=!0):s=!1,s||Ro(i,!0)}function ya(i){for(cn=i.return;cn;)switch(cn.tag){case 5:case 31:case 13:$r=!1;return;case 27:case 3:$r=!0;return;default:cn=cn.return}}function ks(i){if(i!==cn)return!1;if(!ft)return ya(i),ft=!0,!1;var s=i.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Yo(i.type,i.memoizedProps)),u=!u),u&&_t&&Ro(i),ya(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));_t=cy(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));_t=cy(i)}else s===27?(s=_t,$e(i.type)?(i=yp,yp=null,_t=i):_t=s):_t=cn?Qr(i.stateNode.nextSibling):null;return!0}function B(){_t=cn=null,ft=!1}function No(){var i=Io;return i!==null&&(tr===null?tr=i:tr.push.apply(tr,i),Io=null),i}function Mo(i){Io===null?Io=[i]:Io.push(i)}var Wn=V(null),Qe=null,eo=null;function Do(i,s,u){U(Wn,s._currentValue),s._currentValue=u}function to(i){i._currentValue=Wn.current,re(Wn)}function no(i,s,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),i===u)break;i=i.return}}function eh(i,s,u,p){var w=i.child;for(w!==null&&(w.return=i);w!==null;){var E=w.dependencies;if(E!==null){var R=w.child;E=E.firstContext;e:for(;E!==null;){var O=E;E=w;for(var Y=0;Y<s.length;Y++)if(O.context===s[Y]){E.lanes|=u,O=E.alternate,O!==null&&(O.lanes|=u),no(E.return,u,i),p||(R=null);break e}E=O.next}}else if(w.tag===18){if(R=w.return,R===null)throw Error(r(341));R.lanes|=u,E=R.alternate,E!==null&&(E.lanes|=u),no(R,u,i),R=null}else R=w.child;if(R!==null)R.return=w;else for(R=w;R!==null;){if(R===i){R=null;break}if(w=R.sibling,w!==null){w.return=R.return,R=w;break}R=R.return}w=R}}function va(i,s,u,p){i=null;for(var w=s,E=!1;w!==null;){if(!E){if((w.flags&524288)!==0)E=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var R=w.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var O=w.type;Jt(w.pendingProps.value,R.value)||(i!==null?i.push(O):i=[O])}}else if(w===Ve.current){if(R=w.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(i!==null?i.push(Wa):i=[Wa])}w=w.return}i!==null&&eh(s,i,u,p),s.flags|=262144}function Oc(i){for(i=i.firstContext;i!==null;){if(!Jt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Is(i){Qe=i,eo=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function In(i){return Zm(Qe,i)}function Gr(i,s){return Qe===null&&Is(i),Zm(i,s)}function Zm(i,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},eo===null){if(i===null)throw Error(r(308));eo=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else eo=eo.next=s;return u}var y0=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(u,p){i.push(p)}};this.abort=function(){s.aborted=!0,i.forEach(function(u){return u()})}},v0=t.unstable_scheduleCallback,b0=t.unstable_NormalPriority,dn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ui(){return{controller:new y0,data:new Map,refCount:0}}function Pl(i){i.refCount--,i.refCount===0&&v0(b0,function(){i.controller.abort()})}var Ll=null,th=0,ba=0,xa=null;function Rs(i,s){if(Ll===null){var u=Ll=[];th=0,ba=Rr(),xa={status:"pending",value:void 0,then:function(p){u.push(p)}}}return th++,s.then(eg,eg),s}function eg(){if(--th===0&&Ll!==null){xa!==null&&(xa.status="fulfilled");var i=Ll;Ll=null,ba=0,xa=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function x0(i,s){var u=[],p={status:"pending",value:null,reason:null,then:function(w){u.push(w)}};return i.then(function(){p.status="fulfilled",p.value=s;for(var w=0;w<u.length;w++)(0,u[w])(s)},function(w){for(p.status="rejected",p.reason=w,w=0;w<u.length;w++)(0,u[w])(void 0)}),p}var Jr=K.S;K.S=function(i,s){Bg=Fn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Rs(i,s),Jr!==null&&Jr(i,s)};var Ns=V(null);function nh(){var i=Ns.current;return i!==null?i:Lt.pooledCache}function Uc(i,s){s===null?U(Ns,Ns.current):U(Ns,s.pool)}function tg(){var i=nh();return i===null?null:{parent:dn._currentValue,pool:i}}var wa=Error(r(460)),Bc=Error(r(474)),Ol=Error(r(542)),Fc={then:function(){}};function ng(i){return i=i.status,i==="fulfilled"||i==="rejected"}function jc(i,s,u){switch(u=i[u],u===void 0?i.push(s):u!==s&&(s.then(Yi,Yi),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,rh(i),i;default:if(typeof s.status=="string")s.then(Yi,Yi);else{if(i=Lt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(p){if(s.status==="pending"){var w=s;w.status="fulfilled",w.value=p}},function(p){if(s.status==="pending"){var w=s;w.status="rejected",w.reason=p}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,rh(i),i}throw Di=s,wa}}function ci(i){try{var s=i._init;return s(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Di=u,wa):u}}var Di=null;function rg(){if(Di===null)throw Error(r(459));var i=Di;return Di=null,i}function rh(i){if(i===wa||i===Ol)throw Error(r(483))}var _a=null,_r=0;function Sa(i){var s=_r;return _r+=1,_a===null&&(_a=[]),jc(_a,i,s)}function di(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function zn(i,s){throw s.$$typeof===_?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function ig(i){function s(ne,Q){if(i){var se=ne.deletions;se===null?(ne.deletions=[Q],ne.flags|=16):se.push(Q)}}function u(ne,Q){if(!i)return null;for(;Q!==null;)s(ne,Q),Q=Q.sibling;return null}function p(ne){for(var Q=new Map;ne!==null;)ne.key!==null?Q.set(ne.key,ne):Q.set(ne.index,ne),ne=ne.sibling;return Q}function w(ne,Q){return ne=zr(ne,Q),ne.index=0,ne.sibling=null,ne}function E(ne,Q,se){return ne.index=se,i?(se=ne.alternate,se!==null?(se=se.index,se<Q?(ne.flags|=67108866,Q):se):(ne.flags|=67108866,Q)):(ne.flags|=1048576,Q)}function R(ne){return i&&ne.alternate===null&&(ne.flags|=67108866),ne}function O(ne,Q,se,be){return Q===null||Q.tag!==6?(Q=ha(se,ne.mode,be),Q.return=ne,Q):(Q=w(Q,se),Q.return=ne,Q)}function Y(ne,Q,se,be){var Be=se.type;return Be===k?ye(ne,Q,se.props.children,be,se.key):Q!==null&&(Q.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===ee&&ci(Be)===Q.type)?(Q=w(Q,se.props),di(Q,se),Q.return=ne,Q):(Q=Pc(se.type,se.key,se.props,null,ne.mode,be),di(Q,se),Q.return=ne,Q)}function ae(ne,Q,se,be){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==se.containerInfo||Q.stateNode.implementation!==se.implementation?(Q=Ml(se,ne.mode,be),Q.return=ne,Q):(Q=w(Q,se.children||[]),Q.return=ne,Q)}function ye(ne,Q,se,be,Be){return Q===null||Q.tag!==7?(Q=Cs(se,ne.mode,be,Be),Q.return=ne,Q):(Q=w(Q,se),Q.return=ne,Q)}function we(ne,Q,se){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=ha(""+Q,ne.mode,se),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case T:return se=Pc(Q.type,Q.key,Q.props,null,ne.mode,se),di(se,Q),se.return=ne,se;case C:return Q=Ml(Q,ne.mode,se),Q.return=ne,Q;case ee:return Q=ci(Q),we(ne,Q,se)}if(fe(Q)||de(Q))return Q=Cs(Q,ne.mode,se,null),Q.return=ne,Q;if(typeof Q.then=="function")return we(ne,Sa(Q),se);if(Q.$$typeof===D)return we(ne,Gr(ne,Q),se);zn(ne,Q)}return null}function ce(ne,Q,se,be){var Be=Q!==null?Q.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Be!==null?null:O(ne,Q,""+se,be);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case T:return se.key===Be?Y(ne,Q,se,be):null;case C:return se.key===Be?ae(ne,Q,se,be):null;case ee:return se=ci(se),ce(ne,Q,se,be)}if(fe(se)||de(se))return Be!==null?null:ye(ne,Q,se,be,null);if(typeof se.then=="function")return ce(ne,Q,Sa(se),be);if(se.$$typeof===D)return ce(ne,Q,Gr(ne,se),be);zn(ne,se)}return null}function pe(ne,Q,se,be,Be){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return ne=ne.get(se)||null,O(Q,ne,""+be,Be);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case T:return ne=ne.get(be.key===null?se:be.key)||null,Y(Q,ne,be,Be);case C:return ne=ne.get(be.key===null?se:be.key)||null,ae(Q,ne,be,Be);case ee:return be=ci(be),pe(ne,Q,se,be,Be)}if(fe(be)||de(be))return ne=ne.get(se)||null,ye(Q,ne,be,Be,null);if(typeof be.then=="function")return pe(ne,Q,se,Sa(be),Be);if(be.$$typeof===D)return pe(ne,Q,se,Gr(Q,be),Be);zn(Q,be)}return null}function Me(ne,Q,se,be){for(var Be=null,yt=null,Pe=Q,nt=Q=0,dt=null;Pe!==null&&nt<se.length;nt++){Pe.index>nt?(dt=Pe,Pe=null):dt=Pe.sibling;var vt=ce(ne,Pe,se[nt],be);if(vt===null){Pe===null&&(Pe=dt);break}i&&Pe&&vt.alternate===null&&s(ne,Pe),Q=E(vt,Q,nt),yt===null?Be=vt:yt.sibling=vt,yt=vt,Pe=dt}if(nt===se.length)return u(ne,Pe),ft&&wr(ne,nt),Be;if(Pe===null){for(;nt<se.length;nt++)Pe=we(ne,se[nt],be),Pe!==null&&(Q=E(Pe,Q,nt),yt===null?Be=Pe:yt.sibling=Pe,yt=Pe);return ft&&wr(ne,nt),Be}for(Pe=p(Pe);nt<se.length;nt++)dt=pe(Pe,ne,nt,se[nt],be),dt!==null&&(i&&dt.alternate!==null&&Pe.delete(dt.key===null?nt:dt.key),Q=E(dt,Q,nt),yt===null?Be=dt:yt.sibling=dt,yt=dt);return i&&Pe.forEach(function(es){return s(ne,es)}),ft&&wr(ne,nt),Be}function qe(ne,Q,se,be){if(se==null)throw Error(r(151));for(var Be=null,yt=null,Pe=Q,nt=Q=0,dt=null,vt=se.next();Pe!==null&&!vt.done;nt++,vt=se.next()){Pe.index>nt?(dt=Pe,Pe=null):dt=Pe.sibling;var es=ce(ne,Pe,vt.value,be);if(es===null){Pe===null&&(Pe=dt);break}i&&Pe&&es.alternate===null&&s(ne,Pe),Q=E(es,Q,nt),yt===null?Be=es:yt.sibling=es,yt=es,Pe=dt}if(vt.done)return u(ne,Pe),ft&&wr(ne,nt),Be;if(Pe===null){for(;!vt.done;nt++,vt=se.next())vt=we(ne,vt.value,be),vt!==null&&(Q=E(vt,Q,nt),yt===null?Be=vt:yt.sibling=vt,yt=vt);return ft&&wr(ne,nt),Be}for(Pe=p(Pe);!vt.done;nt++,vt=se.next())vt=pe(Pe,ne,nt,vt.value,be),vt!==null&&(i&&vt.alternate!==null&&Pe.delete(vt.key===null?nt:vt.key),Q=E(vt,Q,nt),yt===null?Be=vt:yt.sibling=vt,yt=vt);return i&&Pe.forEach(function(ob){return s(ne,ob)}),ft&&wr(ne,nt),Be}function Mt(ne,Q,se,be){if(typeof se=="object"&&se!==null&&se.type===k&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case T:e:{for(var Be=se.key;Q!==null;){if(Q.key===Be){if(Be=se.type,Be===k){if(Q.tag===7){u(ne,Q.sibling),be=w(Q,se.props.children),be.return=ne,ne=be;break e}}else if(Q.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===ee&&ci(Be)===Q.type){u(ne,Q.sibling),be=w(Q,se.props),di(be,se),be.return=ne,ne=be;break e}u(ne,Q);break}else s(ne,Q);Q=Q.sibling}se.type===k?(be=Cs(se.props.children,ne.mode,be,se.key),be.return=ne,ne=be):(be=Pc(se.type,se.key,se.props,null,ne.mode,be),di(be,se),be.return=ne,ne=be)}return R(ne);case C:e:{for(Be=se.key;Q!==null;){if(Q.key===Be)if(Q.tag===4&&Q.stateNode.containerInfo===se.containerInfo&&Q.stateNode.implementation===se.implementation){u(ne,Q.sibling),be=w(Q,se.children||[]),be.return=ne,ne=be;break e}else{u(ne,Q);break}else s(ne,Q);Q=Q.sibling}be=Ml(se,ne.mode,be),be.return=ne,ne=be}return R(ne);case ee:return se=ci(se),Mt(ne,Q,se,be)}if(fe(se))return Me(ne,Q,se,be);if(de(se)){if(Be=de(se),typeof Be!="function")throw Error(r(150));return se=Be.call(se),qe(ne,Q,se,be)}if(typeof se.then=="function")return Mt(ne,Q,Sa(se),be);if(se.$$typeof===D)return Mt(ne,Q,Gr(ne,se),be);zn(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Q!==null&&Q.tag===6?(u(ne,Q.sibling),be=w(Q,se),be.return=ne,ne=be):(u(ne,Q),be=ha(se,ne.mode,be),be.return=ne,ne=be),R(ne)):u(ne,Q)}return function(ne,Q,se,be){try{_r=0;var Be=Mt(ne,Q,se,be);return _a=null,Be}catch(Pe){if(Pe===wa||Pe===Ol)throw Pe;var yt=kn(29,Pe,null,ne.mode);return yt.lanes=be,yt.return=ne,yt}finally{}}}var Po=ig(!0),ih=ig(!1),Yr=!1;function Pi(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zc(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Lo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function fi(i,s,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(xt&2)!==0){var w=p.pending;return w===null?s.next=s:(s.next=w.next,w.next=s),p.pending=s,s=Rl(i),Qf(i,null,u),s}return Ts(i,p,s,u),Rl(i)}function Ul(i,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var p=s.lanes;p&=i.pendingLanes,u|=p,s.lanes=u,gm(i,u)}}function qc(i,s){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var w=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var R={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?w=E=R:E=E.next=R,u=u.next}while(u!==null);E===null?w=E=s:E=E.next=s}else w=E=s;u={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:E,shared:p.shared,callbacks:p.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=s:i.next=s,u.lastBaseUpdate=s}var mn=!1;function Ms(){if(mn){var i=xa;if(i!==null)throw i}}function Ea(i,s,u,p){mn=!1;var w=i.updateQueue;Yr=!1;var E=w.firstBaseUpdate,R=w.lastBaseUpdate,O=w.shared.pending;if(O!==null){w.shared.pending=null;var Y=O,ae=Y.next;Y.next=null,R===null?E=ae:R.next=ae,R=Y;var ye=i.alternate;ye!==null&&(ye=ye.updateQueue,O=ye.lastBaseUpdate,O!==R&&(O===null?ye.firstBaseUpdate=ae:O.next=ae,ye.lastBaseUpdate=Y))}if(E!==null){var we=w.baseState;R=0,ye=ae=Y=null,O=E;do{var ce=O.lane&-536870913,pe=ce!==O.lane;if(pe?(ct&ce)===ce:(p&ce)===ce){ce!==0&&ce===ba&&(mn=!0),ye!==null&&(ye=ye.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Me=i,qe=O;ce=s;var Mt=u;switch(qe.tag){case 1:if(Me=qe.payload,typeof Me=="function"){we=Me.call(Mt,we,ce);break e}we=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=qe.payload,ce=typeof Me=="function"?Me.call(Mt,we,ce):Me,ce==null)break e;we=y({},we,ce);break e;case 2:Yr=!0}}ce=O.callback,ce!==null&&(i.flags|=64,pe&&(i.flags|=8192),pe=w.callbacks,pe===null?w.callbacks=[ce]:pe.push(ce))}else pe={lane:ce,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ye===null?(ae=ye=pe,Y=we):ye=ye.next=pe,R|=ce;if(O=O.next,O===null){if(O=w.shared.pending,O===null)break;pe=O,O=pe.next,pe.next=null,w.lastBaseUpdate=pe,w.shared.pending=null}}while(!0);ye===null&&(Y=we),w.baseState=Y,w.firstBaseUpdate=ae,w.lastBaseUpdate=ye,E===null&&(w.shared.lanes=0),Ho|=R,i.lanes=R,i.memoizedState=we}}function hi(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function Hc(i,s){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)hi(u[i],s)}var ro=V(null),Li=V(0);function oh(i,s){i=bi,U(Li,i),U(ro,s),bi=i|s.baseLanes}function Rn(){U(Li,bi),U(ro,ro.current)}function Bl(){bi=Li.current,re(ro),re(Li)}var Sr=V(null),Wr=null;function Oo(i){var s=i.alternate;U(on,on.current&1),U(Sr,i),Wr===null&&(s===null||ro.current!==null||s.memoizedState!==null)&&(Wr=i)}function Fl(i){U(on,on.current),U(Sr,i),Wr===null&&(Wr=i)}function og(i){i.tag===22?(U(on,on.current),U(Sr,i),Wr===null&&(Wr=i)):Kr()}function Kr(){U(on,on.current),U(Sr,Sr.current)}function Kn(i){re(Sr),Wr===i&&(Wr=null),re(on)}var on=V(0);function Vc(i){for(var s=i;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Ad(u)||Ha(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Er=0,Ze=null,Rt=null,Zt=null,jl=!1,Ta=!1,Ds=!1,$c=0,Ca=0,Uo=null,w0=0;function Ht(){throw Error(r(321))}function Gc(i,s){if(s===null)return!1;for(var u=0;u<s.length&&u<i.length;u++)if(!Jt(i[u],s[u]))return!1;return!0}function Jc(i,s,u,p,w,E){return Er=E,Ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=i===null||i.memoizedState===null?gg:nd,Ds=!1,E=u(p,w),Ds=!1,Ta&&(E=zl(s,u,p,w)),sh(i),E}function sh(i){K.H=Fo;var s=Rt!==null&&Rt.next!==null;if(Er=0,Zt=Rt=Ze=null,jl=!1,Ca=0,Uo=null,s)throw Error(r(300));i===null||Yt||(i=i.dependencies,i!==null&&Oc(i)&&(Yt=!0))}function zl(i,s,u,p){Ze=i;var w=0;do{if(Ta&&(Uo=null),Ca=0,Ta=!1,25<=w)throw Error(r(301));if(w+=1,Zt=Rt=null,i.updateQueue!=null){var E=i.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}K.H=Wl,E=s(u,p)}while(Ta);return E}function _0(){var i=K.H,s=i.useState()[0];return s=typeof s.then=="function"?ka(s):s,i=i.useState()[0],(Rt!==null?Rt.memoizedState:null)!==i&&(Ze.flags|=1024),s}function Yc(){var i=$c!==0;return $c=0,i}function Wc(i,s,u){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~u}function ah(i){if(jl){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}jl=!1}Er=0,Zt=Rt=Ze=null,Ta=!1,Ca=$c=0,Uo=null}function Ln(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Ze.memoizedState=Zt=i:Zt=Zt.next=i,Zt}function sn(){if(Rt===null){var i=Ze.alternate;i=i!==null?i.memoizedState:null}else i=Rt.next;var s=Zt===null?Ze.memoizedState:Zt.next;if(s!==null)Zt=s,Rt=i;else{if(i===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));Rt=i,i={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Zt===null?Ze.memoizedState=Zt=i:Zt=Zt.next=i}return Zt}function Aa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ka(i){var s=Ca;return Ca+=1,Uo===null&&(Uo=[]),i=jc(Uo,i,s),s=Ze,(Zt===null?s.memoizedState:Zt.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?gg:nd),i}function Ia(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ka(i);if(i.$$typeof===D)return In(i)}throw Error(r(438,String(i)))}function lh(i){var s=null,u=Ze.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var p=Ze.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(s={data:p.data.map(function(w){return w.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Aa(),Ze.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(i),p=0;p<i;p++)u[p]=z;return s.index++,u}function pi(i,s){return typeof s=="function"?s(i):s}function et(i){var s=sn();return uh(s,Rt,i)}function uh(i,s,u){var p=i.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=u;var w=i.baseQueue,E=p.pending;if(E!==null){if(w!==null){var R=w.next;w.next=E.next,E.next=R}s.baseQueue=w=E,p.pending=null}if(E=i.baseState,w===null)i.memoizedState=E;else{s=w.next;var O=R=null,Y=null,ae=s,ye=!1;do{var we=ae.lane&-536870913;if(we!==ae.lane?(ct&we)===we:(Er&we)===we){var ce=ae.revertLane;if(ce===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),we===ba&&(ye=!0);else if((Er&ce)===ce){ae=ae.next,ce===ba&&(ye=!0);continue}else we={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Y===null?(O=Y=we,R=E):Y=Y.next=we,Ze.lanes|=ce,Ho|=ce;we=ae.action,Ds&&u(E,we),E=ae.hasEagerState?ae.eagerState:u(E,we)}else ce={lane:we,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Y===null?(O=Y=ce,R=E):Y=Y.next=ce,Ze.lanes|=we,Ho|=we;ae=ae.next}while(ae!==null&&ae!==s);if(Y===null?R=E:Y.next=O,!Jt(E,i.memoizedState)&&(Yt=!0,ye&&(u=xa,u!==null)))throw u;i.memoizedState=E,i.baseState=R,i.baseQueue=Y,p.lastRenderedState=E}return w===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function ch(i){var s=sn(),u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var p=u.dispatch,w=u.pending,E=s.memoizedState;if(w!==null){u.pending=null;var R=w=w.next;do E=i(E,R.action),R=R.next;while(R!==w);Jt(E,s.memoizedState)||(Yt=!0),s.memoizedState=E,s.baseQueue===null&&(s.baseState=E),u.lastRenderedState=E}return[E,p]}function Ra(i,s,u){var p=Ze,w=sn(),E=ft;if(E){if(u===void 0)throw Error(r(407));u=u()}else u=s();var R=!Jt((Rt||w).memoizedState,u);if(R&&(w.memoizedState=u,Yt=!0),w=w.queue,$l(ag.bind(null,p,w,i),[i]),w.getSnapshot!==s||R||Zt!==null&&Zt.memoizedState.tag&1){if(p.flags|=2048,Cr(9,{destroy:void 0},sg.bind(null,p,w,u,s),null),Lt===null)throw Error(r(349));E||(Er&127)!==0||dh(p,s,u)}return u}function dh(i,s,u){i.flags|=16384,i={getSnapshot:s,value:u},s=Ze.updateQueue,s===null?(s=Aa(),Ze.updateQueue=s,s.stores=[i]):(u=s.stores,u===null?s.stores=[i]:u.push(i))}function sg(i,s,u,p){s.value=u,s.getSnapshot=p,Tr(s)&&lg(i)}function ag(i,s,u){return u(function(){Tr(s)&&lg(i)})}function Tr(i){var s=i.getSnapshot;i=i.value;try{var u=s();return!Jt(i,u)}catch{return!0}}function lg(i){var s=Ni(i,2);s!==null&&nr(s,i,2)}function Na(i){var s=Ln();if(typeof i=="function"){var u=i;if(i=u(),Ds){Pn(!0);try{u()}finally{Pn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:i},s}function Kc(i,s,u,p){return i.baseState=u,uh(i,Rt,typeof p=="function"?p:pi)}function ug(i,s,u,p,w){if(Jl(i))throw Error(r(485));if(i=s.action,i!==null){var E={payload:w,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){E.listeners.push(R)}};K.T!==null?u(!0):E.isTransition=!1,p(E),u=s.pending,u===null?(E.next=s.pending=E,fh(s,E)):(E.next=u.next,s.pending=u.next=E)}}function fh(i,s){var u=s.action,p=s.payload,w=i.state;if(s.isTransition){var E=K.T,R={};K.T=R;try{var O=u(w,p),Y=K.S;Y!==null&&Y(R,O),Xn(i,s,O)}catch(ae){ql(i,s,ae)}finally{E!==null&&R.types!==null&&(E.types=R.types),K.T=E}}else try{E=u(w,p),Xn(i,s,E)}catch(ae){ql(i,s,ae)}}function Xn(i,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){io(i,s,p)},function(p){return ql(i,s,p)}):io(i,s,u)}function io(i,s,u){s.status="fulfilled",s.value=u,hh(s),i.state=u,s=i.pending,s!==null&&(u=s.next,u===s?i.pending=null:(u=u.next,s.next=u,fh(i,u)))}function ql(i,s,u){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do s.status="rejected",s.reason=u,hh(s),s=s.next;while(s!==p)}i.action=null}function hh(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Hl(i,s){return s}function ph(i,s){if(ft){var u=Lt.formState;if(u!==null){e:{var p=Ze;if(ft){if(_t){t:{for(var w=_t,E=$r;w.nodeType!==8;){if(!E){w=null;break t}if(w=Qr(w.nextSibling),w===null){w=null;break t}}E=w.data,w=E==="F!"||E==="F"?w:null}if(w){_t=Qr(w.nextSibling),p=w.data==="F!";break e}}Ro(p)}p=!1}p&&(s=u[0])}}return u=Ln(),u.memoizedState=u.baseState=s,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:s},u.queue=p,u=Th.bind(null,Ze,p),p.dispatch=u,p=Na(!1),E=Da.bind(null,Ze,!1,p.queue),p=Ln(),w={state:s,dispatch:null,action:i,pending:null},p.queue=w,u=ug.bind(null,Ze,w,E,u),w.dispatch=u,p.memoizedState=i,[s,u,!1]}function Xc(i){var s=sn();return mh(s,Rt,i)}function mh(i,s,u){if(s=uh(i,s,Hl)[0],i=et(pi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var p=ka(s)}catch(R){throw R===wa?Ol:R}else p=s;s=sn();var w=s.queue,E=w.dispatch;return u!==s.memoizedState&&(Ze.flags|=2048,Cr(9,{destroy:void 0},gh.bind(null,w,u),null)),[p,E,i]}function gh(i,s){i.action=s}function Qc(i){var s=sn(),u=Rt;if(u!==null)return mh(s,u,i);sn(),s=s.memoizedState,u=sn();var p=u.queue.dispatch;return u.memoizedState=i,[s,p,!1]}function Cr(i,s,u,p){return i={tag:i,create:u,deps:p,inst:s,next:null},s=Ze.updateQueue,s===null&&(s=Aa(),Ze.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,s.lastEffect=i),i}function cg(){return sn().memoizedState}function mi(i,s,u,p){var w=Ln();Ze.flags|=i,w.memoizedState=Cr(1|s,{destroy:void 0},u,p===void 0?null:p)}function Vl(i,s,u,p){var w=sn();p=p===void 0?null:p;var E=w.memoizedState.inst;Rt!==null&&p!==null&&Gc(p,Rt.memoizedState.deps)?w.memoizedState=Cr(s,E,u,p):(Ze.flags|=i,w.memoizedState=Cr(1|s,E,u,p))}function yh(i,s){mi(8390656,8,i,s)}function $l(i,s){Vl(2048,8,i,s)}function S0(i){Ze.flags|=4;var s=Ze.updateQueue;if(s===null)s=Aa(),Ze.updateQueue=s,s.events=[i];else{var u=s.events;u===null?s.events=[i]:u.push(i)}}function dg(i){var s=sn().memoizedState;return S0({ref:s,nextImpl:i}),function(){if((xt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function fg(i,s){return Vl(4,2,i,s)}function vh(i,s){return Vl(4,4,i,s)}function bh(i,s){if(typeof s=="function"){i=i();var u=s(i);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function hg(i,s,u){u=u!=null?u.concat([i]):null,Vl(4,4,bh.bind(null,s,i),u)}function Zc(){}function xh(i,s){var u=sn();s=s===void 0?null:s;var p=u.memoizedState;return s!==null&&Gc(s,p[1])?p[0]:(u.memoizedState=[i,s],i)}function qn(i,s){var u=sn();s=s===void 0?null:s;var p=u.memoizedState;if(s!==null&&Gc(s,p[1]))return p[0];if(p=i(),Ds){Pn(!0);try{i()}finally{Pn(!1)}}return u.memoizedState=[p,s],p}function Xr(i,s,u){return u===void 0||(Er&1073741824)!==0&&(ct&261930)===0?i.memoizedState=s:(i.memoizedState=u,i=jg(),Ze.lanes|=i,Ho|=i,u)}function pg(i,s,u,p){return Jt(u,s)?u:ro.current!==null?(i=Xr(i,u,p),Jt(i,s)||(Yt=!0),i):(Er&42)===0||(Er&1073741824)!==0&&(ct&261930)===0?(Yt=!0,i.memoizedState=u):(i=jg(),Ze.lanes|=i,Ho|=i,s)}function mg(i,s,u,p,w){var E=oe.p;oe.p=E!==0&&8>E?E:8;var R=K.T,O={};K.T=O,Da(i,!1,s,u);try{var Y=w(),ae=K.S;if(ae!==null&&ae(O,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ye=x0(Y,p);Ma(i,s,ye,Ir(i))}else Ma(i,s,p,Ir(i))}catch(we){Ma(i,s,{then:function(){},status:"rejected",reason:we},Ir())}finally{oe.p=E,R!==null&&O.types!==null&&(R.types=O.types),K.T=R}}function ed(){}function Bo(i,s,u,p){if(i.tag!==5)throw Error(r(476));var w=wh(i).queue;mg(i,w,s,le,u===null?ed:function(){return _h(i),u(p)})}function wh(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:le},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:u},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function _h(i){var s=wh(i);s.next===null&&(s=i.alternate.memoizedState),Ma(i,s.next.queue,{},Ir())}function Sh(){return In(Wa)}function Eh(){return sn().memoizedState}function Ps(){return sn().memoizedState}function Gl(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var u=Ir();i=Lo(u);var p=fi(s,i,u);p!==null&&(nr(p,s,u),Ul(p,s,u)),s={cache:ui()},i.payload=s;return}s=s.return}}function E0(i,s,u){var p=Ir();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Jl(i)?Yl(s,u):(u=Dc(i,s,u,p),u!==null&&(nr(u,i,p),td(u,s,p)))}function Th(i,s,u){var p=Ir();Ma(i,s,u,p)}function Ma(i,s,u,p){var w={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Jl(i))Yl(s,w);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=s.lastRenderedReducer,E!==null))try{var R=s.lastRenderedState,O=E(R,u);if(w.hasEagerState=!0,w.eagerState=O,Jt(O,R))return Ts(i,s,w,0),Lt===null&&li(),!1}catch{}finally{}if(u=Dc(i,s,w,p),u!==null)return nr(u,i,p),td(u,s,p),!0}return!1}function Da(i,s,u,p){if(p={lane:2,revertLane:Rr(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Jl(i)){if(s)throw Error(r(479))}else s=Dc(i,u,p,2),s!==null&&nr(s,i,2)}function Jl(i){var s=i.alternate;return i===Ze||s!==null&&s===Ze}function Yl(i,s){Ta=jl=!0;var u=i.pending;u===null?s.next=s:(s.next=u.next,u.next=s),i.pending=s}function td(i,s,u){if((u&4194048)!==0){var p=s.lanes;p&=i.pendingLanes,u|=p,s.lanes=u,gm(i,u)}}var Fo={readContext:In,use:Ia,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};Fo.useEffectEvent=Ht;var gg={readContext:In,use:Ia,useCallback:function(i,s){return Ln().memoizedState=[i,s===void 0?null:s],i},useContext:In,useEffect:yh,useImperativeHandle:function(i,s,u){u=u!=null?u.concat([i]):null,mi(4194308,4,bh.bind(null,s,i),u)},useLayoutEffect:function(i,s){return mi(4194308,4,i,s)},useInsertionEffect:function(i,s){mi(4,2,i,s)},useMemo:function(i,s){var u=Ln();s=s===void 0?null:s;var p=i();if(Ds){Pn(!0);try{i()}finally{Pn(!1)}}return u.memoizedState=[p,s],p},useReducer:function(i,s,u){var p=Ln();if(u!==void 0){var w=u(s);if(Ds){Pn(!0);try{u(s)}finally{Pn(!1)}}}else w=s;return p.memoizedState=p.baseState=w,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:w},p.queue=i,i=i.dispatch=E0.bind(null,Ze,i),[p.memoizedState,i]},useRef:function(i){var s=Ln();return i={current:i},s.memoizedState=i},useState:function(i){i=Na(i);var s=i.queue,u=Th.bind(null,Ze,s);return s.dispatch=u,[i.memoizedState,u]},useDebugValue:Zc,useDeferredValue:function(i,s){var u=Ln();return Xr(u,i,s)},useTransition:function(){var i=Na(!1);return i=mg.bind(null,Ze,i.queue,!0,!1),Ln().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,u){var p=Ze,w=Ln();if(ft){if(u===void 0)throw Error(r(407));u=u()}else{if(u=s(),Lt===null)throw Error(r(349));(ct&127)!==0||dh(p,s,u)}w.memoizedState=u;var E={value:u,getSnapshot:s};return w.queue=E,yh(ag.bind(null,p,E,i),[i]),p.flags|=2048,Cr(9,{destroy:void 0},sg.bind(null,p,E,u,s),null),u},useId:function(){var i=Ln(),s=Lt.identifierPrefix;if(ft){var u=Vr,p=Mi;u=(p&~(1<<32-Tt(p)-1)).toString(32)+u,s="_"+s+"R_"+u,u=$c++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=w0++,s="_"+s+"r_"+u.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Sh,useFormState:ph,useActionState:ph,useOptimistic:function(i){var s=Ln();s.memoizedState=s.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Da.bind(null,Ze,!0,u),u.dispatch=s,[i,s]},useMemoCache:lh,useCacheRefresh:function(){return Ln().memoizedState=Gl.bind(null,Ze)},useEffectEvent:function(i){var s=Ln(),u={impl:i};return s.memoizedState=u,function(){if((xt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},nd={readContext:In,use:Ia,useCallback:xh,useContext:In,useEffect:$l,useImperativeHandle:hg,useInsertionEffect:fg,useLayoutEffect:vh,useMemo:qn,useReducer:et,useRef:cg,useState:function(){return et(pi)},useDebugValue:Zc,useDeferredValue:function(i,s){var u=sn();return pg(u,Rt.memoizedState,i,s)},useTransition:function(){var i=et(pi)[0],s=sn().memoizedState;return[typeof i=="boolean"?i:ka(i),s]},useSyncExternalStore:Ra,useId:Eh,useHostTransitionStatus:Sh,useFormState:Xc,useActionState:Xc,useOptimistic:function(i,s){var u=sn();return Kc(u,Rt,i,s)},useMemoCache:lh,useCacheRefresh:Ps};nd.useEffectEvent=dg;var Wl={readContext:In,use:Ia,useCallback:xh,useContext:In,useEffect:$l,useImperativeHandle:hg,useInsertionEffect:fg,useLayoutEffect:vh,useMemo:qn,useReducer:ch,useRef:cg,useState:function(){return ch(pi)},useDebugValue:Zc,useDeferredValue:function(i,s){var u=sn();return Rt===null?Xr(u,i,s):pg(u,Rt.memoizedState,i,s)},useTransition:function(){var i=ch(pi)[0],s=sn().memoizedState;return[typeof i=="boolean"?i:ka(i),s]},useSyncExternalStore:Ra,useId:Eh,useHostTransitionStatus:Sh,useFormState:Qc,useActionState:Qc,useOptimistic:function(i,s){var u=sn();return Rt!==null?Kc(u,Rt,i,s):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:lh,useCacheRefresh:Ps};Wl.useEffectEvent=dg;function rd(i,s,u,p){s=i.memoizedState,u=u(p,s),u=u==null?s:y({},s,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Kl={enqueueSetState:function(i,s,u){i=i._reactInternals;var p=Ir(),w=Lo(p);w.payload=s,u!=null&&(w.callback=u),s=fi(i,w,p),s!==null&&(nr(s,i,p),Ul(s,i,p))},enqueueReplaceState:function(i,s,u){i=i._reactInternals;var p=Ir(),w=Lo(p);w.tag=1,w.payload=s,u!=null&&(w.callback=u),s=fi(i,w,p),s!==null&&(nr(s,i,p),Ul(s,i,p))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var u=Ir(),p=Lo(u);p.tag=2,s!=null&&(p.callback=s),s=fi(i,p,u),s!==null&&(nr(s,i,u),Ul(s,i,u))}};function yg(i,s,u,p,w,E,R){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,E,R):s.prototype&&s.prototype.isPureReactComponent?!la(u,p)||!la(w,E):!0}function Ch(i,s,u,p){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,p),s.state!==i&&Kl.enqueueReplaceState(s,s.state,null)}function Hn(i,s){var u=s;if("ref"in s){u={};for(var p in s)p!=="ref"&&(u[p]=s[p])}if(i=i.defaultProps){u===s&&(u=y({},u));for(var w in i)u[w]===void 0&&(u[w]=i[w])}return u}function Ah(i){Mc(i)}function kh(i){console.error(i)}function vg(i){Mc(i)}function Xl(i,s){try{var u=i.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(p){setTimeout(function(){throw p})}}function bg(i,s,u){try{var p=i.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Ih(i,s,u){return u=Lo(u),u.tag=3,u.payload={element:null},u.callback=function(){Xl(i,s)},u}function Oi(i){return i=Lo(i),i.tag=3,i}function id(i,s,u,p){var w=u.type.getDerivedStateFromError;if(typeof w=="function"){var E=p.value;i.payload=function(){return w(E)},i.callback=function(){bg(s,u,p)}}var R=u.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(i.callback=function(){bg(s,u,p),typeof w!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var O=p.stack;this.componentDidCatch(p.value,{componentStack:O!==null?O:""})})}function Rh(i,s,u,p,w){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(s=u.alternate,s!==null&&va(s,u,w,!0),u=Sr.current,u!==null){switch(u.tag){case 31:case 13:return Wr===null?vd():u.alternate===null&&Wt===0&&(Wt=3),u.flags&=-257,u.flags|=65536,u.lanes=w,p===Fc?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([p]):s.add(p),op(i,p,w)),!1;case 22:return u.flags|=65536,p===Fc?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([p]):u.add(p)),op(i,p,w)),!1}throw Error(r(435,u.tag))}return op(i,p,w),vd(),!1}if(ft)return s=Sr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=w,p!==Zf&&(i=Error(r(422),{cause:p}),Mo(xr(i,u)))):(p!==Zf&&(s=Error(r(423),{cause:p}),Mo(xr(s,u))),i=i.current.alternate,i.flags|=65536,w&=-w,i.lanes|=w,p=xr(p,u),w=Ih(i.stateNode,p,w),qc(i,w),Wt!==4&&(Wt=2)),!1;var E=Error(r(520),{cause:p});if(E=xr(E,u),du===null?du=[E]:du.push(E),Wt!==4&&(Wt=2),s===null)return!0;p=xr(p,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,i=w&-w,u.lanes|=i,i=Ih(u.stateNode,p,i),qc(u,i),!1;case 1:if(s=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Vo===null||!Vo.has(E))))return u.flags|=65536,w&=-w,u.lanes|=w,w=Oi(w),id(w,i,u,p),qc(u,w),!1}u=u.return}while(u!==null);return!1}var Ql=Error(r(461)),Yt=!1;function en(i,s,u,p){s.child=i===null?ih(s,null,u,p):Po(s,i.child,u,p)}function ze(i,s,u,p,w){u=u.render;var E=s.ref;if("ref"in p){var R={};for(var O in p)O!=="ref"&&(R[O]=p[O])}else R=p;return Is(s),p=Jc(i,s,u,R,E,w),O=Yc(),i!==null&&!Yt?(Wc(i,s,w),Ui(i,s,w)):(ft&&O&&ko(s),s.flags|=1,en(i,s,p,w),s.child)}function Zl(i,s,u,p,w){if(i===null){var E=u.type;return typeof E=="function"&&!Qi(E)&&E.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=E,od(i,s,E,p,w)):(i=Pc(u.type,null,p,s,s.mode,w),i.ref=s.ref,i.return=s,s.child=i)}if(E=i.child,!cd(i,w)){var R=E.memoizedProps;if(u=u.compare,u=u!==null?u:la,u(R,p)&&i.ref===s.ref)return Ui(i,s,w)}return s.flags|=1,i=zr(E,p),i.ref=s.ref,i.return=s,s.child=i}function od(i,s,u,p,w){if(i!==null){var E=i.memoizedProps;if(la(E,p)&&i.ref===s.ref)if(Yt=!1,s.pendingProps=p=E,cd(i,w))(i.flags&131072)!==0&&(Yt=!0);else return s.lanes=i.lanes,Ui(i,s,w)}return ld(i,s,u,p,w)}function jo(i,s,u,p){var w=p.children,E=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((s.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,i!==null){for(p=s.child=i.child,w=0;p!==null;)w=w|p.lanes|p.childLanes,p=p.sibling;p=w&~E}else p=0,s.child=null;return sd(i,s,E,u,p)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Uc(s,E!==null?E.cachePool:null),E!==null?oh(s,E):Rn(),og(s);else return p=s.lanes=536870912,sd(i,s,E!==null?E.baseLanes|u:u,u,p)}else E!==null?(Uc(s,E.cachePool),oh(s,E),Kr(),s.memoizedState=null):(i!==null&&Uc(s,null),Rn(),Kr());return en(i,s,w,u),s.child}function eu(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function sd(i,s,u,p,w){var E=nh();return E=E===null?null:{parent:dn._currentValue,pool:E},s.memoizedState={baseLanes:u,cachePool:E},i!==null&&Uc(s,null),Rn(),og(s),i!==null&&va(i,s,p,!0),s.childLanes=w,null}function tu(i,s){return s=ud({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Nn(i,s,u){return Po(s,i.child,null,u),i=tu(s,s.pendingProps),i.flags|=2,Kn(s),s.memoizedState=null,i}function T0(i,s,u){var p=s.pendingProps,w=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(ft){if(p.mode==="hidden")return i=tu(s,p),s.lanes=536870912,eu(null,i);if(Fl(s),(i=_t)?(i=uy(i,$r),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Zi!==null?{id:Mi,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},u=Nl(i),u.return=s,s.child=u,cn=s,_t=null)):i=null,i===null)throw Ro(s);return s.lanes=536870912,null}return tu(s,p)}var E=i.memoizedState;if(E!==null){var R=E.dehydrated;if(Fl(s),w)if(s.flags&256)s.flags&=-257,s=Nn(i,s,u);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(Yt||va(i,s,u,!1),w=(u&i.childLanes)!==0,Yt||w){if(p=Lt,p!==null&&(R=oc(p,u),R!==0&&R!==E.retryLane))throw E.retryLane=R,Ni(i,R),nr(p,i,R),Ql;vd(),s=Nn(i,s,u)}else i=E.treeContext,_t=Qr(R.nextSibling),cn=s,ft=!0,Io=null,$r=!1,i!==null&&ga(s,i),s=tu(s,p),s.flags|=4096;return s}return i=zr(i.child,{mode:p.mode,children:p.children}),i.ref=s.ref,s.child=i,i.return=s,i}function ad(i,s){var u=s.ref;if(u===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(s.flags|=4194816)}}function ld(i,s,u,p,w){return Is(s),u=Jc(i,s,u,p,void 0,w),p=Yc(),i!==null&&!Yt?(Wc(i,s,w),Ui(i,s,w)):(ft&&p&&ko(s),s.flags|=1,en(i,s,u,w),s.child)}function xg(i,s,u,p,w,E){return Is(s),s.updateQueue=null,u=zl(s,p,u,w),sh(i),p=Yc(),i!==null&&!Yt?(Wc(i,s,E),Ui(i,s,E)):(ft&&p&&ko(s),s.flags|=1,en(i,s,u,E),s.child)}function Nh(i,s,u,p,w){if(Is(s),s.stateNode===null){var E=Xi,R=u.contextType;typeof R=="object"&&R!==null&&(E=In(R)),E=new u(p,E),s.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Kl,s.stateNode=E,E._reactInternals=s,E=s.stateNode,E.props=p,E.state=s.memoizedState,E.refs={},Pi(s),R=u.contextType,E.context=typeof R=="object"&&R!==null?In(R):Xi,E.state=s.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(rd(s,u,R,p),E.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(R=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),R!==E.state&&Kl.enqueueReplaceState(E,E.state,null),Ea(s,p,E,w),Ms(),E.state=s.memoizedState),typeof E.componentDidMount=="function"&&(s.flags|=4194308),p=!0}else if(i===null){E=s.stateNode;var O=s.memoizedProps,Y=Hn(u,O);E.props=Y;var ae=E.context,ye=u.contextType;R=Xi,typeof ye=="object"&&ye!==null&&(R=In(ye));var we=u.getDerivedStateFromProps;ye=typeof we=="function"||typeof E.getSnapshotBeforeUpdate=="function",O=s.pendingProps!==O,ye||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O||ae!==R)&&Ch(s,E,p,R),Yr=!1;var ce=s.memoizedState;E.state=ce,Ea(s,p,E,w),Ms(),ae=s.memoizedState,O||ce!==ae||Yr?(typeof we=="function"&&(rd(s,u,we,p),ae=s.memoizedState),(Y=Yr||yg(s,u,Y,p,ce,ae,R))?(ye||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=ae),E.props=p,E.state=ae,E.context=R,p=Y):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{E=s.stateNode,zc(i,s),R=s.memoizedProps,ye=Hn(u,R),E.props=ye,we=s.pendingProps,ce=E.context,ae=u.contextType,Y=Xi,typeof ae=="object"&&ae!==null&&(Y=In(ae)),O=u.getDerivedStateFromProps,(ae=typeof O=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==we||ce!==Y)&&Ch(s,E,p,Y),Yr=!1,ce=s.memoizedState,E.state=ce,Ea(s,p,E,w),Ms();var pe=s.memoizedState;R!==we||ce!==pe||Yr||i!==null&&i.dependencies!==null&&Oc(i.dependencies)?(typeof O=="function"&&(rd(s,u,O,p),pe=s.memoizedState),(ye=Yr||yg(s,u,ye,p,ce,pe,Y)||i!==null&&i.dependencies!==null&&Oc(i.dependencies))?(ae||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,pe,Y),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,pe,Y)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===i.memoizedProps&&ce===i.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&ce===i.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=pe),E.props=p,E.state=pe,E.context=Y,p=ye):(typeof E.componentDidUpdate!="function"||R===i.memoizedProps&&ce===i.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&ce===i.memoizedState||(s.flags|=1024),p=!1)}return E=p,ad(i,s),p=(s.flags&128)!==0,E||p?(E=s.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:E.render(),s.flags|=1,i!==null&&p?(s.child=Po(s,i.child,null,w),s.child=Po(s,null,u,w)):en(i,s,u,w),s.memoizedState=E.state,i=s.child):i=Ui(i,s,w),i}function wg(i,s,u,p){return B(),s.flags|=256,en(i,s,u,p),s.child}var Mh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dh(i){return{baseLanes:i,cachePool:tg()}}function gi(i,s,u){return i=i!==null?i.childLanes&~u:0,s&&(i|=kr),i}function On(i,s,u){var p=s.pendingProps,w=!1,E=(s.flags&128)!==0,R;if((R=E)||(R=i!==null&&i.memoizedState===null?!1:(on.current&2)!==0),R&&(w=!0,s.flags&=-129),R=(s.flags&32)!==0,s.flags&=-33,i===null){if(ft){if(w?Oo(s):Kr(),(i=_t)?(i=uy(i,$r),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Zi!==null?{id:Mi,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},u=Nl(i),u.return=s,s.child=u,cn=s,_t=null)):i=null,i===null)throw Ro(s);return Ha(i)?s.lanes=32:s.lanes=536870912,null}var O=p.children;return p=p.fallback,w?(Kr(),w=s.mode,O=ud({mode:"hidden",children:O},w),p=Cs(p,w,u,null),O.return=s,p.return=s,O.sibling=p,s.child=O,p=s.child,p.memoizedState=Dh(u),p.childLanes=gi(i,R,u),s.memoizedState=Mh,eu(null,p)):(Oo(s),nu(s,O))}var Y=i.memoizedState;if(Y!==null&&(O=Y.dehydrated,O!==null)){if(E)s.flags&256?(Oo(s),s.flags&=-257,s=ru(i,s,u)):s.memoizedState!==null?(Kr(),s.child=i.child,s.flags|=128,s=null):(Kr(),O=p.fallback,w=s.mode,p=ud({mode:"visible",children:p.children},w),O=Cs(O,w,u,null),O.flags|=2,p.return=s,O.return=s,p.sibling=O,s.child=p,Po(s,i.child,null,u),p=s.child,p.memoizedState=Dh(u),p.childLanes=gi(i,R,u),s.memoizedState=Mh,s=eu(null,p));else if(Oo(s),Ha(O)){if(R=O.nextSibling&&O.nextSibling.dataset,R)var ae=R.dgst;R=ae,p=Error(r(419)),p.stack="",p.digest=R,Mo({value:p,source:null,stack:null}),s=ru(i,s,u)}else if(Yt||va(i,s,u,!1),R=(u&i.childLanes)!==0,Yt||R){if(R=Lt,R!==null&&(p=oc(R,u),p!==0&&p!==Y.retryLane))throw Y.retryLane=p,Ni(i,p),nr(R,i,p),Ql;Ad(O)||vd(),s=ru(i,s,u)}else Ad(O)?(s.flags|=192,s.child=i.child,s=null):(i=Y.treeContext,_t=Qr(O.nextSibling),cn=s,ft=!0,Io=null,$r=!1,i!==null&&ga(s,i),s=nu(s,p.children),s.flags|=4096);return s}return w?(Kr(),O=p.fallback,w=s.mode,Y=i.child,ae=Y.sibling,p=zr(Y,{mode:"hidden",children:p.children}),p.subtreeFlags=Y.subtreeFlags&65011712,ae!==null?O=zr(ae,O):(O=Cs(O,w,u,null),O.flags|=2),O.return=s,p.return=s,p.sibling=O,s.child=p,eu(null,p),p=s.child,O=i.child.memoizedState,O===null?O=Dh(u):(w=O.cachePool,w!==null?(Y=dn._currentValue,w=w.parent!==Y?{parent:Y,pool:Y}:w):w=tg(),O={baseLanes:O.baseLanes|u,cachePool:w}),p.memoizedState=O,p.childLanes=gi(i,R,u),s.memoizedState=Mh,eu(i.child,p)):(Oo(s),u=i.child,i=u.sibling,u=zr(u,{mode:"visible",children:p.children}),u.return=s,u.sibling=null,i!==null&&(R=s.deletions,R===null?(s.deletions=[i],s.flags|=16):R.push(i)),s.child=u,s.memoizedState=null,u)}function nu(i,s){return s=ud({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function ud(i,s){return i=kn(22,i,null,s),i.lanes=0,i}function ru(i,s,u){return Po(s,i.child,null,u),i=nu(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function _g(i,s,u){i.lanes|=s;var p=i.alternate;p!==null&&(p.lanes|=s),no(i.return,s,u)}function Ph(i,s,u,p,w,E){var R=i.memoizedState;R===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:w,treeForkCount:E}:(R.isBackwards=s,R.rendering=null,R.renderingStartTime=0,R.last=p,R.tail=u,R.tailMode=w,R.treeForkCount=E)}function Pa(i,s,u){var p=s.pendingProps,w=p.revealOrder,E=p.tail;p=p.children;var R=on.current,O=(R&2)!==0;if(O?(R=R&1|2,s.flags|=128):R&=1,U(on,R),en(i,s,p,u),p=ft?un:0,!O&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_g(i,u,s);else if(i.tag===19)_g(i,u,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(w){case"forwards":for(u=s.child,w=null;u!==null;)i=u.alternate,i!==null&&Vc(i)===null&&(w=u),u=u.sibling;u=w,u===null?(w=s.child,s.child=null):(w=u.sibling,u.sibling=null),Ph(s,!1,w,u,E,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,w=s.child,s.child=null;w!==null;){if(i=w.alternate,i!==null&&Vc(i)===null){s.child=w;break}i=w.sibling,w.sibling=u,u=w,w=i}Ph(s,!0,u,null,E,p);break;case"together":Ph(s,!1,null,null,void 0,p);break;default:s.memoizedState=null}return s.child}function Ui(i,s,u){if(i!==null&&(s.dependencies=i.dependencies),Ho|=s.lanes,(u&s.childLanes)===0)if(i!==null){if(va(i,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,u=zr(i,i.pendingProps),s.child=u,u.return=s;i.sibling!==null;)i=i.sibling,u=u.sibling=zr(i,i.pendingProps),u.return=s;u.sibling=null}return s.child}function cd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Oc(i)))}function C0(i,s,u){switch(s.tag){case 3:rt(s,s.stateNode.containerInfo),Do(s,dn,i.memoizedState.cache),B();break;case 27:case 5:Xt(s);break;case 4:rt(s,s.stateNode.containerInfo);break;case 10:Do(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Fl(s),null;break;case 13:var p=s.memoizedState;if(p!==null)return p.dehydrated!==null?(Oo(s),s.flags|=128,null):(u&s.child.childLanes)!==0?On(i,s,u):(Oo(s),i=Ui(i,s,u),i!==null?i.sibling:null);Oo(s);break;case 19:var w=(i.flags&128)!==0;if(p=(u&s.childLanes)!==0,p||(va(i,s,u,!1),p=(u&s.childLanes)!==0),w){if(p)return Pa(i,s,u);s.flags|=128}if(w=s.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),U(on,on.current),p)break;return null;case 22:return s.lanes=0,jo(i,s,u,s.pendingProps);case 24:Do(s,dn,i.memoizedState.cache)}return Ui(i,s,u)}function Sg(i,s,u){if(i!==null)if(i.memoizedProps!==s.pendingProps)Yt=!0;else{if(!cd(i,u)&&(s.flags&128)===0)return Yt=!1,C0(i,s,u);Yt=(i.flags&131072)!==0}else Yt=!1,ft&&(s.flags&1048576)!==0&&Lc(s,un,s.index);switch(s.lanes=0,s.tag){case 16:e:{var p=s.pendingProps;if(i=ci(s.elementType),s.type=i,typeof i=="function")Qi(i)?(p=Hn(i,p),s.tag=1,s=Nh(null,s,i,p,u)):(s.tag=0,s=ld(null,s,i,p,u));else{if(i!=null){var w=i.$$typeof;if(w===$){s.tag=11,s=ze(null,s,i,p,u);break e}else if(w===q){s.tag=14,s=Zl(null,s,i,p,u);break e}}throw s=ue(i)||i,Error(r(306,s,""))}}return s;case 0:return ld(i,s,s.type,s.pendingProps,u);case 1:return p=s.type,w=Hn(p,s.pendingProps),Nh(i,s,p,w,u);case 3:e:{if(rt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));p=s.pendingProps;var E=s.memoizedState;w=E.element,zc(i,s),Ea(s,p,null,u);var R=s.memoizedState;if(p=R.cache,Do(s,dn,p),p!==E.cache&&eh(s,[dn],u,!0),Ms(),p=R.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:R.cache},s.updateQueue.baseState=E,s.memoizedState=E,s.flags&256){s=wg(i,s,p,u);break e}else if(p!==w){w=xr(Error(r(424)),s),Mo(w),s=wg(i,s,p,u);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(_t=Qr(i.firstChild),cn=s,ft=!0,Io=null,$r=!0,u=ih(s,null,p,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(B(),p===w){s=Ui(i,s,u);break e}en(i,s,p,u)}s=s.child}return s;case 26:return ad(i,s),i===null?(u=my(s.type,null,s.pendingProps,null))?s.memoizedState=u:ft||(u=s.type,i=s.pendingProps,p=Su(Ie.current).createElement(u),p[An]=s,p[Gn]=i,Mn(p,u,i),bn(p),s.stateNode=p):s.memoizedState=my(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Xt(s),i===null&&ft&&(p=s.stateNode=fy(s.type,s.pendingProps,Ie.current),cn=s,$r=!0,w=_t,$e(s.type)?(yp=w,_t=Qr(p.firstChild)):_t=w),en(i,s,s.pendingProps.children,u),ad(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&ft&&((w=p=_t)&&(p=q0(p,s.type,s.pendingProps,$r),p!==null?(s.stateNode=p,cn=s,_t=Qr(p.firstChild),$r=!1,w=!0):w=!1),w||Ro(s)),Xt(s),w=s.type,E=s.pendingProps,R=i!==null?i.memoizedProps:null,p=E.children,Yo(w,E)?p=null:R!==null&&Yo(w,R)&&(s.flags|=32),s.memoizedState!==null&&(w=Jc(i,s,_0,null,null,u),Wa._currentValue=w),ad(i,s),en(i,s,p,u),s.child;case 6:return i===null&&ft&&((i=u=_t)&&(u=St(u,s.pendingProps,$r),u!==null?(s.stateNode=u,cn=s,_t=null,i=!0):i=!1),i||Ro(s)),null;case 13:return On(i,s,u);case 4:return rt(s,s.stateNode.containerInfo),p=s.pendingProps,i===null?s.child=Po(s,null,p,u):en(i,s,p,u),s.child;case 11:return ze(i,s,s.type,s.pendingProps,u);case 7:return en(i,s,s.pendingProps,u),s.child;case 8:return en(i,s,s.pendingProps.children,u),s.child;case 12:return en(i,s,s.pendingProps.children,u),s.child;case 10:return p=s.pendingProps,Do(s,s.type,p.value),en(i,s,p.children,u),s.child;case 9:return w=s.type._context,p=s.pendingProps.children,Is(s),w=In(w),p=p(w),s.flags|=1,en(i,s,p,u),s.child;case 14:return Zl(i,s,s.type,s.pendingProps,u);case 15:return od(i,s,s.type,s.pendingProps,u);case 19:return Pa(i,s,u);case 31:return T0(i,s,u);case 22:return jo(i,s,u,s.pendingProps);case 24:return Is(s),p=In(dn),i===null?(w=nh(),w===null&&(w=Lt,E=ui(),w.pooledCache=E,E.refCount++,E!==null&&(w.pooledCacheLanes|=u),w=E),s.memoizedState={parent:p,cache:w},Pi(s),Do(s,dn,w)):((i.lanes&u)!==0&&(zc(i,s),Ea(s,null,null,u),Ms()),w=i.memoizedState,E=s.memoizedState,w.parent!==p?(w={parent:p,cache:p},s.memoizedState=w,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=w),Do(s,dn,p)):(p=E.cache,Do(s,dn,p),p!==w.cache&&eh(s,[dn],u,!0))),en(i,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function oo(i){i.flags|=4}function Lh(i,s,u,p,w){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(w&335544128)===w)if(i.stateNode.complete)i.flags|=8192;else if(pu())i.flags|=8192;else throw Di=Fc,Bc}else i.flags&=-16777217}function Oh(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!xy(s))if(pu())i.flags|=8192;else throw Di=Fc,Bc}function iu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?If():536870912,i.lanes|=s,Ba|=s)}function ou(i,s){if(!ft)switch(i.tailMode){case"hidden":s=i.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Pt(i){var s=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(s)for(var w=i.child;w!==null;)u|=w.lanes|w.childLanes,p|=w.subtreeFlags&65011712,p|=w.flags&65011712,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)u|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=p,i.childLanes=u,s}function Eg(i,s,u){var p=s.pendingProps;switch(As(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(s),null;case 1:return Pt(s),null;case 3:return u=s.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),s.memoizedState.cache!==p&&(s.flags|=2048),to(dn),Ue(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(ks(s)?oo(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,No())),Pt(s),null;case 26:var w=s.type,E=s.memoizedState;return i===null?(oo(s),E!==null?(Pt(s),Oh(s,E)):(Pt(s),Lh(s,w,null,p,u))):E?E!==i.memoizedState?(oo(s),Pt(s),Oh(s,E)):(Pt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==p&&oo(s),Pt(s),Lh(s,w,i,p,u)),null;case 27:if(hn(s),u=Ie.current,w=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==p&&oo(s);else{if(!p){if(s.stateNode===null)throw Error(r(166));return Pt(s),null}i=me.current,ks(s)?Dl(s):(i=fy(w,p,u),s.stateNode=i,oo(s))}return Pt(s),null;case 5:if(hn(s),w=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==p&&oo(s);else{if(!p){if(s.stateNode===null)throw Error(r(166));return Pt(s),null}if(E=me.current,ks(s))Dl(s);else{var R=Su(Ie.current);switch(E){case 1:E=R.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:E=R.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":E=R.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":E=R.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":E=R.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof p.is=="string"?R.createElement("select",{is:p.is}):R.createElement("select"),p.multiple?E.multiple=!0:p.size&&(E.size=p.size);break;default:E=typeof p.is=="string"?R.createElement(w,{is:p.is}):R.createElement(w)}}E[An]=s,E[Gn]=p;e:for(R=s.child;R!==null;){if(R.tag===5||R.tag===6)E.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===s)break e;for(;R.sibling===null;){if(R.return===null||R.return===s)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}s.stateNode=E;e:switch(Mn(E,w,p),w){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&oo(s)}}return Pt(s),Lh(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,u),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==p&&oo(s);else{if(typeof p!="string"&&s.stateNode===null)throw Error(r(166));if(i=Ie.current,ks(s)){if(i=s.stateNode,u=s.memoizedProps,p=null,w=cn,w!==null)switch(w.tag){case 27:case 5:p=w.memoizedProps}i[An]=s,i=!!(i.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||oy(i.nodeValue,u)),i||Ro(s,!0)}else i=Su(i).createTextNode(p),i[An]=s,s.stateNode=i}return Pt(s),null;case 31:if(u=s.memoizedState,i===null||i.memoizedState!==null){if(p=ks(s),u!==null){if(i===null){if(!p)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[An]=s}else B(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Pt(s),i=!1}else u=No(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return s.flags&256?(Kn(s),s):(Kn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Pt(s),null;case 13:if(p=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(w=ks(s),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(r(318));if(w=s.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[An]=s}else B(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Pt(s),w=!1}else w=No(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=w),w=!0;if(!w)return s.flags&256?(Kn(s),s):(Kn(s),null)}return Kn(s),(s.flags&128)!==0?(s.lanes=u,s):(u=p!==null,i=i!==null&&i.memoizedState!==null,u&&(p=s.child,w=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(w=p.alternate.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==w&&(p.flags|=2048)),u!==i&&u&&(s.child.flags|=8192),iu(s,s.updateQueue),Pt(s),null);case 4:return Ue(),i===null&&cp(s.stateNode.containerInfo),Pt(s),null;case 10:return to(s.type),Pt(s),null;case 19:if(re(on),p=s.memoizedState,p===null)return Pt(s),null;if(w=(s.flags&128)!==0,E=p.rendering,E===null)if(w)ou(p,!1);else{if(Wt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(E=Vc(i),E!==null){for(s.flags|=128,ou(p,!1),i=E.updateQueue,s.updateQueue=i,iu(s,i),s.subtreeFlags=0,i=u,u=s.child;u!==null;)Xm(u,i),u=u.sibling;return U(on,on.current&1|2),ft&&wr(s,p.treeForkCount),s.child}i=i.sibling}p.tail!==null&&Fn()>Us&&(s.flags|=128,w=!0,ou(p,!1),s.lanes=4194304)}else{if(!w)if(i=Vc(E),i!==null){if(s.flags|=128,w=!0,i=i.updateQueue,s.updateQueue=i,iu(s,i),ou(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!ft)return Pt(s),null}else 2*Fn()-p.renderingStartTime>Us&&u!==536870912&&(s.flags|=128,w=!0,ou(p,!1),s.lanes=4194304);p.isBackwards?(E.sibling=s.child,s.child=E):(i=p.last,i!==null?i.sibling=E:s.child=E,p.last=E)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Fn(),i.sibling=null,u=on.current,U(on,w?u&1|2:u&1),ft&&wr(s,p.treeForkCount),i):(Pt(s),null);case 22:case 23:return Kn(s),Bl(),p=s.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(s.flags|=8192):p&&(s.flags|=8192),p?(u&536870912)!==0&&(s.flags&128)===0&&(Pt(s),s.subtreeFlags&6&&(s.flags|=8192)):Pt(s),u=s.updateQueue,u!==null&&iu(s,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),p=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),p!==u&&(s.flags|=2048),i!==null&&re(Ns),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),to(dn),Pt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function su(i,s){switch(As(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return to(dn),Ue(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return hn(s),null;case 31:if(s.memoizedState!==null){if(Kn(s),s.alternate===null)throw Error(r(340));B()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Kn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));B()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return re(on),null;case 4:return Ue(),null;case 10:return to(s.type),null;case 22:case 23:return Kn(s),Bl(),i!==null&&re(Ns),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return to(dn),null;case 25:return null;default:return null}}function dd(i,s){switch(As(s),s.tag){case 3:to(dn),Ue();break;case 26:case 27:case 5:hn(s);break;case 4:Ue();break;case 31:s.memoizedState!==null&&Kn(s);break;case 13:Kn(s);break;case 19:re(on);break;case 10:to(s.type);break;case 22:case 23:Kn(s),Bl(),i!==null&&re(Ns);break;case 24:to(dn)}}function La(i,s){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var w=p.next;u=w;do{if((u.tag&i)===i){p=void 0;var E=u.create,R=u.inst;p=E(),R.destroy=p}u=u.next}while(u!==w)}}catch(O){kt(s,s.return,O)}}function so(i,s,u){try{var p=s.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var E=w.next;p=E;do{if((p.tag&i)===i){var R=p.inst,O=R.destroy;if(O!==void 0){R.destroy=void 0,w=s;var Y=u,ae=O;try{ae()}catch(ye){kt(w,Y,ye)}}}p=p.next}while(p!==E)}}catch(ye){kt(s,s.return,ye)}}function au(i){var s=i.updateQueue;if(s!==null){var u=i.stateNode;try{Hc(s,u)}catch(p){kt(i,i.return,p)}}}function Uh(i,s,u){u.props=Hn(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(p){kt(i,s,p)}}function Qn(i,s){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof u=="function"?i.refCleanup=u(p):u.current=p}}catch(w){kt(i,s,w)}}function Un(i,s){var u=i.ref,p=i.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(w){kt(i,s,w)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(w){kt(i,s,w)}else u.current=null}function Tg(i){var s=i.type,u=i.memoizedProps,p=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(w){kt(i,i.return,w)}}function fd(i,s,u){try{var p=i.stateNode;F0(p,i.type,u,s),p[Gn]=s}catch(w){kt(i,i.return,w)}}function Cg(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&$e(i.type)||i.tag===4}function Bh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Cg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&$e(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Fh(i,s,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(i),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Yi));else if(p!==4&&(p===27&&$e(i.type)&&(u=i.stateNode,s=null),i=i.child,i!==null))for(Fh(i,s,u),i=i.sibling;i!==null;)Fh(i,s,u),i=i.sibling}function hd(i,s,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?u.insertBefore(i,s):u.appendChild(i);else if(p!==4&&(p===27&&$e(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(hd(i,s,u),i=i.sibling;i!==null;)hd(i,s,u),i=i.sibling}function Ag(i){var s=i.stateNode,u=i.memoizedProps;try{for(var p=i.type,w=s.attributes;w.length;)s.removeAttributeNode(w[0]);Mn(s,p,u),s[An]=i,s[Gn]=u}catch(E){kt(i,i.return,E)}}var ao=!1,fn=!1,jh=!1,kg=typeof WeakSet=="function"?WeakSet:Set,xn=null;function A0(i,s){if(i=i.containerInfo,_u=Pd,i=Jm(i),Xf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var w=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var R=0,O=-1,Y=-1,ae=0,ye=0,we=i,ce=null;t:for(;;){for(var pe;we!==u||w!==0&&we.nodeType!==3||(O=R+w),we!==E||p!==0&&we.nodeType!==3||(Y=R+p),we.nodeType===3&&(R+=we.nodeValue.length),(pe=we.firstChild)!==null;)ce=we,we=pe;for(;;){if(we===i)break t;if(ce===u&&++ae===w&&(O=R),ce===E&&++ye===p&&(Y=R),(pe=we.nextSibling)!==null)break;we=ce,ce=we.parentNode}we=pe}u=O===-1||Y===-1?null:{start:O,end:Y}}else u=null}u=u||{start:0,end:0}}else u=null;for(pp={focusedElem:i,selectionRange:u},Pd=!1,xn=s;xn!==null;)if(s=xn,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,xn=i;else for(;xn!==null;){switch(s=xn,E=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)w=i[u],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&E!==null){i=void 0,u=s,w=E.memoizedProps,E=E.memoizedState,p=u.stateNode;try{var Me=Hn(u.type,w);i=p.getSnapshotBeforeUpdate(Me,E),p.__reactInternalSnapshotBeforeUpdate=i}catch(qe){kt(u,u.return,qe)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,u=i.nodeType,u===9)Cd(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Cd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,xn=i;break}xn=s.return}}function zh(i,s,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:uo(i,u),p&4&&La(5,u);break;case 1:if(uo(i,u),p&4)if(i=u.stateNode,s===null)try{i.componentDidMount()}catch(R){kt(u,u.return,R)}else{var w=Hn(u.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(w,s,i.__reactInternalSnapshotBeforeUpdate)}catch(R){kt(u,u.return,R)}}p&64&&au(u),p&512&&Qn(u,u.return);break;case 3:if(uo(i,u),p&64&&(i=u.updateQueue,i!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{Hc(i,s)}catch(R){kt(u,u.return,R)}}break;case 27:s===null&&p&4&&Ag(u);case 26:case 5:uo(i,u),s===null&&p&4&&Tg(u),p&512&&Qn(u,u.return);break;case 12:uo(i,u);break;case 31:uo(i,u),p&4&&Hh(i,u);break;case 13:uo(i,u),p&4&&Rg(i,u),p&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=wd.bind(null,u),H0(i,u))));break;case 22:if(p=u.memoizedState!==null||ao,!p){s=s!==null&&s.memoizedState!==null||fn,w=ao;var E=fn;ao=p,(fn=s)&&!E?Bi(i,u,(u.subtreeFlags&8772)!==0):uo(i,u),ao=w,fn=E}break;case 30:break;default:uo(i,u)}}function qh(i){var s=i.alternate;s!==null&&(i.alternate=null,qh(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Df(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ut=null,Zn=!1;function lo(i,s,u){for(u=u.child;u!==null;)Ig(i,s,u),u=u.sibling}function Ig(i,s,u){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Cn,u)}catch{}switch(u.tag){case 26:fn||Un(u,s),lo(i,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:fn||Un(u,s);var p=Ut,w=Zn;$e(u.type)&&(Ut=u.stateNode,Zn=!1),lo(i,s,u),Tu(u.stateNode),Ut=p,Zn=w;break;case 5:fn||Un(u,s);case 6:if(p=Ut,w=Zn,Ut=null,lo(i,s,u),Ut=p,Zn=w,Ut!==null)if(Zn)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(u.stateNode)}catch(E){kt(u,s,E)}else try{Ut.removeChild(u.stateNode)}catch(E){kt(u,s,E)}break;case 18:Ut!==null&&(Zn?(i=Ut,gp(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Xa(i)):gp(Ut,u.stateNode));break;case 4:p=Ut,w=Zn,Ut=u.stateNode.containerInfo,Zn=!0,lo(i,s,u),Ut=p,Zn=w;break;case 0:case 11:case 14:case 15:so(2,u,s),fn||so(4,u,s),lo(i,s,u);break;case 1:fn||(Un(u,s),p=u.stateNode,typeof p.componentWillUnmount=="function"&&Uh(u,s,p)),lo(i,s,u);break;case 21:lo(i,s,u);break;case 22:fn=(p=fn)||u.memoizedState!==null,lo(i,s,u),fn=p;break;default:lo(i,s,u)}}function Hh(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Xa(i)}catch(u){kt(s,s.return,u)}}}function Rg(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Xa(i)}catch(u){kt(s,s.return,u)}}function k0(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new kg),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new kg),s;default:throw Error(r(435,i.tag))}}function pd(i,s){var u=k0(i);s.forEach(function(p){if(!u.has(p)){u.add(p);var w=L0.bind(null,i,p);p.then(w,w)}})}function er(i,s){var u=s.deletions;if(u!==null)for(var p=0;p<u.length;p++){var w=u[p],E=i,R=s,O=R;e:for(;O!==null;){switch(O.tag){case 27:if($e(O.type)){Ut=O.stateNode,Zn=!1;break e}break;case 5:Ut=O.stateNode,Zn=!1;break e;case 3:case 4:Ut=O.stateNode.containerInfo,Zn=!0;break e}O=O.return}if(Ut===null)throw Error(r(160));Ig(E,R,w),Ut=null,Zn=!1,E=w.alternate,E!==null&&(E.return=null),w.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ng(s,i),s=s.sibling}var yi=null;function Ng(i,s){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:er(s,i),Bt(i),p&4&&(so(3,i,i.return),La(3,i),so(5,i,i.return));break;case 1:er(s,i),Bt(i),p&512&&(fn||u===null||Un(u,u.return)),p&64&&ao&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var w=yi;if(er(s,i),Bt(i),p&512&&(fn||u===null||Un(u,u.return)),p&4){var E=u!==null?u.memoizedState:null;if(p=i.memoizedState,u===null)if(p===null)if(i.stateNode===null){e:{p=i.type,u=i.memoizedProps,w=w.ownerDocument||w;t:switch(p){case"title":E=w.getElementsByTagName("title")[0],(!E||E[gl]||E[An]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=w.createElement(p),w.head.insertBefore(E,w.querySelector("head > title"))),Mn(E,p,u),E[An]=i,bn(E),p=E;break e;case"link":var R=vy("link","href",w).get(p+(u.href||""));if(R){for(var O=0;O<R.length;O++)if(E=R[O],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){R.splice(O,1);break t}}E=w.createElement(p),Mn(E,p,u),w.head.appendChild(E);break;case"meta":if(R=vy("meta","content",w).get(p+(u.content||""))){for(O=0;O<R.length;O++)if(E=R[O],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){R.splice(O,1);break t}}E=w.createElement(p),Mn(E,p,u),w.head.appendChild(E);break;default:throw Error(r(468,p))}E[An]=i,bn(E),p=E}i.stateNode=p}else by(w,i.type,i.stateNode);else i.stateNode=yy(w,p,i.memoizedProps);else E!==p?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,p===null?by(w,i.type,i.stateNode):yy(w,p,i.memoizedProps)):p===null&&i.stateNode!==null&&fd(i,i.memoizedProps,u.memoizedProps)}break;case 27:er(s,i),Bt(i),p&512&&(fn||u===null||Un(u,u.return)),u!==null&&p&4&&fd(i,i.memoizedProps,u.memoizedProps);break;case 5:if(er(s,i),Bt(i),p&512&&(fn||u===null||Un(u,u.return)),i.flags&32){w=i.stateNode;try{si(w,"")}catch(Me){kt(i,i.return,Me)}}p&4&&i.stateNode!=null&&(w=i.memoizedProps,fd(i,w,u!==null?u.memoizedProps:w)),p&1024&&(jh=!0);break;case 6:if(er(s,i),Bt(i),p&4){if(i.stateNode===null)throw Error(r(162));p=i.memoizedProps,u=i.stateNode;try{u.nodeValue=p}catch(Me){kt(i,i.return,Me)}}break;case 3:if(Cu=null,w=yi,yi=kd(s.containerInfo),er(s,i),yi=w,Bt(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Xa(s.containerInfo)}catch(Me){kt(i,i.return,Me)}jh&&(jh=!1,Mg(i));break;case 4:p=yi,yi=kd(i.stateNode.containerInfo),er(s,i),Bt(i),yi=p;break;case 12:er(s,i),Bt(i);break;case 31:er(s,i),Bt(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,pd(i,p)));break;case 13:er(s,i),Bt(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(fu=Fn()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,pd(i,p)));break;case 22:w=i.memoizedState!==null;var Y=u!==null&&u.memoizedState!==null,ae=ao,ye=fn;if(ao=ae||w,fn=ye||Y,er(s,i),fn=ye,ao=ae,Bt(i),p&8192)e:for(s=i.stateNode,s._visibility=w?s._visibility&-2:s._visibility|1,w&&(u===null||Y||ao||fn||Ls(i)),u=null,s=i;;){if(s.tag===5||s.tag===26){if(u===null){Y=u=s;try{if(E=Y.stateNode,w)R=E.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{O=Y.stateNode;var we=Y.memoizedProps.style,ce=we!=null&&we.hasOwnProperty("display")?we.display:null;O.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Me){kt(Y,Y.return,Me)}}}else if(s.tag===6){if(u===null){Y=s;try{Y.stateNode.nodeValue=w?"":Y.memoizedProps}catch(Me){kt(Y,Y.return,Me)}}}else if(s.tag===18){if(u===null){Y=s;try{var pe=Y.stateNode;w?Mr(pe,!0):Mr(Y.stateNode,!1)}catch(Me){kt(Y,Y.return,Me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}p&4&&(p=i.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,pd(i,u))));break;case 19:er(s,i),Bt(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,pd(i,p)));break;case 30:break;case 21:break;default:er(s,i),Bt(i)}}function Bt(i){var s=i.flags;if(s&2){try{for(var u,p=i.return;p!==null;){if(Cg(p)){u=p;break}p=p.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var w=u.stateNode,E=Bh(i);hd(i,E,w);break;case 5:var R=u.stateNode;u.flags&32&&(si(R,""),u.flags&=-33);var O=Bh(i);hd(i,O,R);break;case 3:case 4:var Y=u.stateNode.containerInfo,ae=Bh(i);Fh(i,ae,Y);break;default:throw Error(r(161))}}catch(ye){kt(i,i.return,ye)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Mg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Mg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function uo(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)zh(i,s.alternate,s),s=s.sibling}function Ls(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:so(4,s,s.return),Ls(s);break;case 1:Un(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&Uh(s,s.return,u),Ls(s);break;case 27:Tu(s.stateNode);case 26:case 5:Un(s,s.return),Ls(s);break;case 22:s.memoizedState===null&&Ls(s);break;case 30:Ls(s);break;default:Ls(s)}i=i.sibling}}function Bi(i,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var p=s.alternate,w=i,E=s,R=E.flags;switch(E.tag){case 0:case 11:case 15:Bi(w,E,u),La(4,E);break;case 1:if(Bi(w,E,u),p=E,w=p.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(ae){kt(p,p.return,ae)}if(p=E,w=p.updateQueue,w!==null){var O=p.stateNode;try{var Y=w.shared.hiddenCallbacks;if(Y!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Y.length;w++)hi(Y[w],O)}catch(ae){kt(p,p.return,ae)}}u&&R&64&&au(E),Qn(E,E.return);break;case 27:Ag(E);case 26:case 5:Bi(w,E,u),u&&p===null&&R&4&&Tg(E),Qn(E,E.return);break;case 12:Bi(w,E,u);break;case 31:Bi(w,E,u),u&&R&4&&Hh(w,E);break;case 13:Bi(w,E,u),u&&R&4&&Rg(w,E);break;case 22:E.memoizedState===null&&Bi(w,E,u),Qn(E,E.return);break;case 30:break;default:Bi(w,E,u)}s=s.sibling}}function Vh(i,s){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Pl(u))}function $h(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Pl(i))}function vi(i,s,u,p){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dg(i,s,u,p),s=s.sibling}function Dg(i,s,u,p){var w=s.flags;switch(s.tag){case 0:case 11:case 15:vi(i,s,u,p),w&2048&&La(9,s);break;case 1:vi(i,s,u,p);break;case 3:vi(i,s,u,p),w&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Pl(i)));break;case 12:if(w&2048){vi(i,s,u,p),i=s.stateNode;try{var E=s.memoizedProps,R=E.id,O=E.onPostCommit;typeof O=="function"&&O(R,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Y){kt(s,s.return,Y)}}else vi(i,s,u,p);break;case 31:vi(i,s,u,p);break;case 13:vi(i,s,u,p);break;case 23:break;case 22:E=s.stateNode,R=s.alternate,s.memoizedState!==null?E._visibility&2?vi(i,s,u,p):lu(i,s):E._visibility&2?vi(i,s,u,p):(E._visibility|=2,zo(i,s,u,p,(s.subtreeFlags&10256)!==0||!1)),w&2048&&Vh(R,s);break;case 24:vi(i,s,u,p),w&2048&&$h(s.alternate,s);break;default:vi(i,s,u,p)}}function zo(i,s,u,p,w){for(w=w&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var E=i,R=s,O=u,Y=p,ae=R.flags;switch(R.tag){case 0:case 11:case 15:zo(E,R,O,Y,w),La(8,R);break;case 23:break;case 22:var ye=R.stateNode;R.memoizedState!==null?ye._visibility&2?zo(E,R,O,Y,w):lu(E,R):(ye._visibility|=2,zo(E,R,O,Y,w)),w&&ae&2048&&Vh(R.alternate,R);break;case 24:zo(E,R,O,Y,w),w&&ae&2048&&$h(R.alternate,R);break;default:zo(E,R,O,Y,w)}s=s.sibling}}function lu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=i,p=s,w=p.flags;switch(p.tag){case 22:lu(u,p),w&2048&&Vh(p.alternate,p);break;case 24:lu(u,p),w&2048&&$h(p.alternate,p);break;default:lu(u,p)}s=s.sibling}}var uu=8192;function Oa(i,s,u){if(i.subtreeFlags&uu)for(i=i.child;i!==null;)Pg(i,s,u),i=i.sibling}function Pg(i,s,u){switch(i.tag){case 26:Oa(i,s,u),i.flags&uu&&i.memoizedState!==null&&Ya(u,yi,i.memoizedState,i.memoizedProps);break;case 5:Oa(i,s,u);break;case 3:case 4:var p=yi;yi=kd(i.stateNode.containerInfo),Oa(i,s,u),yi=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=uu,uu=16777216,Oa(i,s,u),uu=p):Oa(i,s,u));break;default:Oa(i,s,u)}}function Lg(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function cu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var p=s[u];xn=p,Ug(p,i)}Lg(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Og(i),i=i.sibling}function Og(i){switch(i.tag){case 0:case 11:case 15:cu(i),i.flags&2048&&so(9,i,i.return);break;case 3:cu(i);break;case 12:cu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,md(i)):cu(i);break;default:cu(i)}}function md(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var p=s[u];xn=p,Ug(p,i)}Lg(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:so(8,s,s.return),md(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,md(s));break;default:md(s)}i=i.sibling}}function Ug(i,s){for(;xn!==null;){var u=xn;switch(u.tag){case 0:case 11:case 15:so(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Pl(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,xn=p;else e:for(u=i;xn!==null;){p=xn;var w=p.sibling,E=p.return;if(qh(p),p===u){xn=null;break e}if(w!==null){w.return=E,xn=w;break e}xn=E}}}var I0={getCacheForType:function(i){var s=In(dn),u=s.data.get(i);return u===void 0&&(u=i(),s.data.set(i,u)),u},cacheSignal:function(){return In(dn).controller.signal}},R0=typeof WeakMap=="function"?WeakMap:Map,xt=0,Lt=null,lt=null,ct=0,At=0,Ar=null,qo=!1,Ua=!1,Gh=!1,bi=0,Wt=0,Ho=0,Os=0,Jh=0,kr=0,Ba=0,du=null,tr=null,Yh=!1,fu=0,Bg=0,Us=1/0,gd=null,Vo=null,gn=0,$o=null,Fa=null,co=0,Wh=0,Kh=null,Fg=null,hu=0,Xh=null;function Ir(){return(xt&2)!==0&&ct!==0?ct&-ct:K.T!==null?Rr():ym()}function jg(){if(kr===0)if((ct&536870912)===0||ft){var i=fl;fl<<=1,(fl&3932160)===0&&(fl=262144),kr=i}else kr=536870912;return i=Sr.current,i!==null&&(i.flags|=32),kr}function nr(i,s,u){(i===Lt&&(At===2||At===9)||i.cancelPendingCommit!==null)&&(ja(i,0),fo(i,ct,kr,!1)),ml(i,u),((xt&2)===0||i!==Lt)&&(i===Lt&&((xt&2)===0&&(Os|=u),Wt===4&&fo(i,ct,kr,!1)),Fi(i))}function zg(i,s,u){if((xt&6)!==0)throw Error(r(327));var p=!u&&(s&127)===0&&(s&i.expiredLanes)===0||pl(i,s),w=p?M0(i,s):Zh(i,s,!0),E=p;do{if(w===0){Ua&&!p&&fo(i,s,0,!1);break}else{if(u=i.current.alternate,E&&!Hg(u)){w=Zh(i,s,!1),E=!1;continue}if(w===2){if(E=s,i.errorRecoveryDisabledLanes&E)var R=0;else R=i.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){s=R;e:{var O=i;w=du;var Y=O.current.memoizedState.isDehydrated;if(Y&&(ja(O,R).flags|=256),R=Zh(O,R,!1),R!==2){if(Gh&&!Y){O.errorRecoveryDisabledLanes|=E,Os|=E,w=4;break e}E=tr,tr=w,E!==null&&(tr===null?tr=E:tr.push.apply(tr,E))}w=R}if(E=!1,w!==2)continue}}if(w===1){ja(i,0),fo(i,s,0,!0);break}e:{switch(p=i,E=w,E){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:fo(p,s,kr,!qo);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(w=fu+300-Fn(),10<w)){if(fo(p,s,kr,!qo),rc(p,0,!0)!==0)break e;co=s,p.timeoutHandle=sy(qg.bind(null,p,u,tr,gd,Yh,s,kr,Os,Ba,qo,E,"Throttled",-0,0),w);break e}qg(p,u,tr,gd,Yh,s,kr,Os,Ba,qo,E,null,-0,0)}}break}while(!0);Fi(i)}function qg(i,s,u,p,w,E,R,O,Y,ae,ye,we,ce,pe){if(i.timeoutHandle=-1,we=s.subtreeFlags,we&8192||(we&16785408)===16785408){we={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yi},Pg(s,E,we);var Me=(E&62914560)===E?fu-Fn():(E&4194048)===E?Bg-Fn():0;if(Me=Q0(we,Me),Me!==null){co=E,i.cancelPendingCommit=Me(Wg.bind(null,i,s,E,u,p,w,R,O,Y,ye,we,null,ce,pe)),fo(i,E,R,!ae);return}}Wg(i,s,E,u,p,w,R,O,Y)}function Hg(i){for(var s=i;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var w=u[p],E=w.getSnapshot;w=w.value;try{if(!Jt(E(),w))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fo(i,s,u,p){s&=~Jh,s&=~Os,i.suspendedLanes|=s,i.pingedLanes&=~s,p&&(i.warmLanes|=s),p=i.expirationTimes;for(var w=s;0<w;){var E=31-Tt(w),R=1<<E;p[E]=-1,w&=~R}u!==0&&ic(i,u,s)}function yd(){return(xt&6)===0?(vu(0),!1):!0}function Qh(){if(lt!==null){if(At===0)var i=lt.return;else i=lt,eo=Qe=null,ah(i),_a=null,_r=0,i=lt;for(;i!==null;)dd(i.alternate,i),i=i.return;lt=null}}function ja(i,s){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,z0(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),co=0,Qh(),Lt=i,lt=u=zr(i.current,null),ct=s,At=0,Ar=null,qo=!1,Ua=pl(i,s),Gh=!1,Ba=kr=Jh=Os=Ho=Wt=0,tr=du=null,Yh=!1,(s&8)!==0&&(s|=s&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=s;0<p;){var w=31-Tt(p),E=1<<w;s|=i[w],p&=~E}return bi=s,li(),u}function Vg(i,s){Ze=null,K.H=Fo,s===wa||s===Ol?(s=rg(),At=3):s===Bc?(s=rg(),At=4):At=s===Ql?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ar=s,lt===null&&(Wt=1,Xl(i,xr(s,i.current)))}function pu(){var i=Sr.current;return i===null?!0:(ct&4194048)===ct?Wr===null:(ct&62914560)===ct||(ct&536870912)!==0?i===Wr:!1}function $g(){var i=K.H;return K.H=Fo,i===null?Fo:i}function Gg(){var i=K.A;return K.A=I0,i}function vd(){Wt=4,qo||(ct&4194048)!==ct&&Sr.current!==null||(Ua=!0),(Ho&134217727)===0&&(Os&134217727)===0||Lt===null||fo(Lt,ct,kr,!1)}function Zh(i,s,u){var p=xt;xt|=2;var w=$g(),E=Gg();(Lt!==i||ct!==s)&&(gd=null,ja(i,s)),s=!1;var R=Wt;e:do try{if(At!==0&&lt!==null){var O=lt,Y=Ar;switch(At){case 8:Qh(),R=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(s=!0);var ae=At;if(At=0,Ar=null,za(i,O,Y,ae),u&&Ua){R=0;break e}break;default:ae=At,At=0,Ar=null,za(i,O,Y,ae)}}N0(),R=Wt;break}catch(ye){Vg(i,ye)}while(!0);return s&&i.shellSuspendCounter++,eo=Qe=null,xt=p,K.H=w,K.A=E,lt===null&&(Lt=null,ct=0,li()),R}function N0(){for(;lt!==null;)Jg(lt)}function M0(i,s){var u=xt;xt|=2;var p=$g(),w=Gg();Lt!==i||ct!==s?(gd=null,Us=Fn()+500,ja(i,s)):Ua=pl(i,s);e:do try{if(At!==0&&lt!==null){s=lt;var E=Ar;t:switch(At){case 1:At=0,Ar=null,za(i,s,E,1);break;case 2:case 9:if(ng(E)){At=0,Ar=null,Yg(s);break}s=function(){At!==2&&At!==9||Lt!==i||(At=7),Fi(i)},E.then(s,s);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:ng(E)?(At=0,Ar=null,Yg(s)):(At=0,Ar=null,za(i,s,E,7));break;case 5:var R=null;switch(lt.tag){case 26:R=lt.memoizedState;case 5:case 27:var O=lt;if(R?xy(R):O.stateNode.complete){At=0,Ar=null;var Y=O.sibling;if(Y!==null)lt=Y;else{var ae=O.return;ae!==null?(lt=ae,bd(ae)):lt=null}break t}}At=0,Ar=null,za(i,s,E,5);break;case 6:At=0,Ar=null,za(i,s,E,6);break;case 8:Qh(),Wt=6;break e;default:throw Error(r(462))}}D0();break}catch(ye){Vg(i,ye)}while(!0);return eo=Qe=null,K.H=p,K.A=w,xt=u,lt!==null?0:(Lt=null,ct=0,li(),Wt)}function D0(){for(;lt!==null&&!hs();)Jg(lt)}function Jg(i){var s=Sg(i.alternate,i,bi);i.memoizedProps=i.pendingProps,s===null?bd(i):lt=s}function Yg(i){var s=i,u=s.alternate;switch(s.tag){case 15:case 0:s=xg(u,s,s.pendingProps,s.type,void 0,ct);break;case 11:s=xg(u,s,s.pendingProps,s.type.render,s.ref,ct);break;case 5:ah(s);default:dd(u,s),s=lt=Xm(s,bi),s=Sg(u,s,bi)}i.memoizedProps=i.pendingProps,s===null?bd(i):lt=s}function za(i,s,u,p){eo=Qe=null,ah(s),_a=null,_r=0;var w=s.return;try{if(Rh(i,w,s,u,ct)){Wt=1,Xl(i,xr(u,i.current)),lt=null;return}}catch(E){if(w!==null)throw lt=w,E;Wt=1,Xl(i,xr(u,i.current)),lt=null;return}s.flags&32768?(ft||p===1?i=!0:Ua||(ct&536870912)!==0?i=!1:(qo=i=!0,(p===2||p===9||p===3||p===6)&&(p=Sr.current,p!==null&&p.tag===13&&(p.flags|=16384))),mu(s,i)):bd(s)}function bd(i){var s=i;do{if((s.flags&32768)!==0){mu(s,qo);return}i=s.return;var u=Eg(s.alternate,s,bi);if(u!==null){lt=u;return}if(s=s.sibling,s!==null){lt=s;return}lt=s=i}while(s!==null);Wt===0&&(Wt=5)}function mu(i,s){do{var u=su(i.alternate,i);if(u!==null){u.flags&=32767,lt=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(i=i.sibling,i!==null)){lt=i;return}lt=i=u}while(i!==null);Wt=6,lt=null}function Wg(i,s,u,p,w,E,R,O,Y){i.cancelPendingCommit=null;do gu();while(gn!==0);if((xt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(E=s.lanes|s.childLanes,E|=fa,e0(i,u,E,R,O,Y),i===Lt&&(lt=Lt=null,ct=0),Fa=s,$o=i,co=u,Wh=E,Kh=w,Fg=p,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,O0(je,function(){return rp(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||p){p=K.T,K.T=null,w=oe.p,oe.p=2,R=xt,xt|=4;try{A0(i,s,u)}finally{xt=R,oe.p=w,K.T=p}}gn=1,ep(),tp(),xd()}}function ep(){if(gn===1){gn=0;var i=$o,s=Fa,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=K.T,K.T=null;var p=oe.p;oe.p=2;var w=xt;xt|=4;try{Ng(s,i);var E=pp,R=Jm(i.containerInfo),O=E.focusedElem,Y=E.selectionRange;if(R!==O&&O&&O.ownerDocument&&Gm(O.ownerDocument.documentElement,O)){if(Y!==null&&Xf(O)){var ae=Y.start,ye=Y.end;if(ye===void 0&&(ye=ae),"selectionStart"in O)O.selectionStart=ae,O.selectionEnd=Math.min(ye,O.value.length);else{var we=O.ownerDocument||document,ce=we&&we.defaultView||window;if(ce.getSelection){var pe=ce.getSelection(),Me=O.textContent.length,qe=Math.min(Y.start,Me),Mt=Y.end===void 0?qe:Math.min(Y.end,Me);!pe.extend&&qe>Mt&&(R=Mt,Mt=qe,qe=R);var ne=$m(O,qe),Q=$m(O,Mt);if(ne&&Q&&(pe.rangeCount!==1||pe.anchorNode!==ne.node||pe.anchorOffset!==ne.offset||pe.focusNode!==Q.node||pe.focusOffset!==Q.offset)){var se=we.createRange();se.setStart(ne.node,ne.offset),pe.removeAllRanges(),qe>Mt?(pe.addRange(se),pe.extend(Q.node,Q.offset)):(se.setEnd(Q.node,Q.offset),pe.addRange(se))}}}}for(we=[],pe=O;pe=pe.parentNode;)pe.nodeType===1&&we.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<we.length;O++){var be=we[O];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Pd=!!_u,pp=_u=null}finally{xt=w,oe.p=p,K.T=u}}i.current=s,gn=2}}function tp(){if(gn===2){gn=0;var i=$o,s=Fa,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=K.T,K.T=null;var p=oe.p;oe.p=2;var w=xt;xt|=4;try{zh(i,s.alternate,s)}finally{xt=w,oe.p=p,K.T=u}}gn=3}}function xd(){if(gn===4||gn===3){gn=0,ta();var i=$o,s=Fa,u=co,p=Fg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?gn=5:(gn=0,Fa=$o=null,np(i,i.pendingLanes));var w=i.pendingLanes;if(w===0&&(Vo=null),Mf(u),s=s.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Cn,s,void 0,(s.current.flags&128)===128)}catch{}if(p!==null){s=K.T,w=oe.p,oe.p=2,K.T=null;try{for(var E=i.onRecoverableError,R=0;R<p.length;R++){var O=p[R];E(O.value,{componentStack:O.stack})}}finally{K.T=s,oe.p=w}}(co&3)!==0&&gu(),Fi(i),w=i.pendingLanes,(u&261930)!==0&&(w&42)!==0?i===Xh?hu++:(hu=0,Xh=i):hu=0,vu(0)}}function np(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Pl(s)))}function gu(){return ep(),tp(),xd(),rp()}function rp(){if(gn!==5)return!1;var i=$o,s=Wh;Wh=0;var u=Mf(co),p=K.T,w=oe.p;try{oe.p=32>u?32:u,K.T=null,u=Kh,Kh=null;var E=$o,R=co;if(gn=0,Fa=$o=null,co=0,(xt&6)!==0)throw Error(r(331));var O=xt;if(xt|=4,Og(E.current),Dg(E,E.current,R,u),xt=O,vu(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Cn,E)}catch{}return!0}finally{oe.p=w,K.T=p,np(i,s)}}function ip(i,s,u){s=xr(u,s),s=Ih(i.stateNode,s,2),i=fi(i,s,2),i!==null&&(ml(i,2),Fi(i))}function kt(i,s,u){if(i.tag===3)ip(i,i,u);else for(;s!==null;){if(s.tag===3){ip(s,i,u);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Vo===null||!Vo.has(p))){i=xr(u,i),u=Oi(2),p=fi(s,u,2),p!==null&&(id(u,p,s,i),ml(p,2),Fi(p));break}}s=s.return}}function op(i,s,u){var p=i.pingCache;if(p===null){p=i.pingCache=new R0;var w=new Set;p.set(s,w)}else w=p.get(s),w===void 0&&(w=new Set,p.set(s,w));w.has(u)||(Gh=!0,w.add(u),i=P0.bind(null,i,s,u),s.then(i,i))}function P0(i,s,u){var p=i.pingCache;p!==null&&p.delete(s),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Lt===i&&(ct&u)===u&&(Wt===4||Wt===3&&(ct&62914560)===ct&&300>Fn()-fu?(xt&2)===0&&ja(i,0):Jh|=u,Ba===ct&&(Ba=0)),Fi(i)}function yu(i,s){s===0&&(s=If()),i=Ni(i,s),i!==null&&(ml(i,s),Fi(i))}function wd(i){var s=i.memoizedState,u=0;s!==null&&(u=s.retryLane),yu(i,u)}function L0(i,s){var u=0;switch(i.tag){case 31:case 13:var p=i.stateNode,w=i.memoizedState;w!==null&&(u=w.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(s),yu(i,u)}function O0(i,s){return ki(i,s)}var qa=null,Bs=null,sp=!1,_d=!1,ap=!1,Go=0;function Fi(i){i!==Bs&&i.next===null&&(Bs===null?qa=Bs=i:Bs=Bs.next=i),_d=!0,sp||(sp=!0,B0())}function vu(i,s){if(!ap&&_d){ap=!0;do for(var u=!1,p=qa;p!==null;){if(i!==0){var w=p.pendingLanes;if(w===0)var E=0;else{var R=p.suspendedLanes,O=p.pingedLanes;E=(1<<31-Tt(42|i)+1)-1,E&=w&~(R&~O),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,Zg(p,E))}else E=ct,E=rc(p,p===Lt?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(E&3)===0||pl(p,E)||(u=!0,Zg(p,E));p=p.next}while(u);ap=!1}}function U0(){Kg()}function Kg(){_d=sp=!1;var i=0;Go!==0&&j0()&&(i=Go);for(var s=Fn(),u=null,p=qa;p!==null;){var w=p.next,E=Xg(p,s);E===0?(p.next=null,u===null?qa=w:u.next=w,w===null&&(Bs=u)):(u=p,(i!==0||(E&3)!==0)&&(_d=!0)),p=w}gn!==0&&gn!==5||vu(i),Go!==0&&(Go=0)}function Xg(i,s){for(var u=i.suspendedLanes,p=i.pingedLanes,w=i.expirationTimes,E=i.pendingLanes&-62914561;0<E;){var R=31-Tt(E),O=1<<R,Y=w[R];Y===-1?((O&u)===0||(O&p)!==0)&&(w[R]=Zv(O,s)):Y<=s&&(i.expiredLanes|=O),E&=~O}if(s=Lt,u=ct,u=rc(i,i===s?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,u===0||i===s&&(At===2||At===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&Bn(p),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||pl(i,u)){if(s=u&-u,s===i.callbackPriority)return s;switch(p!==null&&Bn(p),Mf(u)){case 2:case 8:u=ke;break;case 32:u=je;break;case 268435456:u=gt;break;default:u=je}return p=Qg.bind(null,i),u=ki(u,p),i.callbackPriority=s,i.callbackNode=u,s}return p!==null&&p!==null&&Bn(p),i.callbackPriority=2,i.callbackNode=null,2}function Qg(i,s){if(gn!==0&&gn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(gu()&&i.callbackNode!==u)return null;var p=ct;return p=rc(i,i===Lt?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(zg(i,p,s),Xg(i,Fn()),i.callbackNode!=null&&i.callbackNode===u?Qg.bind(null,i):null)}function Zg(i,s){if(gu())return null;zg(i,s,!0)}function B0(){ly(function(){(xt&6)!==0?ki(ve,U0):Kg()})}function Rr(){if(Go===0){var i=ba;i===0&&(i=nc,nc<<=1,(nc&261888)===0&&(nc=256)),Go=i}return Go}function ey(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:wl(""+i)}function ty(i,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,i.id&&u.setAttribute("form",i.id),s.parentNode.insertBefore(u,s),i=new FormData(i),u.parentNode.removeChild(u),i}function Fs(i,s,u,p,w){if(s==="submit"&&u&&u.stateNode===w){var E=ey((w[Gn]||null).action),R=p.submitter;R&&(s=(s=R[Gn]||null)?ey(s.formAction):R.getAttribute("formAction"),s!==null&&(E=s,R=null));var O=new yc("action","action",null,p,w);i.push({event:O,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Go!==0){var Y=R?ty(w,R):new FormData(w);Bo(u,{pending:!0,data:Y,method:w.method,action:E},null,Y)}}else typeof E=="function"&&(O.preventDefault(),Y=R?ty(w,R):new FormData(w),Bo(u,{pending:!0,data:Y,method:w.method,action:E},E,Y))},currentTarget:w}]})}}for(var Xe=0;Xe<Nc.length;Xe++){var lp=Nc[Xe],rr=lp.toLowerCase(),an=lp[0].toUpperCase()+lp.slice(1);Yn(rr,"on"+an)}Yn(br,"onAnimationEnd"),Yn(Il,"onAnimationIteration"),Yn(Ym,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(ca,"onTransitionRun"),Yn(Ic,"onTransitionStart"),Yn(Rc,"onTransitionCancel"),Yn(wt,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),Eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Eo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jo=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function ny(i,s){s=(s&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],w=p.event;p=p.listeners;e:{var E=void 0;if(s)for(var R=p.length-1;0<=R;R--){var O=p[R],Y=O.instance,ae=O.currentTarget;if(O=O.listener,Y!==E&&w.isPropagationStopped())break e;E=O,w.currentTarget=ae;try{E(w)}catch(ye){Mc(ye)}w.currentTarget=null,E=Y}else for(R=0;R<p.length;R++){if(O=p[R],Y=O.instance,ae=O.currentTarget,O=O.listener,Y!==E&&w.isPropagationStopped())break e;E=O,w.currentTarget=ae;try{E(w)}catch(ye){Mc(ye)}w.currentTarget=null,E=Y}}}}function ut(i,s){var u=s[sc];u===void 0&&(u=s[sc]=new Set);var p=i+"__bubble";u.has(p)||(Ed(s,i,2,!1),u.add(p))}function up(i,s,u){var p=0;s&&(p|=4),Ed(u,i,p,s)}var Sd="_reactListening"+Math.random().toString(36).slice(2);function cp(i){if(!i[Sd]){i[Sd]=!0,xm.forEach(function(u){u!=="selectionchange"&&(Jo.has(u)||up(u,!1,i),up(u,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Sd]||(s[Sd]=!0,up("selectionchange",!1,s))}}function Ed(i,s,u,p){switch(ky(s)){case 2:var w=eb;break;case 8:w=tb;break;default:w=_p}u=w.bind(null,s,u,i),w=void 0,!Ff||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(w=!0),p?w!==void 0?i.addEventListener(s,u,{capture:!0,passive:w}):i.addEventListener(s,u,!0):w!==void 0?i.addEventListener(s,u,{passive:w}):i.addEventListener(s,u,!1)}function dp(i,s,u,p,w){var E=p;if((s&1)===0&&(s&2)===0&&p!==null)e:for(;;){if(p===null)return;var R=p.tag;if(R===3||R===4){var O=p.stateNode.containerInfo;if(O===w)break;if(R===4)for(R=p.return;R!==null;){var Y=R.tag;if((Y===3||Y===4)&&R.stateNode.containerInfo===w)return;R=R.return}for(;O!==null;){if(R=ra(O),R===null)return;if(Y=R.tag,Y===5||Y===6||Y===26||Y===27){p=E=R;continue e}O=O.parentNode}}p=p.return}Rm(function(){var ae=E,ye=Uf(u),we=[];e:{var ce=Wm.get(i);if(ce!==void 0){var pe=yc,Me=i;switch(i){case"keypress":if(mc(u)===0)break e;case"keydown":case"keyup":pe=Ao;break;case"focusin":Me="focus",pe=bc;break;case"focusout":Me="blur",pe=bc;break;case"beforeblur":case"afterblur":pe=bc;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Mm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=u0;break;case br:case Il:case Ym:pe=Lm;break;case wt:pe=d0;break;case"scroll":case"scrollend":pe=s0;break;case"wheel":pe=wc;break;case"copy":case"cut":case"paste":pe=gr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Bm;break;case"toggle":case"beforetoggle":pe=f0}var qe=(s&4)!==0,Mt=!qe&&(i==="scroll"||i==="scrollend"),ne=qe?ce!==null?ce+"Capture":null:ce;qe=[];for(var Q=ae,se;Q!==null;){var be=Q;if(se=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||se===null||ne===null||(be=bs(Q,ne),be!=null&&qe.push(Nr(Q,be,se))),Mt)break;Q=Q.return}0<qe.length&&(ce=new pe(ce,Me,null,u,ye),we.push({event:ce,listeners:qe}))}}if((s&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",pe=i==="mouseout"||i==="pointerout",ce&&u!==Of&&(Me=u.relatedTarget||u.fromElement)&&(ra(Me)||Me[na]))break e;if((pe||ce)&&(ce=ye.window===ye?ye:(ce=ye.ownerDocument)?ce.defaultView||ce.parentWindow:window,pe?(Me=u.relatedTarget||u.toElement,pe=ae,Me=Me?ra(Me):null,Me!==null&&(Mt=a(Me),qe=Me.tag,Me!==Mt||qe!==5&&qe!==27&&qe!==6)&&(Me=null)):(pe=null,Me=ae),pe!==Me)){if(qe=vc,be="onMouseLeave",ne="onMouseEnter",Q="mouse",(i==="pointerout"||i==="pointerover")&&(qe=Bm,be="onPointerLeave",ne="onPointerEnter",Q="pointer"),Mt=pe==null?ce:yl(pe),se=Me==null?ce:yl(Me),ce=new qe(be,Q+"leave",pe,u,ye),ce.target=Mt,ce.relatedTarget=se,be=null,ra(ye)===ae&&(qe=new qe(ne,Q+"enter",Me,u,ye),qe.target=se,qe.relatedTarget=Mt,be=qe),Mt=be,pe&&Me)t:{for(qe=Td,ne=pe,Q=Me,se=0,be=ne;be;be=qe(be))se++;be=0;for(var Be=Q;Be;Be=qe(Be))be++;for(;0<se-be;)ne=qe(ne),se--;for(;0<be-se;)Q=qe(Q),be--;for(;se--;){if(ne===Q||Q!==null&&ne===Q.alternate){qe=ne;break t}ne=qe(ne),Q=qe(Q)}qe=null}else qe=null;pe!==null&&Vt(we,ce,pe,qe,!1),Me!==null&&Mt!==null&&Vt(we,Mt,Me,qe,!0)}}e:{if(ce=ae?yl(ae):window,pe=ce.nodeName&&ce.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ce.type==="file")var yt=Hm;else if(Gf(ce))if(Ss)yt=g0;else{yt=p0;var Pe=Ac}else pe=ce.nodeName,!pe||pe.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ae&&pc(ae.elementType)&&(yt=Hm):yt=m0;if(yt&&(yt=yt(i,ae))){Jf(we,yt,u,ye);break e}Pe&&Pe(i,ce,ae),i==="focusout"&&ae&&ce.type==="number"&&ae.memoizedProps.value!=null&&Pf(ce,"number",ce.value)}switch(Pe=ae?yl(ae):window,i){case"focusin":(Gf(Pe)||Pe.contentEditable==="true")&&(Z=Pe,ge=ae,he=null);break;case"focusout":he=ge=Z=null;break;case"mousedown":Ne=!0;break;case"contextmenu":case"mouseup":case"dragend":Ne=!1,Ke(we,u,ye);break;case"selectionchange":if(ua)break;case"keydown":case"keyup":Ke(we,u,ye)}var nt;if(_c)e:{switch(i){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else _s?Ec(i,u)&&(dt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(dt="onCompositionStart");dt&&(Vf&&u.locale!=="ko"&&(_s||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&_s&&(nt=Dt()):(To=ye,jf="value"in To?To.value:To.textContent,_s=!0)),Pe=xu(ae,dt),0<Pe.length&&(dt=new yr(dt,i,null,u,ye),we.push({event:dt,listeners:Pe}),nt?dt.data=nt:(nt=qm(u),nt!==null&&(dt.data=nt)))),(nt=Hf?vr(i,u):$f(i,u))&&(dt=xu(ae,"onBeforeInput"),0<dt.length&&(Pe=new yr("onBeforeInput","beforeinput",null,u,ye),we.push({event:Pe,listeners:dt}),Pe.data=nt)),Fs(we,i,ae,u,ye)}ny(we,s)})}function Nr(i,s,u){return{instance:i,listener:s,currentTarget:u}}function xu(i,s){for(var u=s+"Capture",p=[];i!==null;){var w=i,E=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||E===null||(w=bs(i,u),w!=null&&p.unshift(Nr(i,w,E)),w=bs(i,s),w!=null&&p.push(Nr(i,w,E))),i.tag===3)return p;i=i.return}return[]}function Td(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Vt(i,s,u,p,w){for(var E=s._reactName,R=[];u!==null&&u!==p;){var O=u,Y=O.alternate,ae=O.stateNode;if(O=O.tag,Y!==null&&Y===p)break;O!==5&&O!==26&&O!==27||ae===null||(Y=ae,w?(ae=bs(u,E),ae!=null&&R.unshift(Nr(u,ae,Y))):w||(ae=bs(u,E),ae!=null&&R.push(Nr(u,ae,Y)))),u=u.return}R.length!==0&&i.push({event:s,listeners:R})}var tn=/\r\n?/g,ry=/\u0000|\uFFFD/g;function iy(i){return(typeof i=="string"?i:""+i).replace(tn,`
`).replace(ry,"")}function oy(i,s){return s=iy(s),iy(i)===s}function Nt(i,s,u,p,w,E){switch(u){case"children":typeof p=="string"?s==="body"||s==="textarea"&&p===""||si(i,p):(typeof p=="number"||typeof p=="bigint")&&s!=="body"&&si(i,""+p);break;case"className":vl(i,"class",p);break;case"tabIndex":vl(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":vl(i,u,p);break;case"style":Cm(i,p,E);break;case"data":if(s!=="object"){vl(i,"data",p);break}case"src":case"href":if(p===""&&(s!=="a"||u!=="href")){i.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=wl(""+p),i.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(s!=="input"&&Nt(i,s,"name",w.name,w,null),Nt(i,s,"formEncType",w.formEncType,w,null),Nt(i,s,"formMethod",w.formMethod,w,null),Nt(i,s,"formTarget",w.formTarget,w,null)):(Nt(i,s,"encType",w.encType,w,null),Nt(i,s,"method",w.method,w,null),Nt(i,s,"target",w.target,w,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=wl(""+p),i.setAttribute(u,p);break;case"onClick":p!=null&&(i.onclick=Yi);break;case"onScroll":p!=null&&ut("scroll",i);break;case"onScrollEnd":p!=null&&ut("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(u=p.__html,u!=null){if(w.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}u=wl(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""+p):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":p===!0?i.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,p):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(u,p):i.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(u):i.setAttribute(u,p);break;case"popover":ut("beforetoggle",i),ut("toggle",i),ac(i,"popover",p);break;case"xlinkActuate":Ri(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ri(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ri(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ri(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ri(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ri(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ri(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ri(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ri(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":ac(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Am.get(u)||u,ac(i,u,p))}}function fp(i,s,u,p,w,E){switch(u){case"style":Cm(i,p,E);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(u=p.__html,u!=null){if(w.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof p=="string"?si(i,p):(typeof p=="number"||typeof p=="bigint")&&si(i,""+p);break;case"onScroll":p!=null&&ut("scroll",i);break;case"onScrollEnd":p!=null&&ut("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Yi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wm.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(w=u.endsWith("Capture"),s=u.slice(2,w?u.length-7:void 0),E=i[Gn]||null,E=E!=null?E[u]:null,typeof E=="function"&&i.removeEventListener(s,E,w),typeof p=="function")){typeof E!="function"&&E!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(s,p,w);break e}u in i?i[u]=p:p===!0?i.setAttribute(u,""):ac(i,u,p)}}}function Mn(i,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",i),ut("load",i);var p=!1,w=!1,E;for(E in u)if(u.hasOwnProperty(E)){var R=u[E];if(R!=null)switch(E){case"src":p=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Nt(i,s,E,R,u,null)}}w&&Nt(i,s,"srcSet",u.srcSet,u,null),p&&Nt(i,s,"src",u.src,u,null);return;case"input":ut("invalid",i);var O=E=R=w=null,Y=null,ae=null;for(p in u)if(u.hasOwnProperty(p)){var ye=u[p];if(ye!=null)switch(p){case"name":w=ye;break;case"type":R=ye;break;case"checked":Y=ye;break;case"defaultChecked":ae=ye;break;case"value":E=ye;break;case"defaultValue":O=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,s));break;default:Nt(i,s,p,ye,u,null)}}dc(i,E,O,Y,ae,R,w,!1);return;case"select":ut("invalid",i),p=R=E=null;for(w in u)if(u.hasOwnProperty(w)&&(O=u[w],O!=null))switch(w){case"value":E=O;break;case"defaultValue":R=O;break;case"multiple":p=O;default:Nt(i,s,w,O,u,null)}s=E,u=R,i.multiple=!!p,s!=null?ys(i,!!p,s,!1):u!=null&&ys(i,!!p,u,!0);return;case"textarea":ut("invalid",i),E=w=p=null;for(R in u)if(u.hasOwnProperty(R)&&(O=u[R],O!=null))switch(R){case"value":p=O;break;case"defaultValue":w=O;break;case"children":E=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:Nt(i,s,R,O,u,null)}hc(i,p,w,E);return;case"option":for(Y in u)if(u.hasOwnProperty(Y)&&(p=u[Y],p!=null))switch(Y){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Nt(i,s,Y,p,u,null)}return;case"dialog":ut("beforetoggle",i),ut("toggle",i),ut("cancel",i),ut("close",i);break;case"iframe":case"object":ut("load",i);break;case"video":case"audio":for(p=0;p<bu.length;p++)ut(bu[p],i);break;case"image":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"embed":case"source":case"link":ut("error",i),ut("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in u)if(u.hasOwnProperty(ae)&&(p=u[ae],p!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Nt(i,s,ae,p,u,null)}return;default:if(pc(s)){for(ye in u)u.hasOwnProperty(ye)&&(p=u[ye],p!==void 0&&fp(i,s,ye,p,u,void 0));return}}for(O in u)u.hasOwnProperty(O)&&(p=u[O],p!=null&&Nt(i,s,O,p,u,null))}function F0(i,s,u,p){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,E=null,R=null,O=null,Y=null,ae=null,ye=null;for(pe in u){var we=u[pe];if(u.hasOwnProperty(pe)&&we!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Y=we;default:p.hasOwnProperty(pe)||Nt(i,s,pe,null,p,we)}}for(var ce in p){var pe=p[ce];if(we=u[ce],p.hasOwnProperty(ce)&&(pe!=null||we!=null))switch(ce){case"type":E=pe;break;case"name":w=pe;break;case"checked":ae=pe;break;case"defaultChecked":ye=pe;break;case"value":R=pe;break;case"defaultValue":O=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,s));break;default:pe!==we&&Nt(i,s,ce,pe,p,we)}}cc(i,R,O,Y,ae,ye,E,w);return;case"select":pe=R=O=ce=null;for(E in u)if(Y=u[E],u.hasOwnProperty(E)&&Y!=null)switch(E){case"value":break;case"multiple":pe=Y;default:p.hasOwnProperty(E)||Nt(i,s,E,null,p,Y)}for(w in p)if(E=p[w],Y=u[w],p.hasOwnProperty(w)&&(E!=null||Y!=null))switch(w){case"value":ce=E;break;case"defaultValue":O=E;break;case"multiple":R=E;default:E!==Y&&Nt(i,s,w,E,p,Y)}s=O,u=R,p=pe,ce!=null?ys(i,!!u,ce,!1):!!p!=!!u&&(s!=null?ys(i,!!u,s,!0):ys(i,!!u,u?[]:"",!1));return;case"textarea":pe=ce=null;for(O in u)if(w=u[O],u.hasOwnProperty(O)&&w!=null&&!p.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Nt(i,s,O,null,p,w)}for(R in p)if(w=p[R],E=u[R],p.hasOwnProperty(R)&&(w!=null||E!=null))switch(R){case"value":ce=w;break;case"defaultValue":pe=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==E&&Nt(i,s,R,w,p,E)}fc(i,ce,pe);return;case"option":for(var Me in u)if(ce=u[Me],u.hasOwnProperty(Me)&&ce!=null&&!p.hasOwnProperty(Me))switch(Me){case"selected":i.selected=!1;break;default:Nt(i,s,Me,null,p,ce)}for(Y in p)if(ce=p[Y],pe=u[Y],p.hasOwnProperty(Y)&&ce!==pe&&(ce!=null||pe!=null))switch(Y){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Nt(i,s,Y,ce,p,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in u)ce=u[qe],u.hasOwnProperty(qe)&&ce!=null&&!p.hasOwnProperty(qe)&&Nt(i,s,qe,null,p,ce);for(ae in p)if(ce=p[ae],pe=u[ae],p.hasOwnProperty(ae)&&ce!==pe&&(ce!=null||pe!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,s));break;default:Nt(i,s,ae,ce,p,pe)}return;default:if(pc(s)){for(var Mt in u)ce=u[Mt],u.hasOwnProperty(Mt)&&ce!==void 0&&!p.hasOwnProperty(Mt)&&fp(i,s,Mt,void 0,p,ce);for(ye in p)ce=p[ye],pe=u[ye],!p.hasOwnProperty(ye)||ce===pe||ce===void 0&&pe===void 0||fp(i,s,ye,ce,p,pe);return}}for(var ne in u)ce=u[ne],u.hasOwnProperty(ne)&&ce!=null&&!p.hasOwnProperty(ne)&&Nt(i,s,ne,null,p,ce);for(we in p)ce=p[we],pe=u[we],!p.hasOwnProperty(we)||ce===pe||ce==null&&pe==null||Nt(i,s,we,ce,p,pe)}function hp(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wu(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var w=u[p],E=w.transferSize,R=w.initiatorType,O=w.duration;if(E&&O&&hp(R)){for(R=0,O=w.responseEnd,p+=1;p<u.length;p++){var Y=u[p],ae=Y.startTime;if(ae>O)break;var ye=Y.transferSize,we=Y.initiatorType;ye&&hp(we)&&(Y=Y.responseEnd,R+=ye*(Y<O?1:(O-ae)/(Y-ae)))}if(--p,s+=8*(E+R)/(w.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var _u=null,pp=null;function Su(i){return i.nodeType===9?i:i.ownerDocument}function Eu(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ir(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Yo(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mp=null;function j0(){var i=window.event;return i&&i.type==="popstate"?i===mp?!1:(mp=i,!0):(mp=null,!1)}var sy=typeof setTimeout=="function"?setTimeout:void 0,z0=typeof clearTimeout=="function"?clearTimeout:void 0,ay=typeof Promise=="function"?Promise:void 0,ly=typeof queueMicrotask=="function"?queueMicrotask:typeof ay<"u"?function(i){return ay.resolve(null).then(i).catch(ho)}:sy;function ho(i){setTimeout(function(){throw i})}function $e(i){return i==="head"}function gp(i,s){var u=s,p=0;do{var w=u.nextSibling;if(i.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"||u==="/&"){if(p===0){i.removeChild(w),Xa(s);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")Tu(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,Tu(u);for(var E=u.firstChild;E;){var R=E.nextSibling,O=E.nodeName;E[gl]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=R}}else u==="body"&&Tu(i.ownerDocument.body);u=w}while(u);Xa(s)}function Mr(i,s){var u=i;i=0;do{var p=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=p}while(u)}function Cd(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Cd(u),Df(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function q0(i,s,u,p){for(;i.nodeType===1;){var w=u;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[gl])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(E=i.getAttribute("rel"),E==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(E!==w.rel||i.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||i.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||i.getAttribute("title")!==(w.title==null?null:w.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(E=i.getAttribute("src"),(E!==(w.src==null?null:w.src)||i.getAttribute("type")!==(w.type==null?null:w.type)||i.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&E&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var E=w.name==null?null:""+w.name;if(w.type==="hidden"&&i.getAttribute("name")===E)return i}else return i;if(i=Qr(i.nextSibling),i===null)break}return null}function St(i,s,u){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Qr(i.nextSibling),i===null))return null;return i}function uy(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Qr(i.nextSibling),i===null))return null;return i}function Ad(i){return i.data==="$?"||i.data==="$~"}function Ha(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function H0(i,s){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||u.readyState!=="loading")s();else{var p=function(){s(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function Qr(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var yp=null;function cy(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(s===0)return Qr(i.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}i=i.nextSibling}return null}function dy(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return i;s--}else u!=="/$"&&u!=="/&"||s++}i=i.previousSibling}return null}function fy(i,s,u){switch(s=Su(u),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Tu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Df(i)}var Zr=new Map,hy=new Set;function kd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var po=oe.d;oe.d={f:V0,r:$0,D:vp,C:G0,L:J0,m:Y0,X:or,S:wn,M:W0};function V0(){var i=po.f(),s=yd();return i||s}function $0(i){var s=Gi(i);s!==null&&s.tag===5&&s.type==="form"?_h(s):po.r(i)}var Wo=typeof document>"u"?null:document;function py(i,s,u){var p=Wo;if(p&&typeof s=="string"&&s){var w=mr(s);w='link[rel="'+i+'"][href="'+w+'"]',typeof u=="string"&&(w+='[crossorigin="'+u+'"]'),hy.has(w)||(hy.add(w),i={rel:i,crossOrigin:u,href:s},p.querySelector(w)===null&&(s=p.createElement("link"),Mn(s,"link",i),bn(s),p.head.appendChild(s)))}}function vp(i){po.D(i),py("dns-prefetch",i,null)}function G0(i,s){po.C(i,s),py("preconnect",i,s)}function J0(i,s,u){po.L(i,s,u);var p=Wo;if(p&&i&&s){var w='link[rel="preload"][as="'+mr(s)+'"]';s==="image"&&u&&u.imageSrcSet?(w+='[imagesrcset="'+mr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(w+='[imagesizes="'+mr(u.imageSizes)+'"]')):w+='[href="'+mr(i)+'"]';var E=w;switch(s){case"style":E=Va(i);break;case"script":E=Ga(i)}Zr.has(E)||(i=y({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:i,as:s},u),Zr.set(E,i),p.querySelector(w)!==null||s==="style"&&p.querySelector($a(E))||s==="script"&&p.querySelector(Ja(E))||(s=p.createElement("link"),Mn(s,"link",i),bn(s),p.head.appendChild(s)))}}function Y0(i,s){po.m(i,s);var u=Wo;if(u&&i){var p=s&&typeof s.as=="string"?s.as:"script",w='link[rel="modulepreload"][as="'+mr(p)+'"][href="'+mr(i)+'"]',E=w;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Ga(i)}if(!Zr.has(E)&&(i=y({rel:"modulepreload",href:i},s),Zr.set(E,i),u.querySelector(w)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ja(E)))return}p=u.createElement("link"),Mn(p,"link",i),bn(p),u.head.appendChild(p)}}}function wn(i,s,u){po.S(i,s,u);var p=Wo;if(p&&i){var w=Ji(p).hoistableStyles,E=Va(i);s=s||"default";var R=w.get(E);if(!R){var O={loading:0,preload:null};if(R=p.querySelector($a(E)))O.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},u),(u=Zr.get(E))&&bp(i,u);var Y=R=p.createElement("link");bn(Y),Mn(Y,"link",i),Y._p=new Promise(function(ae,ye){Y.onload=ae,Y.onerror=ye}),Y.addEventListener("load",function(){O.loading|=1}),Y.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Id(R,s,p)}R={type:"stylesheet",instance:R,count:1,state:O},w.set(E,R)}}}function or(i,s){po.X(i,s);var u=Wo;if(u&&i){var p=Ji(u).hoistableScripts,w=Ga(i),E=p.get(w);E||(E=u.querySelector(Ja(w)),E||(i=y({src:i,async:!0},s),(s=Zr.get(w))&&Rd(i,s),E=u.createElement("script"),bn(E),Mn(E,"link",i),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(w,E))}}function W0(i,s){po.M(i,s);var u=Wo;if(u&&i){var p=Ji(u).hoistableScripts,w=Ga(i),E=p.get(w);E||(E=u.querySelector(Ja(w)),E||(i=y({src:i,async:!0,type:"module"},s),(s=Zr.get(w))&&Rd(i,s),E=u.createElement("script"),bn(E),Mn(E,"link",i),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(w,E))}}function my(i,s,u,p){var w=(w=Ie.current)?kd(w):null;if(!w)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Va(u.href),u=Ji(w).hoistableStyles,p=u.get(s),p||(p={type:"style",instance:null,count:0,state:null},u.set(s,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Va(u.href);var E=Ji(w).hoistableStyles,R=E.get(i);if(R||(w=w.ownerDocument||w,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(i,R),(E=w.querySelector($a(i)))&&!E._p&&(R.instance=E,R.state.loading=5),Zr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Zr.set(i,u),E||K0(w,i,u,R.state))),s&&p===null)throw Error(r(528,""));return R}if(s&&p!==null)throw Error(r(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ga(u),u=Ji(w).hoistableScripts,p=u.get(s),p||(p={type:"script",instance:null,count:0,state:null},u.set(s,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Va(i){return'href="'+mr(i)+'"'}function $a(i){return'link[rel="stylesheet"]['+i+"]"}function gy(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function K0(i,s,u,p){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?p.loading=1:(s=i.createElement("link"),p.preload=s,s.addEventListener("load",function(){return p.loading|=1}),s.addEventListener("error",function(){return p.loading|=2}),Mn(s,"link",u),bn(s),i.head.appendChild(s))}function Ga(i){return'[src="'+mr(i)+'"]'}function Ja(i){return"script[async]"+i}function yy(i,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var p=i.querySelector('style[data-href~="'+mr(u.href)+'"]');if(p)return s.instance=p,bn(p),p;var w=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),bn(p),Mn(p,"style",w),Id(p,u.precedence,i),s.instance=p;case"stylesheet":w=Va(u.href);var E=i.querySelector($a(w));if(E)return s.state.loading|=4,s.instance=E,bn(E),E;p=gy(u),(w=Zr.get(w))&&bp(p,w),E=(i.ownerDocument||i).createElement("link"),bn(E);var R=E;return R._p=new Promise(function(O,Y){R.onload=O,R.onerror=Y}),Mn(E,"link",p),s.state.loading|=4,Id(E,u.precedence,i),s.instance=E;case"script":return E=Ga(u.src),(w=i.querySelector(Ja(E)))?(s.instance=w,bn(w),w):(p=u,(w=Zr.get(E))&&(p=y({},u),Rd(p,w)),i=i.ownerDocument||i,w=i.createElement("script"),bn(w),Mn(w,"link",p),i.head.appendChild(w),s.instance=w);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(p=s.instance,s.state.loading|=4,Id(p,u.precedence,i));return s.instance}function Id(i,s,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=p.length?p[p.length-1]:null,E=w,R=0;R<p.length;R++){var O=p[R];if(O.dataset.precedence===s)E=O;else if(E!==w)break}E?E.parentNode.insertBefore(i,E.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(i,s.firstChild))}function bp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Rd(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Cu=null;function vy(i,s,u){if(Cu===null){var p=new Map,w=Cu=new Map;w.set(u,p)}else w=Cu,p=w.get(u),p||(p=new Map,w.set(u,p));if(p.has(i))return p;for(p.set(i,null),u=u.getElementsByTagName(i),w=0;w<u.length;w++){var E=u[w];if(!(E[gl]||E[An]||i==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var R=E.getAttribute(s)||"";R=i+R;var O=p.get(R);O?O.push(E):p.set(R,[E])}}return p}function by(i,s,u){i=i.ownerDocument||i,i.head.insertBefore(u,s==="title"?i.querySelector("head > title"):null)}function X0(i,s,u){if(u===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Ya(i,s,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var w=Va(p.href),E=s.querySelector($a(w));if(E){s=E._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Nd.bind(i),s.then(i,i)),u.state.loading|=4,u.instance=E,bn(E);return}E=s.ownerDocument||s,p=gy(p),(w=Zr.get(w))&&bp(p,w),E=E.createElement("link"),bn(E);var R=E;R._p=new Promise(function(O,Y){R.onload=O,R.onerror=Y}),Mn(E,"link",p),u.instance=E}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Nd.bind(i),s.addEventListener("load",u),s.addEventListener("error",u))}}var xp=0;function Q0(i,s){return i.stylesheets&&i.count===0&&Dd(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var p=setTimeout(function(){if(i.stylesheets&&Dd(i,i.stylesheets),i.unsuspend){var E=i.unsuspend;i.unsuspend=null,E()}},6e4+s);0<i.imgBytes&&xp===0&&(xp=62500*wu());var w=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Dd(i,i.stylesheets),i.unsuspend)){var E=i.unsuspend;i.unsuspend=null,E()}},(i.imgBytes>xp?50:800)+s);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(w)}}:null}function Nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Md=null;function Dd(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Md=new Map,s.forEach(wy,i),Md=null,Nd.call(i))}function wy(i,s){if(!(s.state.loading&4)){var u=Md.get(i);if(u)var p=u.get(null);else{u=new Map,Md.set(i,u);for(var w=i.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<w.length;E++){var R=w[E];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(u.set(R.dataset.precedence,R),p=R)}p&&u.set(null,p)}w=s.instance,R=w.getAttribute("data-precedence"),E=u.get(R)||p,E===p&&u.set(null,w),u.set(R,w),this.count++,p=Nd.bind(this),w.addEventListener("load",p),w.addEventListener("error",p),E?E.parentNode.insertBefore(w,E.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(w,i.firstChild)),s.state.loading|=4}}var Wa={$$typeof:D,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function Z0(i,s,u,p,w,E,R,O,Y){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rf(0),this.hiddenUpdates=Rf(null),this.identifierPrefix=p,this.onUncaughtError=w,this.onCaughtError=E,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function _y(i,s,u,p,w,E,R,O,Y,ae,ye,we){return i=new Z0(i,s,u,R,Y,ae,ye,we,O),s=1,E===!0&&(s|=24),E=kn(3,null,null,s),i.current=E,E.stateNode=i,s=ui(),s.refCount++,i.pooledCache=s,s.refCount++,E.memoizedState={element:p,isDehydrated:u,cache:s},Pi(E),i}function Sy(i){return i?(i=Xi,i):Xi}function Ey(i,s,u,p,w,E){w=Sy(w),p.context===null?p.context=w:p.pendingContext=w,p=Lo(s),p.payload={element:u},E=E===void 0?null:E,E!==null&&(p.callback=E),u=fi(i,p,s),u!==null&&(nr(u,i,s),Ul(u,i,s))}function Ty(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<s?u:s}}function wp(i,s){Ty(i,s),(i=i.alternate)&&Ty(i,s)}function Cy(i){if(i.tag===13||i.tag===31){var s=Ni(i,67108864);s!==null&&nr(s,i,67108864),wp(i,67108864)}}function Ay(i){if(i.tag===13||i.tag===31){var s=Ir();s=Nf(s);var u=Ni(i,s);u!==null&&nr(u,i,s),wp(i,s)}}var Pd=!0;function eb(i,s,u,p){var w=K.T;K.T=null;var E=oe.p;try{oe.p=2,_p(i,s,u,p)}finally{oe.p=E,K.T=w}}function tb(i,s,u,p){var w=K.T;K.T=null;var E=oe.p;try{oe.p=8,_p(i,s,u,p)}finally{oe.p=E,K.T=w}}function _p(i,s,u,p){if(Pd){var w=Sp(p);if(w===null)dp(i,s,p,Ld,u),Iy(i,p);else if(Ry(w,i,s,u,p))p.stopPropagation();else if(Iy(i,p),s&4&&-1<nb.indexOf(i)){for(;w!==null;){var E=Gi(w);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var R=ms(E.pendingLanes);if(R!==0){var O=E;for(O.pendingLanes|=2,O.entangledLanes|=2;R;){var Y=1<<31-Tt(R);O.entanglements[1]|=Y,R&=~Y}Fi(E),(xt&6)===0&&(Us=Fn()+500,vu(0))}}break;case 31:case 13:O=Ni(E,2),O!==null&&nr(O,E,2),yd(),wp(E,2)}if(E=Sp(p),E===null&&dp(i,s,p,Ld,u),E===w)break;w=E}w!==null&&p.stopPropagation()}else dp(i,s,p,null,u)}}function Sp(i){return i=Uf(i),Ep(i)}var Ld=null;function Ep(i){if(Ld=null,i=ra(i),i!==null){var s=a(i);if(s===null)i=null;else{var u=s.tag;if(u===13){if(i=l(s),i!==null)return i;i=null}else if(u===31){if(i=c(s),i!==null)return i;i=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Ld=i,null}function ky(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ps()){case ve:return 2;case ke:return 8;case je:case it:return 32;case gt:return 268435456;default:return 32}default:return 32}}var Tp=!1,Ko=null,Xo=null,Qo=null,Au=new Map,ku=new Map,Zo=[],nb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Iy(i,s){switch(i){case"focusin":case"focusout":Ko=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":Au.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(s.pointerId)}}function js(i,s,u,p,w,E){return i===null||i.nativeEvent!==E?(i={blockedOn:s,domEventName:u,eventSystemFlags:p,nativeEvent:E,targetContainers:[w]},s!==null&&(s=Gi(s),s!==null&&Cy(s)),i):(i.eventSystemFlags|=p,s=i.targetContainers,w!==null&&s.indexOf(w)===-1&&s.push(w),i)}function Ry(i,s,u,p,w){switch(s){case"focusin":return Ko=js(Ko,i,s,u,p,w),!0;case"dragenter":return Xo=js(Xo,i,s,u,p,w),!0;case"mouseover":return Qo=js(Qo,i,s,u,p,w),!0;case"pointerover":var E=w.pointerId;return Au.set(E,js(Au.get(E)||null,i,s,u,p,w)),!0;case"gotpointercapture":return E=w.pointerId,ku.set(E,js(ku.get(E)||null,i,s,u,p,w)),!0}return!1}function Cp(i){var s=ra(i.target);if(s!==null){var u=a(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){i.blockedOn=s,vm(i.priority,function(){Ay(u)});return}}else if(s===31){if(s=c(u),s!==null){i.blockedOn=s,vm(i.priority,function(){Ay(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Od(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var u=Sp(i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Of=p,u.target.dispatchEvent(p),Of=null}else return s=Gi(u),s!==null&&Cy(s),i.blockedOn=u,!1;s.shift()}return!0}function Ny(i,s,u){Od(i)&&u.delete(s)}function rb(){Tp=!1,Ko!==null&&Od(Ko)&&(Ko=null),Xo!==null&&Od(Xo)&&(Xo=null),Qo!==null&&Od(Qo)&&(Qo=null),Au.forEach(Ny),ku.forEach(Ny)}function Ka(i,s){i.blockedOn===s&&(i.blockedOn=null,Tp||(Tp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rb)))}var Ud=null;function My(i){Ud!==i&&(Ud=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ud===i&&(Ud=null);for(var s=0;s<i.length;s+=3){var u=i[s],p=i[s+1],w=i[s+2];if(typeof p!="function"){if(Ep(p||u)===null)continue;break}var E=Gi(u);E!==null&&(i.splice(s,3),s-=3,Bo(E,{pending:!0,data:w,method:u.method,action:p},p,w))}}))}function Xa(i){function s(Y){return Ka(Y,i)}Ko!==null&&Ka(Ko,i),Xo!==null&&Ka(Xo,i),Qo!==null&&Ka(Qo,i),Au.forEach(s),ku.forEach(s);for(var u=0;u<Zo.length;u++){var p=Zo[u];p.blockedOn===i&&(p.blockedOn=null)}for(;0<Zo.length&&(u=Zo[0],u.blockedOn===null);)Cp(u),u.blockedOn===null&&Zo.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var w=u[p],E=u[p+1],R=w[Gn]||null;if(typeof E=="function")R||My(u);else if(R){var O=null;if(E&&E.hasAttribute("formAction")){if(w=E,R=E[Gn]||null)O=R.formAction;else if(Ep(w)!==null)continue}else O=R.action;typeof O=="function"?u[p+1]=O:(u.splice(p,3),p-=3),My(u)}}}function Vn(){function i(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(R){return w=R})},focusReset:"manual",scroll:"manual"})}function s(){w!==null&&(w(),w=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,w=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),w!==null&&(w(),w=null)}}}function Iu(i){this._internalRoot=i}Bd.prototype.render=Iu.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var u=s.current,p=Ir();Ey(u,p,i,s,null,null)},Bd.prototype.unmount=Iu.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Ey(i.current,2,null,i,null,null),yd(),s[na]=null}};function Bd(i){this._internalRoot=i}Bd.prototype.unstable_scheduleHydration=function(i){if(i){var s=ym();i={blockedOn:null,target:i,priority:s};for(var u=0;u<Zo.length&&s!==0&&s<Zo[u].priority;u++);Zo.splice(u,0,i),u===0&&Cp(i)}};var Dy=e.version;if(Dy!=="19.2.0")throw Error(r(527,Dy,"19.2.0"));oe.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(s),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var ib={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{Cn=Fd.inject(ib),rn=Fd}catch{}}return kp.createRoot=function(i,s){if(!o(i))throw Error(r(299));var u=!1,p="",w=Ah,E=kh,R=vg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onUncaughtError!==void 0&&(w=s.onUncaughtError),s.onCaughtError!==void 0&&(E=s.onCaughtError),s.onRecoverableError!==void 0&&(R=s.onRecoverableError)),s=_y(i,1,!1,null,null,u,p,null,w,E,R,Vn),i[na]=s.current,cp(i),new Iu(s)},kp.hydrateRoot=function(i,s,u){if(!o(i))throw Error(r(299));var p=!1,w="",E=Ah,R=kh,O=vg,Y=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(O=u.onRecoverableError),u.formState!==void 0&&(Y=u.formState)),s=_y(i,1,!0,s,u??null,p,w,Y,E,R,O,Vn),s.context=Sy(null),u=s.current,p=Ir(),p=Nf(p),w=Lo(p),w.callback=null,fi(u,w,p),u=p,s.current.lanes=u,ml(s,u),Fi(s),i[na]=s.current,cp(i),new Bd(s)},kp.version="19.2.0",kp}var n_;function oI(){if(n_)return lb.exports;n_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lb.exports=iI(),lb.exports}var sI=oI();const aI=sl(sI);var Ft=(t=>(t.Owner="Owner",t.Admin="Admin",t.PropertyAdvisor="Property Advisor",t.Client="Client",t))(Ft||{}),ti=(t=>(t.Facebook="Facebook",t.LinkedIn="LinkedIn",t.Instagram="Instagram",t.YouTube="YouTube",t.Twitter="Twitter",t))(ti||{}),Sn=(t=>(t.Image="Image",t.Video="Video",t.Text="Text",t))(Sn||{}),$n=(t=>(t.Draft="Draft",t.PendingApproval="Pending Approval",t.Approved="Approved",t.Published="Published",t))($n||{}),Lu=(t=>(t.Staff="staff",t.Client="client",t))(Lu||{}),rs=(t=>(t.AgencyAgreement="Agency Agreement",t.SellerToAgent="Seller-to-Agent Agreement",t.BuyerToAgent="Buyer-to-Agent Agreement",t.AgentToAgent="Agent-to-Agent Referral",t))(rs||{}),ni=(t=>(t.Draft="Draft",t.Signed="Signed",t.Expired="Expired",t))(ni||{}),zi=(t=>(t.AI="ai",t.MapAssistant="map-assistant",t.Listings="listings",t.Mortgage="mortgage",t.Vault="vault",t))(zi||{});const B1=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),lI=({users:t,selectedUser:e,onSelectUser:n})=>{const[r,o]=M.useState(!1),a=M.useRef(null);M.useEffect(()=>{const c=h=>{a.current&&!a.current.contains(h.target)&&o(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const l=c=>{n(c),o(!1)};return b.jsxs("div",{className:"relative",ref:a,children:[b.jsxs("button",{onClick:()=>o(!r),className:"flex items-center gap-3 p-2 rounded-lg bg-brand-primary hover:bg-brand-accent transition-colors",children:[b.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-gold text-brand-primary flex items-center justify-center font-bold",children:e.avatar}),b.jsxs("div",{className:"text-left hidden md:block",children:[b.jsx("p",{className:"font-bold text-sm text-brand-text",children:e.name}),b.jsx("p",{className:"text-xs text-brand-light",children:e.role})]}),b.jsx(B1,{className:"w-5 h-5 text-brand-light hidden md:block"})]}),r&&b.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-brand-secondary rounded-lg shadow-xl border border-brand-accent z-20",children:b.jsxs("div",{className:"p-2",children:[b.jsx("p",{className:"text-xs text-brand-light px-2 py-1",children:"Switch User Profile"}),t.map(c=>b.jsxs("button",{onClick:()=>l(c),className:`w-full text-left flex items-center gap-3 p-2 rounded-md hover:bg-brand-accent transition-colors ${e.id===c.id?"bg-brand-accent":""}`,children:[b.jsx("div",{className:"w-7 h-7 rounded-full bg-brand-gold text-brand-primary flex items-center justify-center font-bold text-sm shrink-0",children:c.avatar}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-semibold text-brand-text",children:c.name}),b.jsx("p",{className:"text-xs text-brand-light",children:c.role})]})]},c.id))]})})]})},jd=[{id:"user-1",name:"Zaid Al-Husseini",role:Ft.Owner,avatar:"ZA"},{id:"user-2",name:"Fatima Al-Fahim",role:Ft.Admin,avatar:"FA"},{id:"user-3",name:"Liam Chen",role:Ft.PropertyAdvisor,avatar:"LC"},{id:"user-4",name:"Sophia Petrova",role:Ft.PropertyAdvisor,avatar:"SP"},{id:"user-5",name:"David Rodriguez",role:Ft.PropertyAdvisor,avatar:"DR"},{id:"client-user-1",name:"Arjun Gupta",role:Ft.Client,avatar:"AG"},{id:"client-user-2",name:"Elena Voronina",role:Ft.Client,avatar:"EV"}],r_=[{id:"client-1",name:"Aarav Sharma",email:"aarav.sharma@email.com",phone:"+91 98765 43210",propertyAdvisorId:"user-3"},{id:"client-2",name:"Chen Wei",email:"chen.wei@email.com",phone:"+86 139 1234 5678",propertyAdvisorId:"user-3"},{id:"client-3",name:"Isabella Rossi",email:"isabella.rossi@email.com",phone:"+39 0123 456789",propertyAdvisorId:"user-4"},{id:"client-4",name:"Oliver Smith",email:"oliver.smith@email.com",phone:"+44 20 7946 0958",propertyAdvisorId:"user-4"},{id:"client-5",name:"Mohammed Al-Jamil",email:"mohammed.aljamil@email.com",phone:"+966 50 123 4567",propertyAdvisorId:"user-5"},{id:"client-6",name:"Anastasia Ivanova",email:"anastasia.i@email.com",phone:"+7 916 123-45-67",propertyAdvisorId:"user-3"},{id:"client-7",name:"John Miller",email:"john.miller@email.com",phone:"+1 212-555-0199",propertyAdvisorId:"user-5"},{id:"client-8",name:"Priya Patel",email:"priya.patel@email.com",phone:"+91 99887 76655",propertyAdvisorId:"user-4"}],fb=(t,e)=>{const n=new Date;n.setDate(n.getDate()+t*7);const r=n.getDay(),o=e-r;return n.setDate(n.getDate()+o),n.setHours(10,0,0,0),n.toISOString()},F1=[{id:"proj-001",name:"Masaar",developer:"Arada",assets:[{id:"asset-1a",name:"Masaar Forest Community.jpg",type:"image",url:"https://images.unsplash.com/photo-1580587771525-78b9dba3b914?q=80&w=1974&auto=format&fit=crop"},{id:"asset-1b",name:"Masaar Modern Villa Exterior.jpg",type:"image",url:"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=2070&auto=format&fit=crop"},{id:"asset-1c",name:"Masaar Interior Living Room.jpg",type:"image",url:"https://images.unsplash.com/photo-1600585152220-90363fe7e115?q=80&w=2070&auto=format&fit=crop"},{id:"asset-1d",name:"Masaar Project Brochure.pdf",type:"brochure",url:"#"},{id:"asset-1e",name:"Masaar Factsheet.txt",type:"factsheet",url:"#",content:`
          Project: Masaar
          Developer: Arada
          Location: Al Suyoh, Sharjah
          Property Types: 2-5 Bedroom Townhouses and Villas
          Key Features: 50,000 trees, forest community, green spine, jogging tracks, family-friendly, smart home technology.
          Target Audience: Families, nature lovers, investors looking for high ROI in Sharjah's growing market.
          Starting Price: AED 1.2M
          Status: Off-plan, various phases under construction.
        `}]},{id:"proj-002",name:"Dubai Hills Estate",developer:"Emaar Properties",assets:[{id:"asset-2a",name:"Dubai Hills Golf Course View.jpg",type:"image",url:"https://images.unsplash.com/photo-1593955872339-16a125974033?q=80&w=2070&auto=format&fit=crop"},{id:"asset-2b",name:"Dubai Hills Mansion Exterior.jpg",type:"image",url:"https://images.unsplash.com/photo-1542324218-b2a549a174d8?q=80&w=2070&auto=format&fit=crop"},{id:"asset-2c",name:"Dubai Hills Mall.jpg",type:"image",url:"https://images.unsplash.com/photo-1593693397649-7ca203228a49?q=80&w=2070&auto=format&fit=crop"},{id:"asset-2d",name:"DHE Project Brochure.pdf",type:"brochure",url:"#"},{id:"asset-2e",name:"DHE Factsheet.txt",type:"factsheet",url:"#",content:`
          Project: Dubai Hills Estate
          Developer: Emaar Properties
          Location: Along Al Khail Road, Dubai
          Property Types: Apartments, Townhouses, Villas, Mansions
          Key Features: 18-hole championship golf course, Dubai Hills Mall, central park, premium healthcare and education facilities.
          Target Audience: High-net-worth individuals, families, golf enthusiasts, luxury market investors.
          Starting Price: AED 900K (Apartments), AED 2.5M (Villas)
          Status: Mixed-use development, multiple phases completed and off-plan.
        `}]},{id:"proj-003",name:"DAMAC Lagoons",developer:"DAMAC Properties",assets:[{id:"asset-3a",name:"Lagoon Crystal Waters.jpg",type:"image",url:"https://images.unsplash.com/photo-1526786221463-74a322488af7?q=80&w=2070&auto=format&fit=crop"},{id:"asset-3b",name:"Santorini Style Villas.jpg",type:"image",url:"https://images.unsplash.com/photo-1534293992196-9f21f64b6389?q=80&w=2070&auto=format&fit=crop"},{id:"asset-3c",name:"Community Clubhouse Night.jpg",type:"image",url:"https://images.unsplash.com/photo-1518224523916-29a32c43145d?q=80&w=1964&auto=format&fit=crop"},{id:"asset-3d",name:"Lagoons Brochure.pdf",type:"brochure",url:"#"},{id:"asset-3e",name:"Lagoons Factsheet.txt",type:"factsheet",url:"#",content:`
            Project: DAMAC Lagoons
            Developer: DAMAC Properties
            Location: Near DAMAC Hills, Dubai
            Property Types: 3-7 Bedroom Townhouses and Villas
            Key Features: Mediterranean-themed clusters (Santorini, Costa Brava, Venice), swimmable lagoons, water-based activities, premium lifestyle amenities.
            Target Audience: Families, young professionals, investors seeking unique community living.
            Starting Price: AED 1.5M
            Status: Off-plan, under construction.
          `}]}],i_=[{id:"post-1",projectId:"proj-001",platform:ti.Facebook,postType:Sn.Image,status:$n.Approved,scheduledDate:fb(0,3),createdBy:"user-3",approvedBy:"user-2",postText:"Discover the tranquility of Masaar by Arada, a lush forest community in the heart of Sharjah.  Live among 50,000 trees and enjoy a lifestyle connected to nature. Your dream family home awaits! #Masaar #Arada #SharjahRealEstate #FamilyHome",imageUrl:"https://images.unsplash.com/photo-1580587771525-78b9dba3b914?q=80&w=1974&auto=format&fit=crop"},{id:"post-2",projectId:"proj-002",platform:ti.LinkedIn,postType:Sn.Image,status:$n.PendingApproval,scheduledDate:fb(0,5),createdBy:"user-4",postText:"Investment insight: Dubai Hills Estate by Emaar continues to show strong capital appreciation. With its premium amenities, including a championship golf course and the new Dubai Hills Mall, it represents a prime opportunity for investors targeting the luxury segment. Contact us for a detailed market analysis.",imageUrl:"https://images.unsplash.com/photo-1593955872339-16a125974033?q=80&w=2070&auto=format&fit=crop"},{id:"post-3",projectId:"proj-003",platform:ti.Facebook,postType:Sn.Image,status:$n.Draft,scheduledDate:fb(1,1),createdBy:"user-5",postText:"",imageUrl:""}],Ip=()=>{const t=new Date;t.setDate(t.getDate()-Math.floor(Math.random()*365));const e=new Date(t);e.setFullYear(t.getFullYear()+1);const r=new Date>e?ni.Expired:ni.Signed;return{startDate:t.toISOString(),expiryDate:e.toISOString(),status:Math.random()>.2?r:ni.Draft}},o_=[{id:"contract-1",partyName:"Emaar Properties",type:rs.AgencyAgreement,...Ip(),documentUrl:"https://docs.google.com/document/d/example1",createdBy:jd[2].id},{id:"contract-2",partyName:"John Smith (Seller)",type:rs.SellerToAgent,...Ip(),documentUrl:"https://docs.google.com/document/d/example2",createdBy:jd[3].id},{id:"contract-3",partyName:"Jane Doe (Buyer)",type:rs.BuyerToAgent,...Ip(),documentUrl:"https://docs.google.com/document/d/example3",createdBy:jd[4].id},{id:"contract-4",partyName:"Prime Properties LLC",type:rs.AgentToAgent,...Ip(),documentUrl:"https://docs.google.com/document/d/example4",createdBy:jd[2].id},{id:"contract-5",partyName:"DAMAC Properties",type:rs.AgencyAgreement,...Ip(),documentUrl:"https://docs.google.com/document/d/example5",createdBy:jd[3].id},{id:"contract-6",partyName:"Michael Brown (Buyer)",type:rs.BuyerToAgent,status:ni.Draft,startDate:new Date().toISOString(),expiryDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),documentUrl:"https://docs.google.com/document/d/example6",createdBy:jd[4].id}],s_=[{id:"listing-1",clientId:"client-user-1",title:"Luxury Marina View Apartment",address:"Dubai Marina, Dubai",price:35e5,bedrooms:2,bathrooms:3,sqft:1450,imageUrl:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=2070&auto=format&fit=crop",status:"For Sale"},{id:"listing-2",clientId:"client-user-2",title:"Spacious Villa in Arabian Ranches",address:"Arabian Ranches, Dubai",price:62e5,bedrooms:4,bathrooms:5,sqft:3200,imageUrl:"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=2070&auto=format&fit=crop",status:"For Sale"},{id:"listing-3",clientId:"client-user-1",title:"Penthouse with Panoramic Views",address:"Downtown Dubai, Dubai",price:15e6,bedrooms:3,bathrooms:4,sqft:2800,imageUrl:"https://images.unsplash.com/photo-1600585152220-90363fe7e115?q=80&w=2070&auto=format&fit=crop",status:"Sold"}],a_=[{id:"doc-1",clientId:"client-user-1",name:"Passport Copy - A. Gupta.pdf",type:"Passport",uploadDate:new Date("2023-11-15T10:00:00Z").toISOString(),url:"#"},{id:"doc-2",clientId:"client-user-1",name:"SPA - Dubai Hills Estate Villa 12.pdf",type:"SPA",uploadDate:new Date("2024-01-20T14:30:00Z").toISOString(),url:"#"},{id:"doc-3",clientId:"client-user-1",name:"KYC Documents (Utility Bill).pdf",type:"KYC",uploadDate:new Date("2023-11-15T10:05:00Z").toISOString(),url:"#"},{id:"doc-4",clientId:"client-user-2",name:"Title Deed - Marina Apt 4501.pdf",type:"Title Deed",uploadDate:new Date("2022-08-01T09:00:00Z").toISOString(),url:"#"}],Ys=t=>new Promise(e=>setTimeout(e,t)),uI=()=>{const t=localStorage.getItem("clients");return t?JSON.parse(t):(localStorage.setItem("clients",JSON.stringify(r_)),r_)},cI=async t=>{await Ys(500);const e=uI(),n={id:`client_${Date.now()}`,...t},r=[n,...e];return localStorage.setItem("clients",JSON.stringify(r)),n},ew=()=>{const t=localStorage.getItem("posts");return t?JSON.parse(t):(localStorage.setItem("posts",JSON.stringify(i_)),i_)},j1=async()=>(await Ys(300),ew()),dI=async t=>{await Ys(500);const e=ew(),n={id:`post_${Date.now()}`,...t},r=[...e,n];return localStorage.setItem("posts",JSON.stringify(r)),n},z1=async(t,e)=>{await Ys(300);let n=ew(),r;const o=n.map(a=>a.id===t?(r={...a,...e},r):a);if(localStorage.setItem("posts",JSON.stringify(o)),!r)throw new Error("Post not found");return r},q1=()=>{const t=localStorage.getItem("contracts");return t?JSON.parse(t):(localStorage.setItem("contracts",JSON.stringify(o_)),o_)},fI=async()=>(await Ys(700),q1()),hI=async t=>{await Ys(600);const e=q1(),n={id:`contract_${Date.now()}`,...t},r=[n,...e];return localStorage.setItem("contracts",JSON.stringify(r)),n},pI=()=>{const t=localStorage.getItem("listings");return t?JSON.parse(t):(localStorage.setItem("listings",JSON.stringify(s_)),s_)},mI=async t=>(await Ys(600),pI().filter(n=>n.clientId===t)),H1=()=>{const t=localStorage.getItem("vault");return t?JSON.parse(t):(localStorage.setItem("vault",JSON.stringify(a_)),a_)},gI=async t=>(await Ys(400),H1().filter(n=>n.clientId===t)),yI=async t=>{await Ys(800);const e=H1(),n={id:`doc_${Date.now()}`,...t},r=[n,...e];return localStorage.setItem("vault",JSON.stringify(r)),n},vI=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),bI=({currentUser:t})=>{const[e,n]=M.useState(0);return M.useEffect(()=>{if(t.role===Ft.Client){n(0);return}const r=async()=>{try{const l=(await j1()).filter(c=>c.status===$n.PendingApproval).length;n(l)}catch(a){console.error("Failed to fetch notifications",a)}};r();const o=setInterval(r,3e4);return()=>clearInterval(o)},[t.role]),t.role===Ft.Client?null:b.jsx("div",{className:"relative",children:b.jsxs("button",{className:"p-2 rounded-full hover:bg-brand-accent transition-colors",children:[b.jsx(vI,{className:"w-6 h-6 text-brand-light"}),e>0&&b.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:e})]})})},Yp=t=>b.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:[b.jsx("path",{fillRule:"evenodd",d:"M9.315 7.585a.75.75 0 01.348 1.28L6.67 11.25l3.001.011a.75.75 0 01.524 1.282l-6.75 6.75a.75.75 0 01-1.06-1.06l6.75-6.75L6.14 8.86a.75.75 0 01.28-1.348l3.002.083zm5.043.083a.75.75 0 01.28 1.348l-2.528 2.386l3.001.011a.75.75 0 01.524 1.282l-6.75 6.75a.75.75 0 01-1.06-1.06l6.75-6.75L12.64 8.86a.75.75 0 01.28-1.348l3.002.083z",clipRule:"evenodd"}),b.jsx("path",{d:"M12.75 3.75a.75.75 0 01.75.75v3a.75.75 0 01-1.5 0v-3a.75.75 0 01.75-.75zM16.5 7.5a.75.75 0 00-1.06-1.06l-2.122 2.121a.75.75 0 001.061 1.061l2.12-2.122zM20.25 12a.75.75 0 01-.75.75h-3a.75.75 0 010-1.5h3a.75.75 0 01.75.75z"})]}),xI=({userId:t,userRole:e,onClose:n,onChangePassword:r})=>{const[o,a]=M.useState(null),[l,c]=M.useState(!0),[h,f]=M.useState(!1),[g,y]=M.useState({email:"",phone:"",name:"",firstName:"",lastName:"",location:""});M.useEffect(()=>{_()},[t]);const _=async()=>{try{const C="https://diuorqykbykouqnlxcxe.supabase.co",k="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw",I=await(await fetch(`${C}/rest/v1/users?id=eq.${t}&select=*`,{headers:{apikey:k,Authorization:`Bearer ${k}`}})).json();if(console.log("User profile data:",I),I&&I.length>0&&I[0]){const L={firstName:I[0].first_name||"",lastName:I[0].last_name||"",email:I[0].email||"",phone:I[0].phone||"",location:I[0].location||"",name:I[0].name||"",role:I[0].role||""};console.log("Mapped user data:",L),a(L),y(L)}else console.error("No profile data found for user:",t)}catch(C){console.error("Error loading profile:",C)}finally{c(!1)}},T=async()=>{try{c(!0);const C="https://diuorqykbykouqnlxcxe.supabase.co",k="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw",N={updated_at:new Date().toISOString()};e==="Client"?(N.first_name=g.firstName,N.last_name=g.lastName,N.phone=g.phone,N.location=g.location):(N.name=g.name,N.phone=g.phone),await fetch(`${C}/rest/v1/users?id=eq.${t}`,{method:"PATCH",headers:{apikey:k,Authorization:`Bearer ${k}`,"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify(N)}),await _(),f(!1)}catch(C){console.error("Error saving profile:",C)}finally{c(!1)}};return l&&!o?b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[b.jsx("p",{className:"text-center text-gray-600",children:"Loading profile..."}),b.jsxs("p",{className:"text-center text-xs text-gray-400 mt-2",children:["User ID: ",t]})]})}):!l&&!o?b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[b.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Profile Not Found"}),b.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load profile data. This might be a temporary issue."}),b.jsx("button",{onClick:n,className:"w-full bg-brand-gold text-brand-primary font-bold py-2 px-4 rounded-lg hover:bg-yellow-400 transition-colors",children:"Close"})]})}):b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"My Profile"}),b.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),h?b.jsxs("div",{className:"space-y-4",children:[e==="Client"?b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),b.jsx("input",{type:"text",value:g.firstName||"",onChange:C=>y({...g,firstName:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),b.jsx("input",{type:"text",value:g.lastName||"",onChange:C=>y({...g,lastName:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),b.jsx("input",{type:"tel",value:g.phone||"",onChange:C=>y({...g,phone:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),b.jsx("input",{type:"text",value:g.location||"",onChange:C=>y({...g,location:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none"})]})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),b.jsx("input",{type:"text",value:g.name||"",onChange:C=>y({...g,name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),b.jsx("input",{type:"tel",value:g.phone||"",onChange:C=>y({...g,phone:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none"})]})]}),b.jsxs("div",{className:"flex gap-2 pt-4",children:[b.jsx("button",{onClick:T,disabled:l,className:"flex-1 bg-brand-gold text-brand-primary font-bold py-2 px-4 rounded-lg hover:bg-yellow-400 transition-colors disabled:opacity-50",children:l?"Saving...":"Save"}),b.jsx("button",{onClick:()=>{f(!1),y(o||{email:""})},className:"flex-1 bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}):b.jsxs("div",{className:"space-y-4",children:[e==="Client"?b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),b.jsxs("p",{className:"text-lg",children:[o==null?void 0:o.firstName," ",o==null?void 0:o.lastName]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),b.jsx("p",{className:"text-lg",children:o==null?void 0:o.email})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),b.jsx("p",{className:"text-lg",children:o==null?void 0:o.phone})]}),(o==null?void 0:o.location)&&b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Location"}),b.jsx("p",{className:"text-lg",children:o.location})]})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),b.jsx("p",{className:"text-lg",children:o==null?void 0:o.name})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),b.jsx("p",{className:"text-lg",children:o==null?void 0:o.email})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),b.jsx("p",{className:"text-lg",children:(o==null?void 0:o.phone)||"Not set"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),b.jsx("p",{className:"text-lg",children:o==null?void 0:o.role})]})]}),b.jsxs("div",{className:"flex gap-2 pt-4",children:[b.jsx("button",{onClick:()=>f(!0),className:"flex-1 bg-brand-gold text-brand-primary font-bold py-2 px-4 rounded-lg hover:bg-yellow-400 transition-colors",children:"Edit Profile"}),b.jsx("button",{onClick:r,className:"flex-1 bg-brand-primary text-white font-bold py-2 px-4 rounded-lg hover:bg-brand-secondary transition-colors",children:"Change Password"})]})]})]})})},V1=({userId:t,email:e,isForced:n=!1,onSuccess:r,onCancel:o})=>{const[a,l]=M.useState(""),[c,h]=M.useState(""),[f,g]=M.useState(!1),[y,_]=M.useState(""),T=async C=>{if(C.preventDefault(),_(""),a.length<8){_("Password must be at least 8 characters long");return}if(a!==c){_("Passwords do not match");return}g(!0);try{const I=await fetch("https://diuorqykbykouqnlxcxe.supabase.co/functions/v1/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw"},body:JSON.stringify({userId:t,newPassword:a})}),L=await I.json();if(!I.ok)throw new Error(L.error||"Failed to change password");r()}catch(k){_(k.message||"An error occurred")}finally{g(!1)}};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-primary via-brand-primary to-brand-secondary flex items-center justify-center p-4",children:b.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h1",{className:"text-3xl font-bold text-brand-primary mb-2",children:n?"Change Your Password":"Update Password"}),b.jsx("p",{className:"text-gray-600",children:n?"For security, please change your temporary password":"Enter your new password below"})]}),y&&b.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:b.jsx("p",{className:"text-sm",children:y})}),b.jsxs("form",{onSubmit:T,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),b.jsx("input",{type:"password",id:"newPassword",value:a,onChange:C=>l(C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Enter new password",required:!0,minLength:8}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 8 characters"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),b.jsx("input",{type:"password",id:"confirmPassword",value:c,onChange:C=>h(C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Confirm new password",required:!0,minLength:8})]}),b.jsx("button",{type:"submit",disabled:f,className:"w-full bg-brand-gold text-brand-primary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Updating...":"Change Password"})]}),!n&&o&&b.jsx("button",{type:"button",onClick:o,className:"w-full mt-4 text-gray-600 hover:text-gray-800 transition-colors text-sm font-medium",children:"Cancel"})]})})};var ix=function(t,e){return ix=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},ix(t,e)};function $1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ix(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var lv=function(){return lv=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lv.apply(this,arguments)};function vf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function G1(t,e,n,r){var o=arguments.length,a=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(l=t[c])&&(a=(o<3?l(a):o>3?l(e,n,a):l(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function J1(t,e){return function(n,r){e(n,r,t)}}function Y1(t,e,n,r,o,a){function l(I){if(I!==void 0&&typeof I!="function")throw new TypeError("Function expected");return I}for(var c=r.kind,h=c==="getter"?"get":c==="setter"?"set":"value",f=!e&&t?r.static?t:t.prototype:null,g=e||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),y,_=!1,T=n.length-1;T>=0;T--){var C={};for(var k in r)C[k]=k==="access"?{}:r[k];for(var k in r.access)C.access[k]=r.access[k];C.addInitializer=function(I){if(_)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(I||null))};var N=(0,n[T])(c==="accessor"?{get:g.get,set:g.set}:g[h],C);if(c==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(y=l(N.get))&&(g.get=y),(y=l(N.set))&&(g.set=y),(y=l(N.init))&&o.unshift(y)}else(y=l(N))&&(c==="field"?o.unshift(y):g[h]=y)}f&&Object.defineProperty(f,r.name,g),_=!0}function W1(t,e,n){for(var r=arguments.length>2,o=0;o<e.length;o++)n=r?e[o].call(t,n):e[o].call(t);return r?n:void 0}function K1(t){return typeof t=="symbol"?t:"".concat(t)}function X1(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function Q1(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Le(t,e,n,r){function o(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function c(g){try{f(r.next(g))}catch(y){l(y)}}function h(g){try{f(r.throw(g))}catch(y){l(y)}}function f(g){g.done?a(g.value):o(g.value).then(c,h)}f((r=r.apply(t,e||[])).next())})}function Z1(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=c(0),l.throw=c(1),l.return=c(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(g){return h([f,g])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(n=0)),n;)try{if(r=1,o&&(a=f[0]&2?o.return:f[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,f[1])).done)return a;switch(o=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,o=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(g){f=[6,g],o=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var kv=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function eT(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&kv(e,t,n)}function uv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tw(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,a=[],l;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return a}function tT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(tw(arguments[e]));return t}function nT(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var a=arguments[e],l=0,c=a.length;l<c;l++,o++)r[o]=a[l];return r}function rT(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function df(t){return this instanceof df?(this.v=t,this):new df(t)}function iT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(T){return function(C){return Promise.resolve(C).then(T,y)}}function c(T,C){r[T]&&(o[T]=function(k){return new Promise(function(N,I){a.push([T,k,N,I])>1||h(T,k)})},C&&(o[T]=C(o[T])))}function h(T,C){try{f(r[T](C))}catch(k){_(a[0][3],k)}}function f(T){T.value instanceof df?Promise.resolve(T.value.v).then(g,y):_(a[0][2],T)}function g(T){h("next",T)}function y(T){h("throw",T)}function _(T,C){T(C),a.shift(),a.length&&h(a[0][0],a[0][1])}}function oT(t){var e,n;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,a){e[o]=t[o]?function(l){return(n=!n)?{value:df(t[o](l)),done:!1}:a?a(l):l}:a}}function sT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof uv=="function"?uv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(l){return new Promise(function(c,h){l=t[a](l),o(c,h,l.done,l.value)})}}function o(a,l,c,h){Promise.resolve(h).then(function(f){a({value:f,done:c})},l)}}function aT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var wI=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},ox=function(t){return ox=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},ox(t)};function lT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=ox(t),r=0;r<n.length;r++)n[r]!=="default"&&kv(e,t,n[r]);return wI(e,t),e}function uT(t){return t&&t.__esModule?t:{default:t}}function cT(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function dT(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n}function fT(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function hT(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var _I=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function pT(t){function e(a){t.error=t.hasError?new _I(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,r=0;function o(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(o);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(o,function(l){return e(l),o()})}else r|=1}catch(l){e(l)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}function mT(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,o,a,l){return r?e?".jsx":".js":o&&(!a||!l)?n:o+a+"."+l.toLowerCase()+"js"}):t}const SI={__extends:$1,__assign:lv,__rest:vf,__decorate:G1,__param:J1,__esDecorate:Y1,__runInitializers:W1,__propKey:K1,__setFunctionName:X1,__metadata:Q1,__awaiter:Le,__generator:Z1,__createBinding:kv,__exportStar:eT,__values:uv,__read:tw,__spread:tT,__spreadArrays:nT,__spreadArray:rT,__await:df,__asyncGenerator:iT,__asyncDelegator:oT,__asyncValues:sT,__makeTemplateObject:aT,__importStar:lT,__importDefault:uT,__classPrivateFieldGet:cT,__classPrivateFieldSet:dT,__classPrivateFieldIn:fT,__addDisposableResource:hT,__disposeResources:pT,__rewriteRelativeImportExtension:mT},EI=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:hT,get __assign(){return lv},__asyncDelegator:oT,__asyncGenerator:iT,__asyncValues:sT,__await:df,__awaiter:Le,__classPrivateFieldGet:cT,__classPrivateFieldIn:fT,__classPrivateFieldSet:dT,__createBinding:kv,__decorate:G1,__disposeResources:pT,__esDecorate:Y1,__exportStar:eT,__extends:$1,__generator:Z1,__importDefault:uT,__importStar:lT,__makeTemplateObject:aT,__metadata:Q1,__param:J1,__propKey:K1,__read:tw,__rest:vf,__rewriteRelativeImportExtension:mT,__runInitializers:W1,__setFunctionName:X1,__spread:tT,__spreadArray:rT,__spreadArrays:nT,__values:uv,default:SI},Symbol.toStringTag,{value:"Module"})),TI="modulepreload",CI=function(t){return"/"+t},l_={},bf=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let l=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=l(n.map(f=>{if(f=CI(f),f in l_)return;l_[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":TI,g||(_.as="script"),_.crossOrigin="",_.href=f,h&&_.setAttribute("nonce",h),document.head.appendChild(_),g)return new Promise((T,C)=>{_.addEventListener("load",T),_.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return o.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},AI=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bf(async()=>{const{default:r}=await Promise.resolve().then(()=>Zu);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class nw extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class u_ extends nw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class c_ extends nw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class d_ extends nw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var sx;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(sx||(sx={}));class kI{constructor(e,{headers:n={},customFetch:r,region:o=sx.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=AI(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Le(this,arguments,void 0,function*(n,r={}){var o;try{const{headers:a,method:l,body:c,signal:h}=r;let f={},{region:g}=r;g||(g=this.region);const y=new URL(`${this.url}/${n}`);g&&g!=="any"&&(f["x-region"]=g,y.searchParams.set("forceFunctionRegion",g));let _;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",_=c):typeof c=="string"?(f["Content-Type"]="text/plain",_=c):typeof FormData<"u"&&c instanceof FormData?_=c:(f["Content-Type"]="application/json",_=JSON.stringify(c)):_=c;const T=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:_,signal:h}).catch(I=>{throw I.name==="AbortError"?I:new u_(I)}),C=T.headers.get("x-relay-error");if(C&&C==="true")throw new c_(T);if(!T.ok)throw new d_(T);let k=((o=T.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),N;return k==="application/json"?N=yield T.json():k==="application/octet-stream"||k==="application/pdf"?N=yield T.blob():k==="text/event-stream"?N=T:k==="multipart/form-data"?N=yield T.formData():N=yield T.text(),{data:N,error:null,response:T}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new u_(a)}:{data:null,error:a,response:a instanceof d_||a instanceof c_?a.context:void 0}}})}}var ar={};const xf=O1(EI);var Ly={},Oy={},Uy={},By={},Fy={},II=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ff=II();const RI=ff.fetch,gT=ff.fetch.bind(ff),yT=ff.Headers,NI=ff.Request,MI=ff.Response,Zu=Object.freeze(Object.defineProperty({__proto__:null,Headers:yT,Request:NI,Response:MI,default:gT,fetch:RI},Symbol.toStringTag,{value:"Module"})),DI=O1(Zu);var jy={},f_;function vT(){if(f_)return jy;f_=1,Object.defineProperty(jy,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return jy.default=t,jy}var h_;function bT(){if(h_)return Fy;h_=1,Object.defineProperty(Fy,"__esModule",{value:!0});const t=xf,e=t.__importDefault(DI),n=t.__importDefault(vT());class r{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let h=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,y,_,T;let C=null,k=null,N=null,I=f.status,L=f.statusText;if(f.ok){if(this.method!=="HEAD"){const j=await f.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?k=j:k=JSON.parse(j))}const $=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),G=(_=f.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");$&&G&&G.length>1&&(N=parseInt(G[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(C={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,N=null,I=406,L="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const $=await f.text();try{C=JSON.parse($),Array.isArray(C)&&f.status===404&&(k=[],C=null,I=200,L="OK")}catch{f.status===404&&$===""?(I=204,L="No Content"):C={message:$}}if(C&&this.isMaybeSingle&&(!((T=C==null?void 0:C.details)===null||T===void 0)&&T.includes("0 rows"))&&(C=null,I=200,L="OK"),C&&this.shouldThrowOnError)throw new n.default(C)}return{error:C,data:k,count:N,status:I,statusText:L}});return this.shouldThrowOnError||(h=h.catch(f=>{var g,y,_;return{error:{message:`${(g=f==null?void 0:f.name)!==null&&g!==void 0?g:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(y=f==null?void 0:f.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(_=f==null?void 0:f.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,l)}returns(){return this}overrideTypes(){return this}}return Fy.default=r,Fy}var p_;function xT(){if(p_)return By;p_=1,Object.defineProperty(By,"__esModule",{value:!0});const e=xf.__importDefault(bT());class n extends e.default{select(o){let a=!1;const l=(o??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:l,foreignTable:c,referencedTable:h=c}={}){const f=h?`${h}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${o}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${o}`),this}range(o,a,{foreignTable:l,referencedTable:c=l}={}){const h=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(f,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:l=!1,buffers:c=!1,wal:h=!1,format:f="text"}={}){var g;const y=[o?"analyze":null,a?"verbose":null,l?"settings":null,c?"buffers":null,h?"wal":null].filter(Boolean).join("|"),_=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${_}"; options=${y};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return By.default=n,By}var m_;function rw(){if(m_)return Uy;m_=1,Object.defineProperty(Uy,"__esModule",{value:!0});const e=xf.__importDefault(xT()),n=new RegExp("[,()]");class r extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const c=Array.from(new Set(l)).map(h=>typeof h=="string"&&n.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:c,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const g=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${f}fts${g}.${l}`),this}match(a){return Object.entries(a).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(a,l,c){return this.url.searchParams.append(a,`not.${l}.${c}`),this}or(a,{foreignTable:l,referencedTable:c=l}={}){const h=c?`${c}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,l,c){return this.url.searchParams.append(a,`${l}.${c}`),this}}return Uy.default=r,Uy}var g_;function wT(){if(g_)return Oy;g_=1,Object.defineProperty(Oy,"__esModule",{value:!0});const e=xf.__importDefault(rw());class n{constructor(o,{headers:a={},schema:l,fetch:c}){this.url=o,this.headers=new Headers(a),this.schema=l,this.fetch=c}select(o,a){const{head:l=!1,count:c}=a??{},h=l?"HEAD":"GET";let f=!1;const g=(o??"*").split("").map(y=>/\s/.test(y)&&!f?"":(y==='"'&&(f=!f),y)).join("");return this.url.searchParams.set("select",g),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:l=!0}={}){var c;const h="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const f=o.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(f.length>0){const g=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:l=!1,count:c,defaultToNull:h=!0}={}){var f;const g="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((_,T)=>_.concat(Object.keys(T)),[]);if(y.length>0){const _=[...new Set(y)].map(T=>`"${T}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(o,{count:a}={}){var l;const c="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:o}={}){var a;const l="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Oy.default=n,Oy}var y_;function PI(){if(y_)return Ly;y_=1,Object.defineProperty(Ly,"__esModule",{value:!0});const t=xf,e=t.__importDefault(wT()),n=t.__importDefault(rw());class r{constructor(a,{headers:l={},schema:c,fetch:h}={}){this.url=a,this.headers=new Headers(l),this.schemaName=c,this.fetch=h}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:c=!1,get:h=!1,count:f}={}){var g;let y;const _=new URL(`${this.url}/rpc/${a}`);let T;c||h?(y=c?"HEAD":"GET",Object.entries(l).filter(([k,N])=>N!==void 0).map(([k,N])=>[k,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([k,N])=>{_.searchParams.append(k,N)})):(y="POST",T=l);const C=new Headers(this.headers);return f&&C.set("Prefer",`count=${f}`),new n.default({method:y,url:_,headers:C,schema:this.schemaName,body:T,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Ly.default=r,Ly}var v_;function LI(){if(v_)return ar;v_=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.PostgrestError=ar.PostgrestBuilder=ar.PostgrestTransformBuilder=ar.PostgrestFilterBuilder=ar.PostgrestQueryBuilder=ar.PostgrestClient=void 0;const t=xf,e=t.__importDefault(PI());ar.PostgrestClient=e.default;const n=t.__importDefault(wT());ar.PostgrestQueryBuilder=n.default;const r=t.__importDefault(rw());ar.PostgrestFilterBuilder=r.default;const o=t.__importDefault(xT());ar.PostgrestTransformBuilder=o.default;const a=t.__importDefault(bT());ar.PostgrestBuilder=a.default;const l=t.__importDefault(vT());return ar.PostgrestError=l.default,ar.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:a.default,PostgrestError:l.default},ar}var _T=LI();const ST=sl(_T),OI=L1({__proto__:null,default:ST},[_T]),{PostgrestClient:UI,PostgrestQueryBuilder:L7,PostgrestFilterBuilder:O7,PostgrestTransformBuilder:U7,PostgrestBuilder:B7,PostgrestError:F7}=ST||OI;class BI{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const FI="2.78.0",jI=`realtime-js/${FI}`,zI="1.0.0",ax=1e4,qI=1e3,HI=100;var Fp;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Fp||(Fp={}));var Dn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Dn||(Dn={}));var bo;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(bo||(bo={}));var lx;(function(t){t.websocket="websocket"})(lx||(lx={}));var Ou;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ou||(Ou={}));class VI{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),a=n.getUint8(2);let l=this.HEADER_LENGTH+2;const c=r.decode(e.slice(l,l+o));l=l+o;const h=r.decode(e.slice(l,l+a));l=l+a;const f=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:h,payload:f}}}class ET{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $t;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})($t||($t={}));const b_=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=$I(l,t,e,o),a),{}):{}},$I=(t,e,n,r)=>{const o=e.find(c=>c.name===t),a=o==null?void 0:o.type,l=n[t];return a&&!r.includes(a)?TT(a,l):ux(l)},TT=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return WI(e,n)}switch(t){case $t.bool:return GI(e);case $t.float4:case $t.float8:case $t.int2:case $t.int4:case $t.int8:case $t.numeric:case $t.oid:return JI(e);case $t.json:case $t.jsonb:return YI(e);case $t.timestamp:return KI(e);case $t.abstime:case $t.date:case $t.daterange:case $t.int4range:case $t.int8range:case $t.money:case $t.reltime:case $t.text:case $t.time:case $t.timestamptz:case $t.timetz:case $t.tsrange:case $t.tstzrange:return ux(e);default:return ux(e)}},ux=t=>t,GI=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},JI=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},YI=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},WI=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>TT(e,c))}return t},KI=t=>typeof t=="string"?t.replace(" ","T"):t,CT=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class hb{constructor(e,n,r={},o=ax){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var x_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(x_||(x_={}));class jp{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jp.syncState(this.state,o,a,l),this.pendingDiffs.forEach(h=>{this.state=jp.syncDiff(this.state,h,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},o=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=jp.syncDiff(this.state,o,a,l),c())}),this.onJoin((o,a,l)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:l})}),this.onLeave((o,a,l)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const a=this.cloneDeep(e),l=this.transformState(n),c={},h={};return this.map(a,(f,g)=>{l[f]||(h[f]=g)}),this.map(l,(f,g)=>{const y=a[f];if(y){const _=g.map(N=>N.presence_ref),T=y.map(N=>N.presence_ref),C=g.filter(N=>T.indexOf(N.presence_ref)<0),k=y.filter(N=>_.indexOf(N.presence_ref)<0);C.length>0&&(c[f]=C),k.length>0&&(h[f]=k)}else c[f]=g}),this.syncDiff(a,{joins:c,leaves:h},r,o)}static syncDiff(e,n,r,o){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(c,h)=>{var f;const g=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(h),g.length>0){const y=e[c].map(T=>T.presence_ref),_=g.filter(T=>y.indexOf(T.presence_ref)<0);e[c].unshift(..._)}r(c,g,h)}),this.map(l,(c,h)=>{let f=e[c];if(!f)return;const g=h.map(y=>y.presence_ref);f=f.filter(y=>g.indexOf(y.presence_ref)<0),e[c]=f,o(c,f,h),f.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var w_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(w_||(w_={}));var zp;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zp||(zp={}));var qs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qs||(qs={}));class iw{constructor(e,n={config:{}},r){var o,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hb(this,bo.join,this.params,this.timeout),this.rejoinTimer=new ET(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bo.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new jp(this),this.broadcastEndpointURL=CT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Dn.closed){const{config:{broadcast:l,presence:c,private:h}}=this.params,f=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&o!==void 0?o:[],g=!!this.bindings[zp.PRESENCE]&&this.bindings[zp.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,y={},_={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:g}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(qs.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(qs.CLOSED)),this.updateJoinPayload(Object.assign({config:_},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var C;if(this.socket.setAuth(),T===void 0){e==null||e(qs.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,N=(C=k==null?void 0:k.length)!==null&&C!==void 0?C:0,I=[];for(let L=0;L<N;L++){const D=k[L],{filter:{event:$,schema:G,table:j,filter:q}}=D,ee=T&&T[L];if(ee&&ee.event===$&&ee.schema===G&&ee.table===j&&ee.filter===q)I.push(Object.assign(Object.assign({},D),{id:ee.id}));else{this.unsubscribe(),this.state=Dn.errored,e==null||e(qs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,e&&e(qs.SUBSCRIBED);return}}).receive("error",T=>{this.state=Dn.errored,e==null||e(qs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(qs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Dn.joined&&e===zp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var o;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);if(c.status===202)return{success:!0};let h=c.statusText;try{const f=await c.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=f.body)===null||o===void 0?void 0:o.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,h;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Dn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new hb(this,bo.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Dn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,a=setTimeout(()=>o.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new hb(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>HI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,a;const l=e.toLocaleLowerCase(),{close:c,error:h,leave:f,join:g}=bo;if(r&&[c,h,f,g].indexOf(l)>=0&&r!==this._joinRef())return;let _=this._onMessage(l,n,r);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(T=>{var C,k,N;return((C=T.filter)===null||C===void 0?void 0:C.event)==="*"||((N=(k=T.filter)===null||k===void 0?void 0:k.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===l}).map(T=>T.callback(_,r)):(a=this.bindings[l])===null||a===void 0||a.filter(T=>{var C,k,N,I,L,D;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in T){const $=T.id,G=(C=T.filter)===null||C===void 0?void 0:C.event;return $&&((k=n.ids)===null||k===void 0?void 0:k.includes($))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const $=(L=(I=T==null?void 0:T.filter)===null||I===void 0?void 0:I.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return $==="*"||$===((D=n==null?void 0:n.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===l}).map(T=>{if(typeof _=="object"&&"ids"in _){const C=_.data,{schema:k,table:N,commit_timestamp:I,type:L,errors:D}=C;_=Object.assign(Object.assign({},{schema:k,table:N,commit_timestamp:I,eventType:L,new:{},old:{},errors:D}),this._getPayloadRecords(C))}T.callback(_,r)})}_isClosed(){return this.state===Dn.closed}_isJoined(){return this.state===Dn.joined}_isJoining(){return this.state===Dn.joining}_isLeaving(){return this.state===Dn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),a={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&iw.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(bo.close,{},e)}_onError(e){this._on(bo.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=b_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=b_(e.columns,e.old_record)),n}}const pb=()=>{},zy={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XI=[1e3,2e3,5e3,1e4],QI=1e4,ZI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class eR{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ax,this.transport=null,this.heartbeatIntervalMs=zy.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pb,this.ref=0,this.reconnectTimer=null,this.logger=pb,this.conn=null,this.sendBuffer=[],this.serializer=new VI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...l)=>bf(async()=>{const{default:c}=await Promise.resolve().then(()=>Zu);return{default:c}},void 0).then(({default:c})=>c(...l)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${lx.websocket}`,this.httpEndpoint=CT(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=BI.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zI}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Fp.connecting:return Ou.Connecting;case Fp.open:return Ou.Open;case Fp.closing:return Ou.Closing;default:return Ou.Closed}}isConnected(){return this.connectionState()===Ou.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===r);if(o)return o;{const a=new iw(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:o,ref:a}=e,l=()=>{this.encode(e,c=>{var h;(h=this.conn)===null||h===void 0||h.send(c)})};this.log("push",`${n} ${r} (${a})`,o),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(qI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},zy.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:a,ref:l}=n,c=l?`(${l})`:"",h=a.status||"";this.log("receive",`${h} ${r} ${o} ${c}`.trim(),a),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(o,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(bo.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([ZI],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:jI};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(bo.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ET(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zy.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,a,l,c,h,f,g;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ax,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:zy.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:pb,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(y=>XI[y-1]||QI),this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:((y,_)=>_(JSON.stringify(y))),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ow extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ln(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class tR extends ow{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cx extends ow{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const sw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bf(async()=>{const{default:r}=await Promise.resolve().then(()=>Zu);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},nR=()=>Le(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield bf(()=>Promise.resolve().then(()=>Zu),void 0)).Response:Response}),dx=t=>{if(Array.isArray(t))return t.map(n=>dx(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=dx(r)}),e},rR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mb=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},iR=(t,e,n)=>Le(void 0,void 0,void 0,function*(){const r=yield nR();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const a=t.status||500,l=(o==null?void 0:o.statusCode)||a+"";e(new tR(mb(o),a,l))}).catch(o=>{e(new cx(mb(o),o))}):e(new cx(mb(t),t))}),oR=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?o:(rR(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function om(t,e,n,r,o,a){return Le(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(n,oR(e,r,o,a)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>iR(h,c,r))})})}function Wp(t,e,n,r){return Le(this,void 0,void 0,function*(){return om(t,"GET",e,n,r)})}function vo(t,e,n,r,o){return Le(this,void 0,void 0,function*(){return om(t,"POST",e,r,o,n)})}function fx(t,e,n,r,o){return Le(this,void 0,void 0,function*(){return om(t,"PUT",e,r,o,n)})}function sR(t,e,n,r){return Le(this,void 0,void 0,function*(){return om(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function aw(t,e,n,r,o){return Le(this,void 0,void 0,function*(){return om(t,"DELETE",e,r,o,n)})}class aR{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Le(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ln(e))return{data:null,error:e};throw e}})}}var AT;class lR{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[AT]="BlobDownloadBuilder",this.promise=null}asStream(){return new aR(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Le(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ln(e))return{data:null,error:e};throw e}})}}AT=Symbol.toStringTag;const uR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},__={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cR{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=sw(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return Le(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},__),o);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=r,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,h&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o!=null&&o.headers&&(c=Object.assign(Object.assign({},c),o.headers));const f=this._removeEmptyFolders(n),g=this._getFinalPath(f),y=yield(e=="PUT"?fx:vo)(this.fetch,`${this.url}/object/${g}`,a,Object.assign({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return Le(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",n);try{let h;const f=Object.assign({upsert:__.upsert},o),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",f.cacheControl)):(h=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const y=yield fx(this.fetch,c.toString(),h,{headers:g});return{data:{path:a,fullPath:y.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(ln(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return Le(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const a=yield vo(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),l=new URL(this.url+a.url),c=l.searchParams.get("token");if(!c)throw new ow("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r))return{data:null,error:r};throw r}})}update(e,n,r){return Le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Le(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}copy(e,n,r){return Le(this,void 0,void 0,function*(){try{return{data:{path:(yield vo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return Le(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield vo(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return Le(this,void 0,void 0,function*(){try{const o=yield vo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=a?`?${a}`:"",c=this._getFinalPath(e),h=()=>Wp(this.fetch,`${this.url}/${o}/${c}${l}`,{headers:this.headers,noResolveJson:!0});return new lR(h,this.shouldThrowOnError)}info(e){return Le(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Wp(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:dx(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r))return{data:null,error:r};throw r}})}exists(e){return Le(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield sR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r)&&r instanceof cx){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&o.push(h);let f=o.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${f}`)}}}remove(e){return Le(this,void 0,void 0,function*(){try{return{data:yield aw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}list(e,n,r){return Le(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},uR),n),{prefix:e||""});return{data:yield vo(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}listV2(e,n){return Le(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield vo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const kT="2.78.0",IT={"X-Client-Info":`storage-js/${kT}`};class dR{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const a=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},IT),n),this.fetch=sw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Le(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Wp(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}getBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield Wp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}createBucket(e){return Le(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return Le(this,void 0,void 0,function*(){try{return{data:yield fx(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ln(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield aw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class fR{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},IT),n),this.fetch=sw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBuckets(e){return Le(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Wp(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield aw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}}const lw={"X-Client-Info":`storage-js/${kT}`,"Content-Type":"application/json"};class RT extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ei(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class gb extends RT{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hR extends RT{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var S_;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(S_||(S_={}));const uw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bf(async()=>{const{default:r}=await Promise.resolve().then(()=>Zu);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},pR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},E_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),mR=(t,e,n)=>Le(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const o=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";e(new gb(E_(l),o,c))}).catch(()=>{const l=o+"",c=a.statusText||`HTTP ${o} error`;e(new gb(c,o,l))});else{const l=o+"",c=a.statusText||`HTTP ${o} error`;e(new gb(c,o,l))}}else e(new hR(E_(t),t))}),gR=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(pR(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),n)):o};function yR(t,e,n,r,o,a){return Le(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(n,gR(e,r,o,a)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;const f=h.headers.get("content-type");return!f||!f.includes("application/json")?{}:h.json()}).then(h=>l(h)).catch(h=>mR(h,c,r))})})}function Ti(t,e,n,r,o){return Le(this,void 0,void 0,function*(){return yR(t,"POST",e,r,o,n)})}class vR{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lw),n),this.fetch=uw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Le(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Le(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ei(r))return{data:null,error:r};throw r}})}listIndexes(e){return Le(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Le(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ei(r))return{data:null,error:r};throw r}})}}class bR{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lw),n),this.fetch=uw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Le(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ti(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}getVectors(e){return Le(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}listVectors(e){return Le(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ti(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}queryVectors(e){return Le(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Le(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ti(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}}class xR{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lw),n),this.fetch=uw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}getBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}listBuckets(){return Le(this,arguments,void 0,function*(e={}){try{return{data:yield Ti(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:(yield Ti(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}})}}class wR extends xR{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new _R(this.url,this.headers,e,this.fetch)}}class _R extends vR{constructor(e,n,r,o){super(e,n,o),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Le(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Le(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Le(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Le(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new SR(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class SR extends bR{constructor(e,n,r,o,a){super(e,n,a),this.vectorBucketName=r,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Le(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Le(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Le(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Le(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Le(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ER extends dR{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new cR(this.url,this.headers,e,this.fetch)}get vectors(){return new wR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fR(this.url+"/iceberg",this.headers,this.fetch)}}const TR="2.78.0";let Lp="";typeof Deno<"u"?Lp="deno":typeof document<"u"?Lp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Lp="react-native":Lp="node";const CR={"X-Client-Info":`supabase-js-${Lp}/${TR}`},AR={headers:CR},kR={schema:"public"},IR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RR={},NR=t=>{let e;return t?e=t:typeof fetch>"u"?e=gT:e=fetch,(...n)=>e(...n)},MR=()=>typeof Headers>"u"?yT:Headers,DR=(t,e,n)=>{const r=NR(n),o=MR();return async(a,l)=>{var c;const h=(c=await e())!==null&&c!==void 0?c:t;let f=new o(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),r(a,Object.assign(Object.assign({},l),{headers:f}))}};function PR(t){return t.endsWith("/")?t:t+"/"}function LR(t,e){var n,r;const{db:o,auth:a,realtime:l,global:c}=t,{db:h,auth:f,realtime:g,global:y}=e,_={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},g),l),storage:{},global:Object.assign(Object.assign(Object.assign({},y),c),{headers:Object.assign(Object.assign({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function OR(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(PR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const NT="2.78.0",Xd=30*1e3,hx=3,yb=hx*Xd,UR="http://localhost:9999",BR="supabase.auth.token",FR={"X-Client-Info":`gotrue-js/${NT}`},px="X-Supabase-Api-Version",MT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zR=600*1e3;class Kp extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Fe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class qR extends Kp{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function HR(t){return Fe(t)&&t.name==="AuthApiError"}class Uu extends Kp{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class al extends Kp{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class go extends al{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function VR(t){return Fe(t)&&t.name==="AuthSessionMissingError"}class zd extends al{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qy extends al{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hy extends al{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $R(t){return Fe(t)&&t.name==="AuthImplicitGrantRedirectError"}class T_ extends al{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mx extends al{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function vb(t){return Fe(t)&&t.name==="AuthRetryableFetchError"}class C_ extends al{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class gx extends al{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const cv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),A_=` 	
\r=`.split(""),GR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<A_.length;e+=1)t[A_[e].charCodeAt(0)]=-2;for(let e=0;e<cv.length;e+=1)t[cv[e].charCodeAt(0)]=e;return t})();function k_(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(cv[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(cv[r]),e.queuedBits-=6}}function DT(t,e,n){const r=GR[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function I_(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=l=>{WR(l,r,n)};for(let l=0;l<t.length;l+=1)DT(t.charCodeAt(l),o,a);return e.join("")}function JR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function YR(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}JR(r,e)}}function WR(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function rf(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)DT(t.charCodeAt(o),n,r);return new Uint8Array(e)}function KR(t){const e=[];return YR(t,n=>e.push(n)),new Uint8Array(e)}function Bu(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>k_(o,n,r)),k_(null,n,r),e.join("")}function XR(t){return Math.round(Date.now()/1e3)+t}function QR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Pr=()=>typeof window<"u"&&typeof document<"u",Ru={tested:!1,writable:!1},PT=()=>{if(!Pr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ru.tested)return Ru.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ru.tested=!0,Ru.writable=!0}catch{Ru.tested=!0,Ru.writable=!1}return Ru.writable};function ZR(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const LT=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bf(async()=>{const{default:r}=await Promise.resolve().then(()=>Zu);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},eN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Qd=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Nu=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Qa=async(t,e)=>{await t.removeItem(e)};class Iv{constructor(){this.promise=new Iv.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Iv.promiseConstructor=Promise;function bb(t){const e=t.split(".");if(e.length!==3)throw new gx("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!jR.test(e[r]))throw new gx("JWT not in base64url format");return{header:JSON.parse(I_(e[0])),payload:JSON.parse(I_(e[1])),signature:rf(e[2]),raw:{header:e[0],payload:e[1]}}}async function tN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function nN(t,e){return new Promise((r,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){o(l);return}}})()})}function rN(t){return("0"+t.toString(16)).substr(-2)}function iN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,rN).join("")}async function oN(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function sN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await oN(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qd(t,e,n=!1){const r=iN();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await Qd(t,`${e}-code-verifier`,o);const a=await sN(r);return[a,r===a?"plain":"s256"]}const aN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lN(t){const e=t.headers.get(px);if(!e||!e.match(aN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function uN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function cN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hd(t){if(!dN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xb(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fN(t,e){return new Proxy(t,{get:(n,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,o)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,o)}})}function R_(t){return JSON.parse(JSON.stringify(t))}const Du=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hN=[502,503,504];async function N_(t){var e;if(!eN(t))throw new mx(Du(t),0);if(hN.includes(t.status))throw new mx(Du(t),t.status);let n;try{n=await t.json()}catch(a){throw new Uu(Du(a),a)}let r;const o=lN(t);if(o&&o.getTime()>=MT["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new C_(Du(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new go}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new C_(Du(n),t.status,n.weak_password.reasons);throw new qR(Du(n),t.status||500,r)}const pN=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function Ye(t,e,n,r){var o;const a=Object.assign({},r==null?void 0:r.headers);a[px]||(a[px]=MT["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await mN(t,e,n+c,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function mN(t,e,n,r,o,a){const l=pN(e,r,o,a);let c;try{c=await t(n,Object.assign({},l))}catch(h){throw console.error(h),new mx(Du(h),0)}if(c.ok||await N_(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(h){await N_(h)}}function yo(t){var e;let n=null;vN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=XR(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function M_(t){const e=yo(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function tl(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gN(t){return{data:t,error:null}}function yN(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a}=t,l=vf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a},h=Object.assign({},l);return{data:{properties:c,user:h},error:null}}function D_(t){return t}function vN(t){return t.access_token&&t.refresh_token&&t.expires_in}const wb=["global","local","others"];class bN{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=LT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=wb[0]){if(wb.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wb.join(", ")}`);try{return await Ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:tl})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=vf(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:yN,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Fe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tl})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,a,l,c,h;try{const f={nextPage:null,lastPage:0,total:0},g=await Ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:D_});if(g.error)throw g.error;const y=await g.json(),_=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,T=(h=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return T.length>0&&(T.forEach(C=>{const k=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);f[`${N}Page`]=k}),f.total=parseInt(_)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(Fe(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Hd(e);try{return await Ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tl})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Hd(e);try{return await Ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:tl})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Hd(e);try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:tl})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Hd(e.userId);try{const{data:n,error:r}=await Ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Hd(e.userId),Hd(e.id);try{return{data:await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,o,a,l,c,h;try{const f={nextPage:null,lastPage:0,total:0},g=await Ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:D_});if(g.error)throw g.error;const y=await g.json(),_=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,T=(h=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return T.length>0&&(T.forEach(C=>{const k=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);f[`${N}Page`]=k}),f.total=parseInt(_)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(Fe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await Ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}}function P_(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Vd={debug:!!(globalThis&&PT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class OT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xN extends OT{}async function wN(t,e,n){Vd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Vd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Vd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{Vd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Vd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Vd.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function _N(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function UT(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function SN(t){return parseInt(t,16)}function EN(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function TN(t){var e;const{chainId:n,domain:r,expirationTime:o,issuedAt:a=new Date,nonce:l,notBefore:c,requestId:h,resources:f,scheme:g,uri:y,version:_}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=UT(t.address),C=g?`${g}://${r}`:r,k=t.statement?`${t.statement}
`:"",N=`${C} wants you to sign in with your Ethereum account:
${T}

${k}`;let I=`URI: ${y}
Version: ${_}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(o&&(I+=`
Expiration Time: ${o.toISOString()}`),c&&(I+=`
Not Before: ${c.toISOString()}`),h&&(I+=`
Request ID: ${h}`),f){let L=`
Resources:`;for(const D of f){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);L+=`
- ${D}`}I+=L}return`${N}
${I}`}class En extends Error{constructor({message:e,code:n,cause:r,name:o}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=o??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class dv extends En{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function CN({error:t,options:e}){var n,r,o;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new En({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new En({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new En({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new En({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new En({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new En({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new En({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new En({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(BT(l)){if(a.rp.id!==l)return new En({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new En({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new En({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new En({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new En({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function AN({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new En({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new En({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(BT(r)){if(n.rpId!==r)return new En({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new En({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new En({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new En({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class kN{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const IN=new kN;function RN(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,o=vf(t,["challenge","user","excludeCredentials"]),a=rf(e).buffer,l=Object.assign(Object.assign({},n),{id:rf(n.id).buffer}),c=Object.assign(Object.assign({},o),{challenge:a,user:l});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const f=r[h];c.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:rf(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function NN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=vf(t,["challenge","allowCredentials"]),o=rf(e).buffer,a=Object.assign(Object.assign({},r),{challenge:o});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},c),{id:rf(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function MN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Bu(new Uint8Array(t.response.attestationObject)),clientDataJSON:Bu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function DN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Bu(new Uint8Array(o.authenticatorData)),clientDataJSON:Bu(new Uint8Array(o.clientDataJSON)),signature:Bu(new Uint8Array(o.signature)),userHandle:o.userHandle?Bu(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function BT(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function L_(){var t,e;return!!(Pr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function PN(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dv("Browser returned unexpected credential type",e)}:{data:null,error:new dv("Empty credential response",e)}}catch(e){return{data:null,error:CN({error:e,options:t})}}}async function LN(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dv("Browser returned unexpected credential type",e)}:{data:null,error:new dv("Empty credential response",e)}}catch(e){return{data:null,error:AN({error:e,options:t})}}}const ON={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},UN={userVerification:"preferred",hints:["security-key"]};function fv(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of t)if(o)for(const a in o){const l=o[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(n(l))r[a]=l;else if(e(l)){const c=r[a];e(c)?r[a]=fv(c,l):r[a]=fv(l)}else r[a]=l}return r}function BN(t,e){return fv(ON,t,e||{})}function FN(t,e){return fv(UN,t,e||{})}class jN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:o},a){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:c};const h=o??IN.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=BN(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:g,error:y}=await PN({publicKey:f,signal:h});return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const f=FN(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:g,error:y}=await LN(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:h}));return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(l){return Fe(l)?{data:null,error:l}:{data:null,error:new Uu("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}},a){if(!n)return{data:null,error:new Kp("rpId is required for WebAuthn authentication")};try{if(!L_())return{data:null,error:new Uu("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:o},{request:a});if(!l)return{data:null,error:c};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(l){return Fe(l)?{data:null,error:l}:{data:null,error:new Uu("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o},a){if(!n)return{data:null,error:new Kp("rpId is required for WebAuthn registration")};try{if(!L_())return{data:null,error:new Uu("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:c};const{data:h,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:o},{create:a});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(l){return Fe(l)?{data:null,error:l}:{data:null,error:new Uu("Unexpected error in register",l)}}}}_N();const zN={url:UR,storageKey:BR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function O_(t,e,n){return await n()}const $d={};class Xp{get jwks(){var e,n;return(n=(e=$d[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){$d[this.storageKey]=Object.assign(Object.assign({},$d[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=$d[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){$d[this.storageKey]=Object.assign(Object.assign({},$d[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xp.nextInstanceID,Xp.nextInstanceID+=1,this.instanceID>0&&Pr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},zN),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new bN({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=LT(o.fetch),this.lock=o.lock||O_,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Pr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=wN:this.lock=O_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:PT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=P_(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=P_(this.memoryStorage)),Pr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${NT}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ZR(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Pr()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),$R(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Fe(n)?{error:n}:{error:new Uu("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const a=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:yo}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(Fe(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,o;try{let a;if("email"in e){const{email:g,password:y,options:_}=e;let T=null,C=null;this.flowType==="pkce"&&([T,C]=await qd(this.storage,this.storageKey)),a=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:g,password:y,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:T,code_challenge_method:C},xform:yo})}else if("phone"in e){const{phone:g,password:y,options:_}=e;a=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(o=_==null?void 0:_.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:yo})}else throw new qy("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(Fe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:c}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:M_})}else if("phone"in e){const{phone:a,password:l,options:c}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:M_})}else throw new qy("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new zd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,o,a,l,c,h,f,g,y,_;let T,C;if("message"in e)T=e.message,C=e.signature;else{const{chain:k,wallet:N,statement:I,options:L}=e;let D;if(Pr())if(typeof N=="object")D=N;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")D=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=N}const $=new URL((n=L==null?void 0:L.url)!==null&&n!==void 0?n:window.location.href),G=await D.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=UT(G[0]);let q=(r=L==null?void 0:L.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!q){const W=await D.request({method:"eth_chainId"});q=SN(W)}const ee={domain:$.host,address:j,statement:I,uri:$.href,version:"1",chainId:q,nonce:(o=L==null?void 0:L.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(l=(a=L==null?void 0:L.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=L==null?void 0:L.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(h=L==null?void 0:L.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=L==null?void 0:L.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=L==null?void 0:L.signInWithEthereum)===null||g===void 0?void 0:g.resources};T=TN(ee),C=await D.request({method:"personal_sign",params:[EN(T),j]})}try{const{data:k,error:N}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:C},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:yo});if(N)throw N;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new zd}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:N})}catch(k){if(Fe(k))return{data:{user:null,session:null},error:k};throw k}}async signInWithSolana(e){var n,r,o,a,l,c,h,f,g,y,_,T;let C,k;if("message"in e)C=e.message,k=e.signature;else{const{chain:N,wallet:I,statement:L,options:D}=e;let $;if(Pr())if(typeof I=="object")$=I;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))$=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=I}const G=new URL((n=D==null?void 0:D.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in $&&$.signIn){const j=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D==null?void 0:D.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),L?{statement:L}:null));let q;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")q=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)q=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in q&&"signature"in q&&(typeof q.signedMessage=="string"||q.signedMessage instanceof Uint8Array)&&q.signature instanceof Uint8Array)C=typeof q.signedMessage=="string"?q.signedMessage:new TextDecoder().decode(q.signedMessage),k=q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${G.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(o=(r=D==null?void 0:D.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=D==null?void 0:D.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((l=D==null?void 0:D.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((c=D==null?void 0:D.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((h=D==null?void 0:D.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((f=D==null?void 0:D.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((y=(g=D==null?void 0:D.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...D.signInWithSolana.resources.map(q=>`- ${q}`)]:[]].join(`
`);const j=await $.signMessage(new TextEncoder().encode(C),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=j}}try{const{data:N,error:I}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Bu(k)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:yo});if(I)throw I;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new zd}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:I})}catch(N){if(Fe(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const n=await Nu(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:a,error:l}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:yo});if(await Qa(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new zd}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:l})}catch(a){if(Fe(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:a,nonce:l}=e,c=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:yo}),{data:h,error:f}=c;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new zd}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,a,l;try{if("email"in e){const{email:c,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await qd(this.storage,this.storageKey));const{error:y}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:c,options:h}=e,{data:f,error:g}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new qy("You must provide either an email or phone number.")}catch(c){if(Fe(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var n,r;try{let o,a;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await Ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:yo});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,f=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await qd(this.storage,this.storageKey)),await Ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:gN})}catch(a){if(Fe(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new go;const{error:o}=await Ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:a}=e,{error:l}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:o,options:a}=e,{data:l,error:c}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new qy("You must provide either an email or phone number and a type")}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Nu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<yb:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Nu(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=xb()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=fN(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tl}):await this._useSession(async n=>{var r,o,a;const{data:l,error:c}=n;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new go}:await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:tl})})}catch(n){if(Fe(n))return VR(n)&&(await this._removeSession(),await Qa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:a}=r;if(a)throw a;if(!o.session)throw new go;const l=o.session;let c=null,h=null;this.flowType==="pkce"&&e.email!=null&&([c,h]=await qd(this.storage,this.storageKey));const{data:f,error:g}=await Ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:h}),jwt:l.access_token,xform:tl});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new go;const n=Date.now()/1e3;let r=n,o=!0,a=null;const{payload:l}=bb(e.access_token);if(l.exp&&(r=l.exp,o=r<=n),o){const{data:c,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Fe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:c}=n;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new go;const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Pr())throw new Hy("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hy(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new T_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hy("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new T_("No code detected.");const{data:L,error:D}=await this._exchangeCodeForSession(e.code);if(D)throw D;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:l,expires_in:c,expires_at:h,token_type:f}=e;if(!a||!c||!l||!f)throw new Hy("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(c);let _=g+y;h&&(_=parseInt(h));const T=_-g;T*1e3<=Xd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${y}s`);const C=_-y;g-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,_,g):g-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,_,g);const{data:k,error:N}=await this._getUser(a);if(N)throw N;const I={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:y,expires_at:_,refresh_token:l,token_type:f,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:I,redirectType:e.type},error:null}}catch(r){if(Fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Nu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{error:a};const l=(r=o.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(HR(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Qa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=QR(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await qd(this.storage,this.storageKey,!0));try{return await Ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Fe(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:o}=await this._useSession(async a=>{var l,c,h,f,g;const{data:y,error:_}=a;if(_)throw _;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Ye(this.fetch,"GET",T,{headers:this.headers,jwt:(g=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(o)throw o;return Pr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Fe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:o,data:{session:a}}=n;if(o)throw o;const{options:l,provider:c,token:h,access_token:f,nonce:g}=e,y=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:h,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yo}),{data:_,error:T}=y;return T?{data:{user:null,session:null},error:T}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new zd}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:T})}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:l}=n;if(l)throw l;return await Ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await nN(async o=>(o>0&&await tN(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yo})),(o,a)=>{const l=200*Math.pow(2,o);return a&&vb(a)&&Date.now()+l-r<Xd})}catch(r){if(this._debug(n,"error",r),Fe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Pr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Nu(this.storage,this.storageKey);if(o&&this.userStorage){let l=await Nu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:o.user},await Qd(this.userStorage,this.storageKey+"-user",l)),o.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:xb()}else if(o&&!o.user&&!o.user){const l=await Nu(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(o.user=l.user,await Qa(this.storage,this.storageKey+"-user"),await Qd(this.storage,this.storageKey,o)):o.user=xb()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<yb;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${yb}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:l}=await this._callRefreshToken(o.refresh_token);l&&(console.error(l),vb(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(o.access_token);!c&&(l!=null&&l.user)?(o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new go;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Iv;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new go;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(o,"error",a),Fe(a)){const l={data:null,error:a};return vb(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(h){a.push(h)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Qd(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=R_(o);await Qd(this.storage,this.storageKey,a)}else{const o=R_(n);await Qd(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Qa(this.storage,this.storageKey),await Qa(this.storage,this.storageKey+"-code-verifier"),await Qa(this.storage,this.storageKey+"-user"),this.userStorage&&await Qa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Xd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/Xd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Xd}ms, refresh threshold is ${hx} ticks`),o<=hx&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof OT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await qd(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});o.push(c.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);o.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await Ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:l}=n;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:f}=await Ye(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&h.type==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?MN(e.webauthn.credential_response):DN(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:h}=await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:h})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const l=await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:RN(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:NN(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:o}=await this.getSession();if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=bb(r.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;return o?{data:null,error:o}:r?await Ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):{data:null,error:new go}})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return{data:null,error:a};if(!o)return{data:null,error:new go};const l=await Ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Pr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return{data:null,error:a};if(!o)return{data:null,error:new go};const l=await Ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Pr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(c=>c.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+zR>o)return r;const{data:a,error:l}=await Ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,r=a.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:T,error:C}=await this.getSession();if(C||!T.session)return{data:null,error:C};r=T.session.access_token}const{header:o,payload:a,signature:l,raw:{header:c,payload:h}}=bb(r);n!=null&&n.allowExpired||uN(a.exp);const f=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:a,header:o,signature:l},error:null}}const g=cN(o.alg),y=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,l,KR(`${c}.${h}`)))throw new gx("Invalid JWT signature");return{data:{claims:a,header:o,signature:l},error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}Xp.nextInstanceID=0;const qN=Xp;class HN extends qN{constructor(e){super(e)}}class VN{constructor(e,n,r){var o,a,l;this.supabaseUrl=e,this.supabaseKey=n;const c=OR(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:kR,realtime:RR,auth:Object.assign(Object.assign({},IR),{storageKey:h}),global:AR},g=LR(r??{},f);this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=DR(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new UI(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new ER(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new kI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,storageKey:l,flowType:c,lock:h,debug:f},g,y){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new HN({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),g),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,flowType:c,lock:h,debug:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new eR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $N=(t,e,n)=>new VN(t,e,n);function GN(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}GN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const JN="https://diuorqykbykouqnlxcxe.supabase.co",YN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw",Si=$N(JN,YN),cw={async getAll(){const{data:t,error:e}=await Si.from("users").select("*").order("created_at",{ascending:!1});if(e)throw e;return t},async getById(t){const{data:e,error:n}=await Si.from("users").select("*").eq("id",t).maybeSingle();if(n)throw n;return e},async getByEmail(t){const{data:e,error:n}=await Si.from("users").select("*").eq("email",t).maybeSingle();if(n)throw n;return e},async getByRole(t){const{data:e,error:n}=await Si.from("users").select("*").eq("role",t).order("name",{ascending:!0});if(n)throw n;return e},async create(t){const{data:e,error:n}=await Si.from("users").insert(t).select().single();if(n)throw n;return e},async update(t,e){const{data:n,error:r}=await Si.from("users").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw r;return n},async delete(t){const{error:e}=await Si.from("users").delete().eq("id",t);if(e)throw e}},U_=({currentUser:t,setCurrentUser:e,onLogout:n})=>{const[r,o]=M.useState(!1),[a,l]=M.useState(!1),[c,h]=M.useState(!1),[f,g]=M.useState([]);return M.useEffect(()=>{(async()=>{try{const _=await cw.getAll();g(_)}catch(_){console.error("Failed to load users:",_)}})()},[]),b.jsxs("header",{className:"bg-brand-primary border-b border-brand-accent p-4 flex items-center justify-between flex-shrink-0",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Yp,{className:"w-8 h-8 text-brand-gold"}),b.jsx("h1",{className:"text-xl font-bold text-brand-text tracking-wider hidden sm:block",children:"Darie"})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(bI,{currentUser:t}),t.role!=="Client"&&b.jsx(lI,{users:f,selectedUser:t,onSelectUser:e}),b.jsxs("div",{className:"relative",children:[b.jsxs("button",{onClick:()=>h(!c),className:"flex items-center gap-2 bg-brand-accent px-3 py-2 rounded-lg hover:bg-brand-secondary transition-colors",children:[b.jsx(B1,{className:"w-5 h-5 text-brand-gold"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:t.name})]}),c&&b.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-50",children:[b.jsx("button",{onClick:()=>{o(!0),h(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-gray-700",children:"My Profile"}),b.jsx("button",{onClick:()=>{l(!0),h(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-gray-700",children:"Change Password"}),b.jsx("button",{onClick:()=>{h(!1),n&&n()},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600 border-t border-gray-200",children:"Logout"})]})]})]}),r&&b.jsx(xI,{userId:t.id,userRole:t.role,onClose:()=>o(!1),onChangePassword:()=>{o(!1),l(!0)}}),a&&b.jsx(V1,{userId:t.id,email:t.email,isForced:!1,onSuccess:()=>{l(!1),alert("Password changed successfully!")},onCancel:()=>l(!1)})]})},B_=t=>{let e;const n=new Set,r=(f,g)=>{const y=typeof f=="function"?f(e):f;if(!Object.is(y,e)){const _=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(T=>T(e,_))}},o=()=>e,c={setState:r,getState:o,getInitialState:()=>h,subscribe:f=>(n.add(f),()=>n.delete(f))},h=e=t(r,o,c);return c},WN=(t=>t?B_(t):B_),KN=t=>t;function XN(t,e=KN){const n=We.useSyncExternalStore(t.subscribe,We.useCallback(()=>e(t.getState()),[t,e]),We.useCallback(()=>e(t.getInitialState()),[t,e]));return We.useDebugValue(n),n}const F_=t=>{const e=WN(t),n=r=>XN(e,r);return Object.assign(n,e),n},sm=(t=>t?F_(t):F_);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let QN,ZN;function e2(){return{geminiUrl:QN,vertexUrl:ZN}}function t2(t,e,n,r){var o,a;if(!(t!=null&&t.baseUrl)){const l=e2();return e?(o=l.vertexUrl)!==null&&o!==void 0?o:n:(a=l.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ec{}function De(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function x(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const h=t[c];if(Array.isArray(n))for(let f=0;f<h.length;f++){const g=h[f];x(g,e.slice(a+1),n[f])}else for(const f of h)x(f,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const h=t[c];x(h[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function v(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(c=>v(c,e.slice(r+1),n)):n}else return n}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function n2(t,e){for(const[n,r]of Object.entries(e)){const o=n.split("."),a=r.split("."),l=new Set;let c=-1;for(let h=0;h<o.length;h++)if(o[h]==="*"){c=h;break}if(c!==-1&&a.length>c)for(let h=c;h<a.length;h++){const f=a[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}yx(t,o,a,0,l)}}function yx(t,e,n,r,o){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const h of c[l])yx(h,e,n,r+1,o)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!o.has(f)),h={};for(const f of c)h[f]=l[f];for(const[f,g]of Object.entries(h)){const y=[];for(const _ of n.slice(r))_==="*"?y.push(f):y.push(_);x(l,y,g)}for(const f of c)delete l[f]}}else{const l=t;a in l&&yx(l[a],e,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dw(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r2(t){const e={},n=v(t,["operationName"]);n!=null&&x(e,["operationName"],n);const r=v(t,["resourceName"]);return r!=null&&x(e,["_url","resourceName"],r),e}function i2(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const r=v(t,["metadata"]);r!=null&&x(e,["metadata"],r);const o=v(t,["done"]);o!=null&&x(e,["done"],o);const a=v(t,["error"]);a!=null&&x(e,["error"],a);const l=v(t,["response","generateVideoResponse"]);return l!=null&&x(e,["response"],s2(l)),e}function o2(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const r=v(t,["metadata"]);r!=null&&x(e,["metadata"],r);const o=v(t,["done"]);o!=null&&x(e,["done"],o);const a=v(t,["error"]);a!=null&&x(e,["error"],a);const l=v(t,["response"]);return l!=null&&x(e,["response"],a2(l)),e}function s2(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>l2(l))),x(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const o=v(t,["raiMediaFilteredReasons"]);return o!=null&&x(e,["raiMediaFilteredReasons"],o),e}function a2(t){const e={},n=v(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>u2(l))),x(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const o=v(t,["raiMediaFilteredReasons"]);return o!=null&&x(e,["raiMediaFilteredReasons"],o),e}function l2(t){const e={},n=v(t,["video"]);return n!=null&&x(e,["video"],f2(n)),e}function u2(t){const e={},n=v(t,["_self"]);return n!=null&&x(e,["video"],h2(n)),e}function c2(t){const e={},n=v(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function d2(t){const e={},n=v(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function f2(t){const e={},n=v(t,["uri"]);n!=null&&x(e,["uri"],n);const r=v(t,["encodedVideo"]);r!=null&&x(e,["videoBytes"],dw(r));const o=v(t,["encoding"]);return o!=null&&x(e,["mimeType"],o),e}function h2(t){const e={},n=v(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],dw(r));const o=v(t,["mimeType"]);return o!=null&&x(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var j_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(j_||(j_={}));var z_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(z_||(z_={}));var qp;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(qp||(qp={}));var Hi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Hi||(Hi={}));var q_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(q_||(q_={}));var H_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(H_||(H_={}));var V_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(V_||(V_={}));var $_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})($_||($_={}));var G_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(G_||(G_={}));var J_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(J_||(J_={}));var Y_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Y_||(Y_={}));var W_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(W_||(W_={}));var K_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(K_||(K_={}));var X_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(X_||(X_={}));var Q_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Q_||(Q_={}));var Z_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Z_||(Z_={}));var hf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(hf||(hf={}));var eS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(eS||(eS={}));var tS;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(tS||(tS={}));var nS;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(nS||(nS={}));var vx;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vx||(vx={}));var rS;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(rS||(rS={}));var iS;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(iS||(iS={}));var oS;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(oS||(oS={}));var sS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(sS||(sS={}));var aS;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(aS||(aS={}));var lS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(lS||(lS={}));var uS;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(uS||(uS={}));var cS;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(cS||(cS={}));var dS;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(dS||(dS={}));var fS;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(fS||(fS={}));var hS;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(hS||(hS={}));var pS;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(pS||(pS={}));var mS;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(mS||(mS={}));var gS;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(gS||(gS={}));var yS;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(yS||(yS={}));var vS;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(vS||(vS={}));var bS;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(bS||(bS={}));var xS;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(xS||(xS={}));var wS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(wS||(wS={}));var _S;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(_S||(_S={}));var SS;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(SS||(SS={}));var ES;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ES||(ES={}));var TS;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(TS||(TS={}));var CS;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(CS||(CS={}));var AS;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(AS||(AS={}));var kS;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kS||(kS={}));var IS;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(IS||(IS={}));var RS;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(RS||(RS={}));var tf;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(tf||(tf={}));class bx{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Rp{get text(){var e,n,r,o,a,l,c,h;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",g=!1;const y=[];for(const _ of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[T,C]of Object.entries(_))T!=="text"&&T!=="thought"&&(C!==null||C!==void 0)&&y.push(T);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;g=!0,f+=_.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?f:void 0}get data(){var e,n,r,o,a,l,c,h;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const g=[];for(const y of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[_,T]of Object.entries(y))_!=="inlineData"&&(T!==null||T!==void 0)&&g.push(_);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,o,a,l,c,h;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,o,a,l,c,h,f;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,o,a,l,c,h,f;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(f=g==null?void 0:g[0])===null||f===void 0?void 0:f.output}}class NS{}class MS{}class p2{}class m2{}class g2{}class y2{}class DS{}class PS{}class LS{}class v2{}class hv{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new hv;let o;const a=e;return n?o=o2(a):o=i2(a),Object.assign(r,o),r}}class OS{}class US{}class BS{}class b2{}class x2{}class w2{}class FS{}class _2{get text(){var e,n,r;let o="",a=!1;const l=[];for(const c of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[h,f]of Object.entries(c))h!=="text"&&h!=="thought"&&f!==null&&l.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,o+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,r;let o="";const a=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,h]of Object.entries(l))c!=="inlineData"&&h!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class S2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Et(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function FT(t,e){const n=Et(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function jT(t){return Array.isArray(t)?t.map(e=>pv(e)):[pv(t)]}function pv(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function zT(t){const e=pv(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qT(t){const e=pv(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jS(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function HT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>jS(e)):[jS(t)]}function xx(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function zS(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function qS(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ur(t){if(t==null)throw new Error("ContentUnion is required");return xx(t)?t:{role:"user",parts:HT(t)}}function fw(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=ur(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=ur(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ur(n)):[ur(e)]}function Vi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(zS(t)||qS(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ur(t)]}const e=[],n=[],r=xx(t[0]);for(const o of t){const a=xx(o);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(zS(o)||qS(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:HT(n)}),e}function E2(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Hi).includes(n[0].toUpperCase())?n[0].toUpperCase():Hi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Hi).includes(r.toUpperCase())?r.toUpperCase():Hi.TYPE_UNSPECIFIED})}}function of(t){const e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&E2(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Hi).includes(c.toUpperCase())?c.toUpperCase():Hi.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=of(c);else if(r.includes(l)){const h=[];for(const f of c){if(f.type=="null"){e.nullable=!0;continue}h.push(of(f))}e[l]=h}else if(o.includes(l)){const h={};for(const[f,g]of Object.entries(c))h[f]=of(g);e[l]=h}else{if(l==="additionalProperties")continue;e[l]=c}return e}function hw(t){return of(t)}function pw(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function mw(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function wf(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=of(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=of(e.response));return t}function _f(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function T2(t,e,n,r=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Ws(t,e){if(typeof e!="string")throw new Error("name must be a string");return T2(t,e,"cachedContents")}function VT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ll(t){return dw(t)}function C2(t){return t!=null&&typeof t=="object"&&"name"in t}function A2(t){return t!=null&&typeof t=="object"&&"video"in t}function k2(t){return t!=null&&typeof t=="object"&&"uri"in t}function $T(t){var e;let n;if(C2(t)&&(n=t.name),!(k2(t)&&(n=t.uri,n===void 0))&&!(A2(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function GT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function JT(t){for(const e of["models","tunedModels","publisherModels"])if(I2(t,e))return t[e];return[]}function I2(t,e){return t!==null&&typeof t=="object"&&e in t}function R2(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function N2(t,e={}){const n=[],r=new Set;for(const o of t){const a=o.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const l=R2(o,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function YT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function M2(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function WT(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let a=!1;for(const l of o){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Sf(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function KT(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D2(t){const e={},n=v(t,["responsesFile"]);n!=null&&x(e,["fileName"],n);const r=v(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>cM(l))),x(e,["inlinedResponses"],a)}const o=v(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),x(e,["inlinedEmbedContentResponses"],a)}return e}function P2(t){const e={},n=v(t,["predictionsFormat"]);n!=null&&x(e,["format"],n);const r=v(t,["gcsDestination","outputUriPrefix"]);r!=null&&x(e,["gcsUri"],r);const o=v(t,["bigqueryDestination","outputUri"]);return o!=null&&x(e,["bigqueryUri"],o),e}function L2(t){const e={},n=v(t,["format"]);n!=null&&x(e,["predictionsFormat"],n);const r=v(t,["gcsUri"]);r!=null&&x(e,["gcsDestination","outputUriPrefix"],r);const o=v(t,["bigqueryUri"]);if(o!=null&&x(e,["bigqueryDestination","outputUri"],o),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(v(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function rv(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const r=v(t,["metadata","displayName"]);r!=null&&x(e,["displayName"],r);const o=v(t,["metadata","state"]);o!=null&&x(e,["state"],KT(o));const a=v(t,["metadata","createTime"]);a!=null&&x(e,["createTime"],a);const l=v(t,["metadata","endTime"]);l!=null&&x(e,["endTime"],l);const c=v(t,["metadata","updateTime"]);c!=null&&x(e,["updateTime"],c);const h=v(t,["metadata","model"]);h!=null&&x(e,["model"],h);const f=v(t,["metadata","output"]);return f!=null&&x(e,["dest"],D2(WT(f))),e}function wx(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const r=v(t,["displayName"]);r!=null&&x(e,["displayName"],r);const o=v(t,["state"]);o!=null&&x(e,["state"],KT(o));const a=v(t,["error"]);a!=null&&x(e,["error"],a);const l=v(t,["createTime"]);l!=null&&x(e,["createTime"],l);const c=v(t,["startTime"]);c!=null&&x(e,["startTime"],c);const h=v(t,["endTime"]);h!=null&&x(e,["endTime"],h);const f=v(t,["updateTime"]);f!=null&&x(e,["updateTime"],f);const g=v(t,["model"]);g!=null&&x(e,["model"],g);const y=v(t,["inputConfig"]);y!=null&&x(e,["src"],O2(y));const _=v(t,["outputConfig"]);return _!=null&&x(e,["dest"],P2(WT(_))),e}function O2(t){const e={},n=v(t,["instancesFormat"]);n!=null&&x(e,["format"],n);const r=v(t,["gcsSource","uris"]);r!=null&&x(e,["gcsUri"],r);const o=v(t,["bigquerySource","inputUri"]);return o!=null&&x(e,["bigqueryUri"],o),e}function U2(t,e){const n={};if(v(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(v(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=v(e,["fileName"]);r!=null&&x(n,["fileName"],r);const o=v(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>uM(t,l))),x(n,["requests","requests"],a)}return n}function B2(t){const e={},n=v(t,["format"]);n!=null&&x(e,["instancesFormat"],n);const r=v(t,["gcsUri"]);r!=null&&x(e,["gcsSource","uris"],r);const o=v(t,["bigqueryUri"]);if(o!=null&&x(e,["bigquerySource","inputUri"],o),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function F2(t){const e={},n=v(t,["data"]);if(n!=null&&x(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function j2(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Sf(t,r)),n}function z2(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Sf(t,r)),n}function q2(t){const e={},n=v(t,["content"]);n!=null&&x(e,["content"],n);const r=v(t,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],H2(r));const o=v(t,["tokenCount"]);o!=null&&x(e,["tokenCount"],o);const a=v(t,["finishReason"]);a!=null&&x(e,["finishReason"],a);const l=v(t,["avgLogprobs"]);l!=null&&x(e,["avgLogprobs"],l);const c=v(t,["groundingMetadata"]);c!=null&&x(e,["groundingMetadata"],c);const h=v(t,["index"]);h!=null&&x(e,["index"],h);const f=v(t,["logprobsResult"]);f!=null&&x(e,["logprobsResult"],f);const g=v(t,["safetyRatings"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>T)),x(e,["safetyRatings"],_)}const y=v(t,["urlContextMetadata"]);return y!=null&&x(e,["urlContextMetadata"],y),e}function H2(t){const e={},n=v(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),x(e,["citations"],r)}return e}function XT(t){const e={},n=v(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>yM(a))),x(e,["parts"],o)}const r=v(t,["role"]);return r!=null&&x(e,["role"],r),e}function V2(t,e){const n={},r=v(t,["displayName"]);if(e!==void 0&&r!=null&&x(e,["batch","displayName"],r),v(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function $2(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const o=v(t,["dest"]);return e!==void 0&&o!=null&&x(e,["outputConfig"],L2(M2(o))),n}function HS(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["src"]);o!=null&&x(n,["batch","inputConfig"],U2(t,YT(t,o)));const a=v(e,["config"]);return a!=null&&V2(a,n),n}function G2(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["model"],Et(t,r));const o=v(e,["src"]);o!=null&&x(n,["inputConfig"],B2(YT(t,o)));const a=v(e,["config"]);return a!=null&&$2(a,n),n}function J2(t,e){const n={},r=v(t,["displayName"]);return e!==void 0&&r!=null&&x(e,["batch","displayName"],r),n}function Y2(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["src"]);o!=null&&x(n,["batch","inputConfig"],tM(t,o));const a=v(e,["config"]);return a!=null&&J2(a,n),n}function W2(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Sf(t,r)),n}function K2(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Sf(t,r)),n}function X2(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&x(e,["name"],r);const o=v(t,["done"]);o!=null&&x(e,["done"],o);const a=v(t,["error"]);return a!=null&&x(e,["error"],a),e}function Q2(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&x(e,["name"],r);const o=v(t,["done"]);o!=null&&x(e,["done"],o);const a=v(t,["error"]);return a!=null&&x(e,["error"],a),e}function Z2(t,e){const n={},r=v(e,["contents"]);if(r!=null){let a=fw(t,r);Array.isArray(a)&&(a=a.map(l=>l)),x(n,["requests[]","request","content"],a)}const o=v(e,["config"]);return o!=null&&(x(n,["_self"],eM(o,n)),n2(n,{"requests[].*":"requests[].request.*"})),n}function eM(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const o=v(t,["title"]);e!==void 0&&o!=null&&x(e,["requests[]","title"],o);const a=v(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&x(e,["requests[]","outputDimensionality"],a),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tM(t,e){const n={},r=v(e,["fileName"]);r!=null&&x(n,["file_name"],r);const o=v(e,["inlinedRequests"]);return o!=null&&x(n,["requests"],Z2(t,o)),n}function nM(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function rM(t,e,n){const r={},o=v(e,["systemInstruction"]);n!==void 0&&o!=null&&x(n,["systemInstruction"],XT(ur(o)));const a=v(e,["temperature"]);a!=null&&x(r,["temperature"],a);const l=v(e,["topP"]);l!=null&&x(r,["topP"],l);const c=v(e,["topK"]);c!=null&&x(r,["topK"],c);const h=v(e,["candidateCount"]);h!=null&&x(r,["candidateCount"],h);const f=v(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const g=v(e,["stopSequences"]);g!=null&&x(r,["stopSequences"],g);const y=v(e,["responseLogprobs"]);y!=null&&x(r,["responseLogprobs"],y);const _=v(e,["logprobs"]);_!=null&&x(r,["logprobs"],_);const T=v(e,["presencePenalty"]);T!=null&&x(r,["presencePenalty"],T);const C=v(e,["frequencyPenalty"]);C!=null&&x(r,["frequencyPenalty"],C);const k=v(e,["seed"]);k!=null&&x(r,["seed"],k);const N=v(e,["responseMimeType"]);N!=null&&x(r,["responseMimeType"],N);const I=v(e,["responseSchema"]);I!=null&&x(r,["responseSchema"],hw(I));const L=v(e,["responseJsonSchema"]);if(L!=null&&x(r,["responseJsonSchema"],L),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=v(e,["safetySettings"]);if(n!==void 0&&D!=null){let de=D;Array.isArray(de)&&(de=de.map(xe=>vM(xe))),x(n,["safetySettings"],de)}const $=v(e,["tools"]);if(n!==void 0&&$!=null){let de=_f($);Array.isArray(de)&&(de=de.map(xe=>bM(wf(xe)))),x(n,["tools"],de)}const G=v(e,["toolConfig"]);if(n!==void 0&&G!=null&&x(n,["toolConfig"],G),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=v(e,["cachedContent"]);n!==void 0&&j!=null&&x(n,["cachedContent"],Ws(t,j));const q=v(e,["responseModalities"]);q!=null&&x(r,["responseModalities"],q);const ee=v(e,["mediaResolution"]);ee!=null&&x(r,["mediaResolution"],ee);const W=v(e,["speechConfig"]);if(W!=null&&x(r,["speechConfig"],pw(W)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=v(e,["thinkingConfig"]);z!=null&&x(r,["thinkingConfig"],z);const te=v(e,["imageConfig"]);return te!=null&&x(r,["imageConfig"],te),r}function iM(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(f=>q2(f))),x(e,["candidates"],h)}const o=v(t,["modelVersion"]);o!=null&&x(e,["modelVersion"],o);const a=v(t,["promptFeedback"]);a!=null&&x(e,["promptFeedback"],a);const l=v(t,["responseId"]);l!=null&&x(e,["responseId"],l);const c=v(t,["usageMetadata"]);return c!=null&&x(e,["usageMetadata"],c),e}function oM(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Sf(t,r)),n}function sM(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Sf(t,r)),n}function aM(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function lM(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function uM(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["request","model"],Et(t,r));const o=v(e,["contents"]);if(o!=null){let c=Vi(o);Array.isArray(c)&&(c=c.map(h=>XT(h))),x(n,["request","contents"],c)}const a=v(e,["metadata"]);a!=null&&x(n,["metadata"],a);const l=v(e,["config"]);return l!=null&&x(n,["request","generationConfig"],rM(t,l,v(n,["request"],{}))),n}function cM(t){const e={},n=v(t,["response"]);n!=null&&x(e,["response"],iM(n));const r=v(t,["error"]);return r!=null&&x(e,["error"],r),e}function dM(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const o=v(t,["pageToken"]);if(e!==void 0&&o!=null&&x(e,["_query","pageToken"],o),v(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function fM(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const o=v(t,["pageToken"]);e!==void 0&&o!=null&&x(e,["_query","pageToken"],o);const a=v(t,["filter"]);return e!==void 0&&a!=null&&x(e,["_query","filter"],a),n}function hM(t){const e={},n=v(t,["config"]);return n!=null&&dM(n,e),e}function pM(t){const e={},n=v(t,["config"]);return n!=null&&fM(n,e),e}function mM(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const o=v(t,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>rv(l))),x(e,["batchJobs"],a)}return e}function gM(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const o=v(t,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>wx(l))),x(e,["batchJobs"],a)}return e}function yM(t){const e={},n=v(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=v(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const o=v(t,["executableCode"]);o!=null&&x(e,["executableCode"],o);const a=v(t,["fileData"]);a!=null&&x(e,["fileData"],nM(a));const l=v(t,["functionResponse"]);l!=null&&x(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&x(e,["inlineData"],F2(c));const h=v(t,["text"]);h!=null&&x(e,["text"],h);const f=v(t,["thought"]);f!=null&&x(e,["thought"],f);const g=v(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const y=v(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function vM(t){const e={},n=v(t,["category"]);if(n!=null&&x(e,["category"],n),v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=v(t,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function bM(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),x(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const o=v(t,["googleMaps"]);o!=null&&x(e,["googleMaps"],aM(o));const a=v(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const l=v(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=v(t,["googleSearch"]);c!=null&&x(e,["googleSearch"],lM(c));const h=v(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $u;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_RAG_STORES="ragStores",t.PAGED_ITEM_DOCUMENTS="documents"})($u||($u={}));class am{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xM extends ec{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new am($u.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=HS(this.apiClient,e),r=n._url,o=De("{model}:batchGenerateContent",r),c=n.batch.inputConfig.requests,h=c.requests,f=[];for(const g of h){const y=Object.assign({},g);if(y.systemInstruction){const _=y.systemInstruction;delete y.systemInstruction;const T=y.request;T.systemInstruction=_,y.request=T}f.push(y)}return c.requests=f,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${o}`;else if(l)r.dest=`${l}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=G2(this.apiClient,e);return c=De("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>wx(g))}else{const f=HS(this.apiClient,e);return c=De("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>rv(g))}}async createEmbeddingsInternal(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Y2(this.apiClient,e);return a=De("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>rv(h))}}async get(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=sM(this.apiClient,e);return c=De("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>wx(g))}else{const f=oM(this.apiClient,e);return c=De("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>rv(g))}}async cancel(e){var n,r,o,a;let l="",c={};if(this.apiClient.isVertexAI()){const h=z2(this.apiClient,e);l=De("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const h=j2(this.apiClient,e);l=De("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=pM(e);return c=De("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=gM(g),_=new FS;return Object.assign(_,y),_})}else{const f=hM(e);return c=De("batches",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=mM(g),_=new FS;return Object.assign(_,y),_})}}async delete(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=K2(this.apiClient,e);return c=De("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>Q2(g))}else{const f=W2(this.apiClient,e);return c=De("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>X2(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wM(t){const e={},n=v(t,["data"]);if(n!=null&&x(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function VS(t){const e={},n=v(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>qM(a))),x(e,["parts"],o)}const r=v(t,["role"]);return r!=null&&x(e,["role"],r),e}function _M(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const o=v(t,["expireTime"]);e!==void 0&&o!=null&&x(e,["expireTime"],o);const a=v(t,["displayName"]);e!==void 0&&a!=null&&x(e,["displayName"],a);const l=v(t,["contents"]);if(e!==void 0&&l!=null){let g=Vi(l);Array.isArray(g)&&(g=g.map(y=>VS(y))),x(e,["contents"],g)}const c=v(t,["systemInstruction"]);e!==void 0&&c!=null&&x(e,["systemInstruction"],VS(ur(c)));const h=v(t,["tools"]);if(e!==void 0&&h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>HM(y))),x(e,["tools"],g)}const f=v(t,["toolConfig"]);if(e!==void 0&&f!=null&&x(e,["toolConfig"],f),v(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function SM(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const o=v(t,["expireTime"]);e!==void 0&&o!=null&&x(e,["expireTime"],o);const a=v(t,["displayName"]);e!==void 0&&a!=null&&x(e,["displayName"],a);const l=v(t,["contents"]);if(e!==void 0&&l!=null){let y=Vi(l);Array.isArray(y)&&(y=y.map(_=>_)),x(e,["contents"],y)}const c=v(t,["systemInstruction"]);e!==void 0&&c!=null&&x(e,["systemInstruction"],ur(c));const h=v(t,["tools"]);if(e!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(_=>VM(_))),x(e,["tools"],y)}const f=v(t,["toolConfig"]);e!==void 0&&f!=null&&x(e,["toolConfig"],f);const g=v(t,["kmsKeyName"]);return e!==void 0&&g!=null&&x(e,["encryption_spec","kmsKeyName"],g),n}function EM(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["model"],FT(t,r));const o=v(e,["config"]);return o!=null&&_M(o,n),n}function TM(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["model"],FT(t,r));const o=v(e,["config"]);return o!=null&&SM(o,n),n}function CM(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Ws(t,r)),n}function AM(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Ws(t,r)),n}function kM(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function IM(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function RM(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function NM(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&x(e,["description"],n);const r=v(t,["name"]);r!=null&&x(e,["name"],r);const o=v(t,["parameters"]);o!=null&&x(e,["parameters"],o);const a=v(t,["parametersJsonSchema"]);a!=null&&x(e,["parametersJsonSchema"],a);const l=v(t,["response"]);l!=null&&x(e,["response"],l);const c=v(t,["responseJsonSchema"]);return c!=null&&x(e,["responseJsonSchema"],c),e}function MM(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Ws(t,r)),n}function DM(t,e){const n={},r=v(e,["name"]);return r!=null&&x(n,["_url","name"],Ws(t,r)),n}function PM(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function LM(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function OM(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const o=v(t,["pageToken"]);return e!==void 0&&o!=null&&x(e,["_query","pageToken"],o),n}function UM(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const o=v(t,["pageToken"]);return e!==void 0&&o!=null&&x(e,["_query","pageToken"],o),n}function BM(t){const e={},n=v(t,["config"]);return n!=null&&OM(n,e),e}function FM(t){const e={},n=v(t,["config"]);return n!=null&&UM(n,e),e}function jM(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const o=v(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),x(e,["cachedContents"],a)}return e}function zM(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const o=v(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),x(e,["cachedContents"],a)}return e}function qM(t){const e={},n=v(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=v(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const o=v(t,["executableCode"]);o!=null&&x(e,["executableCode"],o);const a=v(t,["fileData"]);a!=null&&x(e,["fileData"],RM(a));const l=v(t,["functionResponse"]);l!=null&&x(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&x(e,["inlineData"],wM(c));const h=v(t,["text"]);h!=null&&x(e,["text"],h);const f=v(t,["thought"]);f!=null&&x(e,["thought"],f);const g=v(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const y=v(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function HM(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),x(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const o=v(t,["googleMaps"]);o!=null&&x(e,["googleMaps"],PM(o));const a=v(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const l=v(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=v(t,["googleSearch"]);c!=null&&x(e,["googleSearch"],LM(c));const h=v(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}function VM(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>NM(_))),x(e,["functionDeclarations"],y)}const r=v(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const o=v(t,["googleSearchRetrieval"]);o!=null&&x(e,["googleSearchRetrieval"],o);const a=v(t,["googleMaps"]);a!=null&&x(e,["googleMaps"],a);const l=v(t,["computerUse"]);l!=null&&x(e,["computerUse"],l);const c=v(t,["codeExecution"]);c!=null&&x(e,["codeExecution"],c);const h=v(t,["enterpriseWebSearch"]);h!=null&&x(e,["enterpriseWebSearch"],h);const f=v(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],f);const g=v(t,["urlContext"]);return g!=null&&x(e,["urlContext"],g),e}function $M(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const o=v(t,["expireTime"]);return e!==void 0&&o!=null&&x(e,["expireTime"],o),n}function GM(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const o=v(t,["expireTime"]);return e!==void 0&&o!=null&&x(e,["expireTime"],o),n}function JM(t,e){const n={},r=v(e,["name"]);r!=null&&x(n,["_url","name"],Ws(t,r));const o=v(e,["config"]);return o!=null&&$M(o,n),n}function YM(t,e){const n={},r=v(e,["name"]);r!=null&&x(n,["_url","name"],Ws(t,r));const o=v(e,["config"]);return o!=null&&GM(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WM extends ec{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new am($u.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=TM(this.apiClient,e);return c=De("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const f=EM(this.apiClient,e);return c=De("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=DM(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const f=MM(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=AM(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=IM(g),_=new US;return Object.assign(_,y),_})}else{const f=CM(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=kM(g),_=new US;return Object.assign(_,y),_})}}async update(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=YM(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const f=JM(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async listInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=FM(e);return c=De("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=zM(g),_=new BS;return Object.assign(_,y),_})}else{const f=BM(e);return c=De("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=jM(g),_=new BS;return Object.assign(_,y),_})}}}function $S(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(t){return this instanceof Kt?(this.v=t,this):new Kt(t)}function sf(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(T){return function(C){return Promise.resolve(C).then(T,y)}}function c(T,C){r[T]&&(o[T]=function(k){return new Promise(function(N,I){a.push([T,k,N,I])>1||h(T,k)})},C&&(o[T]=C(o[T])))}function h(T,C){try{f(r[T](C))}catch(k){_(a[0][3],k)}}function f(T){T.value instanceof Kt?Promise.resolve(T.value.v).then(g,y):_(a[0][2],T)}function g(T){h("next",T)}function y(T){h("throw",T)}function _(T,C){T(C),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Hp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $S=="function"?$S(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(l){return new Promise(function(c,h){l=t[a](l),o(c,h,l.done,l.value)})}}function o(a,l,c,h){Promise.resolve(h).then(function(f){a({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KM(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:QT(n)}function QT(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function XM(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function GS(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let a=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),a&&!QT(t[r])&&(a=!1),r++;a?e.push(...o):e.pop()}return e}class QM{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new ZM(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ZM{constructor(e,n,r,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),XM(a)}async sendMessage(e){var n;await this.sendPromise;const r=ur(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;const h=await o,f=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,g=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let _=[];g!=null&&(_=(c=g.slice(y))!==null&&c!==void 0?c:[]);const T=f?[f]:[];this.recordHistory(r,T,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const r=ur(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?GS(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,o;return sf(this,arguments,function*(){var l,c,h,f;const g=[];try{for(var y=!0,_=Hp(e),T;T=yield Kt(_.next()),l=T.done,!l;y=!0){f=T.value,y=!1;const C=f;if(KM(C)){const k=(o=(r=C.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;k!==void 0&&g.push(k)}yield yield Kt(C)}}catch(C){c={error:C}}finally{try{!y&&!l&&(h=_.return)&&(yield Kt(h.call(_)))}finally{if(c)throw c.error}}this.recordHistory(n,g)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...GS(r)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rv extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Rv.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eD(t){const e={},n=v(t,["file"]);return n!=null&&x(e,["file"],n),e}function tD(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function nD(t){const e={},n=v(t,["name"]);return n!=null&&x(e,["_url","file"],$T(n)),e}function rD(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function iD(t){const e={},n=v(t,["name"]);return n!=null&&x(e,["_url","file"],$T(n)),e}function oD(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const o=v(t,["pageToken"]);return e!==void 0&&o!=null&&x(e,["_query","pageToken"],o),n}function sD(t){const e={},n=v(t,["config"]);return n!=null&&oD(n,e),e}function aD(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const o=v(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),x(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lD extends ec{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new am($u.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=sD(e);return a=De("files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const f=aD(h),g=new b2;return Object.assign(g,f),g})}}async createInternal(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eD(e);return a=De("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const f=tD(h),g=new x2;return Object.assign(g,f),g})}}async get(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=iD(e);return a=De("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nD(e);return a=De("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const f=rD(h),g=new w2;return Object.assign(g,f),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iv(t){const e={},n=v(t,["data"]);if(n!=null&&x(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function uD(t){const e={},n=v(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>ED(a))),x(e,["parts"],o)}const r=v(t,["role"]);return r!=null&&x(e,["role"],r),e}function cD(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function dD(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&x(e,["description"],n);const r=v(t,["name"]);r!=null&&x(e,["name"],r);const o=v(t,["parameters"]);o!=null&&x(e,["parameters"],o);const a=v(t,["parametersJsonSchema"]);a!=null&&x(e,["parametersJsonSchema"],a);const l=v(t,["response"]);l!=null&&x(e,["response"],l);const c=v(t,["responseJsonSchema"]);return c!=null&&x(e,["responseJsonSchema"],c),e}function fD(t){const e={},n=v(t,["modelSelectionConfig"]);n!=null&&x(e,["modelConfig"],n);const r=v(t,["audioTimestamp"]);r!=null&&x(e,["audioTimestamp"],r);const o=v(t,["candidateCount"]);o!=null&&x(e,["candidateCount"],o);const a=v(t,["enableAffectiveDialog"]);a!=null&&x(e,["enableAffectiveDialog"],a);const l=v(t,["frequencyPenalty"]);l!=null&&x(e,["frequencyPenalty"],l);const c=v(t,["logprobs"]);c!=null&&x(e,["logprobs"],c);const h=v(t,["maxOutputTokens"]);h!=null&&x(e,["maxOutputTokens"],h);const f=v(t,["mediaResolution"]);f!=null&&x(e,["mediaResolution"],f);const g=v(t,["presencePenalty"]);g!=null&&x(e,["presencePenalty"],g);const y=v(t,["responseJsonSchema"]);y!=null&&x(e,["responseJsonSchema"],y);const _=v(t,["responseLogprobs"]);_!=null&&x(e,["responseLogprobs"],_);const T=v(t,["responseMimeType"]);T!=null&&x(e,["responseMimeType"],T);const C=v(t,["responseModalities"]);C!=null&&x(e,["responseModalities"],C);const k=v(t,["responseSchema"]);k!=null&&x(e,["responseSchema"],k);const N=v(t,["routingConfig"]);N!=null&&x(e,["routingConfig"],N);const I=v(t,["seed"]);I!=null&&x(e,["seed"],I);const L=v(t,["speechConfig"]);L!=null&&x(e,["speechConfig"],ZT(L));const D=v(t,["stopSequences"]);D!=null&&x(e,["stopSequences"],D);const $=v(t,["temperature"]);$!=null&&x(e,["temperature"],$);const G=v(t,["thinkingConfig"]);G!=null&&x(e,["thinkingConfig"],G);const j=v(t,["topK"]);j!=null&&x(e,["topK"],j);const q=v(t,["topP"]);if(q!=null&&x(e,["topP"],q),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function hD(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function pD(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function mD(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const o=v(t,["responseModalities"]);e!==void 0&&o!=null&&x(e,["setup","generationConfig","responseModalities"],o);const a=v(t,["temperature"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","temperature"],a);const l=v(t,["topP"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topP"],l);const c=v(t,["topK"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","topK"],c);const h=v(t,["maxOutputTokens"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","maxOutputTokens"],h);const f=v(t,["mediaResolution"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","mediaResolution"],f);const g=v(t,["seed"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","seed"],g);const y=v(t,["speechConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","speechConfig"],mw(y));const _=v(t,["thinkingConfig"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","thinkingConfig"],_);const T=v(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],T);const C=v(t,["systemInstruction"]);e!==void 0&&C!=null&&x(e,["setup","systemInstruction"],uD(ur(C)));const k=v(t,["tools"]);if(e!==void 0&&k!=null){let j=_f(k);Array.isArray(j)&&(j=j.map(q=>CD(wf(q)))),x(e,["setup","tools"],j)}const N=v(t,["sessionResumption"]);e!==void 0&&N!=null&&x(e,["setup","sessionResumption"],TD(N));const I=v(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&x(e,["setup","inputAudioTranscription"],I);const L=v(t,["outputAudioTranscription"]);e!==void 0&&L!=null&&x(e,["setup","outputAudioTranscription"],L);const D=v(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&x(e,["setup","realtimeInputConfig"],D);const $=v(t,["contextWindowCompression"]);e!==void 0&&$!=null&&x(e,["setup","contextWindowCompression"],$);const G=v(t,["proactivity"]);return e!==void 0&&G!=null&&x(e,["setup","proactivity"],G),n}function gD(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],fD(r));const o=v(t,["responseModalities"]);e!==void 0&&o!=null&&x(e,["setup","generationConfig","responseModalities"],o);const a=v(t,["temperature"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","temperature"],a);const l=v(t,["topP"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topP"],l);const c=v(t,["topK"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","topK"],c);const h=v(t,["maxOutputTokens"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","maxOutputTokens"],h);const f=v(t,["mediaResolution"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","mediaResolution"],f);const g=v(t,["seed"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","seed"],g);const y=v(t,["speechConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","speechConfig"],ZT(mw(y)));const _=v(t,["thinkingConfig"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","thinkingConfig"],_);const T=v(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],T);const C=v(t,["systemInstruction"]);e!==void 0&&C!=null&&x(e,["setup","systemInstruction"],ur(C));const k=v(t,["tools"]);if(e!==void 0&&k!=null){let j=_f(k);Array.isArray(j)&&(j=j.map(q=>AD(wf(q)))),x(e,["setup","tools"],j)}const N=v(t,["sessionResumption"]);e!==void 0&&N!=null&&x(e,["setup","sessionResumption"],N);const I=v(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&x(e,["setup","inputAudioTranscription"],I);const L=v(t,["outputAudioTranscription"]);e!==void 0&&L!=null&&x(e,["setup","outputAudioTranscription"],L);const D=v(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&x(e,["setup","realtimeInputConfig"],D);const $=v(t,["contextWindowCompression"]);e!==void 0&&$!=null&&x(e,["setup","contextWindowCompression"],$);const G=v(t,["proactivity"]);return e!==void 0&&G!=null&&x(e,["setup","proactivity"],G),n}function yD(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["setup","model"],Et(t,r));const o=v(e,["config"]);return o!=null&&x(n,["config"],mD(o,n)),n}function vD(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["setup","model"],Et(t,r));const o=v(e,["config"]);return o!=null&&x(n,["config"],gD(o,n)),n}function bD(t){const e={},n=v(t,["musicGenerationConfig"]);return n!=null&&x(e,["musicGenerationConfig"],n),e}function xD(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),x(e,["weightedPrompts"],r)}return e}function wD(t){const e={},n=v(t,["media"]);if(n!=null){let f=jT(n);Array.isArray(f)&&(f=f.map(g=>iv(g))),x(e,["mediaChunks"],f)}const r=v(t,["audio"]);r!=null&&x(e,["audio"],iv(qT(r)));const o=v(t,["audioStreamEnd"]);o!=null&&x(e,["audioStreamEnd"],o);const a=v(t,["video"]);a!=null&&x(e,["video"],iv(zT(a)));const l=v(t,["text"]);l!=null&&x(e,["text"],l);const c=v(t,["activityStart"]);c!=null&&x(e,["activityStart"],c);const h=v(t,["activityEnd"]);return h!=null&&x(e,["activityEnd"],h),e}function _D(t){const e={},n=v(t,["media"]);if(n!=null){let f=jT(n);Array.isArray(f)&&(f=f.map(g=>g)),x(e,["mediaChunks"],f)}const r=v(t,["audio"]);r!=null&&x(e,["audio"],qT(r));const o=v(t,["audioStreamEnd"]);o!=null&&x(e,["audioStreamEnd"],o);const a=v(t,["video"]);a!=null&&x(e,["video"],zT(a));const l=v(t,["text"]);l!=null&&x(e,["text"],l);const c=v(t,["activityStart"]);c!=null&&x(e,["activityStart"],c);const h=v(t,["activityEnd"]);return h!=null&&x(e,["activityEnd"],h),e}function SD(t){const e={},n=v(t,["setupComplete"]);n!=null&&x(e,["setupComplete"],n);const r=v(t,["serverContent"]);r!=null&&x(e,["serverContent"],r);const o=v(t,["toolCall"]);o!=null&&x(e,["toolCall"],o);const a=v(t,["toolCallCancellation"]);a!=null&&x(e,["toolCallCancellation"],a);const l=v(t,["usageMetadata"]);l!=null&&x(e,["usageMetadata"],kD(l));const c=v(t,["goAway"]);c!=null&&x(e,["goAway"],c);const h=v(t,["sessionResumptionUpdate"]);return h!=null&&x(e,["sessionResumptionUpdate"],h),e}function ED(t){const e={},n=v(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=v(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const o=v(t,["executableCode"]);o!=null&&x(e,["executableCode"],o);const a=v(t,["fileData"]);a!=null&&x(e,["fileData"],cD(a));const l=v(t,["functionResponse"]);l!=null&&x(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&x(e,["inlineData"],iv(c));const h=v(t,["text"]);h!=null&&x(e,["text"],h);const f=v(t,["thought"]);f!=null&&x(e,["thought"],f);const g=v(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const y=v(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function TD(t){const e={},n=v(t,["handle"]);if(n!=null&&x(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ZT(t){const e={},n=v(t,["languageCode"]);n!=null&&x(e,["languageCode"],n);const r=v(t,["voiceConfig"]);if(r!=null&&x(e,["voiceConfig"],r),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function CD(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),x(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const o=v(t,["googleMaps"]);o!=null&&x(e,["googleMaps"],hD(o));const a=v(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const l=v(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=v(t,["googleSearch"]);c!=null&&x(e,["googleSearch"],pD(c));const h=v(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}function AD(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>dD(_))),x(e,["functionDeclarations"],y)}const r=v(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const o=v(t,["googleSearchRetrieval"]);o!=null&&x(e,["googleSearchRetrieval"],o);const a=v(t,["googleMaps"]);a!=null&&x(e,["googleMaps"],a);const l=v(t,["computerUse"]);l!=null&&x(e,["computerUse"],l);const c=v(t,["codeExecution"]);c!=null&&x(e,["codeExecution"],c);const h=v(t,["enterpriseWebSearch"]);h!=null&&x(e,["enterpriseWebSearch"],h);const f=v(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],f);const g=v(t,["urlContext"]);return g!=null&&x(e,["urlContext"],g),e}function kD(t){const e={},n=v(t,["promptTokenCount"]);n!=null&&x(e,["promptTokenCount"],n);const r=v(t,["cachedContentTokenCount"]);r!=null&&x(e,["cachedContentTokenCount"],r);const o=v(t,["candidatesTokenCount"]);o!=null&&x(e,["responseTokenCount"],o);const a=v(t,["toolUsePromptTokenCount"]);a!=null&&x(e,["toolUsePromptTokenCount"],a);const l=v(t,["thoughtsTokenCount"]);l!=null&&x(e,["thoughtsTokenCount"],l);const c=v(t,["totalTokenCount"]);c!=null&&x(e,["totalTokenCount"],c);const h=v(t,["promptTokensDetails"]);if(h!=null){let T=h;Array.isArray(T)&&(T=T.map(C=>C)),x(e,["promptTokensDetails"],T)}const f=v(t,["cacheTokensDetails"]);if(f!=null){let T=f;Array.isArray(T)&&(T=T.map(C=>C)),x(e,["cacheTokensDetails"],T)}const g=v(t,["candidatesTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(C=>C)),x(e,["responseTokensDetails"],T)}const y=v(t,["toolUsePromptTokensDetails"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>C)),x(e,["toolUsePromptTokensDetails"],T)}const _=v(t,["trafficType"]);return _!=null&&x(e,["trafficType"],_),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ID(t){const e={},n=v(t,["data"]);if(n!=null&&x(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function RD(t){const e={},n=v(t,["content"]);n!=null&&x(e,["content"],n);const r=v(t,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],ND(r));const o=v(t,["tokenCount"]);o!=null&&x(e,["tokenCount"],o);const a=v(t,["finishReason"]);a!=null&&x(e,["finishReason"],a);const l=v(t,["avgLogprobs"]);l!=null&&x(e,["avgLogprobs"],l);const c=v(t,["groundingMetadata"]);c!=null&&x(e,["groundingMetadata"],c);const h=v(t,["index"]);h!=null&&x(e,["index"],h);const f=v(t,["logprobsResult"]);f!=null&&x(e,["logprobsResult"],f);const g=v(t,["safetyRatings"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>T)),x(e,["safetyRatings"],_)}const y=v(t,["urlContextMetadata"]);return y!=null&&x(e,["urlContextMetadata"],y),e}function ND(t){const e={},n=v(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),x(e,["citations"],r)}return e}function MD(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["contents"]);if(o!=null){let a=Vi(o);Array.isArray(a)&&(a=a.map(l=>l)),x(n,["contents"],a)}return n}function DD(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),x(e,["tokensInfo"],o)}return e}function PD(t){const e={},n=v(t,["values"]);n!=null&&x(e,["values"],n);const r=v(t,["statistics"]);return r!=null&&x(e,["statistics"],LD(r)),e}function LD(t){const e={},n=v(t,["truncated"]);n!=null&&x(e,["truncated"],n);const r=v(t,["token_count"]);return r!=null&&x(e,["tokenCount"],r),e}function Nv(t){const e={},n=v(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>jP(a))),x(e,["parts"],o)}const r=v(t,["role"]);return r!=null&&x(e,["role"],r),e}function OD(t){const e={},n=v(t,["controlType"]);n!=null&&x(e,["controlType"],n);const r=v(t,["enableControlImageComputation"]);return r!=null&&x(e,["computeControl"],r),e}function UD(t){const e={};if(v(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(v(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(v(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function BD(t,e){const n={},r=v(t,["systemInstruction"]);e!==void 0&&r!=null&&x(e,["systemInstruction"],ur(r));const o=v(t,["tools"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>iC(c))),x(e,["tools"],l)}const a=v(t,["generationConfig"]);return e!==void 0&&a!=null&&x(e,["generationConfig"],AP(a)),n}function FD(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["contents"]);if(o!=null){let l=Vi(o);Array.isArray(l)&&(l=l.map(c=>Nv(c))),x(n,["contents"],l)}const a=v(e,["config"]);return a!=null&&UD(a),n}function jD(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["contents"]);if(o!=null){let l=Vi(o);Array.isArray(l)&&(l=l.map(c=>c)),x(n,["contents"],l)}const a=v(e,["config"]);return a!=null&&BD(a,n),n}function zD(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["totalTokens"]);r!=null&&x(e,["totalTokens"],r);const o=v(t,["cachedContentTokenCount"]);return o!=null&&x(e,["cachedContentTokenCount"],o),e}function qD(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["totalTokens"]);return r!=null&&x(e,["totalTokens"],r),e}function HD(t,e){const n={},r=v(e,["model"]);return r!=null&&x(n,["_url","name"],Et(t,r)),n}function VD(t,e){const n={},r=v(e,["model"]);return r!=null&&x(n,["_url","name"],Et(t,r)),n}function $D(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function GD(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function JD(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const o=v(t,["negativePrompt"]);e!==void 0&&o!=null&&x(e,["parameters","negativePrompt"],o);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&x(e,["parameters","sampleCount"],a);const l=v(t,["aspectRatio"]);e!==void 0&&l!=null&&x(e,["parameters","aspectRatio"],l);const c=v(t,["guidanceScale"]);e!==void 0&&c!=null&&x(e,["parameters","guidanceScale"],c);const h=v(t,["seed"]);e!==void 0&&h!=null&&x(e,["parameters","seed"],h);const f=v(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&x(e,["parameters","safetySetting"],f);const g=v(t,["personGeneration"]);e!==void 0&&g!=null&&x(e,["parameters","personGeneration"],g);const y=v(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&x(e,["parameters","includeSafetyAttributes"],y);const _=v(t,["includeRaiReason"]);e!==void 0&&_!=null&&x(e,["parameters","includeRaiReason"],_);const T=v(t,["language"]);e!==void 0&&T!=null&&x(e,["parameters","language"],T);const C=v(t,["outputMimeType"]);e!==void 0&&C!=null&&x(e,["parameters","outputOptions","mimeType"],C);const k=v(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&x(e,["parameters","outputOptions","compressionQuality"],k);const N=v(t,["addWatermark"]);e!==void 0&&N!=null&&x(e,["parameters","addWatermark"],N);const I=v(t,["labels"]);e!==void 0&&I!=null&&x(e,["labels"],I);const L=v(t,["editMode"]);e!==void 0&&L!=null&&x(e,["parameters","editMode"],L);const D=v(t,["baseSteps"]);return e!==void 0&&D!=null&&x(e,["parameters","editConfig","baseSteps"],D),n}function YD(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["prompt"]);o!=null&&x(n,["instances[0]","prompt"],o);const a=v(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>GP(h))),x(n,["instances[0]","referenceImages"],c)}const l=v(e,["config"]);return l!=null&&JD(l,n),n}function WD(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Mv(a))),x(e,["generatedImages"],o)}return e}function KD(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const o=v(t,["title"]);e!==void 0&&o!=null&&x(e,["requests[]","title"],o);const a=v(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&x(e,["requests[]","outputDimensionality"],a),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function XD(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&x(e,["instances[]","task_type"],r);const o=v(t,["title"]);e!==void 0&&o!=null&&x(e,["instances[]","title"],o);const a=v(t,["outputDimensionality"]);e!==void 0&&a!=null&&x(e,["parameters","outputDimensionality"],a);const l=v(t,["mimeType"]);e!==void 0&&l!=null&&x(e,["instances[]","mimeType"],l);const c=v(t,["autoTruncate"]);return e!==void 0&&c!=null&&x(e,["parameters","autoTruncate"],c),n}function QD(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["contents"]);if(o!=null){let c=fw(t,o);Array.isArray(c)&&(c=c.map(h=>h)),x(n,["requests[]","content"],c)}const a=v(e,["config"]);a!=null&&KD(a,n);const l=v(e,["model"]);return l!==void 0&&x(n,["requests[]","model"],Et(t,l)),n}function ZD(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["contents"]);if(o!=null){let l=fw(t,o);Array.isArray(l)&&(l=l.map(c=>c)),x(n,["instances[]","content"],l)}const a=v(e,["config"]);return a!=null&&XD(a,n),n}function eP(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),x(e,["embeddings"],a)}const o=v(t,["metadata"]);return o!=null&&x(e,["metadata"],o),e}function tP(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>PD(l))),x(e,["embeddings"],a)}const o=v(t,["metadata"]);return o!=null&&x(e,["metadata"],o),e}function nP(t){const e={},n=v(t,["endpoint"]);n!=null&&x(e,["name"],n);const r=v(t,["deployedModelId"]);return r!=null&&x(e,["deployedModelId"],r),e}function rP(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function iP(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&x(e,["description"],n);const r=v(t,["name"]);r!=null&&x(e,["name"],r);const o=v(t,["parameters"]);o!=null&&x(e,["parameters"],o);const a=v(t,["parametersJsonSchema"]);a!=null&&x(e,["parametersJsonSchema"],a);const l=v(t,["response"]);l!=null&&x(e,["response"],l);const c=v(t,["responseJsonSchema"]);return c!=null&&x(e,["responseJsonSchema"],c),e}function oP(t,e,n){const r={},o=v(e,["systemInstruction"]);n!==void 0&&o!=null&&x(n,["systemInstruction"],Nv(ur(o)));const a=v(e,["temperature"]);a!=null&&x(r,["temperature"],a);const l=v(e,["topP"]);l!=null&&x(r,["topP"],l);const c=v(e,["topK"]);c!=null&&x(r,["topK"],c);const h=v(e,["candidateCount"]);h!=null&&x(r,["candidateCount"],h);const f=v(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const g=v(e,["stopSequences"]);g!=null&&x(r,["stopSequences"],g);const y=v(e,["responseLogprobs"]);y!=null&&x(r,["responseLogprobs"],y);const _=v(e,["logprobs"]);_!=null&&x(r,["logprobs"],_);const T=v(e,["presencePenalty"]);T!=null&&x(r,["presencePenalty"],T);const C=v(e,["frequencyPenalty"]);C!=null&&x(r,["frequencyPenalty"],C);const k=v(e,["seed"]);k!=null&&x(r,["seed"],k);const N=v(e,["responseMimeType"]);N!=null&&x(r,["responseMimeType"],N);const I=v(e,["responseSchema"]);I!=null&&x(r,["responseSchema"],hw(I));const L=v(e,["responseJsonSchema"]);if(L!=null&&x(r,["responseJsonSchema"],L),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=v(e,["safetySettings"]);if(n!==void 0&&D!=null){let de=D;Array.isArray(de)&&(de=de.map(xe=>JP(xe))),x(n,["safetySettings"],de)}const $=v(e,["tools"]);if(n!==void 0&&$!=null){let de=_f($);Array.isArray(de)&&(de=de.map(xe=>ZP(wf(xe)))),x(n,["tools"],de)}const G=v(e,["toolConfig"]);if(n!==void 0&&G!=null&&x(n,["toolConfig"],G),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=v(e,["cachedContent"]);n!==void 0&&j!=null&&x(n,["cachedContent"],Ws(t,j));const q=v(e,["responseModalities"]);q!=null&&x(r,["responseModalities"],q);const ee=v(e,["mediaResolution"]);ee!=null&&x(r,["mediaResolution"],ee);const W=v(e,["speechConfig"]);if(W!=null&&x(r,["speechConfig"],pw(W)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=v(e,["thinkingConfig"]);z!=null&&x(r,["thinkingConfig"],z);const te=v(e,["imageConfig"]);return te!=null&&x(r,["imageConfig"],te),r}function sP(t,e,n){const r={},o=v(e,["systemInstruction"]);n!==void 0&&o!=null&&x(n,["systemInstruction"],ur(o));const a=v(e,["temperature"]);a!=null&&x(r,["temperature"],a);const l=v(e,["topP"]);l!=null&&x(r,["topP"],l);const c=v(e,["topK"]);c!=null&&x(r,["topK"],c);const h=v(e,["candidateCount"]);h!=null&&x(r,["candidateCount"],h);const f=v(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const g=v(e,["stopSequences"]);g!=null&&x(r,["stopSequences"],g);const y=v(e,["responseLogprobs"]);y!=null&&x(r,["responseLogprobs"],y);const _=v(e,["logprobs"]);_!=null&&x(r,["logprobs"],_);const T=v(e,["presencePenalty"]);T!=null&&x(r,["presencePenalty"],T);const C=v(e,["frequencyPenalty"]);C!=null&&x(r,["frequencyPenalty"],C);const k=v(e,["seed"]);k!=null&&x(r,["seed"],k);const N=v(e,["responseMimeType"]);N!=null&&x(r,["responseMimeType"],N);const I=v(e,["responseSchema"]);I!=null&&x(r,["responseSchema"],hw(I));const L=v(e,["responseJsonSchema"]);L!=null&&x(r,["responseJsonSchema"],L);const D=v(e,["routingConfig"]);D!=null&&x(r,["routingConfig"],D);const $=v(e,["modelSelectionConfig"]);$!=null&&x(r,["modelConfig"],$);const G=v(e,["safetySettings"]);if(n!==void 0&&G!=null){let K=G;Array.isArray(K)&&(K=K.map(oe=>oe)),x(n,["safetySettings"],K)}const j=v(e,["tools"]);if(n!==void 0&&j!=null){let K=_f(j);Array.isArray(K)&&(K=K.map(oe=>iC(wf(oe)))),x(n,["tools"],K)}const q=v(e,["toolConfig"]);n!==void 0&&q!=null&&x(n,["toolConfig"],q);const ee=v(e,["labels"]);n!==void 0&&ee!=null&&x(n,["labels"],ee);const W=v(e,["cachedContent"]);n!==void 0&&W!=null&&x(n,["cachedContent"],Ws(t,W));const z=v(e,["responseModalities"]);z!=null&&x(r,["responseModalities"],z);const te=v(e,["mediaResolution"]);te!=null&&x(r,["mediaResolution"],te);const de=v(e,["speechConfig"]);de!=null&&x(r,["speechConfig"],rC(pw(de)));const xe=v(e,["audioTimestamp"]);xe!=null&&x(r,["audioTimestamp"],xe);const ue=v(e,["thinkingConfig"]);ue!=null&&x(r,["thinkingConfig"],ue);const fe=v(e,["imageConfig"]);return fe!=null&&x(r,["imageConfig"],fe),r}function JS(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["contents"]);if(o!=null){let l=Vi(o);Array.isArray(l)&&(l=l.map(c=>Nv(c))),x(n,["contents"],l)}const a=v(e,["config"]);return a!=null&&x(n,["generationConfig"],oP(t,a,n)),n}function YS(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["contents"]);if(o!=null){let l=Vi(o);Array.isArray(l)&&(l=l.map(c=>c)),x(n,["contents"],l)}const a=v(e,["config"]);return a!=null&&x(n,["generationConfig"],sP(t,a,n)),n}function WS(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(f=>RD(f))),x(e,["candidates"],h)}const o=v(t,["modelVersion"]);o!=null&&x(e,["modelVersion"],o);const a=v(t,["promptFeedback"]);a!=null&&x(e,["promptFeedback"],a);const l=v(t,["responseId"]);l!=null&&x(e,["responseId"],l);const c=v(t,["usageMetadata"]);return c!=null&&x(e,["usageMetadata"],c),e}function KS(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(g=>g)),x(e,["candidates"],f)}const o=v(t,["createTime"]);o!=null&&x(e,["createTime"],o);const a=v(t,["modelVersion"]);a!=null&&x(e,["modelVersion"],a);const l=v(t,["promptFeedback"]);l!=null&&x(e,["promptFeedback"],l);const c=v(t,["responseId"]);c!=null&&x(e,["responseId"],c);const h=v(t,["usageMetadata"]);return h!=null&&x(e,["usageMetadata"],h),e}function aP(t,e){const n={};if(v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=v(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const o=v(t,["aspectRatio"]);e!==void 0&&o!=null&&x(e,["parameters","aspectRatio"],o);const a=v(t,["guidanceScale"]);if(e!==void 0&&a!=null&&x(e,["parameters","guidanceScale"],a),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=v(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&x(e,["parameters","safetySetting"],l);const c=v(t,["personGeneration"]);e!==void 0&&c!=null&&x(e,["parameters","personGeneration"],c);const h=v(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&x(e,["parameters","includeSafetyAttributes"],h);const f=v(t,["includeRaiReason"]);e!==void 0&&f!=null&&x(e,["parameters","includeRaiReason"],f);const g=v(t,["language"]);e!==void 0&&g!=null&&x(e,["parameters","language"],g);const y=v(t,["outputMimeType"]);e!==void 0&&y!=null&&x(e,["parameters","outputOptions","mimeType"],y);const _=v(t,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&x(e,["parameters","outputOptions","compressionQuality"],_),v(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=v(t,["imageSize"]);if(e!==void 0&&T!=null&&x(e,["parameters","sampleImageSize"],T),v(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function lP(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const o=v(t,["negativePrompt"]);e!==void 0&&o!=null&&x(e,["parameters","negativePrompt"],o);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&x(e,["parameters","sampleCount"],a);const l=v(t,["aspectRatio"]);e!==void 0&&l!=null&&x(e,["parameters","aspectRatio"],l);const c=v(t,["guidanceScale"]);e!==void 0&&c!=null&&x(e,["parameters","guidanceScale"],c);const h=v(t,["seed"]);e!==void 0&&h!=null&&x(e,["parameters","seed"],h);const f=v(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&x(e,["parameters","safetySetting"],f);const g=v(t,["personGeneration"]);e!==void 0&&g!=null&&x(e,["parameters","personGeneration"],g);const y=v(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&x(e,["parameters","includeSafetyAttributes"],y);const _=v(t,["includeRaiReason"]);e!==void 0&&_!=null&&x(e,["parameters","includeRaiReason"],_);const T=v(t,["language"]);e!==void 0&&T!=null&&x(e,["parameters","language"],T);const C=v(t,["outputMimeType"]);e!==void 0&&C!=null&&x(e,["parameters","outputOptions","mimeType"],C);const k=v(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&x(e,["parameters","outputOptions","compressionQuality"],k);const N=v(t,["addWatermark"]);e!==void 0&&N!=null&&x(e,["parameters","addWatermark"],N);const I=v(t,["labels"]);e!==void 0&&I!=null&&x(e,["labels"],I);const L=v(t,["imageSize"]);e!==void 0&&L!=null&&x(e,["parameters","sampleImageSize"],L);const D=v(t,["enhancePrompt"]);return e!==void 0&&D!=null&&x(e,["parameters","enhancePrompt"],D),n}function uP(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["prompt"]);o!=null&&x(n,["instances[0]","prompt"],o);const a=v(e,["config"]);return a!=null&&aP(a,n),n}function cP(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["prompt"]);o!=null&&x(n,["instances[0]","prompt"],o);const a=v(e,["config"]);return a!=null&&lP(a,n),n}function dP(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>SP(l))),x(e,["generatedImages"],a)}const o=v(t,["positivePromptSafetyAttributes"]);return o!=null&&x(e,["positivePromptSafetyAttributes"],tC(o)),e}function fP(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Mv(l))),x(e,["generatedImages"],a)}const o=v(t,["positivePromptSafetyAttributes"]);return o!=null&&x(e,["positivePromptSafetyAttributes"],nC(o)),e}function hP(t,e){const n={},r=v(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r),v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=v(t,["durationSeconds"]);if(e!==void 0&&o!=null&&x(e,["parameters","durationSeconds"],o),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=v(t,["aspectRatio"]);e!==void 0&&a!=null&&x(e,["parameters","aspectRatio"],a);const l=v(t,["resolution"]);e!==void 0&&l!=null&&x(e,["parameters","resolution"],l);const c=v(t,["personGeneration"]);if(e!==void 0&&c!=null&&x(e,["parameters","personGeneration"],c),v(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=v(t,["negativePrompt"]);e!==void 0&&h!=null&&x(e,["parameters","negativePrompt"],h);const f=v(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&x(e,["parameters","enhancePrompt"],f),v(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=v(t,["lastFrame"]);e!==void 0&&g!=null&&x(e,["instances[0]","lastFrame"],Dv(g));const y=v(t,["referenceImages"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>fL(T))),x(e,["instances[0]","referenceImages"],_)}if(v(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(v(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function pP(t,e){const n={},r=v(t,["numberOfVideos"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const o=v(t,["outputGcsUri"]);e!==void 0&&o!=null&&x(e,["parameters","storageUri"],o);const a=v(t,["fps"]);e!==void 0&&a!=null&&x(e,["parameters","fps"],a);const l=v(t,["durationSeconds"]);e!==void 0&&l!=null&&x(e,["parameters","durationSeconds"],l);const c=v(t,["seed"]);e!==void 0&&c!=null&&x(e,["parameters","seed"],c);const h=v(t,["aspectRatio"]);e!==void 0&&h!=null&&x(e,["parameters","aspectRatio"],h);const f=v(t,["resolution"]);e!==void 0&&f!=null&&x(e,["parameters","resolution"],f);const g=v(t,["personGeneration"]);e!==void 0&&g!=null&&x(e,["parameters","personGeneration"],g);const y=v(t,["pubsubTopic"]);e!==void 0&&y!=null&&x(e,["parameters","pubsubTopic"],y);const _=v(t,["negativePrompt"]);e!==void 0&&_!=null&&x(e,["parameters","negativePrompt"],_);const T=v(t,["enhancePrompt"]);e!==void 0&&T!=null&&x(e,["parameters","enhancePrompt"],T);const C=v(t,["generateAudio"]);e!==void 0&&C!=null&&x(e,["parameters","generateAudio"],C);const k=v(t,["lastFrame"]);e!==void 0&&k!=null&&x(e,["instances[0]","lastFrame"],_o(k));const N=v(t,["referenceImages"]);if(e!==void 0&&N!=null){let D=N;Array.isArray(D)&&(D=D.map($=>hL($))),x(e,["instances[0]","referenceImages"],D)}const I=v(t,["mask"]);e!==void 0&&I!=null&&x(e,["instances[0]","mask"],dL(I));const L=v(t,["compressionQuality"]);return e!==void 0&&L!=null&&x(e,["parameters","compressionQuality"],L),n}function mP(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const r=v(t,["metadata"]);r!=null&&x(e,["metadata"],r);const o=v(t,["done"]);o!=null&&x(e,["done"],o);const a=v(t,["error"]);a!=null&&x(e,["error"],a);const l=v(t,["response","generateVideoResponse"]);return l!=null&&x(e,["response"],bP(l)),e}function gP(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const r=v(t,["metadata"]);r!=null&&x(e,["metadata"],r);const o=v(t,["done"]);o!=null&&x(e,["done"],o);const a=v(t,["error"]);a!=null&&x(e,["error"],a);const l=v(t,["response"]);return l!=null&&x(e,["response"],xP(l)),e}function yP(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["prompt"]);o!=null&&x(n,["instances[0]","prompt"],o);const a=v(e,["image"]);a!=null&&x(n,["instances[0]","image"],Dv(a));const l=v(e,["video"]);l!=null&&x(n,["instances[0]","video"],oC(l));const c=v(e,["source"]);c!=null&&wP(c,n);const h=v(e,["config"]);return h!=null&&hP(h,n),n}function vP(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["prompt"]);o!=null&&x(n,["instances[0]","prompt"],o);const a=v(e,["image"]);a!=null&&x(n,["instances[0]","image"],_o(a));const l=v(e,["video"]);l!=null&&x(n,["instances[0]","video"],sC(l));const c=v(e,["source"]);c!=null&&_P(c,n);const h=v(e,["config"]);return h!=null&&pP(h,n),n}function bP(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>TP(l))),x(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const o=v(t,["raiMediaFilteredReasons"]);return o!=null&&x(e,["raiMediaFilteredReasons"],o),e}function xP(t){const e={},n=v(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>CP(l))),x(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const o=v(t,["raiMediaFilteredReasons"]);return o!=null&&x(e,["raiMediaFilteredReasons"],o),e}function wP(t,e){const n={},r=v(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const o=v(t,["image"]);e!==void 0&&o!=null&&x(e,["instances[0]","image"],Dv(o));const a=v(t,["video"]);return e!==void 0&&a!=null&&x(e,["instances[0]","video"],oC(a)),n}function _P(t,e){const n={},r=v(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const o=v(t,["image"]);e!==void 0&&o!=null&&x(e,["instances[0]","image"],_o(o));const a=v(t,["video"]);return e!==void 0&&a!=null&&x(e,["instances[0]","video"],sC(a)),n}function SP(t){const e={},n=v(t,["_self"]);n!=null&&x(e,["image"],MP(n));const r=v(t,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const o=v(t,["_self"]);return o!=null&&x(e,["safetyAttributes"],tC(o)),e}function Mv(t){const e={},n=v(t,["_self"]);n!=null&&x(e,["image"],eC(n));const r=v(t,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const o=v(t,["_self"]);o!=null&&x(e,["safetyAttributes"],nC(o));const a=v(t,["prompt"]);return a!=null&&x(e,["enhancedPrompt"],a),e}function EP(t){const e={},n=v(t,["_self"]);n!=null&&x(e,["mask"],eC(n));const r=v(t,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),x(e,["labels"],o)}return e}function TP(t){const e={},n=v(t,["video"]);return n!=null&&x(e,["video"],uL(n)),e}function CP(t){const e={},n=v(t,["_self"]);return n!=null&&x(e,["video"],cL(n)),e}function AP(t){const e={},n=v(t,["modelSelectionConfig"]);n!=null&&x(e,["modelConfig"],n);const r=v(t,["audioTimestamp"]);r!=null&&x(e,["audioTimestamp"],r);const o=v(t,["candidateCount"]);o!=null&&x(e,["candidateCount"],o);const a=v(t,["enableAffectiveDialog"]);a!=null&&x(e,["enableAffectiveDialog"],a);const l=v(t,["frequencyPenalty"]);l!=null&&x(e,["frequencyPenalty"],l);const c=v(t,["logprobs"]);c!=null&&x(e,["logprobs"],c);const h=v(t,["maxOutputTokens"]);h!=null&&x(e,["maxOutputTokens"],h);const f=v(t,["mediaResolution"]);f!=null&&x(e,["mediaResolution"],f);const g=v(t,["presencePenalty"]);g!=null&&x(e,["presencePenalty"],g);const y=v(t,["responseJsonSchema"]);y!=null&&x(e,["responseJsonSchema"],y);const _=v(t,["responseLogprobs"]);_!=null&&x(e,["responseLogprobs"],_);const T=v(t,["responseMimeType"]);T!=null&&x(e,["responseMimeType"],T);const C=v(t,["responseModalities"]);C!=null&&x(e,["responseModalities"],C);const k=v(t,["responseSchema"]);k!=null&&x(e,["responseSchema"],k);const N=v(t,["routingConfig"]);N!=null&&x(e,["routingConfig"],N);const I=v(t,["seed"]);I!=null&&x(e,["seed"],I);const L=v(t,["speechConfig"]);L!=null&&x(e,["speechConfig"],rC(L));const D=v(t,["stopSequences"]);D!=null&&x(e,["stopSequences"],D);const $=v(t,["temperature"]);$!=null&&x(e,["temperature"],$);const G=v(t,["thinkingConfig"]);G!=null&&x(e,["thinkingConfig"],G);const j=v(t,["topK"]);j!=null&&x(e,["topK"],j);const q=v(t,["topP"]);if(q!=null&&x(e,["topP"],q),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function kP(t,e){const n={},r=v(e,["model"]);return r!=null&&x(n,["_url","name"],Et(t,r)),n}function IP(t,e){const n={},r=v(e,["model"]);return r!=null&&x(n,["_url","name"],Et(t,r)),n}function RP(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function NP(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function MP(t){const e={},n=v(t,["bytesBase64Encoded"]);n!=null&&x(e,["imageBytes"],ll(n));const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function eC(t){const e={},n=v(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&x(e,["imageBytes"],ll(r));const o=v(t,["mimeType"]);return o!=null&&x(e,["mimeType"],o),e}function Dv(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=v(t,["imageBytes"]);n!=null&&x(e,["bytesBase64Encoded"],ll(n));const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function _o(t){const e={},n=v(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const r=v(t,["imageBytes"]);r!=null&&x(e,["bytesBase64Encoded"],ll(r));const o=v(t,["mimeType"]);return o!=null&&x(e,["mimeType"],o),e}function DP(t,e,n){const r={},o=v(e,["pageSize"]);n!==void 0&&o!=null&&x(n,["_query","pageSize"],o);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&x(n,["_query","pageToken"],a);const l=v(e,["filter"]);n!==void 0&&l!=null&&x(n,["_query","filter"],l);const c=v(e,["queryBase"]);return n!==void 0&&c!=null&&x(n,["_url","models_url"],GT(t,c)),r}function PP(t,e,n){const r={},o=v(e,["pageSize"]);n!==void 0&&o!=null&&x(n,["_query","pageSize"],o);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&x(n,["_query","pageToken"],a);const l=v(e,["filter"]);n!==void 0&&l!=null&&x(n,["_query","filter"],l);const c=v(e,["queryBase"]);return n!==void 0&&c!=null&&x(n,["_url","models_url"],GT(t,c)),r}function LP(t,e){const n={},r=v(e,["config"]);return r!=null&&DP(t,r,n),n}function OP(t,e){const n={},r=v(e,["config"]);return r!=null&&PP(t,r,n),n}function UP(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const o=v(t,["_self"]);if(o!=null){let a=JT(o);Array.isArray(a)&&(a=a.map(l=>_x(l))),x(e,["models"],a)}return e}function BP(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const o=v(t,["_self"]);if(o!=null){let a=JT(o);Array.isArray(a)&&(a=a.map(l=>Sx(l))),x(e,["models"],a)}return e}function FP(t){const e={},n=v(t,["maskMode"]);n!=null&&x(e,["maskMode"],n);const r=v(t,["segmentationClasses"]);r!=null&&x(e,["maskClasses"],r);const o=v(t,["maskDilation"]);return o!=null&&x(e,["dilation"],o),e}function _x(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const r=v(t,["displayName"]);r!=null&&x(e,["displayName"],r);const o=v(t,["description"]);o!=null&&x(e,["description"],o);const a=v(t,["version"]);a!=null&&x(e,["version"],a);const l=v(t,["_self"]);l!=null&&x(e,["tunedModelInfo"],eL(l));const c=v(t,["inputTokenLimit"]);c!=null&&x(e,["inputTokenLimit"],c);const h=v(t,["outputTokenLimit"]);h!=null&&x(e,["outputTokenLimit"],h);const f=v(t,["supportedGenerationMethods"]);return f!=null&&x(e,["supportedActions"],f),e}function Sx(t){const e={},n=v(t,["name"]);n!=null&&x(e,["name"],n);const r=v(t,["displayName"]);r!=null&&x(e,["displayName"],r);const o=v(t,["description"]);o!=null&&x(e,["description"],o);const a=v(t,["versionId"]);a!=null&&x(e,["version"],a);const l=v(t,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>nP(_))),x(e,["endpoints"],y)}const c=v(t,["labels"]);c!=null&&x(e,["labels"],c);const h=v(t,["_self"]);h!=null&&x(e,["tunedModelInfo"],tL(h));const f=v(t,["defaultCheckpointId"]);f!=null&&x(e,["defaultCheckpointId"],f);const g=v(t,["checkpoints"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(_=>_)),x(e,["checkpoints"],y)}return e}function jP(t){const e={},n=v(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=v(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const o=v(t,["executableCode"]);o!=null&&x(e,["executableCode"],o);const a=v(t,["fileData"]);a!=null&&x(e,["fileData"],rP(a));const l=v(t,["functionResponse"]);l!=null&&x(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&x(e,["inlineData"],ID(c));const h=v(t,["text"]);h!=null&&x(e,["text"],h);const f=v(t,["thought"]);f!=null&&x(e,["thought"],f);const g=v(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const y=v(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function zP(t){const e={},n=v(t,["productImage"]);return n!=null&&x(e,["image"],_o(n)),e}function qP(t,e){const n={},r=v(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const o=v(t,["baseSteps"]);e!==void 0&&o!=null&&x(e,["parameters","editConfig","baseSteps"],o);const a=v(t,["outputGcsUri"]);e!==void 0&&a!=null&&x(e,["parameters","storageUri"],a);const l=v(t,["seed"]);e!==void 0&&l!=null&&x(e,["parameters","seed"],l);const c=v(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&x(e,["parameters","safetySetting"],c);const h=v(t,["personGeneration"]);e!==void 0&&h!=null&&x(e,["parameters","personGeneration"],h);const f=v(t,["addWatermark"]);e!==void 0&&f!=null&&x(e,["parameters","addWatermark"],f);const g=v(t,["outputMimeType"]);e!==void 0&&g!=null&&x(e,["parameters","outputOptions","mimeType"],g);const y=v(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&x(e,["parameters","outputOptions","compressionQuality"],y);const _=v(t,["enhancePrompt"]);e!==void 0&&_!=null&&x(e,["parameters","enhancePrompt"],_);const T=v(t,["labels"]);return e!==void 0&&T!=null&&x(e,["labels"],T),n}function HP(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["source"]);o!=null&&$P(o,n);const a=v(e,["config"]);return a!=null&&qP(a,n),n}function VP(t){const e={},n=v(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Mv(o))),x(e,["generatedImages"],r)}return e}function $P(t,e){const n={},r=v(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const o=v(t,["personImage"]);e!==void 0&&o!=null&&x(e,["instances[0]","personImage","image"],_o(o));const a=v(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>zP(c))),x(e,["instances[0]","productImages"],l)}return n}function GP(t){const e={},n=v(t,["referenceImage"]);n!=null&&x(e,["referenceImage"],_o(n));const r=v(t,["referenceId"]);r!=null&&x(e,["referenceId"],r);const o=v(t,["referenceType"]);o!=null&&x(e,["referenceType"],o);const a=v(t,["maskImageConfig"]);a!=null&&x(e,["maskImageConfig"],FP(a));const l=v(t,["controlImageConfig"]);l!=null&&x(e,["controlImageConfig"],OD(l));const c=v(t,["styleImageConfig"]);c!=null&&x(e,["styleImageConfig"],c);const h=v(t,["subjectImageConfig"]);return h!=null&&x(e,["subjectImageConfig"],h),e}function tC(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const r=v(t,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const o=v(t,["contentType"]);return o!=null&&x(e,["contentType"],o),e}function nC(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const r=v(t,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const o=v(t,["contentType"]);return o!=null&&x(e,["contentType"],o),e}function JP(t){const e={},n=v(t,["category"]);if(n!=null&&x(e,["category"],n),v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=v(t,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function YP(t){const e={},n=v(t,["image"]);return n!=null&&x(e,["image"],_o(n)),e}function WP(t,e){const n={},r=v(t,["mode"]);e!==void 0&&r!=null&&x(e,["parameters","mode"],r);const o=v(t,["maxPredictions"]);e!==void 0&&o!=null&&x(e,["parameters","maxPredictions"],o);const a=v(t,["confidenceThreshold"]);e!==void 0&&a!=null&&x(e,["parameters","confidenceThreshold"],a);const l=v(t,["maskDilation"]);e!==void 0&&l!=null&&x(e,["parameters","maskDilation"],l);const c=v(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&x(e,["parameters","binaryColorThreshold"],c);const h=v(t,["labels"]);return e!==void 0&&h!=null&&x(e,["labels"],h),n}function KP(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["source"]);o!=null&&QP(o,n);const a=v(e,["config"]);return a!=null&&WP(a,n),n}function XP(t){const e={},n=v(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>EP(o))),x(e,["generatedMasks"],r)}return e}function QP(t,e){const n={},r=v(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const o=v(t,["image"]);e!==void 0&&o!=null&&x(e,["instances[0]","image"],_o(o));const a=v(t,["scribbleImage"]);return e!==void 0&&a!=null&&x(e,["instances[0]","scribble"],YP(a)),n}function rC(t){const e={},n=v(t,["languageCode"]);n!=null&&x(e,["languageCode"],n);const r=v(t,["voiceConfig"]);if(r!=null&&x(e,["voiceConfig"],r),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ZP(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),x(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const o=v(t,["googleMaps"]);o!=null&&x(e,["googleMaps"],RP(o));const a=v(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const l=v(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=v(t,["googleSearch"]);c!=null&&x(e,["googleSearch"],NP(c));const h=v(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}function iC(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>iP(_))),x(e,["functionDeclarations"],y)}const r=v(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const o=v(t,["googleSearchRetrieval"]);o!=null&&x(e,["googleSearchRetrieval"],o);const a=v(t,["googleMaps"]);a!=null&&x(e,["googleMaps"],a);const l=v(t,["computerUse"]);l!=null&&x(e,["computerUse"],l);const c=v(t,["codeExecution"]);c!=null&&x(e,["codeExecution"],c);const h=v(t,["enterpriseWebSearch"]);h!=null&&x(e,["enterpriseWebSearch"],h);const f=v(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],f);const g=v(t,["urlContext"]);return g!=null&&x(e,["urlContext"],g),e}function eL(t){const e={},n=v(t,["baseModel"]);n!=null&&x(e,["baseModel"],n);const r=v(t,["createTime"]);r!=null&&x(e,["createTime"],r);const o=v(t,["updateTime"]);return o!=null&&x(e,["updateTime"],o),e}function tL(t){const e={},n=v(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&x(e,["baseModel"],n);const r=v(t,["createTime"]);r!=null&&x(e,["createTime"],r);const o=v(t,["updateTime"]);return o!=null&&x(e,["updateTime"],o),e}function nL(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const o=v(t,["description"]);e!==void 0&&o!=null&&x(e,["description"],o);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&x(e,["defaultCheckpointId"],a),n}function rL(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const o=v(t,["description"]);e!==void 0&&o!=null&&x(e,["description"],o);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&x(e,["defaultCheckpointId"],a),n}function iL(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","name"],Et(t,r));const o=v(e,["config"]);return o!=null&&nL(o,n),n}function oL(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["config"]);return o!=null&&rL(o,n),n}function sL(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const o=v(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&x(e,["parameters","safetySetting"],o);const a=v(t,["personGeneration"]);e!==void 0&&a!=null&&x(e,["parameters","personGeneration"],a);const l=v(t,["includeRaiReason"]);e!==void 0&&l!=null&&x(e,["parameters","includeRaiReason"],l);const c=v(t,["outputMimeType"]);e!==void 0&&c!=null&&x(e,["parameters","outputOptions","mimeType"],c);const h=v(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&x(e,["parameters","outputOptions","compressionQuality"],h);const f=v(t,["enhanceInputImage"]);e!==void 0&&f!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],f);const g=v(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const y=v(t,["labels"]);e!==void 0&&y!=null&&x(e,["labels"],y);const _=v(t,["numberOfImages"]);e!==void 0&&_!=null&&x(e,["parameters","sampleCount"],_);const T=v(t,["mode"]);return e!==void 0&&T!=null&&x(e,["parameters","mode"],T),n}function aL(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["_url","model"],Et(t,r));const o=v(e,["image"]);o!=null&&x(n,["instances[0]","image"],_o(o));const a=v(e,["upscaleFactor"]);a!=null&&x(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=v(e,["config"]);return l!=null&&sL(l,n),n}function lL(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Mv(a))),x(e,["generatedImages"],o)}return e}function uL(t){const e={},n=v(t,["uri"]);n!=null&&x(e,["uri"],n);const r=v(t,["encodedVideo"]);r!=null&&x(e,["videoBytes"],ll(r));const o=v(t,["encoding"]);return o!=null&&x(e,["mimeType"],o),e}function cL(t){const e={},n=v(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],ll(r));const o=v(t,["mimeType"]);return o!=null&&x(e,["mimeType"],o),e}function dL(t){const e={},n=v(t,["image"]);n!=null&&x(e,["_self"],_o(n));const r=v(t,["maskMode"]);return r!=null&&x(e,["maskMode"],r),e}function fL(t){const e={},n=v(t,["image"]);n!=null&&x(e,["image"],Dv(n));const r=v(t,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function hL(t){const e={},n=v(t,["image"]);n!=null&&x(e,["image"],_o(n));const r=v(t,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function oC(t){const e={},n=v(t,["uri"]);n!=null&&x(e,["uri"],n);const r=v(t,["videoBytes"]);r!=null&&x(e,["encodedVideo"],ll(r));const o=v(t,["mimeType"]);return o!=null&&x(e,["encoding"],o),e}function sC(t){const e={},n=v(t,["uri"]);n!=null&&x(e,["gcsUri"],n);const r=v(t,["videoBytes"]);r!=null&&x(e,["bytesBase64Encoded"],ll(r));const o=v(t,["mimeType"]);return o!=null&&x(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pL="Content-Type",mL="X-Server-Timeout",gL="User-Agent",Ex="x-goog-api-client",yL="1.28.0",vL=`google-genai-sdk/${yL}`,bL="v1beta1",xL="v1beta",XS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class wL{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:bL,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:xL,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))o.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(n))typeof a=="object"?r[o]=Object.assign(Object.assign({},r[o]),a):a!==void 0&&(r[o]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,o){if(n&&n.timeout||o){const a=new AbortController,l=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&_L(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await QS(o),new bx(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await QS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return sf(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:h}=yield Kt(o.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=a.decode(h,{stream:!0});try{const y=JSON.parse(f);if("error"in y){const _=JSON.parse(JSON.stringify(y.error)),T=_.status,C=_.code,k=`got status: ${T}. ${JSON.stringify(y)}`;if(C>=400&&C<600)throw new Rv({message:k,status:C})}}catch(y){if(y.name==="ApiError")throw y}l+=f;let g=l.match(XS);for(;g;){const y=g[1];try{const _=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Kt(new bx(_)),l=l.slice(g[0].length),g=l.match(XS)}catch(_){throw new Error(`exception parsing stream chunk ${y}. ${_}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=vL+" "+this.clientOptions.userAgentExtra;return e[gL]=n,e[Ex]=n,e[pL]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))r.append(o,a);e.timeout&&e.timeout>0&&r.append(mL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}async uploadFile(e,n){var r,o;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const h=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;let f="";typeof e=="string"&&(f=e.replace(/[/\\]+$/,""),f=(o=f.split(/[/\\]/).pop())!==null&&o!==void 0?o:"");const g=await this.fetchUploadUrl(a,f,n);return l.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r){var o;let a={};r!=null&&r.httpOptions?a=r.httpOptions:a={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`},n?{"X-Goog-Upload-File-Name":n}:{})};const l={file:e},c=await this.request({path:De("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:a});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(o=c==null?void 0:c.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function QS(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new Rv({message:o,status:n}):new Error(o)}}function _L(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,l){const c=Object.assign({},a);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const f=l[h],g=c[h];f&&typeof f=="object"&&!Array.isArray(f)&&g&&typeof g=="object"&&!Array.isArray(g)?c[h]=r(g,f):(g&&f&&typeof g!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof g}, New type: ${typeof f}. Overwriting.`),c[h]=f)}return c}const o=r(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SL="mcp_used/unknown";let EL=!1;function aC(t){for(const e of t)if(TL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return EL}function lC(t){var e;const n=(e=t[Ex])!==null&&e!==void 0?e:"";t[Ex]=(n+` ${SL}`).trimStart()}function TL(t){return t!==null&&typeof t=="object"&&t instanceof gw}function CL(t,e=100){return sf(this,arguments,function*(){let r,o=0;for(;o<e;){const a=yield Kt(t.listTools({cursor:r}));for(const l of a.tools)yield yield Kt(l),o++;if(!a.nextCursor)break;r=a.nextCursor}})}class gw{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new gw(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;const a={},l=[];for(const g of this.mcpClients)try{for(var c=!0,h=(n=void 0,Hp(CL(g))),f;f=await h.next(),e=f.done,!e;c=!0){o=f.value,c=!1;const y=o;l.push(y);const _=y.name;if(a[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);a[_]=g}}catch(y){n={error:y}}finally{try{!c&&!e&&(r=h.return)&&await r.call(h)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),N2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await o.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function AL(t,e,n){const r=new S2;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),e(r)}class kL{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=NL(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const g=new Promise(D=>{f=D}),y=e.callbacks,_=function(){f({})},T=this.apiClient,C={onopen:_,onmessage:D=>{AL(T,y.onmessage,D)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(D){}},k=this.webSocketFactory.create(h,RL(l),C);k.connect(),await g;const L={setup:{model:Et(this.apiClient,e.model)}};return k.send(JSON.stringify(L)),new IL(k,this.apiClient)}}class IL{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=xD(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=bD(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(tf.PLAY)}pause(){this.sendPlaybackControl(tf.PAUSE)}stop(){this.sendPlaybackControl(tf.STOP)}resetContext(){this.sendPlaybackControl(tf.RESET_CONTEXT)}close(){this.conn.close()}}function RL(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function NL(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ML="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function DL(t,e,n){const r=new _2;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const a=JSON.parse(o);if(t.isVertexAI()){const l=SD(a);Object.assign(r,l)}else Object.assign(r,a);e(r)}class PL{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new kL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let g;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&aC(e.config.tools)&&lC(y);const _=BL(y);if(this.apiClient.isVertexAI())g=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,g);else{const W=this.apiClient.getApiKey();let z="BidiGenerateContent",te="key";W!=null&&W.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),z="BidiGenerateContentConstrained",te="access_token"),g=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${z}?${te}=${W}`}let T=()=>{};const C=new Promise(W=>{T=W}),k=e.callbacks,N=function(){var W;(W=k==null?void 0:k.onopen)===null||W===void 0||W.call(k),T({})},I=this.apiClient,L={onopen:N,onmessage:W=>{DL(I,k.onmessage,W)},onerror:(n=k==null?void 0:k.onerror)!==null&&n!==void 0?n:function(W){},onclose:(r=k==null?void 0:k.onclose)!==null&&r!==void 0?r:function(W){}},D=this.webSocketFactory.create(g,UL(_),L);D.connect(),await C;let $=Et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const W=this.apiClient.getProject(),z=this.apiClient.getLocation();$=`projects/${W}/locations/${z}/`+$}let G={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[hf.AUDIO]}:e.config.responseModalities=[hf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],q=[];for(const W of j)if(this.isCallableTool(W)){const z=W;q.push(await z.tool())}else q.push(W);q.length>0&&(e.config.tools=q);const ee={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?G=vD(this.apiClient,ee):G=yD(this.apiClient,ee),delete G.config,D.send(JSON.stringify(G)),new OL(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const LL={turnComplete:!0};class OL{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Vi(n.turns),e.isVertexAI()||(r=r.map(o=>Nv(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(ML)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},LL),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:_D(e)}:n={realtimeInput:wD(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function UL(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function BL(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZS=10;function eE(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(af(l)){o=!0;break}if(!o)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function af(t){return"callTool"in t&&typeof t.callTool=="function"}function FL(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>af(o)))!==null&&r!==void 0?r:!1}function jL(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>!af(o)))!==null&&r!==void 0?r:!1}function tE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zL extends ec{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,a,l,c;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!FL(n)||eE(n.config))return await this.generateContentInternal(h);if(jL(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,g;const y=Vi(h.contents),_=(a=(o=(r=h.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:ZS;let T=0;for(;T<_&&(f=await this.generateContentInternal(h),!(!f.functionCalls||f.functionCalls.length===0));){const C=f.candidates[0].content,k=[];for(const N of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(af(N)){const L=await N.callTool(f.functionCalls);k.push(...L)}T++,g={role:"user",parts:k},h.contents=Vi(h.contents),h.contents.push(C),h.contents.push(g),tE(h.config)&&(y.push(C),y.push(g))}return tE(h.config)&&(f.automaticFunctionCallingHistory=y),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),eE(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let a;const l=[];if(r!=null&&r.generatedImages)for(const h of r.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((o=h==null?void 0:h.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:l.push(h);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async n=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new am($u.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,a,l,c,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((h=(c=n.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async h=>af(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&aC(e.config.tools)){const h=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),lC(f),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(e){var n,r,o;const a=new Map;for(const l of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(af(l)){const c=l,h=await c.tool();for(const f of(o=h.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(a.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);a.set(f.name,c)}}return a}async processAfcStream(e){var n,r,o;const a=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:ZS;let l=!1,c=0;const h=await this.initAfcToolsMap(e);return(function(f,g,y){var _,T;return sf(this,arguments,function*(){for(var C,k,N,I;c<a;){l&&(c++,l=!1);const G=yield Kt(f.processParamsMaybeAddMcpUsage(y)),j=yield Kt(f.generateContentStreamInternal(G)),q=[],ee=[];try{for(var L=!0,D=(k=void 0,Hp(j)),$;$=yield Kt(D.next()),C=$.done,!C;L=!0){I=$.value,L=!1;const W=I;if(yield yield Kt(W),W.candidates&&(!((_=W.candidates[0])===null||_===void 0)&&_.content)){ee.push(W.candidates[0].content);for(const z of(T=W.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(c<a&&z.functionCall){if(!z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(z.functionCall.name)){const te=yield Kt(g.get(z.functionCall.name).callTool([z.functionCall]));q.push(...te)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${z.functionCall.name}`)}}}}catch(W){k={error:W}}finally{try{!L&&!C&&(N=D.return)&&(yield Kt(N.call(D)))}finally{if(k)throw k.error}}if(q.length>0){l=!0;const W=new Rp;W.candidates=[{content:{role:"user",parts:q}}],yield yield Kt(W);const z=[];z.push(...ee),z.push({role:"user",parts:q});const te=Vi(y.contents).concat(z);y.contents=te}else break}})})(this,h,e)}async generateContentInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=YS(this.apiClient,e);return c=De("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=KS(g),_=new Rp;return Object.assign(_,y),_})}else{const f=JS(this.apiClient,e);return c=De("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=WS(g),_=new Rp;return Object.assign(_,y),_})}}async generateContentStreamInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=YS(this.apiClient,e);return c=De("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(y){return sf(this,arguments,function*(){var _,T,C,k;try{for(var N=!0,I=Hp(y),L;L=yield Kt(I.next()),_=L.done,!_;N=!0){k=L.value,N=!1;const D=k,$=KS(yield Kt(D.json()));$.sdkHttpResponse={headers:D.headers};const G=new Rp;Object.assign(G,$),yield yield Kt(G)}}catch(D){T={error:D}}finally{try{!N&&!_&&(C=I.return)&&(yield Kt(C.call(I)))}finally{if(T)throw T.error}}})})}else{const f=JS(this.apiClient,e);return c=De("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(y){return sf(this,arguments,function*(){var _,T,C,k;try{for(var N=!0,I=Hp(y),L;L=yield Kt(I.next()),_=L.done,!_;N=!0){k=L.value,N=!1;const D=k,$=WS(yield Kt(D.json()));$.sdkHttpResponse={headers:D.headers};const G=new Rp;Object.assign(G,$),yield yield Kt(G)}}catch(D){T={error:D}}finally{try{!N&&!_&&(C=I.return)&&(yield Kt(C.call(I)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=ZD(this.apiClient,e);return c=De("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=tP(g),_=new NS;return Object.assign(_,y),_})}else{const f=QD(this.apiClient,e);return c=De("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=eP(g),_=new NS;return Object.assign(_,y),_})}}async generateImagesInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=cP(this.apiClient,e);return c=De("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=fP(g),_=new MS;return Object.assign(_,y),_})}else{const f=uP(this.apiClient,e);return c=De("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=dP(g),_=new MS;return Object.assign(_,y),_})}}async editImageInternal(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=YD(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const f=WD(h),g=new p2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=aL(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const f=lL(h),g=new m2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=HP(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const f=VP(h),g=new g2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=KP(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const f=XP(h),g=new y2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=IP(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>Sx(g))}else{const f=kP(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>_x(g))}}async listInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=OP(this.apiClient,e);return c=De("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=BP(g),_=new DS;return Object.assign(_,y),_})}else{const f=LP(this.apiClient,e);return c=De("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=UP(g),_=new DS;return Object.assign(_,y),_})}}async update(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=oL(this.apiClient,e);return c=De("{model}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>Sx(g))}else{const f=iL(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>_x(g))}}async delete(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=VD(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=GD(g),_=new PS;return Object.assign(_,y),_})}else{const f=HD(this.apiClient,e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=$D(g),_=new PS;return Object.assign(_,y),_})}}async countTokens(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=jD(this.apiClient,e);return c=De("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=qD(g),_=new LS;return Object.assign(_,y),_})}else{const f=FD(this.apiClient,e);return c=De("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=zD(g),_=new LS;return Object.assign(_,y),_})}}async computeTokens(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=MD(this.apiClient,e);return a=De("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const f=DD(h),g=new v2;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=vP(this.apiClient,e);return c=De("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>{const y=gP(g),_=new hv;return Object.assign(_,y),_})}else{const f=yP(this.apiClient,e);return c=De("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>{const y=mP(g),_=new hv;return Object.assign(_,y),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qL extends ec{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=d2(e);return c=De("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l}else{const f=c2(e);return c=De("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l}}async fetchPredictVideosOperationInternal(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=r2(e);return a=De("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HL(t){const e={},n=v(t,["data"]);if(n!=null&&x(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function VL(t){const e={},n=v(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>QL(a))),x(e,["parts"],o)}const r=v(t,["role"]);return r!=null&&x(e,["role"],r),e}function $L(t,e,n){const r={},o=v(e,["expireTime"]);n!==void 0&&o!=null&&x(n,["expireTime"],o);const a=v(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&x(n,["newSessionExpireTime"],a);const l=v(e,["uses"]);n!==void 0&&l!=null&&x(n,["uses"],l);const c=v(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&x(n,["bidiGenerateContentSetup"],XL(t,c));const h=v(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&x(n,["fieldMask"],h),r}function GL(t,e){const n={},r=v(e,["config"]);return r!=null&&x(n,["config"],$L(t,r,n)),n}function JL(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function YL(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function WL(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function KL(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const o=v(t,["responseModalities"]);e!==void 0&&o!=null&&x(e,["setup","generationConfig","responseModalities"],o);const a=v(t,["temperature"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","temperature"],a);const l=v(t,["topP"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topP"],l);const c=v(t,["topK"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","topK"],c);const h=v(t,["maxOutputTokens"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","maxOutputTokens"],h);const f=v(t,["mediaResolution"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","mediaResolution"],f);const g=v(t,["seed"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","seed"],g);const y=v(t,["speechConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","speechConfig"],mw(y));const _=v(t,["thinkingConfig"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","thinkingConfig"],_);const T=v(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],T);const C=v(t,["systemInstruction"]);e!==void 0&&C!=null&&x(e,["setup","systemInstruction"],VL(ur(C)));const k=v(t,["tools"]);if(e!==void 0&&k!=null){let j=_f(k);Array.isArray(j)&&(j=j.map(q=>eO(wf(q)))),x(e,["setup","tools"],j)}const N=v(t,["sessionResumption"]);e!==void 0&&N!=null&&x(e,["setup","sessionResumption"],ZL(N));const I=v(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&x(e,["setup","inputAudioTranscription"],I);const L=v(t,["outputAudioTranscription"]);e!==void 0&&L!=null&&x(e,["setup","outputAudioTranscription"],L);const D=v(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&x(e,["setup","realtimeInputConfig"],D);const $=v(t,["contextWindowCompression"]);e!==void 0&&$!=null&&x(e,["setup","contextWindowCompression"],$);const G=v(t,["proactivity"]);return e!==void 0&&G!=null&&x(e,["setup","proactivity"],G),n}function XL(t,e){const n={},r=v(e,["model"]);r!=null&&x(n,["setup","model"],Et(t,r));const o=v(e,["config"]);return o!=null&&x(n,["config"],KL(o,n)),n}function QL(t){const e={},n=v(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=v(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const o=v(t,["executableCode"]);o!=null&&x(e,["executableCode"],o);const a=v(t,["fileData"]);a!=null&&x(e,["fileData"],JL(a));const l=v(t,["functionResponse"]);l!=null&&x(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&x(e,["inlineData"],HL(c));const h=v(t,["text"]);h!=null&&x(e,["text"],h);const f=v(t,["thought"]);f!=null&&x(e,["thought"],f);const g=v(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const y=v(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function ZL(t){const e={},n=v(t,["handle"]);if(n!=null&&x(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function eO(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(g=>g)),x(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const o=v(t,["googleMaps"]);o!=null&&x(e,["googleMaps"],YL(o));const a=v(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const l=v(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=v(t,["googleSearch"]);c!=null&&x(e,["googleSearch"],WL(c));const h=v(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tO(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function nO(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const a=tO(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];o.length>0&&(c=o.map(f=>l.includes(f)?`generationConfig.${f}`:f));const h=[];a&&h.push(a),c.length>0&&h.push(...c),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class rO extends ec{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=GL(this.apiClient,e);a=De("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const h=nO(c,e.config);return o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iO(t,e){const n={},r=v(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function oO(t,e){const n={},r=v(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function sO(t,e,n){const r={};if(v(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=v(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&x(e,["displayName"],o),v(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=v(t,["epochCount"]);e!==void 0&&a!=null&&x(e,["tuningTask","hyperparameters","epochCount"],a);const l=v(t,["learningRateMultiplier"]);if(l!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),v(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(v(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(v(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=v(t,["batchSize"]);e!==void 0&&c!=null&&x(e,["tuningTask","hyperparameters","batchSize"],c);const h=v(t,["learningRate"]);if(e!==void 0&&h!=null&&x(e,["tuningTask","hyperparameters","learningRate"],h),v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(v(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function aO(t,e,n){const r={};let o=v(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const T=v(t,["validationDataset"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec"],nE(T))}else if(o==="PREFERENCE_TUNING"){const T=v(t,["validationDataset"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec"],nE(T))}const a=v(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&x(e,["tunedModelDisplayName"],a);const l=v(t,["description"]);e!==void 0&&l!=null&&x(e,["description"],l);let c=v(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const T=v(t,["epochCount"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(c==="PREFERENCE_TUNING"){const T=v(t,["epochCount"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let h=v(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=v(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(h==="PREFERENCE_TUNING"){const T=v(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let f=v(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const T=v(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(f==="PREFERENCE_TUNING"){const T=v(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let g=v(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const T=v(t,["adapterSize"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(g==="PREFERENCE_TUNING"){const T=v(t,["adapterSize"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(v(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(v(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=v(t,["labels"]);e!==void 0&&y!=null&&x(e,["labels"],y);const _=v(t,["beta"]);return e!==void 0&&_!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","beta"],_),r}function lO(t,e){const n={},r=v(t,["baseModel"]);r!=null&&x(n,["baseModel"],r);const o=v(t,["preTunedModel"]);o!=null&&x(n,["preTunedModel"],o);const a=v(t,["trainingDataset"]);a!=null&&bO(a);const l=v(t,["config"]);return l!=null&&sO(l,n),n}function uO(t,e){const n={},r=v(t,["baseModel"]);r!=null&&x(n,["baseModel"],r);const o=v(t,["preTunedModel"]);o!=null&&x(n,["preTunedModel"],o);const a=v(t,["trainingDataset"]);a!=null&&xO(a,n,e);const l=v(t,["config"]);return l!=null&&aO(l,n,e),n}function cO(t,e){const n={},r=v(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function dO(t,e){const n={},r=v(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function fO(t,e,n){const r={},o=v(t,["pageSize"]);e!==void 0&&o!=null&&x(e,["_query","pageSize"],o);const a=v(t,["pageToken"]);e!==void 0&&a!=null&&x(e,["_query","pageToken"],a);const l=v(t,["filter"]);return e!==void 0&&l!=null&&x(e,["_query","filter"],l),r}function hO(t,e,n){const r={},o=v(t,["pageSize"]);e!==void 0&&o!=null&&x(e,["_query","pageSize"],o);const a=v(t,["pageToken"]);e!==void 0&&a!=null&&x(e,["_query","pageToken"],a);const l=v(t,["filter"]);return e!==void 0&&l!=null&&x(e,["_query","filter"],l),r}function pO(t,e){const n={},r=v(t,["config"]);return r!=null&&fO(r,n),n}function mO(t,e){const n={},r=v(t,["config"]);return r!=null&&hO(r,n),n}function gO(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const o=v(t,["nextPageToken"]);o!=null&&x(n,["nextPageToken"],o);const a=v(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>uC(c))),x(n,["tuningJobs"],l)}return n}function yO(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const o=v(t,["nextPageToken"]);o!=null&&x(n,["nextPageToken"],o);const a=v(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Tx(c))),x(n,["tuningJobs"],l)}return n}function vO(t,e){const n={},r=v(t,["name"]);r!=null&&x(n,["model"],r);const o=v(t,["name"]);return o!=null&&x(n,["endpoint"],o),n}function bO(t,e){const n={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=v(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),x(n,["examples","examples"],o)}return n}function xO(t,e,n){const r={};let o=v(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=v(t,["gcsUri"]);e!==void 0&&l!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=v(t,["gcsUri"]);e!==void 0&&l!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=v(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=v(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=v(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(v(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function uC(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const o=v(t,["name"]);o!=null&&x(n,["name"],o);const a=v(t,["state"]);a!=null&&x(n,["state"],VT(a));const l=v(t,["createTime"]);l!=null&&x(n,["createTime"],l);const c=v(t,["tuningTask","startTime"]);c!=null&&x(n,["startTime"],c);const h=v(t,["tuningTask","completeTime"]);h!=null&&x(n,["endTime"],h);const f=v(t,["updateTime"]);f!=null&&x(n,["updateTime"],f);const g=v(t,["description"]);g!=null&&x(n,["description"],g);const y=v(t,["baseModel"]);y!=null&&x(n,["baseModel"],y);const _=v(t,["_self"]);return _!=null&&x(n,["tunedModel"],vO(_)),n}function Tx(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const o=v(t,["name"]);o!=null&&x(n,["name"],o);const a=v(t,["state"]);a!=null&&x(n,["state"],VT(a));const l=v(t,["createTime"]);l!=null&&x(n,["createTime"],l);const c=v(t,["startTime"]);c!=null&&x(n,["startTime"],c);const h=v(t,["endTime"]);h!=null&&x(n,["endTime"],h);const f=v(t,["updateTime"]);f!=null&&x(n,["updateTime"],f);const g=v(t,["error"]);g!=null&&x(n,["error"],g);const y=v(t,["description"]);y!=null&&x(n,["description"],y);const _=v(t,["baseModel"]);_!=null&&x(n,["baseModel"],_);const T=v(t,["tunedModel"]);T!=null&&x(n,["tunedModel"],T);const C=v(t,["preTunedModel"]);C!=null&&x(n,["preTunedModel"],C);const k=v(t,["supervisedTuningSpec"]);k!=null&&x(n,["supervisedTuningSpec"],k);const N=v(t,["preferenceOptimizationSpec"]);N!=null&&x(n,["preferenceOptimizationSpec"],N);const I=v(t,["tuningDataStats"]);I!=null&&x(n,["tuningDataStats"],I);const L=v(t,["encryptionSpec"]);L!=null&&x(n,["encryptionSpec"],L);const D=v(t,["partnerModelTuningSpec"]);D!=null&&x(n,["partnerModelTuningSpec"],D);const $=v(t,["customBaseModel"]);$!=null&&x(n,["customBaseModel"],$);const G=v(t,["experiment"]);G!=null&&x(n,["experiment"],G);const j=v(t,["labels"]);j!=null&&x(n,["labels"],j);const q=v(t,["outputUri"]);q!=null&&x(n,["outputUri"],q);const ee=v(t,["pipelineJob"]);ee!=null&&x(n,["pipelineJob"],ee);const W=v(t,["serviceAccount"]);W!=null&&x(n,["serviceAccount"],W);const z=v(t,["tunedModelDisplayName"]);z!=null&&x(n,["tunedModelDisplayName"],z);const te=v(t,["veoTuningSpec"]);return te!=null&&x(n,["veoTuningSpec"],te),n}function wO(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const o=v(t,["name"]);o!=null&&x(n,["name"],o);const a=v(t,["metadata"]);a!=null&&x(n,["metadata"],a);const l=v(t,["done"]);l!=null&&x(n,["done"],l);const c=v(t,["error"]);return c!=null&&x(n,["error"],c),n}function nE(t,e){const n={},r=v(t,["gcsUri"]);r!=null&&x(n,["validationDatasetUri"],r);const o=v(t,["vertexDatasetResource"]);return o!=null&&x(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _O extends ec{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new am($u.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),a=await this.tuneMldevInternal(o);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:vx.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=dO(e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>Tx(g))}else{const f=cO(e);return c=De("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>uC(g))}}async listInternal(e){var n,r,o,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=mO(e);return c=De("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=yO(g),_=new OS;return Object.assign(_,y),_})}else{const f=pO(e);return c=De("tunedModels",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const y=gO(g),_=new OS;return Object.assign(_,y),_})}}async cancel(e){var n,r,o,a;let l="",c={};if(this.apiClient.isVertexAI()){const h=oO(e);l=De("{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const h=iO(e);l=De("{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=uO(e,e);return a=De("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>Tx(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=lO(e);return a=De("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>wO(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SO{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EO=1024*1024*8,TO=3,CO=1e3,AO=2,_b="x-goog-upload-status";async function kO(t,e,n){var r,o,a;let l=0,c=0,h=new bx(new Response),f="upload";for(l=t.size;c<l;){const y=Math.min(EO,l-c),_=t.slice(c,c+y);c+y>=l&&(f+=", finalize");let T=0,C=CO;for(;T<TO&&(h=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(c),"Content-Length":String(y)}}}),!(!((r=h==null?void 0:h.headers)===null||r===void 0)&&r[_b]));)T++,await RO(C),C=C*AO;if(c+=y,((o=h==null?void 0:h.headers)===null||o===void 0?void 0:o[_b])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const g=await(h==null?void 0:h.json());if(((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[_b])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return g.file}async function IO(t){return{size:t.size,type:t.type}}function RO(t){return new Promise(e=>setTimeout(e,t))}class NO{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kO(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MO{create(e,n,r){return new DO(e,n,r)}}class DO{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rE="x-goog-api-key";class PO{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(rE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(rE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LO="gl-node/";class cC{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=t2(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const o=new PO(this.apiKey);this.apiClient=new wL({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:LO+"web",uploader:new NO,downloader:new SO}),this.models=new zL(this.apiClient),this.live=new PL(this.apiClient,o,new MO),this.batches=new xM(this.apiClient),this.chats=new QM(this.models,this.apiClient),this.caches=new WM(this.apiClient),this.files=new lD(this.apiClient),this.operations=new qL(this.apiClient),this.authTokens=new rO(this.apiClient),this.tunings=new _O(this.apiClient)}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const OO=[{name:"mapsGrounding",description:"A tool that uses Google Maps data to find nearby points of interest (amenities) like schools, hospitals, malls, or restaurants.",parameters:{type:"OBJECT",properties:{query:{type:"STRING",description:'A search query, like "schools near Dubai Hills Estate" or "restaurants in Downtown Dubai". You MUST be as precise as possible.'},markerBehavior:{type:"STRING",description:'Controls which results get markers. "mentioned" for places in the text response, "all" for all search results, or "none" for no markers.',enum:["mentioned","all","none"]}},required:["query"]},isEnabled:!0,scheduling:qp.INTERRUPT},{name:"locateCommunity",description:"Call this function to display a specific Dubai community on the map. This provides a wide, establishing shot of the area.",parameters:{type:"OBJECT",properties:{communityName:{type:"STRING",description:'The name of the Dubai community to locate (e.g., "Dubai Hills Estate", "Palm Jumeirah").'}},required:["communityName"]},isEnabled:!0,scheduling:qp.INTERRUPT},{name:"findProjects",description:"Finds and displays real estate projects on the map within a specific community. It adds markers for each project found.",parameters:{type:"OBJECT",properties:{communityName:{type:"STRING",description:"The name of the community where to search for projects."},projectType:{type:"STRING",description:'The type of project to search for (e.g., "Villas", "Apartments", "Off-plan").'}},required:["communityName","projectType"]},isEnabled:!0,scheduling:qp.INTERRUPT}];/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const dC="gemini-live-2.5-flash-preview",fC="Zephyr",UO=[{name:"Achernar",description:"Soft, Higher pitch"},{name:"Achird",description:"Friendly, Lower middle pitch"},{name:"Algenib",description:"Gravelly, Lower pitch"},{name:"Algieba",description:"Smooth, Lower pitch"},{name:"Alnilam",description:"Firm, Lower middle pitch"},{name:"Aoede",description:"Breezy, Middle pitch"},{name:"Autonoe",description:"Bright, Middle pitch"},{name:"Callirrhoe",description:"Easy-going, Middle pitch"},{name:"Charon",description:"Informative, Lower pitch"},{name:"Despina",description:"Smooth, Middle pitch"},{name:"Enceladus",description:"Breathy, Lower pitch"},{name:"Erinome",description:"Clear, Middle pitch"},{name:"Fenrir",description:"Excitable, Lower middle pitch"},{name:"Gacrux",description:"Mature, Middle pitch"},{name:"Iapetus",description:"Clear, Lower middle pitch"},{name:"Kore",description:"Firm, Middle pitch"},{name:"Laomedeia",description:"Upbeat, Higher pitch"},{name:"Leda",description:"Youthful, Higher pitch"},{name:"Orus",description:"Firm, Lower middle pitch"},{name:"Puck",description:"Upbeat, Middle pitch"},{name:"Pulcherrima",description:"Forward, Middle pitch"},{name:"Rasalgethi",description:"Informative, Middle pitch"},{name:"Sadachbia",description:"Lively, Lower pitch"},{name:"Sadaltager",description:"Knowledgeable, Middle pitch"},{name:"Schedar",description:"Even, Lower middle pitch"},{name:"Sulafat",description:"Warm, Middle pitch"},{name:"Umbriel",description:"Easy-going, Lower middle pitch"},{name:"Vindemiatrix",description:"Gentle, Middle pitch"},{name:"Zephyr",description:"Bright, Higher pitch"},{name:"Zubenelgenubi",description:"Casual, Lower middle pitch"}],BO=[{name:"Puck",description:"Upbeat, Middle pitch"},{name:"Charon",description:"Informative, Lower pitch"},{name:"Kore",description:"Firm, Middle pitch"},{name:"Fenrir",description:"Excitable, Lower middle pitch"},{name:"Aoede",description:"Breezy, Middle pitch"},{name:"Leda",description:"Youthful, Higher pitch"},{name:"Orus",description:"Firm, Lower middle pitch"},{name:"Zephyr",description:"Bright, Higher pitch"}],FO=["gemini-live-2.5-flash-preview","gemini-2.0-flash-live-001"],jO=`
###  ROLE & PURPOSE
You are an **AI Real Estate Advisor** specialized in **Dubai, United Arab Emirates** powered by BrainJuice .
You provide **accurate, compliant, and up-to-date** information to investors, buyers, tenants, and property owners.
Your guidance must always align with **Dubai Land Department (DLD)** and **RERA** regulations.

Your primary role is to:
- Explain the **real estate buying, selling, and renting processes** in Dubai
- Interpret **market trends** and provide **data-backed insights** from reputable sources
- Educate users about **their rights, responsibilities, and investment options**
- Use the interactive 3D map to show communities, properties, and amenities visually
- Maintain a professional, neutral, and regulatory-compliant tone

###  AUTHORITATIVE KNOWLEDGE SOURCES

**1. Government & Regulatory:**
- Dubai Land Department (DLD): https://dubailand.gov.ae
- DLD "Know Your Rights" Document: https://dubailand.gov.ae/media/wlzmuycr/know_your_rights.pdf
- Real Estate Regulatory Agency (RERA)
- Rental Dispute Resolution Centre (RDRC)

**2. Market Data Platforms:**
- DXB Interact: https://dxbinteract.com - for official DLD transaction data, trends, and area insights
- Property Finder Insights: https://www.propertyfinder.ae/en/insightshub
- Bayut Market Reports: https://www.bayut.com

**3. Real Estate Consultancies & Agencies:**
- Knight Frank UAE: https://www.knightfrank.ae/research
- CBRE UAE: https://www.cbre.ae
- Savills UAE: https://dubai.savills.ae
- Betterhomes, Allsopp & Allsopp

**4. Major Developers:**
- Emaar Properties (Downtown Dubai, Dubai Hills Estate, Arabian Ranches)
- DAMAC Properties (luxury branded residences)
- Nakheel (Palm Jumeirah, The World Islands, JVC)
- Sobha Realty (SobhaHartland)
- Meraas (City Walk, Bluewaters Island, La Mer)
- Dubai Properties (Business Bay, JBR)

###  CORE KNOWLEDGE - DUBAI REAL ESTATE MARKET

**General Market Trends:**
- Dubai real estate has been experiencing strong upward trends with record-breaking sales
- Property prices across segments (especially apartments and villas in prime locations) have been rising steadily
- Luxury and ultra-luxury segments are performing exceptionally well
- High demand driven by investor confidence, Dubai's economic recovery, and its status as a safe haven
- Off-plan properties are particularly popular with attractive payment plans
- Rental prices have seen significant increases due to high demand and limited supply

**Popular Areas:**
- **Prime Locations:** Dubai Marina, Downtown Dubai, Palm Jumeirah, Business Bay, JBR
- **Emerging Areas:** Dubai Hills Estate, Arabian Ranches, JVC, Dubai South
- **Luxury:** Emirates Hills, Palm Jumeirah, Bluewaters Island, Downtown Dubai

**Investment Information:**

*Buying Process for Foreign Investors:*
- Foreign nationals can own property in designated freehold areas (57+ areas)
- No local sponsor required for freehold ownership
- Process: Property Search  MOU/Reservation  Due Diligence  NOC (if ready property)  DLD Transfer
- Required documents: Passport, visa, Emirates ID (if resident)

*Off-Plan vs. Ready Properties:*
- **Off-Plan:** Lower entry price, flexible payment plans, capital appreciation potential, newer developments, Golden Visa eligible
- **Ready:** Immediate rental income, tangible asset, no construction risk, mature communities

*Rental Yields and ROI:*
- Apartments: 4% to 10%+ gross yields depending on location
- Villas: Slightly lower yields but better long-term capital appreciation
- Net yields must account for service charges, maintenance, management fees

*Mortgage Options:*
- LTV: Up to 75% for ready properties (AED 5M), 60% for loans >AED 5M
- Off-plan: Typically 50% LTV
- Interest rates tied to UAE Central Bank rate
- Tenure: 10-25 years

*Freehold vs. Leasehold:*
- **Freehold:** Full ownership rights, preferred by foreign investors
- **Leasehold:** Usage rights for fixed term (e.g., 99 years), less common for foreign buyers

**Living in Dubai:**

*Visa Requirements:*
- **Golden Visa (10-year):** Requires AED 2M+ property investment (fully owned or mortgaged)
- **5-Year Visa:** Requires AED 750K+ property investment (no mortgage)
- Standard visas available through employment, retirement, or freelance routes

*Cost of Living:*
- Service charges (annual, per sq ft)
- DEWA (electricity and water)
- District cooling fees
- Maintenance and repairs
- Property management fees (5-10% if renting out)
- Insurance, internet, TV

*Expat Community:*
- Highly diverse, cosmopolitan atmosphere
- English widely spoken
- Modern infrastructure, world-class amenities
- Family-friendly communities
- Safe and secure (one of the safest cities globally)
- Tax-free income

**Major Developers Reputation:**

1. **Emaar Properties:** Gold standard - high quality, timely delivery, strong resale value (Burj Khalifa, Dubai Mall)
2. **Nakheel:** Iconic waterfront projects, innovative designs (Palm Jumeirah)
3. **DAMAC:** Luxury focus, branded partnerships, prolific builder
4. **Meraas:** Trendy lifestyle destinations, unique designs, boutique feel
5. **Sobha:** "Sobha Quality" - meticulous construction, backward integration

**Regulations & Legal Aspects:**

*Property Ownership Laws:*
- All transactions must be registered with DLD
- Title Deeds (Form A for ready, Form B for off-plan) are official proof
- Mortgages legally recognized and registered with DLD
- Off-plan sales protected through escrow accounts (RERA regulated)

*Tenant Rights (Law No. 26 of 2007):*
- Valid Ejari contract required (registered with RERA)
- Right to peaceful enjoyment and habitable property
- 90 days' notice for rent increase (must comply with RERA Rental Index)
- 12 months' notice for eviction (with valid grounds)
- Security deposit return (minus legitimate deductions)

*Tenant Responsibilities:*
- Pay rent on time
- Pay utility bills
- Maintain property (minor repairs)
- No subletting without permission
- Adhere to Ejari contract terms

*Dispute Resolution:*
- Rental Dispute Resolution Centre (RDRC) handles landlord-tenant disputes

###  INTERACTIVE MAP USAGE

**When discussing properties or communities:**
1. Use \`locateCommunity\` to show the area on the map
2. Use \`findProjects\` to display relevant properties with markers
3. Use \`mapsGrounding\` to find nearby amenities (schools, hospitals, malls, parks)

**Example Flow:**
User: "Tell me about Dubai Hills Estate"
You: "Dubai Hills Estate is a premium master-planned community by Emaar. Let me show you on the map..."
 Call \`locateCommunity\` with "Dubai Hills Estate"
 Then: "What type of properties interest you? Villas, apartments, or would you like to see nearby amenities?"
 If they say villas: Call \`findProjects\` with community="Dubai Hills Estate" and type="Villas"

###  COMMUNICATION GUIDELINES

**Tone:** Professional, confident, clear, and factual. Avoid speculation or guarantees.

**Style:**
- Use plain English with optional Arabic terms for authenticity
- Cite sources and dates (e.g., "As per DLD Q3 2024 data...")
- Provide disclaimers for predictions
- Be conversational but authoritative

**Response Structure:**
1. Start with concise answer
2. Support with data/regulation
3. Use the map to visualize
4. Provide relevant source links when needed
5. Offer next steps or ask clarifying questions

###  RESTRICTIONS

**Never:**
- Make speculative financial predictions or investment guarantees
- Provide legal advice beyond DLD/RERA frameworks
- Recommend unverified projects or brokers
- Disclose private information
- Engage in unrelated conversation - stay focused on Dubai real estate

###  WELCOME MESSAGE

When users first interact, greet them with:

"Welcome! I'm your AI-powered Dubai Real Estate Advisor, powered by BrainJuice .

I can help you explore Dubai's dynamic property market using this interactive 3D map. I provide expert guidance on:
 Investment opportunities and market trends
 Buying, selling, and renting processes
 Property ownership rights and regulations
 Community exploration and property discovery

To get started, which Dubai community would you like to explore? For example, you could say 'Dubai Hills Estate', 'Palm Jumeirah', or 'Downtown Dubai'. Or, tell me what you're looking for and I'll guide you!"

###  CONVERSATIONAL FLOW

**Step 1: Community Discovery**
- When user mentions a community, locate it on the map
- Provide key information about the area
- Ask about their property preferences

**Step 2: Property Search**
- Based on preferences (villas, apartments, off-plan), find and display projects
- Share relevant details: developer, pricing trends, yields

**Step 3: Deep Dive**
- Offer to show nearby amenities
- Provide investment analysis
- Explain buying process or rental regulations
- Answer specific questions with authoritative sources

**Example Interactions:**

User: "What are the best areas for villa investment?"
Assistant: "Based on current market data, these areas offer strong villa investment opportunities:

1. **Dubai Hills Estate** - Premium community by Emaar, golf course views, family-friendly
2. **Arabian Ranches** - Established community, excellent facilities, consistent demand
3. **Palm Jumeirah** - Iconic location, ultra-luxury, high rental yields

Let me show you one of these on the map. Which interests you most?"

User: "Show me Dubai Marina"
Assistant: *[calls locateCommunity tool]*
"Excellent choice! Dubai Marina is one of Dubai's most prestigious waterfront communities. It features:
- High-rise luxury apartments
- Marina views and beachfront access
- Vibrant dining and entertainment scene
- Strong rental demand from expats

What type of properties are you interested in? Apartments for investment, or would you like to see specific projects in the area?"

###  END GOAL

Deliver **authoritative, regulation-aligned, and data-driven Dubai real estate guidance** while using the interactive 3D map to create an engaging, visual property discovery experience. Always maintain compliance with **Dubai Land Department** standards and provide users with actionable insights backed by reputable sources.

Remember: You are the expert guide combining AI intelligence with Dubai market expertise to help users make informed real estate decisions.
`,zO=`
### **Persona & Goal**

You are a playful, energetic, and slightly mischievous game master. Your name is ClueMaster Cory. You are creating a personalized, real-time scavenger hunt for the user.
`;/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const iE={"itinerary-planner":OO},qO={"itinerary-planner":jO},Cx="ClueMaster Cory, the Scavenger Hunt Creator",Zd={[Cx]:{prompt:zO,voice:"Puck"}},Qp=sm(t=>({systemPrompt:qO["itinerary-planner"],model:dC,voice:fC,isEasterEggMode:!1,activePersona:Cx,setSystemPrompt:e=>t({systemPrompt:e}),setModel:e=>t({model:e}),setVoice:e=>t({voice:e}),setPersona:e=>{Zd[e]&&t({activePersona:e,systemPrompt:Zd[e].prompt,voice:Zd[e].voice})},activateEasterEggMode:()=>{t(e=>{if(!e.isEasterEggMode){const n=Cx;return{isEasterEggMode:!0,activePersona:n,systemPrompt:Zd[n].prompt,voice:Zd[n].voice,model:"gemini-live-2.5-flash-preview"}}return{}})}})),yw=sm(t=>({isSidebarOpen:!1,toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),showSystemMessages:!1,toggleShowSystemMessages:()=>t(e=>({showSystemMessages:!e.showSystemMessages}))})),hC=sm(t=>({template:"itinerary-planner",tools:iE["itinerary-planner"],setTemplate:e=>{t({template:e,tools:iE[e]})},toggleTool:e=>t(n=>({tools:n.tools.map(r=>r.name===e?{...r,isEnabled:!r.isEnabled}:r)}))})),vn=sm(t=>({turns:[],isAwaitingFunctionResponse:!1,addTurn:e=>t(n=>({turns:[...n.turns,{...e,timestamp:Date.now()}]})),updateLastTurn:e=>t(n=>{const r=[...n.turns],o=r.length-1;return o>=0&&(r[o]={...r[o],...e}),{turns:r}}),mergeIntoLastAgentTurn:e=>{t(n=>{const r=n.turns,o=r.map(c=>c.role).lastIndexOf("agent");if(o===-1)return n;const a={...r[o],text:r[o].text+(e.text||""),isFinal:e.isFinal??r[o].isFinal,groundingChunks:e.groundingChunks||r[o].groundingChunks,toolResponse:e.toolResponse||r[o].toolResponse},l=[...r];return l[o]=a,{turns:l}})},clearTurns:()=>t({turns:[]}),setIsAwaitingFunctionResponse:e=>t({isAwaitingFunctionResponse:e})})),os=sm(t=>({markers:[],cameraTarget:null,preventAutoFrame:!1,setMarkers:e=>t({markers:e}),clearMarkers:()=>t({markers:[]}),setCameraTarget:e=>t({cameraTarget:e}),setPreventAutoFrame:e=>t({preventAutoFrame:e})}));var Sb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var oE;function HO(){return oE||(oE=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(a=o(a,r(c)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var c in a)e.call(a,c)&&a[c]&&(l=o(l,c));return l}function o(a,l){return l?a?a+" "+l:a+l:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Sb)),Sb.exports}var VO=HO();const Pu=sl(VO);var Eb={exports:{}},sE;function $O(){return sE||(sE=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(h,f,g){this.fn=h,this.context=f,this.once=g||!1}function a(h,f,g,y,_){if(typeof g!="function")throw new TypeError("The listener must be a function");var T=new o(g,y||h,_),C=n?n+f:f;return h._events[C]?h._events[C].fn?h._events[C]=[h._events[C],T]:h._events[C].push(T):(h._events[C]=T,h._eventsCount++),h}function l(h,f){--h._eventsCount===0?h._events=new r:delete h._events[f]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],g,y;if(this._eventsCount===0)return f;for(y in g=this._events)e.call(g,y)&&f.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(g)):f},c.prototype.listeners=function(f){var g=n?n+f:f,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,T=y.length,C=new Array(T);_<T;_++)C[_]=y[_].fn;return C},c.prototype.listenerCount=function(f){var g=n?n+f:f,y=this._events[g];return y?y.fn?1:y.length:0},c.prototype.emit=function(f,g,y,_,T,C){var k=n?n+f:f;if(!this._events[k])return!1;var N=this._events[k],I=arguments.length,L,D;if(N.fn){switch(N.once&&this.removeListener(f,N.fn,void 0,!0),I){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,g),!0;case 3:return N.fn.call(N.context,g,y),!0;case 4:return N.fn.call(N.context,g,y,_),!0;case 5:return N.fn.call(N.context,g,y,_,T),!0;case 6:return N.fn.call(N.context,g,y,_,T,C),!0}for(D=1,L=new Array(I-1);D<I;D++)L[D-1]=arguments[D];N.fn.apply(N.context,L)}else{var $=N.length,G;for(D=0;D<$;D++)switch(N[D].once&&this.removeListener(f,N[D].fn,void 0,!0),I){case 1:N[D].fn.call(N[D].context);break;case 2:N[D].fn.call(N[D].context,g);break;case 3:N[D].fn.call(N[D].context,g,y);break;case 4:N[D].fn.call(N[D].context,g,y,_);break;default:if(!L)for(G=1,L=new Array(I-1);G<I;G++)L[G-1]=arguments[G];N[D].fn.apply(N[D].context,L)}}return!0},c.prototype.on=function(f,g,y){return a(this,f,g,y,!1)},c.prototype.once=function(f,g,y){return a(this,f,g,y,!0)},c.prototype.removeListener=function(f,g,y,_){var T=n?n+f:f;if(!this._events[T])return this;if(!g)return l(this,T),this;var C=this._events[T];if(C.fn)C.fn===g&&(!_||C.once)&&(!y||C.context===y)&&l(this,T);else{for(var k=0,N=[],I=C.length;k<I;k++)(C[k].fn!==g||_&&!C[k].once||y&&C[k].context!==y)&&N.push(C[k]);N.length?this._events[T]=N.length===1?N[0]:N:l(this,T)}return this},c.prototype.removeAllListeners=function(f){var g;return f?(g=n?n+f:f,this._events[g]&&l(this,g)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(Eb)),Eb.exports}var GO=$O();const pC=sl(GO);var Op={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var JO=Op.exports,aE;function YO(){return aE||(aE=1,(function(t,e){(function(){var n,r="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,g="__lodash_placeholder__",y=1,_=2,T=4,C=1,k=2,N=1,I=2,L=4,D=8,$=16,G=32,j=64,q=128,ee=256,W=512,z=30,te="...",de=800,xe=16,ue=1,fe=2,K=3,oe=1/0,le=9007199254740991,Ee=17976931348623157e292,H=NaN,V=4294967295,re=V-1,U=V>>>1,me=[["ary",q],["bind",N],["bindKey",I],["curry",D],["curryRight",$],["flip",W],["partial",G],["partialRight",j],["rearg",ee]],Ce="[object Arguments]",Ie="[object Array]",Ve="[object AsyncFunction]",rt="[object Boolean]",Ue="[object Date]",Xt="[object DOMException]",hn="[object Error]",fr="[object Function]",fs="[object GeneratorFunction]",nn="[object Map]",hr="[object Number]",Zs="[object Null]",Br="[object Object]",dl="[object Promise]",ea="[object Proxy]",ki="[object RegExp]",Bn="[object Set]",hs="[object String]",ta="[object Symbol]",Fn="[object Undefined]",ps="[object WeakMap]",ve="[object WeakSet]",ke="[object ArrayBuffer]",je="[object DataView]",it="[object Float32Array]",gt="[object Float64Array]",jn="[object Int8Array]",ii="[object Int16Array]",Cn="[object Int32Array]",rn="[object Uint8Array]",Pn="[object Uint8ClampedArray]",Tt="[object Uint16Array]",Ii="[object Uint32Array]",oi=/\b__p \+= '';/g,Qv=/\b(__p \+=) '' \+/g,nc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fl=/&(?:amp|lt|gt|quot|#39);/g,hl=/[&<>"']/g,ms=RegExp(fl.source),rc=RegExp(hl.source),pl=/<%-([\s\S]+?)%>/g,Zv=/<%([\s\S]+?)%>/g,If=/<%=([\s\S]+?)%>/g,Rf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ml=/^\w*$/,e0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ic=/[\\^$.*+?()[\]{}|]/g,gm=RegExp(ic.source),oc=/^\s+/,Nf=/\s/,Mf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ym=/\{\n\/\* \[wrapped with (.+)\] \*/,vm=/,? & /,So=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,An=/[()=,{}\[\]\/\s]/,Gn=/\\(\\)?/g,na=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sc=/\w*$/,t0=/^[-+]0x[0-9a-f]+$/i,n0=/^0b[01]+$/i,bm=/^\[object .+?Constructor\]$/,gl=/^0o[0-7]+$/i,Df=/^(?:0|[1-9]\d*)$/,ra=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gi=/($^)/,yl=/['\n\r\u2028\u2029\\]/g,Ji="\\ud800-\\udfff",bn="\\u0300-\\u036f",xm="\\ufe20-\\ufe2f",wm="\\u20d0-\\u20ff",Eo=bn+xm+wm,gs="\\u2700-\\u27bf",_m="a-z\\xdf-\\xf6\\xf8-\\xff",Sm="\\xac\\xb1\\xd7\\xf7",Em="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",r0="\\u2000-\\u206f",ac=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vl="A-Z\\xc0-\\xd6\\xd8-\\xde",Ri="\\ufe0e\\ufe0f",pr=Sm+Em+r0+ac,lc="[']",i0="["+Ji+"]",uc="["+pr+"]",bl="["+Eo+"]",xl="\\d+",o0="["+gs+"]",mr="["+_m+"]",cc="[^"+Ji+pr+xl+gs+_m+vl+"]",dc="\\ud83c[\\udffb-\\udfff]",Pf="(?:"+bl+"|"+dc+")",ys="[^"+Ji+"]",fc="(?:\\ud83c[\\udde6-\\uddff]){2}",hc="[\\ud800-\\udbff][\\udc00-\\udfff]",si="["+vl+"]",Tm="\\u200d",Lf="(?:"+mr+"|"+cc+")",Cm="(?:"+si+"|"+cc+")",pc="(?:"+lc+"(?:d|ll|m|re|s|t|ve))?",Am="(?:"+lc+"(?:D|LL|M|RE|S|T|VE))?",km=Pf+"?",wl="["+Ri+"]?",Yi="(?:"+Tm+"(?:"+[ys,fc,hc].join("|")+")"+wl+km+")*",Of="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Uf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vs=wl+km+Yi,ia="(?:"+[o0,fc,hc].join("|")+")"+vs,Im="(?:"+[ys+bl+"?",bl,fc,hc,i0].join("|")+")",Bf=RegExp(lc,"g"),Rm=RegExp(bl,"g"),bs=RegExp(dc+"(?="+dc+")|"+Im+vs,"g"),Wi=RegExp([si+"?"+mr+"+"+pc+"(?="+[uc,si,"$"].join("|")+")",Cm+"+"+Am+"(?="+[uc,si+Lf,"$"].join("|")+")",si+"?"+Lf+"+"+pc,si+"+"+Am,Uf,Of,xl,ia].join("|"),"g"),Ff=RegExp("["+Tm+Ji+Eo+Ri+"]"),_l=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,To=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jf=-1,It={};It[it]=It[gt]=It[jn]=It[ii]=It[Cn]=It[rn]=It[Pn]=It[Tt]=It[Ii]=!0,It[Ce]=It[Ie]=It[ke]=It[rt]=It[je]=It[Ue]=It[hn]=It[fr]=It[nn]=It[hr]=It[Br]=It[ki]=It[Bn]=It[hs]=It[ps]=!1;var Dt={};Dt[Ce]=Dt[Ie]=Dt[ke]=Dt[je]=Dt[rt]=Dt[Ue]=Dt[it]=Dt[gt]=Dt[jn]=Dt[ii]=Dt[Cn]=Dt[nn]=Dt[hr]=Dt[Br]=Dt[ki]=Dt[Bn]=Dt[hs]=Dt[ta]=Dt[rn]=Dt[Pn]=Dt[Tt]=Dt[Ii]=!0,Dt[hn]=Dt[fr]=Dt[ps]=!1;var mc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},gc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Nm={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Jn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xs=parseFloat,yc=parseInt,oa=typeof Py=="object"&&Py&&Py.Object===Object&&Py,s0=typeof self=="object"&&self&&self.Object===Object&&self,pn=oa||s0||Function("return this")(),Sl=e&&!e.nodeType&&e,ai=Sl&&!0&&t&&!t.nodeType&&t,El=ai&&ai.exports===Sl,vc=El&&oa.process,Fr=(function(){try{var Z=ai&&ai.require&&ai.require("util").types;return Z||vc&&vc.binding&&vc.binding("util")}catch{}})(),Mm=Fr&&Fr.isArrayBuffer,Dm=Fr&&Fr.isDate,bc=Fr&&Fr.isMap,Pm=Fr&&Fr.isRegExp,Lm=Fr&&Fr.isSet,Om=Fr&&Fr.isTypedArray;function gr(Z,ge,he){switch(he.length){case 0:return Z.call(ge);case 1:return Z.call(ge,he[0]);case 2:return Z.call(ge,he[0],he[1]);case 3:return Z.call(ge,he[0],he[1],he[2])}return Z.apply(ge,he)}function a0(Z,ge,he,Ne){for(var Ke=-1,at=Z==null?0:Z.length;++Ke<at;){var qt=Z[Ke];ge(Ne,qt,he(qt),Z)}return Ne}function yr(Z,ge){for(var he=-1,Ne=Z==null?0:Z.length;++he<Ne&&ge(Z[he],he,Z)!==!1;);return Z}function l0(Z,ge){for(var he=Z==null?0:Z.length;he--&&ge(Z[he],he,Z)!==!1;);return Z}function Um(Z,ge){for(var he=-1,Ne=Z==null?0:Z.length;++he<Ne;)if(!ge(Z[he],he,Z))return!1;return!0}function Co(Z,ge){for(var he=-1,Ne=Z==null?0:Z.length,Ke=0,at=[];++he<Ne;){var qt=Z[he];ge(qt,he,Z)&&(at[Ke++]=qt)}return at}function xc(Z,ge){var he=Z==null?0:Z.length;return!!he&&sa(Z,ge,0)>-1}function Tl(Z,ge,he){for(var Ne=-1,Ke=Z==null?0:Z.length;++Ne<Ke;)if(he(ge,Z[Ne]))return!0;return!1}function zt(Z,ge){for(var he=-1,Ne=Z==null?0:Z.length,Ke=Array(Ne);++he<Ne;)Ke[he]=ge(Z[he],he,Z);return Ke}function Ao(Z,ge){for(var he=-1,Ne=ge.length,Ke=Z.length;++he<Ne;)Z[Ke+he]=ge[he];return Z}function zf(Z,ge,he,Ne){var Ke=-1,at=Z==null?0:Z.length;for(Ne&&at&&(he=Z[++Ke]);++Ke<at;)he=ge(he,Z[Ke],Ke,Z);return he}function Bm(Z,ge,he,Ne){var Ke=Z==null?0:Z.length;for(Ne&&Ke&&(he=Z[--Ke]);Ke--;)he=ge(he,Z[Ke],Ke,Z);return he}function qf(Z,ge){for(var he=-1,Ne=Z==null?0:Z.length;++he<Ne;)if(ge(Z[he],he,Z))return!0;return!1}var u0=ws("length");function c0(Z){return Z.split("")}function d0(Z){return Z.match(So)||[]}function Fm(Z,ge,he){var Ne;return he(Z,function(Ke,at,qt){if(ge(Ke,at,qt))return Ne=at,!1}),Ne}function wc(Z,ge,he,Ne){for(var Ke=Z.length,at=he+(Ne?1:-1);Ne?at--:++at<Ke;)if(ge(Z[at],at,Z))return at;return-1}function sa(Z,ge,he){return ge===ge?m0(Z,ge,he):wc(Z,jm,he)}function f0(Z,ge,he,Ne){for(var Ke=he-1,at=Z.length;++Ke<at;)if(Ne(Z[Ke],ge))return Ke;return-1}function jm(Z){return Z!==Z}function _c(Z,ge){var he=Z==null?0:Z.length;return he?Sc(Z,ge)/he:H}function ws(Z){return function(ge){return ge==null?n:ge[Z]}}function Hf(Z){return function(ge){return Z==null?n:Z[ge]}}function Vf(Z,ge,he,Ne,Ke){return Ke(Z,function(at,qt,Ct){he=Ne?(Ne=!1,at):ge(he,at,qt,Ct)}),he}function zm(Z,ge){var he=Z.length;for(Z.sort(ge);he--;)Z[he]=Z[he].value;return Z}function Sc(Z,ge){for(var he,Ne=-1,Ke=Z.length;++Ne<Ke;){var at=ge(Z[Ne]);at!==n&&(he=he===n?at:he+at)}return he}function Ec(Z,ge){for(var he=-1,Ne=Array(Z);++he<Z;)Ne[he]=ge(he);return Ne}function qm(Z,ge){return zt(ge,function(he){return[he,Z[he]]})}function _s(Z){return Z&&Z.slice(0,la(Z)+1).replace(oc,"")}function vr(Z){return function(ge){return Z(ge)}}function $f(Z,ge){return zt(ge,function(he){return Z[he]})}function Cl(Z,ge){return Z.has(ge)}function Gf(Z,ge){for(var he=-1,Ne=Z.length;++he<Ne&&sa(ge,Z[he],0)>-1;);return he}function Jf(Z,ge){for(var he=Z.length;he--&&sa(ge,Z[he],0)>-1;);return he}function Al(Z,ge){for(var he=Z.length,Ne=0;he--;)Z[he]===ge&&++Ne;return Ne}var kl=Hf(mc),h0=Hf(gc);function Tc(Z){return"\\"+Jn[Z]}function Hm(Z,ge){return Z==null?n:Z[ge]}function Ss(Z){return Ff.test(Z)}function Yf(Z){return _l.test(Z)}function Wf(Z){for(var ge,he=[];!(ge=Z.next()).done;)he.push(ge.value);return he}function Cc(Z){var ge=-1,he=Array(Z.size);return Z.forEach(function(Ne,Ke){he[++ge]=[Ke,Ne]}),he}function Kf(Z,ge){return function(he){return Z(ge(he))}}function Ki(Z,ge){for(var he=-1,Ne=Z.length,Ke=0,at=[];++he<Ne;){var qt=Z[he];(qt===ge||qt===g)&&(Z[he]=g,at[Ke++]=he)}return at}function Ac(Z){var ge=-1,he=Array(Z.size);return Z.forEach(function(Ne){he[++ge]=Ne}),he}function p0(Z){var ge=-1,he=Array(Z.size);return Z.forEach(function(Ne){he[++ge]=[Ne,Ne]}),he}function m0(Z,ge,he){for(var Ne=he-1,Ke=Z.length;++Ne<Ke;)if(Z[Ne]===ge)return Ne;return-1}function g0(Z,ge,he){for(var Ne=he+1;Ne--;)if(Z[Ne]===ge)return Ne;return Ne}function aa(Z){return Ss(Z)?$m(Z):u0(Z)}function Jt(Z){return Ss(Z)?Gm(Z):c0(Z)}function la(Z){for(var ge=Z.length;ge--&&Nf.test(Z.charAt(ge)););return ge}var Vm=Hf(Nm);function $m(Z){for(var ge=bs.lastIndex=0;bs.test(Z);)++ge;return ge}function Gm(Z){return Z.match(bs)||[]}function Jm(Z){return Z.match(Wi)||[]}var Xf=(function Z(ge){ge=ge==null?pn:ua.defaults(pn.Object(),ge,ua.pick(pn,To));var he=ge.Array,Ne=ge.Date,Ke=ge.Error,at=ge.Function,qt=ge.Math,Ct=ge.Object,kc=ge.RegExp,Es=ge.String,br=ge.TypeError,Il=he.prototype,Ym=at.prototype,ca=Ct.prototype,Ic=ge["__core-js_shared__"],Rc=Ym.toString,wt=ca.hasOwnProperty,Wm=0,Nc=(function(){var d=/[^.]+$/.exec(Ic&&Ic.keys&&Ic.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""})(),Yn=ca.toString,Mc=Rc.call(Ct),jr=pn._,da=kc("^"+Rc.call(wt).replace(ic,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fa=El?ge.Buffer:n,li=ge.Symbol,Ts=ge.Uint8Array,Dc=fa?fa.allocUnsafe:n,Ni=Kf(Ct.getPrototypeOf,Ct),Qf=Ct.create,Rl=ca.propertyIsEnumerable,Xi=Il.splice,Km=li?li.isConcatSpreadable:n,kn=li?li.iterator:n,Qi=li?li.toStringTag:n,zr=(function(){try{var d=jo(Ct,"defineProperty");return d({},"",{}),d}catch{}})(),Xm=ge.clearTimeout!==pn.clearTimeout&&ge.clearTimeout,Pc=Ne&&Ne.now!==pn.Date.now&&Ne.now,Cs=ge.setTimeout!==pn.setTimeout&&ge.setTimeout,ha=qt.ceil,Nl=qt.floor,Ml=Ct.getOwnPropertySymbols,Qm=fa?fa.isBuffer:n,xr=ge.isFinite,pa=Il.join,ma=Kf(Ct.keys,Ct),Qt=qt.max,un=qt.min,qr=Ne.now,Hr=ge.parseInt,Zi=qt.random,Mi=Il.reverse,Vr=jo(ge,"DataView"),wr=jo(ge,"Map"),Lc=jo(ge,"Promise"),ko=jo(ge,"Set"),As=jo(ge,"WeakMap"),ga=jo(Ct,"create"),cn=As&&new As,_t={},ft=Un(Vr),Io=Un(wr),$r=Un(Lc),Zf=Un(ko),Ro=Un(As),Dl=li?li.prototype:n,ya=Dl?Dl.valueOf:n,ks=Dl?Dl.toString:n;function B(d){if(tn(d)&&!Xe(d)&&!(d instanceof Qe)){if(d instanceof Wn)return d;if(wt.call(d,"__wrapped__"))return fd(d)}return new Wn(d)}var No=(function(){function d(){}return function(m){if(!Vt(m))return{};if(Qf)return Qf(m);d.prototype=m;var S=new d;return d.prototype=n,S}})();function Mo(){}function Wn(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=n}B.templateSettings={escape:pl,evaluate:Zv,interpolate:If,variable:"",imports:{_:B}},B.prototype=Mo.prototype,B.prototype.constructor=B,Wn.prototype=No(Mo.prototype),Wn.prototype.constructor=Wn;function Qe(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=V,this.__views__=[]}function eo(){var d=new Qe(this.__wrapped__);return d.__actions__=qn(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=qn(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=qn(this.__views__),d}function Do(){if(this.__filtered__){var d=new Qe(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function to(){var d=this.__wrapped__.value(),m=this.__dir__,S=Xe(d),A=m<0,P=S?d.length:0,F=T0(0,P,this.__views__),J=F.start,X=F.end,ie=X-J,_e=A?X:J-1,Se=this.__iteratees__,Te=Se.length,Re=0,Oe=un(ie,this.__takeCount__);if(!S||!A&&P==ie&&Oe==ie)return ph(d,this.__actions__);var Ge=[];e:for(;ie--&&Re<Oe;){_e+=m;for(var st=-1,Je=d[_e];++st<Te;){var ht=Se[st],mt=ht.iteratee,xi=ht.type,Dr=mt(Je);if(xi==fe)Je=Dr;else if(!Dr){if(xi==ue)continue e;break e}}Ge[Re++]=Je}return Ge}Qe.prototype=No(Mo.prototype),Qe.prototype.constructor=Qe;function no(d){var m=-1,S=d==null?0:d.length;for(this.clear();++m<S;){var A=d[m];this.set(A[0],A[1])}}function eh(){this.__data__=ga?ga(null):{},this.size=0}function va(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m}function Oc(d){var m=this.__data__;if(ga){var S=m[d];return S===h?n:S}return wt.call(m,d)?m[d]:n}function Is(d){var m=this.__data__;return ga?m[d]!==n:wt.call(m,d)}function In(d,m){var S=this.__data__;return this.size+=this.has(d)?0:1,S[d]=ga&&m===n?h:m,this}no.prototype.clear=eh,no.prototype.delete=va,no.prototype.get=Oc,no.prototype.has=Is,no.prototype.set=In;function Gr(d){var m=-1,S=d==null?0:d.length;for(this.clear();++m<S;){var A=d[m];this.set(A[0],A[1])}}function Zm(){this.__data__=[],this.size=0}function y0(d){var m=this.__data__,S=Di(m,d);if(S<0)return!1;var A=m.length-1;return S==A?m.pop():Xi.call(m,S,1),--this.size,!0}function v0(d){var m=this.__data__,S=Di(m,d);return S<0?n:m[S][1]}function b0(d){return Di(this.__data__,d)>-1}function dn(d,m){var S=this.__data__,A=Di(S,d);return A<0?(++this.size,S.push([d,m])):S[A][1]=m,this}Gr.prototype.clear=Zm,Gr.prototype.delete=y0,Gr.prototype.get=v0,Gr.prototype.has=b0,Gr.prototype.set=dn;function ui(d){var m=-1,S=d==null?0:d.length;for(this.clear();++m<S;){var A=d[m];this.set(A[0],A[1])}}function Pl(){this.size=0,this.__data__={hash:new no,map:new(wr||Gr),string:new no}}function Ll(d){var m=Zl(this,d).delete(d);return this.size-=m?1:0,m}function th(d){return Zl(this,d).get(d)}function ba(d){return Zl(this,d).has(d)}function xa(d,m){var S=Zl(this,d),A=S.size;return S.set(d,m),this.size+=S.size==A?0:1,this}ui.prototype.clear=Pl,ui.prototype.delete=Ll,ui.prototype.get=th,ui.prototype.has=ba,ui.prototype.set=xa;function Rs(d){var m=-1,S=d==null?0:d.length;for(this.__data__=new ui;++m<S;)this.add(d[m])}function eg(d){return this.__data__.set(d,h),this}function x0(d){return this.__data__.has(d)}Rs.prototype.add=Rs.prototype.push=eg,Rs.prototype.has=x0;function Jr(d){var m=this.__data__=new Gr(d);this.size=m.size}function Ns(){this.__data__=new Gr,this.size=0}function nh(d){var m=this.__data__,S=m.delete(d);return this.size=m.size,S}function Uc(d){return this.__data__.get(d)}function tg(d){return this.__data__.has(d)}function wa(d,m){var S=this.__data__;if(S instanceof Gr){var A=S.__data__;if(!wr||A.length<o-1)return A.push([d,m]),this.size=++S.size,this;S=this.__data__=new ui(A)}return S.set(d,m),this.size=S.size,this}Jr.prototype.clear=Ns,Jr.prototype.delete=nh,Jr.prototype.get=Uc,Jr.prototype.has=tg,Jr.prototype.set=wa;function Bc(d,m){var S=Xe(d),A=!S&&Fs(d),P=!S&&!A&&Jo(d),F=!S&&!A&&!P&&Yo(d),J=S||A||P||F,X=J?Ec(d.length,Es):[],ie=X.length;for(var _e in d)(m||wt.call(d,_e))&&!(J&&(_e=="length"||P&&(_e=="offset"||_e=="parent")||F&&(_e=="buffer"||_e=="byteLength"||_e=="byteOffset")||gi(_e,ie)))&&X.push(_e);return X}function Ol(d){var m=d.length;return m?d[Ia(0,m-1)]:n}function Fc(d,m){return au(qn(d),di(m,0,d.length))}function ng(d){return au(qn(d))}function jc(d,m,S){(S!==n&&!Rr(d[m],S)||S===n&&!(m in d))&&_r(d,m,S)}function ci(d,m,S){var A=d[m];(!(wt.call(d,m)&&Rr(A,S))||S===n&&!(m in d))&&_r(d,m,S)}function Di(d,m){for(var S=d.length;S--;)if(Rr(d[S][0],m))return S;return-1}function rg(d,m,S,A){return Pi(d,function(P,F,J){m(A,P,S(P),J)}),A}function rh(d,m){return d&&Xr(m,wn(m),d)}function _a(d,m){return d&&Xr(m,or(m),d)}function _r(d,m,S){m=="__proto__"&&zr?zr(d,m,{configurable:!0,enumerable:!0,value:S,writable:!0}):d[m]=S}function Sa(d,m){for(var S=-1,A=m.length,P=he(A),F=d==null;++S<A;)P[S]=F?n:Wo(d,m[S]);return P}function di(d,m,S){return d===d&&(S!==n&&(d=d<=S?d:S),m!==n&&(d=d>=m?d:m)),d}function zn(d,m,S,A,P,F){var J,X=m&y,ie=m&_,_e=m&T;if(S&&(J=P?S(d,A,P,F):S(d)),J!==n)return J;if(!Vt(d))return d;var Se=Xe(d);if(Se){if(J=xg(d),!X)return qn(d,J)}else{var Te=Nn(d),Re=Te==fr||Te==fs;if(Jo(d))return yh(d,X);if(Te==Br||Te==Ce||Re&&!P){if(J=ie||Re?{}:Nh(d),!X)return ie?mg(d,_a(J,d)):pg(d,rh(J,d))}else{if(!Dt[Te])return P?d:{};J=wg(d,Te,X)}}F||(F=new Jr);var Oe=F.get(d);if(Oe)return Oe;F.set(d,J),Su(d)?d.forEach(function(Je){J.add(zn(Je,m,S,Je,d,F))}):ry(d)&&d.forEach(function(Je,ht){J.set(ht,zn(Je,m,S,ht,d,F))});var Ge=_e?ie?Rh:id:ie?or:wn,st=Se?n:Ge(d);return yr(st||d,function(Je,ht){st&&(ht=Je,Je=d[ht]),ci(J,ht,zn(Je,m,S,ht,d,F))}),J}function ig(d){var m=wn(d);return function(S){return Po(S,d,m)}}function Po(d,m,S){var A=S.length;if(d==null)return!A;for(d=Ct(d);A--;){var P=S[A],F=m[P],J=d[P];if(J===n&&!(P in d)||!F(J))return!1}return!0}function ih(d,m,S){if(typeof d!="function")throw new br(l);return su(function(){d.apply(n,S)},m)}function Yr(d,m,S,A){var P=-1,F=xc,J=!0,X=d.length,ie=[],_e=m.length;if(!X)return ie;S&&(m=zt(m,vr(S))),A?(F=Tl,J=!1):m.length>=o&&(F=Cl,J=!1,m=new Rs(m));e:for(;++P<X;){var Se=d[P],Te=S==null?Se:S(Se);if(Se=A||Se!==0?Se:0,J&&Te===Te){for(var Re=_e;Re--;)if(m[Re]===Te)continue e;ie.push(Se)}else F(m,Te,A)||ie.push(Se)}return ie}var Pi=wh(hi),zc=wh(Hc,!0);function Lo(d,m){var S=!0;return Pi(d,function(A,P,F){return S=!!m(A,P,F),S}),S}function fi(d,m,S){for(var A=-1,P=d.length;++A<P;){var F=d[A],J=m(F);if(J!=null&&(X===n?J===J&&!ir(J):S(J,X)))var X=J,ie=F}return ie}function Ul(d,m,S,A){var P=d.length;for(S=$e(S),S<0&&(S=-S>P?0:P+S),A=A===n||A>P?P:$e(A),A<0&&(A+=P),A=S>A?0:gp(A);S<A;)d[S++]=m;return d}function qc(d,m){var S=[];return Pi(d,function(A,P,F){m(A,P,F)&&S.push(A)}),S}function mn(d,m,S,A,P){var F=-1,J=d.length;for(S||(S=Dh),P||(P=[]);++F<J;){var X=d[F];m>0&&S(X)?m>1?mn(X,m-1,S,A,P):Ao(P,X):A||(P[P.length]=X)}return P}var Ms=_h(),Ea=_h(!0);function hi(d,m){return d&&Ms(d,m,wn)}function Hc(d,m){return d&&Ea(d,m,wn)}function ro(d,m){return Co(m,function(S){return Nr(d[S])})}function Li(d,m){m=Cr(m,d);for(var S=0,A=m.length;d!=null&&S<A;)d=d[Qn(m[S++])];return S&&S==A?d:n}function oh(d,m,S){var A=m(d);return Xe(d)?A:Ao(A,S(d))}function Rn(d){return d==null?d===n?Fn:Zs:Qi&&Qi in Ct(d)?eu(d):Lh(d)}function Bl(d,m){return d>m}function Sr(d,m){return d!=null&&wt.call(d,m)}function Wr(d,m){return d!=null&&m in Ct(d)}function Oo(d,m,S){return d>=un(m,S)&&d<Qt(m,S)}function Fl(d,m,S){for(var A=S?Tl:xc,P=d[0].length,F=d.length,J=F,X=he(F),ie=1/0,_e=[];J--;){var Se=d[J];J&&m&&(Se=zt(Se,vr(m))),ie=un(Se.length,ie),X[J]=!S&&(m||P>=120&&Se.length>=120)?new Rs(J&&Se):n}Se=d[0];var Te=-1,Re=X[0];e:for(;++Te<P&&_e.length<ie;){var Oe=Se[Te],Ge=m?m(Oe):Oe;if(Oe=S||Oe!==0?Oe:0,!(Re?Cl(Re,Ge):A(_e,Ge,S))){for(J=F;--J;){var st=X[J];if(!(st?Cl(st,Ge):A(d[J],Ge,S)))continue e}Re&&Re.push(Ge),_e.push(Oe)}}return _e}function og(d,m,S,A){return hi(d,function(P,F,J){m(A,S(P),F,J)}),A}function Kr(d,m,S){m=Cr(m,d),d=iu(d,m);var A=d==null?d:d[Qn(Bt(m))];return A==null?n:gr(A,d,S)}function Kn(d){return tn(d)&&Rn(d)==Ce}function on(d){return tn(d)&&Rn(d)==ke}function Vc(d){return tn(d)&&Rn(d)==Ue}function Er(d,m,S,A,P){return d===m?!0:d==null||m==null||!tn(d)&&!tn(m)?d!==d&&m!==m:Ze(d,m,S,A,Er,P)}function Ze(d,m,S,A,P,F){var J=Xe(d),X=Xe(m),ie=J?Ie:Nn(d),_e=X?Ie:Nn(m);ie=ie==Ce?Br:ie,_e=_e==Ce?Br:_e;var Se=ie==Br,Te=_e==Br,Re=ie==_e;if(Re&&Jo(d)){if(!Jo(m))return!1;J=!0,Se=!1}if(Re&&!Se)return F||(F=new Jr),J||Yo(d)?Xl(d,m,S,A,P,F):bg(d,m,ie,S,A,P,F);if(!(S&C)){var Oe=Se&&wt.call(d,"__wrapped__"),Ge=Te&&wt.call(m,"__wrapped__");if(Oe||Ge){var st=Oe?d.value():d,Je=Ge?m.value():m;return F||(F=new Jr),P(st,Je,S,A,F)}}return Re?(F||(F=new Jr),Ih(d,m,S,A,P,F)):!1}function Rt(d){return tn(d)&&Nn(d)==nn}function Zt(d,m,S,A){var P=S.length,F=P,J=!A;if(d==null)return!F;for(d=Ct(d);P--;){var X=S[P];if(J&&X[2]?X[1]!==d[X[0]]:!(X[0]in d))return!1}for(;++P<F;){X=S[P];var ie=X[0],_e=d[ie],Se=X[1];if(J&&X[2]){if(_e===n&&!(ie in d))return!1}else{var Te=new Jr;if(A)var Re=A(_e,Se,ie,d,m,Te);if(!(Re===n?Er(Se,_e,C|k,A,Te):Re))return!1}}return!0}function jl(d){if(!Vt(d)||_g(d))return!1;var m=Nr(d)?da:bm;return m.test(Un(d))}function Ta(d){return tn(d)&&Rn(d)==ki}function Ds(d){return tn(d)&&Nn(d)==Bn}function $c(d){return tn(d)&&Td(d.length)&&!!It[Rn(d)]}function Ca(d){return typeof d=="function"?d:d==null?Vn:typeof d=="object"?Xe(d)?sh(d[0],d[1]):Jc(d):O(d)}function Uo(d){if(!Pa(d))return ma(d);var m=[];for(var S in Ct(d))wt.call(d,S)&&S!="constructor"&&m.push(S);return m}function w0(d){if(!Vt(d))return oo(d);var m=Pa(d),S=[];for(var A in d)A=="constructor"&&(m||!wt.call(d,A))||S.push(A);return S}function Ht(d,m){return d<m}function Gc(d,m){var S=-1,A=rr(d)?he(d.length):[];return Pi(d,function(P,F,J){A[++S]=m(P,F,J)}),A}function Jc(d){var m=od(d);return m.length==1&&m[0][2]?cd(m[0][0],m[0][1]):function(S){return S===d||Zt(S,d,m)}}function sh(d,m){return nu(d)&&Ui(m)?cd(Qn(d),m):function(S){var A=Wo(S,d);return A===n&&A===m?vp(S,d):Er(m,A,C|k)}}function zl(d,m,S,A,P){d!==m&&Ms(m,function(F,J){if(P||(P=new Jr),Vt(F))_0(d,m,J,S,zl,A,P);else{var X=A?A(Pt(d,J),F,J+"",d,m,P):n;X===n&&(X=F),jc(d,J,X)}},or)}function _0(d,m,S,A,P,F,J){var X=Pt(d,S),ie=Pt(m,S),_e=J.get(ie);if(_e){jc(d,S,_e);return}var Se=F?F(X,ie,S+"",d,m,J):n,Te=Se===n;if(Te){var Re=Xe(ie),Oe=!Re&&Jo(ie),Ge=!Re&&!Oe&&Yo(ie);Se=ie,Re||Oe||Ge?Xe(X)?Se=X:an(X)?Se=qn(X):Oe?(Te=!1,Se=yh(ie,!0)):Ge?(Te=!1,Se=vh(ie,!0)):Se=[]:wu(ie)||Fs(ie)?(Se=X,Fs(X)?Se=Cd(X):(!Vt(X)||Nr(X))&&(Se=Nh(ie))):Te=!1}Te&&(J.set(ie,Se),P(Se,ie,A,F,J),J.delete(ie)),jc(d,S,Se)}function Yc(d,m){var S=d.length;if(S)return m+=m<0?S:0,gi(m,S)?d[m]:n}function Wc(d,m,S){m.length?m=zt(m,function(F){return Xe(F)?function(J){return Li(J,F.length===1?F[0]:F)}:F}):m=[Vn];var A=-1;m=zt(m,vr(ze()));var P=Gc(d,function(F,J,X){var ie=zt(m,function(_e){return _e(F)});return{criteria:ie,index:++A,value:F}});return zm(P,function(F,J){return hg(F,J,S)})}function ah(d,m){return Ln(d,m,function(S,A){return vp(d,A)})}function Ln(d,m,S){for(var A=-1,P=m.length,F={};++A<P;){var J=m[A],X=Li(d,J);S(X,J)&&Ra(F,Cr(J,d),X)}return F}function sn(d){return function(m){return Li(m,d)}}function Aa(d,m,S,A){var P=A?f0:sa,F=-1,J=m.length,X=d;for(d===m&&(m=qn(m)),S&&(X=zt(d,vr(S)));++F<J;)for(var ie=0,_e=m[F],Se=S?S(_e):_e;(ie=P(X,Se,ie,A))>-1;)X!==d&&Xi.call(X,ie,1),Xi.call(d,ie,1);return d}function ka(d,m){for(var S=d?m.length:0,A=S-1;S--;){var P=m[S];if(S==A||P!==F){var F=P;gi(P)?Xi.call(d,P,1):ql(d,P)}}return d}function Ia(d,m){return d+Nl(Zi()*(m-d+1))}function lh(d,m,S,A){for(var P=-1,F=Qt(ha((m-d)/(S||1)),0),J=he(F);F--;)J[A?F:++P]=d,d+=S;return J}function pi(d,m){var S="";if(!d||m<1||m>le)return S;do m%2&&(S+=d),m=Nl(m/2),m&&(d+=d);while(m);return S}function et(d,m){return dd(Oh(d,m,Vn),d+"")}function uh(d){return Ol(Ya(d))}function ch(d,m){var S=Ya(d);return au(S,di(m,0,S.length))}function Ra(d,m,S,A){if(!Vt(d))return d;m=Cr(m,d);for(var P=-1,F=m.length,J=F-1,X=d;X!=null&&++P<F;){var ie=Qn(m[P]),_e=S;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return d;if(P!=J){var Se=X[ie];_e=A?A(Se,ie,X):n,_e===n&&(_e=Vt(Se)?Se:gi(m[P+1])?[]:{})}ci(X,ie,_e),X=X[ie]}return d}var dh=cn?function(d,m){return cn.set(d,m),d}:Vn,sg=zr?function(d,m){return zr(d,"toString",{configurable:!0,enumerable:!1,value:Ka(m),writable:!0})}:Vn;function ag(d){return au(Ya(d))}function Tr(d,m,S){var A=-1,P=d.length;m<0&&(m=-m>P?0:P+m),S=S>P?P:S,S<0&&(S+=P),P=m>S?0:S-m>>>0,m>>>=0;for(var F=he(P);++A<P;)F[A]=d[A+m];return F}function lg(d,m){var S;return Pi(d,function(A,P,F){return S=m(A,P,F),!S}),!!S}function Na(d,m,S){var A=0,P=d==null?A:d.length;if(typeof m=="number"&&m===m&&P<=U){for(;A<P;){var F=A+P>>>1,J=d[F];J!==null&&!ir(J)&&(S?J<=m:J<m)?A=F+1:P=F}return P}return Kc(d,m,Vn,S)}function Kc(d,m,S,A){var P=0,F=d==null?0:d.length;if(F===0)return 0;m=S(m);for(var J=m!==m,X=m===null,ie=ir(m),_e=m===n;P<F;){var Se=Nl((P+F)/2),Te=S(d[Se]),Re=Te!==n,Oe=Te===null,Ge=Te===Te,st=ir(Te);if(J)var Je=A||Ge;else _e?Je=Ge&&(A||Re):X?Je=Ge&&Re&&(A||!Oe):ie?Je=Ge&&Re&&!Oe&&(A||!st):Oe||st?Je=!1:Je=A?Te<=m:Te<m;Je?P=Se+1:F=Se}return un(F,re)}function ug(d,m){for(var S=-1,A=d.length,P=0,F=[];++S<A;){var J=d[S],X=m?m(J):J;if(!S||!Rr(X,ie)){var ie=X;F[P++]=J===0?0:J}}return F}function fh(d){return typeof d=="number"?d:ir(d)?H:+d}function Xn(d){if(typeof d=="string")return d;if(Xe(d))return zt(d,Xn)+"";if(ir(d))return ks?ks.call(d):"";var m=d+"";return m=="0"&&1/d==-oe?"-0":m}function io(d,m,S){var A=-1,P=xc,F=d.length,J=!0,X=[],ie=X;if(S)J=!1,P=Tl;else if(F>=o){var _e=m?null:yg(d);if(_e)return Ac(_e);J=!1,P=Cl,ie=new Rs}else ie=m?[]:X;e:for(;++A<F;){var Se=d[A],Te=m?m(Se):Se;if(Se=S||Se!==0?Se:0,J&&Te===Te){for(var Re=ie.length;Re--;)if(ie[Re]===Te)continue e;m&&ie.push(Te),X.push(Se)}else P(ie,Te,S)||(ie!==X&&ie.push(Te),X.push(Se))}return X}function ql(d,m){return m=Cr(m,d),d=iu(d,m),d==null||delete d[Qn(Bt(m))]}function hh(d,m,S,A){return Ra(d,m,S(Li(d,m)),A)}function Hl(d,m,S,A){for(var P=d.length,F=A?P:-1;(A?F--:++F<P)&&m(d[F],F,d););return S?Tr(d,A?0:F,A?F+1:P):Tr(d,A?F+1:0,A?P:F)}function ph(d,m){var S=d;return S instanceof Qe&&(S=S.value()),zf(m,function(A,P){return P.func.apply(P.thisArg,Ao([A],P.args))},S)}function Xc(d,m,S){var A=d.length;if(A<2)return A?io(d[0]):[];for(var P=-1,F=he(A);++P<A;)for(var J=d[P],X=-1;++X<A;)X!=P&&(F[P]=Yr(F[P]||J,d[X],m,S));return io(mn(F,1),m,S)}function mh(d,m,S){for(var A=-1,P=d.length,F=m.length,J={};++A<P;){var X=A<F?m[A]:n;S(J,d[A],X)}return J}function gh(d){return an(d)?d:[]}function Qc(d){return typeof d=="function"?d:Vn}function Cr(d,m){return Xe(d)?d:nu(d,m)?[d]:Uh(St(d))}var cg=et;function mi(d,m,S){var A=d.length;return S=S===n?A:S,!m&&S>=A?d:Tr(d,m,S)}var Vl=Xm||function(d){return pn.clearTimeout(d)};function yh(d,m){if(m)return d.slice();var S=d.length,A=Dc?Dc(S):new d.constructor(S);return d.copy(A),A}function $l(d){var m=new d.constructor(d.byteLength);return new Ts(m).set(new Ts(d)),m}function S0(d,m){var S=m?$l(d.buffer):d.buffer;return new d.constructor(S,d.byteOffset,d.byteLength)}function dg(d){var m=new d.constructor(d.source,sc.exec(d));return m.lastIndex=d.lastIndex,m}function fg(d){return ya?Ct(ya.call(d)):{}}function vh(d,m){var S=m?$l(d.buffer):d.buffer;return new d.constructor(S,d.byteOffset,d.length)}function bh(d,m){if(d!==m){var S=d!==n,A=d===null,P=d===d,F=ir(d),J=m!==n,X=m===null,ie=m===m,_e=ir(m);if(!X&&!_e&&!F&&d>m||F&&J&&ie&&!X&&!_e||A&&J&&ie||!S&&ie||!P)return 1;if(!A&&!F&&!_e&&d<m||_e&&S&&P&&!A&&!F||X&&S&&P||!J&&P||!ie)return-1}return 0}function hg(d,m,S){for(var A=-1,P=d.criteria,F=m.criteria,J=P.length,X=S.length;++A<J;){var ie=bh(P[A],F[A]);if(ie){if(A>=X)return ie;var _e=S[A];return ie*(_e=="desc"?-1:1)}}return d.index-m.index}function Zc(d,m,S,A){for(var P=-1,F=d.length,J=S.length,X=-1,ie=m.length,_e=Qt(F-J,0),Se=he(ie+_e),Te=!A;++X<ie;)Se[X]=m[X];for(;++P<J;)(Te||P<F)&&(Se[S[P]]=d[P]);for(;_e--;)Se[X++]=d[P++];return Se}function xh(d,m,S,A){for(var P=-1,F=d.length,J=-1,X=S.length,ie=-1,_e=m.length,Se=Qt(F-X,0),Te=he(Se+_e),Re=!A;++P<Se;)Te[P]=d[P];for(var Oe=P;++ie<_e;)Te[Oe+ie]=m[ie];for(;++J<X;)(Re||P<F)&&(Te[Oe+S[J]]=d[P++]);return Te}function qn(d,m){var S=-1,A=d.length;for(m||(m=he(A));++S<A;)m[S]=d[S];return m}function Xr(d,m,S,A){var P=!S;S||(S={});for(var F=-1,J=m.length;++F<J;){var X=m[F],ie=A?A(S[X],d[X],X,S,d):n;ie===n&&(ie=d[X]),P?_r(S,X,ie):ci(S,X,ie)}return S}function pg(d,m){return Xr(d,sd(d),m)}function mg(d,m){return Xr(d,tu(d),m)}function ed(d,m){return function(S,A){var P=Xe(S)?a0:rg,F=m?m():{};return P(S,d,ze(A,2),F)}}function Bo(d){return et(function(m,S){var A=-1,P=S.length,F=P>1?S[P-1]:n,J=P>2?S[2]:n;for(F=d.length>3&&typeof F=="function"?(P--,F):n,J&&On(S[0],S[1],J)&&(F=P<3?n:F,P=1),m=Ct(m);++A<P;){var X=S[A];X&&d(m,X,A,F)}return m})}function wh(d,m){return function(S,A){if(S==null)return S;if(!rr(S))return d(S,A);for(var P=S.length,F=m?P:-1,J=Ct(S);(m?F--:++F<P)&&A(J[F],F,J)!==!1;);return S}}function _h(d){return function(m,S,A){for(var P=-1,F=Ct(m),J=A(m),X=J.length;X--;){var ie=J[d?X:++P];if(S(F[ie],ie,F)===!1)break}return m}}function Sh(d,m,S){var A=m&N,P=Gl(d);function F(){var J=this&&this!==pn&&this instanceof F?P:d;return J.apply(A?S:this,arguments)}return F}function Eh(d){return function(m){m=St(m);var S=Ss(m)?Jt(m):n,A=S?S[0]:m.charAt(0),P=S?mi(S,1).join(""):m.slice(1);return A[d]()+P}}function Ps(d){return function(m){return zf(Ry(Wa(m).replace(Bf,"")),d,"")}}function Gl(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var S=No(d.prototype),A=d.apply(S,m);return Vt(A)?A:S}}function E0(d,m,S){var A=Gl(d);function P(){for(var F=arguments.length,J=he(F),X=F,ie=en(P);X--;)J[X]=arguments[X];var _e=F<3&&J[0]!==ie&&J[F-1]!==ie?[]:Ki(J,ie);if(F-=_e.length,F<S)return rd(d,m,Da,P.placeholder,n,J,_e,n,n,S-F);var Se=this&&this!==pn&&this instanceof P?A:d;return gr(Se,this,J)}return P}function Th(d){return function(m,S,A){var P=Ct(m);if(!rr(m)){var F=ze(S,3);m=wn(m),S=function(X){return F(P[X],X,P)}}var J=d(m,S,A);return J>-1?P[F?m[J]:J]:n}}function Ma(d){return Oi(function(m){var S=m.length,A=S,P=Wn.prototype.thru;for(d&&m.reverse();A--;){var F=m[A];if(typeof F!="function")throw new br(l);if(P&&!J&&Yt(F)=="wrapper")var J=new Wn([],!0)}for(A=J?A:S;++A<S;){F=m[A];var X=Yt(F),ie=X=="wrapper"?Ql(F):n;ie&&ru(ie[0])&&ie[1]==(q|D|G|ee)&&!ie[4].length&&ie[9]==1?J=J[Yt(ie[0])].apply(J,ie[3]):J=F.length==1&&ru(F)?J[X]():J.thru(F)}return function(){var _e=arguments,Se=_e[0];if(J&&_e.length==1&&Xe(Se))return J.plant(Se).value();for(var Te=0,Re=S?m[Te].apply(this,_e):Se;++Te<S;)Re=m[Te].call(this,Re);return Re}})}function Da(d,m,S,A,P,F,J,X,ie,_e){var Se=m&q,Te=m&N,Re=m&I,Oe=m&(D|$),Ge=m&W,st=Re?n:Gl(d);function Je(){for(var ht=arguments.length,mt=he(ht),xi=ht;xi--;)mt[xi]=arguments[xi];if(Oe)var Dr=en(Je),wi=Al(mt,Dr);if(A&&(mt=Zc(mt,A,P,Oe)),F&&(mt=xh(mt,F,J,Oe)),ht-=wi,Oe&&ht<_e){var yn=Ki(mt,Dr);return rd(d,m,Da,Je.placeholder,S,mt,yn,X,ie,_e-ht)}var mo=Te?S:this,zs=Re?mo[d]:d;return ht=mt.length,X?mt=ou(mt,X):Ge&&ht>1&&mt.reverse(),Se&&ie<ht&&(mt.length=ie),this&&this!==pn&&this instanceof Je&&(zs=st||Gl(zs)),zs.apply(mo,mt)}return Je}function Jl(d,m){return function(S,A){return og(S,d,m(A),{})}}function Yl(d,m){return function(S,A){var P;if(S===n&&A===n)return m;if(S!==n&&(P=S),A!==n){if(P===n)return A;typeof S=="string"||typeof A=="string"?(S=Xn(S),A=Xn(A)):(S=fh(S),A=fh(A)),P=d(S,A)}return P}}function td(d){return Oi(function(m){return m=zt(m,vr(ze())),et(function(S){var A=this;return d(m,function(P){return gr(P,A,S)})})})}function Fo(d,m){m=m===n?" ":Xn(m);var S=m.length;if(S<2)return S?pi(m,d):m;var A=pi(m,ha(d/aa(m)));return Ss(m)?mi(Jt(A),0,d).join(""):A.slice(0,d)}function gg(d,m,S,A){var P=m&N,F=Gl(d);function J(){for(var X=-1,ie=arguments.length,_e=-1,Se=A.length,Te=he(Se+ie),Re=this&&this!==pn&&this instanceof J?F:d;++_e<Se;)Te[_e]=A[_e];for(;ie--;)Te[_e++]=arguments[++X];return gr(Re,P?S:this,Te)}return J}function nd(d){return function(m,S,A){return A&&typeof A!="number"&&On(m,S,A)&&(S=A=n),m=ho(m),S===n?(S=m,m=0):S=ho(S),A=A===n?m<S?1:-1:ho(A),lh(m,S,A,d)}}function Wl(d){return function(m,S){return typeof m=="string"&&typeof S=="string"||(m=Mr(m),S=Mr(S)),d(m,S)}}function rd(d,m,S,A,P,F,J,X,ie,_e){var Se=m&D,Te=Se?J:n,Re=Se?n:J,Oe=Se?F:n,Ge=Se?n:F;m|=Se?G:j,m&=~(Se?j:G),m&L||(m&=-4);var st=[d,m,P,Oe,Te,Ge,Re,X,ie,_e],Je=S.apply(n,st);return ru(d)&&Eg(Je,st),Je.placeholder=A,La(Je,d,m)}function Kl(d){var m=qt[d];return function(S,A){if(S=Mr(S),A=A==null?0:un($e(A),292),A&&xr(S)){var P=(St(S)+"e").split("e"),F=m(P[0]+"e"+(+P[1]+A));return P=(St(F)+"e").split("e"),+(P[0]+"e"+(+P[1]-A))}return m(S)}}var yg=ko&&1/Ac(new ko([,-0]))[1]==oe?function(d){return new ko(d)}:u;function Ch(d){return function(m){var S=Nn(m);return S==nn?Cc(m):S==Bn?p0(m):qm(m,d(m))}}function Hn(d,m,S,A,P,F,J,X){var ie=m&I;if(!ie&&typeof d!="function")throw new br(l);var _e=A?A.length:0;if(_e||(m&=-97,A=P=n),J=J===n?J:Qt($e(J),0),X=X===n?X:$e(X),_e-=P?P.length:0,m&j){var Se=A,Te=P;A=P=n}var Re=ie?n:Ql(d),Oe=[d,m,S,A,P,Se,Te,F,J,X];if(Re&&Sg(Oe,Re),d=Oe[0],m=Oe[1],S=Oe[2],A=Oe[3],P=Oe[4],X=Oe[9]=Oe[9]===n?ie?0:d.length:Qt(Oe[9]-_e,0),!X&&m&(D|$)&&(m&=-25),!m||m==N)var Ge=Sh(d,m,S);else m==D||m==$?Ge=E0(d,m,X):(m==G||m==(N|G))&&!P.length?Ge=gg(d,m,S,A):Ge=Da.apply(n,Oe);var st=Re?dh:Eg;return La(st(Ge,Oe),d,m)}function Ah(d,m,S,A){return d===n||Rr(d,ca[S])&&!wt.call(A,S)?m:d}function kh(d,m,S,A,P,F){return Vt(d)&&Vt(m)&&(F.set(m,d),zl(d,m,n,kh,F),F.delete(m)),d}function vg(d){return wu(d)?n:d}function Xl(d,m,S,A,P,F){var J=S&C,X=d.length,ie=m.length;if(X!=ie&&!(J&&ie>X))return!1;var _e=F.get(d),Se=F.get(m);if(_e&&Se)return _e==m&&Se==d;var Te=-1,Re=!0,Oe=S&k?new Rs:n;for(F.set(d,m),F.set(m,d);++Te<X;){var Ge=d[Te],st=m[Te];if(A)var Je=J?A(st,Ge,Te,m,d,F):A(Ge,st,Te,d,m,F);if(Je!==n){if(Je)continue;Re=!1;break}if(Oe){if(!qf(m,function(ht,mt){if(!Cl(Oe,mt)&&(Ge===ht||P(Ge,ht,S,A,F)))return Oe.push(mt)})){Re=!1;break}}else if(!(Ge===st||P(Ge,st,S,A,F))){Re=!1;break}}return F.delete(d),F.delete(m),Re}function bg(d,m,S,A,P,F,J){switch(S){case je:if(d.byteLength!=m.byteLength||d.byteOffset!=m.byteOffset)return!1;d=d.buffer,m=m.buffer;case ke:return!(d.byteLength!=m.byteLength||!F(new Ts(d),new Ts(m)));case rt:case Ue:case hr:return Rr(+d,+m);case hn:return d.name==m.name&&d.message==m.message;case ki:case hs:return d==m+"";case nn:var X=Cc;case Bn:var ie=A&C;if(X||(X=Ac),d.size!=m.size&&!ie)return!1;var _e=J.get(d);if(_e)return _e==m;A|=k,J.set(d,m);var Se=Xl(X(d),X(m),A,P,F,J);return J.delete(d),Se;case ta:if(ya)return ya.call(d)==ya.call(m)}return!1}function Ih(d,m,S,A,P,F){var J=S&C,X=id(d),ie=X.length,_e=id(m),Se=_e.length;if(ie!=Se&&!J)return!1;for(var Te=ie;Te--;){var Re=X[Te];if(!(J?Re in m:wt.call(m,Re)))return!1}var Oe=F.get(d),Ge=F.get(m);if(Oe&&Ge)return Oe==m&&Ge==d;var st=!0;F.set(d,m),F.set(m,d);for(var Je=J;++Te<ie;){Re=X[Te];var ht=d[Re],mt=m[Re];if(A)var xi=J?A(mt,ht,Re,m,d,F):A(ht,mt,Re,d,m,F);if(!(xi===n?ht===mt||P(ht,mt,S,A,F):xi)){st=!1;break}Je||(Je=Re=="constructor")}if(st&&!Je){var Dr=d.constructor,wi=m.constructor;Dr!=wi&&"constructor"in d&&"constructor"in m&&!(typeof Dr=="function"&&Dr instanceof Dr&&typeof wi=="function"&&wi instanceof wi)&&(st=!1)}return F.delete(d),F.delete(m),st}function Oi(d){return dd(Oh(d,n,Ut),d+"")}function id(d){return oh(d,wn,sd)}function Rh(d){return oh(d,or,tu)}var Ql=cn?function(d){return cn.get(d)}:u;function Yt(d){for(var m=d.name+"",S=_t[m],A=wt.call(_t,m)?S.length:0;A--;){var P=S[A],F=P.func;if(F==null||F==d)return P.name}return m}function en(d){var m=wt.call(B,"placeholder")?B:d;return m.placeholder}function ze(){var d=B.iteratee||Iu;return d=d===Iu?Ca:d,arguments.length?d(arguments[0],arguments[1]):d}function Zl(d,m){var S=d.__data__;return ud(m)?S[typeof m=="string"?"string":"hash"]:S.map}function od(d){for(var m=wn(d),S=m.length;S--;){var A=m[S],P=d[A];m[S]=[A,P,Ui(P)]}return m}function jo(d,m){var S=Hm(d,m);return jl(S)?S:n}function eu(d){var m=wt.call(d,Qi),S=d[Qi];try{d[Qi]=n;var A=!0}catch{}var P=Yn.call(d);return A&&(m?d[Qi]=S:delete d[Qi]),P}var sd=Ml?function(d){return d==null?[]:(d=Ct(d),Co(Ml(d),function(m){return Rl.call(d,m)}))}:we,tu=Ml?function(d){for(var m=[];d;)Ao(m,sd(d)),d=Ni(d);return m}:we,Nn=Rn;(Vr&&Nn(new Vr(new ArrayBuffer(1)))!=je||wr&&Nn(new wr)!=nn||Lc&&Nn(Lc.resolve())!=dl||ko&&Nn(new ko)!=Bn||As&&Nn(new As)!=ps)&&(Nn=function(d){var m=Rn(d),S=m==Br?d.constructor:n,A=S?Un(S):"";if(A)switch(A){case ft:return je;case Io:return nn;case $r:return dl;case Zf:return Bn;case Ro:return ps}return m});function T0(d,m,S){for(var A=-1,P=S.length;++A<P;){var F=S[A],J=F.size;switch(F.type){case"drop":d+=J;break;case"dropRight":m-=J;break;case"take":m=un(m,d+J);break;case"takeRight":d=Qt(d,m-J);break}}return{start:d,end:m}}function ad(d){var m=d.match(ym);return m?m[1].split(vm):[]}function ld(d,m,S){m=Cr(m,d);for(var A=-1,P=m.length,F=!1;++A<P;){var J=Qn(m[A]);if(!(F=d!=null&&S(d,J)))break;d=d[J]}return F||++A!=P?F:(P=d==null?0:d.length,!!P&&Td(P)&&gi(J,P)&&(Xe(d)||Fs(d)))}function xg(d){var m=d.length,S=new d.constructor(m);return m&&typeof d[0]=="string"&&wt.call(d,"index")&&(S.index=d.index,S.input=d.input),S}function Nh(d){return typeof d.constructor=="function"&&!Pa(d)?No(Ni(d)):{}}function wg(d,m,S){var A=d.constructor;switch(m){case ke:return $l(d);case rt:case Ue:return new A(+d);case je:return S0(d,S);case it:case gt:case jn:case ii:case Cn:case rn:case Pn:case Tt:case Ii:return vh(d,S);case nn:return new A;case hr:case hs:return new A(d);case ki:return dg(d);case Bn:return new A;case ta:return fg(d)}}function Mh(d,m){var S=m.length;if(!S)return d;var A=S-1;return m[A]=(S>1?"& ":"")+m[A],m=m.join(S>2?", ":" "),d.replace(Mf,`{
/* [wrapped with `+m+`] */
`)}function Dh(d){return Xe(d)||Fs(d)||!!(Km&&d&&d[Km])}function gi(d,m){var S=typeof d;return m=m??le,!!m&&(S=="number"||S!="symbol"&&Df.test(d))&&d>-1&&d%1==0&&d<m}function On(d,m,S){if(!Vt(S))return!1;var A=typeof m;return(A=="number"?rr(S)&&gi(m,S.length):A=="string"&&m in S)?Rr(S[m],d):!1}function nu(d,m){if(Xe(d))return!1;var S=typeof d;return S=="number"||S=="symbol"||S=="boolean"||d==null||ir(d)?!0:ml.test(d)||!Rf.test(d)||m!=null&&d in Ct(m)}function ud(d){var m=typeof d;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?d!=="__proto__":d===null}function ru(d){var m=Yt(d),S=B[m];if(typeof S!="function"||!(m in Qe.prototype))return!1;if(d===S)return!0;var A=Ql(S);return!!A&&d===A[0]}function _g(d){return!!Nc&&Nc in d}var Ph=Ic?Nr:ce;function Pa(d){var m=d&&d.constructor,S=typeof m=="function"&&m.prototype||ca;return d===S}function Ui(d){return d===d&&!Vt(d)}function cd(d,m){return function(S){return S==null?!1:S[d]===m&&(m!==n||d in Ct(S))}}function C0(d){var m=yu(d,function(A){return S.size===f&&S.clear(),A}),S=m.cache;return m}function Sg(d,m){var S=d[1],A=m[1],P=S|A,F=P<(N|I|q),J=A==q&&S==D||A==q&&S==ee&&d[7].length<=m[8]||A==(q|ee)&&m[7].length<=m[8]&&S==D;if(!(F||J))return d;A&N&&(d[2]=m[2],P|=S&N?0:L);var X=m[3];if(X){var ie=d[3];d[3]=ie?Zc(ie,X,m[4]):X,d[4]=ie?Ki(d[3],g):m[4]}return X=m[5],X&&(ie=d[5],d[5]=ie?xh(ie,X,m[6]):X,d[6]=ie?Ki(d[5],g):m[6]),X=m[7],X&&(d[7]=X),A&q&&(d[8]=d[8]==null?m[8]:un(d[8],m[8])),d[9]==null&&(d[9]=m[9]),d[0]=m[0],d[1]=P,d}function oo(d){var m=[];if(d!=null)for(var S in Ct(d))m.push(S);return m}function Lh(d){return Yn.call(d)}function Oh(d,m,S){return m=Qt(m===n?d.length-1:m,0),function(){for(var A=arguments,P=-1,F=Qt(A.length-m,0),J=he(F);++P<F;)J[P]=A[m+P];P=-1;for(var X=he(m+1);++P<m;)X[P]=A[P];return X[m]=S(J),gr(d,this,X)}}function iu(d,m){return m.length<2?d:Li(d,Tr(m,0,-1))}function ou(d,m){for(var S=d.length,A=un(m.length,S),P=qn(d);A--;){var F=m[A];d[A]=gi(F,S)?P[F]:n}return d}function Pt(d,m){if(!(m==="constructor"&&typeof d[m]=="function")&&m!="__proto__")return d[m]}var Eg=so(dh),su=Cs||function(d,m){return pn.setTimeout(d,m)},dd=so(sg);function La(d,m,S){var A=m+"";return dd(d,Mh(A,Tg(ad(A),S)))}function so(d){var m=0,S=0;return function(){var A=qr(),P=xe-(A-S);if(S=A,P>0){if(++m>=de)return arguments[0]}else m=0;return d.apply(n,arguments)}}function au(d,m){var S=-1,A=d.length,P=A-1;for(m=m===n?A:m;++S<m;){var F=Ia(S,P),J=d[F];d[F]=d[S],d[S]=J}return d.length=m,d}var Uh=C0(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(e0,function(S,A,P,F){m.push(P?F.replace(Gn,"$1"):A||S)}),m});function Qn(d){if(typeof d=="string"||ir(d))return d;var m=d+"";return m=="0"&&1/d==-oe?"-0":m}function Un(d){if(d!=null){try{return Rc.call(d)}catch{}try{return d+""}catch{}}return""}function Tg(d,m){return yr(me,function(S){var A="_."+S[0];m&S[1]&&!xc(d,A)&&d.push(A)}),d.sort()}function fd(d){if(d instanceof Qe)return d.clone();var m=new Wn(d.__wrapped__,d.__chain__);return m.__actions__=qn(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}function Cg(d,m,S){(S?On(d,m,S):m===n)?m=1:m=Qt($e(m),0);var A=d==null?0:d.length;if(!A||m<1)return[];for(var P=0,F=0,J=he(ha(A/m));P<A;)J[F++]=Tr(d,P,P+=m);return J}function Bh(d){for(var m=-1,S=d==null?0:d.length,A=0,P=[];++m<S;){var F=d[m];F&&(P[A++]=F)}return P}function Fh(){var d=arguments.length;if(!d)return[];for(var m=he(d-1),S=arguments[0],A=d;A--;)m[A-1]=arguments[A];return Ao(Xe(S)?qn(S):[S],mn(m,1))}var hd=et(function(d,m){return an(d)?Yr(d,mn(m,1,an,!0)):[]}),Ag=et(function(d,m){var S=Bt(m);return an(S)&&(S=n),an(d)?Yr(d,mn(m,1,an,!0),ze(S,2)):[]}),ao=et(function(d,m){var S=Bt(m);return an(S)&&(S=n),an(d)?Yr(d,mn(m,1,an,!0),n,S):[]});function fn(d,m,S){var A=d==null?0:d.length;return A?(m=S||m===n?1:$e(m),Tr(d,m<0?0:m,A)):[]}function jh(d,m,S){var A=d==null?0:d.length;return A?(m=S||m===n?1:$e(m),m=A-m,Tr(d,0,m<0?0:m)):[]}function kg(d,m){return d&&d.length?Hl(d,ze(m,3),!0,!0):[]}function xn(d,m){return d&&d.length?Hl(d,ze(m,3),!0):[]}function A0(d,m,S,A){var P=d==null?0:d.length;return P?(S&&typeof S!="number"&&On(d,m,S)&&(S=0,A=P),Ul(d,m,S,A)):[]}function zh(d,m,S){var A=d==null?0:d.length;if(!A)return-1;var P=S==null?0:$e(S);return P<0&&(P=Qt(A+P,0)),wc(d,ze(m,3),P)}function qh(d,m,S){var A=d==null?0:d.length;if(!A)return-1;var P=A-1;return S!==n&&(P=$e(S),P=S<0?Qt(A+P,0):un(P,A-1)),wc(d,ze(m,3),P,!0)}function Ut(d){var m=d==null?0:d.length;return m?mn(d,1):[]}function Zn(d){var m=d==null?0:d.length;return m?mn(d,oe):[]}function lo(d,m){var S=d==null?0:d.length;return S?(m=m===n?1:$e(m),mn(d,m)):[]}function Ig(d){for(var m=-1,S=d==null?0:d.length,A={};++m<S;){var P=d[m];A[P[0]]=P[1]}return A}function Hh(d){return d&&d.length?d[0]:n}function Rg(d,m,S){var A=d==null?0:d.length;if(!A)return-1;var P=S==null?0:$e(S);return P<0&&(P=Qt(A+P,0)),sa(d,m,P)}function k0(d){var m=d==null?0:d.length;return m?Tr(d,0,-1):[]}var pd=et(function(d){var m=zt(d,gh);return m.length&&m[0]===d[0]?Fl(m):[]}),er=et(function(d){var m=Bt(d),S=zt(d,gh);return m===Bt(S)?m=n:S.pop(),S.length&&S[0]===d[0]?Fl(S,ze(m,2)):[]}),yi=et(function(d){var m=Bt(d),S=zt(d,gh);return m=typeof m=="function"?m:n,m&&S.pop(),S.length&&S[0]===d[0]?Fl(S,n,m):[]});function Ng(d,m){return d==null?"":pa.call(d,m)}function Bt(d){var m=d==null?0:d.length;return m?d[m-1]:n}function Mg(d,m,S){var A=d==null?0:d.length;if(!A)return-1;var P=A;return S!==n&&(P=$e(S),P=P<0?Qt(A+P,0):un(P,A-1)),m===m?g0(d,m,P):wc(d,jm,P,!0)}function uo(d,m){return d&&d.length?Yc(d,$e(m)):n}var Ls=et(Bi);function Bi(d,m){return d&&d.length&&m&&m.length?Aa(d,m):d}function Vh(d,m,S){return d&&d.length&&m&&m.length?Aa(d,m,ze(S,2)):d}function $h(d,m,S){return d&&d.length&&m&&m.length?Aa(d,m,n,S):d}var vi=Oi(function(d,m){var S=d==null?0:d.length,A=Sa(d,m);return ka(d,zt(m,function(P){return gi(P,S)?+P:P}).sort(bh)),A});function Dg(d,m){var S=[];if(!(d&&d.length))return S;var A=-1,P=[],F=d.length;for(m=ze(m,3);++A<F;){var J=d[A];m(J,A,d)&&(S.push(J),P.push(A))}return ka(d,P),S}function zo(d){return d==null?d:Mi.call(d)}function lu(d,m,S){var A=d==null?0:d.length;return A?(S&&typeof S!="number"&&On(d,m,S)?(m=0,S=A):(m=m==null?0:$e(m),S=S===n?A:$e(S)),Tr(d,m,S)):[]}function uu(d,m){return Na(d,m)}function Oa(d,m,S){return Kc(d,m,ze(S,2))}function Pg(d,m){var S=d==null?0:d.length;if(S){var A=Na(d,m);if(A<S&&Rr(d[A],m))return A}return-1}function Lg(d,m){return Na(d,m,!0)}function cu(d,m,S){return Kc(d,m,ze(S,2),!0)}function Og(d,m){var S=d==null?0:d.length;if(S){var A=Na(d,m,!0)-1;if(Rr(d[A],m))return A}return-1}function md(d){return d&&d.length?ug(d):[]}function Ug(d,m){return d&&d.length?ug(d,ze(m,2)):[]}function I0(d){var m=d==null?0:d.length;return m?Tr(d,1,m):[]}function R0(d,m,S){return d&&d.length?(m=S||m===n?1:$e(m),Tr(d,0,m<0?0:m)):[]}function xt(d,m,S){var A=d==null?0:d.length;return A?(m=S||m===n?1:$e(m),m=A-m,Tr(d,m<0?0:m,A)):[]}function Lt(d,m){return d&&d.length?Hl(d,ze(m,3),!1,!0):[]}function lt(d,m){return d&&d.length?Hl(d,ze(m,3)):[]}var ct=et(function(d){return io(mn(d,1,an,!0))}),At=et(function(d){var m=Bt(d);return an(m)&&(m=n),io(mn(d,1,an,!0),ze(m,2))}),Ar=et(function(d){var m=Bt(d);return m=typeof m=="function"?m:n,io(mn(d,1,an,!0),n,m)});function qo(d){return d&&d.length?io(d):[]}function Ua(d,m){return d&&d.length?io(d,ze(m,2)):[]}function Gh(d,m){return m=typeof m=="function"?m:n,d&&d.length?io(d,n,m):[]}function bi(d){if(!(d&&d.length))return[];var m=0;return d=Co(d,function(S){if(an(S))return m=Qt(S.length,m),!0}),Ec(m,function(S){return zt(d,ws(S))})}function Wt(d,m){if(!(d&&d.length))return[];var S=bi(d);return m==null?S:zt(S,function(A){return gr(m,n,A)})}var Ho=et(function(d,m){return an(d)?Yr(d,m):[]}),Os=et(function(d){return Xc(Co(d,an))}),Jh=et(function(d){var m=Bt(d);return an(m)&&(m=n),Xc(Co(d,an),ze(m,2))}),kr=et(function(d){var m=Bt(d);return m=typeof m=="function"?m:n,Xc(Co(d,an),n,m)}),Ba=et(bi);function du(d,m){return mh(d||[],m||[],ci)}function tr(d,m){return mh(d||[],m||[],Ra)}var Yh=et(function(d){var m=d.length,S=m>1?d[m-1]:n;return S=typeof S=="function"?(d.pop(),S):n,Wt(d,S)});function fu(d){var m=B(d);return m.__chain__=!0,m}function Bg(d,m){return m(d),d}function Us(d,m){return m(d)}var gd=Oi(function(d){var m=d.length,S=m?d[0]:0,A=this.__wrapped__,P=function(F){return Sa(F,d)};return m>1||this.__actions__.length||!(A instanceof Qe)||!gi(S)?this.thru(P):(A=A.slice(S,+S+(m?1:0)),A.__actions__.push({func:Us,args:[P],thisArg:n}),new Wn(A,this.__chain__).thru(function(F){return m&&!F.length&&F.push(n),F}))});function Vo(){return fu(this)}function gn(){return new Wn(this.value(),this.__chain__)}function $o(){this.__values__===n&&(this.__values__=ly(this.value()));var d=this.__index__>=this.__values__.length,m=d?n:this.__values__[this.__index__++];return{done:d,value:m}}function Fa(){return this}function co(d){for(var m,S=this;S instanceof Mo;){var A=fd(S);A.__index__=0,A.__values__=n,m?P.__wrapped__=A:m=A;var P=A;S=S.__wrapped__}return P.__wrapped__=d,m}function Wh(){var d=this.__wrapped__;if(d instanceof Qe){var m=d;return this.__actions__.length&&(m=new Qe(this)),m=m.reverse(),m.__actions__.push({func:Us,args:[zo],thisArg:n}),new Wn(m,this.__chain__)}return this.thru(zo)}function Kh(){return ph(this.__wrapped__,this.__actions__)}var Fg=ed(function(d,m,S){wt.call(d,S)?++d[S]:_r(d,S,1)});function hu(d,m,S){var A=Xe(d)?Um:Lo;return S&&On(d,m,S)&&(m=n),A(d,ze(m,3))}function Xh(d,m){var S=Xe(d)?Co:qc;return S(d,ze(m,3))}var Ir=Th(zh),jg=Th(qh);function nr(d,m){return mn(pu(d,m),1)}function zg(d,m){return mn(pu(d,m),oe)}function qg(d,m,S){return S=S===n?1:$e(S),mn(pu(d,m),S)}function Hg(d,m){var S=Xe(d)?yr:Pi;return S(d,ze(m,3))}function fo(d,m){var S=Xe(d)?l0:zc;return S(d,ze(m,3))}var yd=ed(function(d,m,S){wt.call(d,S)?d[S].push(m):_r(d,S,[m])});function Qh(d,m,S,A){d=rr(d)?d:Ya(d),S=S&&!A?$e(S):0;var P=d.length;return S<0&&(S=Qt(P+S,0)),Eu(d)?S<=P&&d.indexOf(m,S)>-1:!!P&&sa(d,m,S)>-1}var ja=et(function(d,m,S){var A=-1,P=typeof m=="function",F=rr(d)?he(d.length):[];return Pi(d,function(J){F[++A]=P?gr(m,J,S):Kr(J,m,S)}),F}),Vg=ed(function(d,m,S){_r(d,S,m)});function pu(d,m){var S=Xe(d)?zt:Gc;return S(d,ze(m,3))}function $g(d,m,S,A){return d==null?[]:(Xe(m)||(m=m==null?[]:[m]),S=A?n:S,Xe(S)||(S=S==null?[]:[S]),Wc(d,m,S))}var Gg=ed(function(d,m,S){d[S?0:1].push(m)},function(){return[[],[]]});function vd(d,m,S){var A=Xe(d)?zf:Vf,P=arguments.length<3;return A(d,ze(m,4),S,P,Pi)}function Zh(d,m,S){var A=Xe(d)?Bm:Vf,P=arguments.length<3;return A(d,ze(m,4),S,P,zc)}function N0(d,m){var S=Xe(d)?Co:qc;return S(d,wd(ze(m,3)))}function M0(d){var m=Xe(d)?Ol:uh;return m(d)}function D0(d,m,S){(S?On(d,m,S):m===n)?m=1:m=$e(m);var A=Xe(d)?Fc:ch;return A(d,m)}function Jg(d){var m=Xe(d)?ng:ag;return m(d)}function Yg(d){if(d==null)return 0;if(rr(d))return Eu(d)?aa(d):d.length;var m=Nn(d);return m==nn||m==Bn?d.size:Uo(d).length}function za(d,m,S){var A=Xe(d)?qf:lg;return S&&On(d,m,S)&&(m=n),A(d,ze(m,3))}var bd=et(function(d,m){if(d==null)return[];var S=m.length;return S>1&&On(d,m[0],m[1])?m=[]:S>2&&On(m[0],m[1],m[2])&&(m=[m[0]]),Wc(d,mn(m,1),[])}),mu=Pc||function(){return pn.Date.now()};function Wg(d,m){if(typeof m!="function")throw new br(l);return d=$e(d),function(){if(--d<1)return m.apply(this,arguments)}}function ep(d,m,S){return m=S?n:m,m=d&&m==null?d.length:m,Hn(d,q,n,n,n,n,m)}function tp(d,m){var S;if(typeof m!="function")throw new br(l);return d=$e(d),function(){return--d>0&&(S=m.apply(this,arguments)),d<=1&&(m=n),S}}var xd=et(function(d,m,S){var A=N;if(S.length){var P=Ki(S,en(xd));A|=G}return Hn(d,A,m,S,P)}),np=et(function(d,m,S){var A=N|I;if(S.length){var P=Ki(S,en(np));A|=G}return Hn(m,A,d,S,P)});function gu(d,m,S){m=S?n:m;var A=Hn(d,D,n,n,n,n,n,m);return A.placeholder=gu.placeholder,A}function rp(d,m,S){m=S?n:m;var A=Hn(d,$,n,n,n,n,n,m);return A.placeholder=rp.placeholder,A}function ip(d,m,S){var A,P,F,J,X,ie,_e=0,Se=!1,Te=!1,Re=!0;if(typeof d!="function")throw new br(l);m=Mr(m)||0,Vt(S)&&(Se=!!S.leading,Te="maxWait"in S,F=Te?Qt(Mr(S.maxWait)||0,m):F,Re="trailing"in S?!!S.trailing:Re);function Oe(yn){var mo=A,zs=P;return A=P=n,_e=yn,J=d.apply(zs,mo),J}function Ge(yn){return _e=yn,X=su(ht,m),Se?Oe(yn):J}function st(yn){var mo=yn-ie,zs=yn-_e,Gw=m-mo;return Te?un(Gw,F-zs):Gw}function Je(yn){var mo=yn-ie,zs=yn-_e;return ie===n||mo>=m||mo<0||Te&&zs>=F}function ht(){var yn=mu();if(Je(yn))return mt(yn);X=su(ht,st(yn))}function mt(yn){return X=n,Re&&A?Oe(yn):(A=P=n,J)}function xi(){X!==n&&Vl(X),_e=0,A=ie=P=X=n}function Dr(){return X===n?J:mt(mu())}function wi(){var yn=mu(),mo=Je(yn);if(A=arguments,P=this,ie=yn,mo){if(X===n)return Ge(ie);if(Te)return Vl(X),X=su(ht,m),Oe(ie)}return X===n&&(X=su(ht,m)),J}return wi.cancel=xi,wi.flush=Dr,wi}var kt=et(function(d,m){return ih(d,1,m)}),op=et(function(d,m,S){return ih(d,Mr(m)||0,S)});function P0(d){return Hn(d,W)}function yu(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new br(l);var S=function(){var A=arguments,P=m?m.apply(this,A):A[0],F=S.cache;if(F.has(P))return F.get(P);var J=d.apply(this,A);return S.cache=F.set(P,J)||F,J};return S.cache=new(yu.Cache||ui),S}yu.Cache=ui;function wd(d){if(typeof d!="function")throw new br(l);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}function L0(d){return tp(2,d)}var O0=cg(function(d,m){m=m.length==1&&Xe(m[0])?zt(m[0],vr(ze())):zt(mn(m,1),vr(ze()));var S=m.length;return et(function(A){for(var P=-1,F=un(A.length,S);++P<F;)A[P]=m[P].call(this,A[P]);return gr(d,this,A)})}),qa=et(function(d,m){var S=Ki(m,en(qa));return Hn(d,G,n,m,S)}),Bs=et(function(d,m){var S=Ki(m,en(Bs));return Hn(d,j,n,m,S)}),sp=Oi(function(d,m){return Hn(d,ee,n,n,n,m)});function _d(d,m){if(typeof d!="function")throw new br(l);return m=m===n?m:$e(m),et(d,m)}function ap(d,m){if(typeof d!="function")throw new br(l);return m=m==null?0:Qt($e(m),0),et(function(S){var A=S[m],P=mi(S,0,m);return A&&Ao(P,A),gr(d,this,P)})}function Go(d,m,S){var A=!0,P=!0;if(typeof d!="function")throw new br(l);return Vt(S)&&(A="leading"in S?!!S.leading:A,P="trailing"in S?!!S.trailing:P),ip(d,m,{leading:A,maxWait:m,trailing:P})}function Fi(d){return ep(d,1)}function vu(d,m){return qa(Qc(m),d)}function U0(){if(!arguments.length)return[];var d=arguments[0];return Xe(d)?d:[d]}function Kg(d){return zn(d,T)}function Xg(d,m){return m=typeof m=="function"?m:n,zn(d,T,m)}function Qg(d){return zn(d,y|T)}function Zg(d,m){return m=typeof m=="function"?m:n,zn(d,y|T,m)}function B0(d,m){return m==null||Po(d,m,wn(m))}function Rr(d,m){return d===m||d!==d&&m!==m}var ey=Wl(Bl),ty=Wl(function(d,m){return d>=m}),Fs=Kn((function(){return arguments})())?Kn:function(d){return tn(d)&&wt.call(d,"callee")&&!Rl.call(d,"callee")},Xe=he.isArray,lp=Mm?vr(Mm):on;function rr(d){return d!=null&&Td(d.length)&&!Nr(d)}function an(d){return tn(d)&&rr(d)}function bu(d){return d===!0||d===!1||tn(d)&&Rn(d)==rt}var Jo=Qm||ce,ny=Dm?vr(Dm):Vc;function ut(d){return tn(d)&&d.nodeType===1&&!wu(d)}function up(d){if(d==null)return!0;if(rr(d)&&(Xe(d)||typeof d=="string"||typeof d.splice=="function"||Jo(d)||Yo(d)||Fs(d)))return!d.length;var m=Nn(d);if(m==nn||m==Bn)return!d.size;if(Pa(d))return!Uo(d).length;for(var S in d)if(wt.call(d,S))return!1;return!0}function Sd(d,m){return Er(d,m)}function cp(d,m,S){S=typeof S=="function"?S:n;var A=S?S(d,m):n;return A===n?Er(d,m,n,S):!!A}function Ed(d){if(!tn(d))return!1;var m=Rn(d);return m==hn||m==Xt||typeof d.message=="string"&&typeof d.name=="string"&&!wu(d)}function dp(d){return typeof d=="number"&&xr(d)}function Nr(d){if(!Vt(d))return!1;var m=Rn(d);return m==fr||m==fs||m==Ve||m==ea}function xu(d){return typeof d=="number"&&d==$e(d)}function Td(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=le}function Vt(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function tn(d){return d!=null&&typeof d=="object"}var ry=bc?vr(bc):Rt;function iy(d,m){return d===m||Zt(d,m,od(m))}function oy(d,m,S){return S=typeof S=="function"?S:n,Zt(d,m,od(m),S)}function Nt(d){return hp(d)&&d!=+d}function fp(d){if(Ph(d))throw new Ke(a);return jl(d)}function Mn(d){return d===null}function F0(d){return d==null}function hp(d){return typeof d=="number"||tn(d)&&Rn(d)==hr}function wu(d){if(!tn(d)||Rn(d)!=Br)return!1;var m=Ni(d);if(m===null)return!0;var S=wt.call(m,"constructor")&&m.constructor;return typeof S=="function"&&S instanceof S&&Rc.call(S)==Mc}var _u=Pm?vr(Pm):Ta;function pp(d){return xu(d)&&d>=-le&&d<=le}var Su=Lm?vr(Lm):Ds;function Eu(d){return typeof d=="string"||!Xe(d)&&tn(d)&&Rn(d)==hs}function ir(d){return typeof d=="symbol"||tn(d)&&Rn(d)==ta}var Yo=Om?vr(Om):$c;function mp(d){return d===n}function j0(d){return tn(d)&&Nn(d)==ps}function sy(d){return tn(d)&&Rn(d)==ve}var z0=Wl(Ht),ay=Wl(function(d,m){return d<=m});function ly(d){if(!d)return[];if(rr(d))return Eu(d)?Jt(d):qn(d);if(kn&&d[kn])return Wf(d[kn]());var m=Nn(d),S=m==nn?Cc:m==Bn?Ac:Ya;return S(d)}function ho(d){if(!d)return d===0?d:0;if(d=Mr(d),d===oe||d===-oe){var m=d<0?-1:1;return m*Ee}return d===d?d:0}function $e(d){var m=ho(d),S=m%1;return m===m?S?m-S:m:0}function gp(d){return d?di($e(d),0,V):0}function Mr(d){if(typeof d=="number")return d;if(ir(d))return H;if(Vt(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=Vt(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=_s(d);var S=n0.test(d);return S||gl.test(d)?yc(d.slice(2),S?2:8):t0.test(d)?H:+d}function Cd(d){return Xr(d,or(d))}function q0(d){return d?di($e(d),-le,le):d===0?d:0}function St(d){return d==null?"":Xn(d)}var uy=Bo(function(d,m){if(Pa(m)||rr(m)){Xr(m,wn(m),d);return}for(var S in m)wt.call(m,S)&&ci(d,S,m[S])}),Ad=Bo(function(d,m){Xr(m,or(m),d)}),Ha=Bo(function(d,m,S,A){Xr(m,or(m),d,A)}),H0=Bo(function(d,m,S,A){Xr(m,wn(m),d,A)}),Qr=Oi(Sa);function yp(d,m){var S=No(d);return m==null?S:rh(S,m)}var cy=et(function(d,m){d=Ct(d);var S=-1,A=m.length,P=A>2?m[2]:n;for(P&&On(m[0],m[1],P)&&(A=1);++S<A;)for(var F=m[S],J=or(F),X=-1,ie=J.length;++X<ie;){var _e=J[X],Se=d[_e];(Se===n||Rr(Se,ca[_e])&&!wt.call(d,_e))&&(d[_e]=F[_e])}return d}),dy=et(function(d){return d.push(n,kh),gr($a,n,d)});function fy(d,m){return Fm(d,ze(m,3),hi)}function Tu(d,m){return Fm(d,ze(m,3),Hc)}function Zr(d,m){return d==null?d:Ms(d,ze(m,3),or)}function hy(d,m){return d==null?d:Ea(d,ze(m,3),or)}function kd(d,m){return d&&hi(d,ze(m,3))}function po(d,m){return d&&Hc(d,ze(m,3))}function V0(d){return d==null?[]:ro(d,wn(d))}function $0(d){return d==null?[]:ro(d,or(d))}function Wo(d,m,S){var A=d==null?n:Li(d,m);return A===n?S:A}function py(d,m){return d!=null&&ld(d,m,Sr)}function vp(d,m){return d!=null&&ld(d,m,Wr)}var G0=Jl(function(d,m,S){m!=null&&typeof m.toString!="function"&&(m=Yn.call(m)),d[m]=S},Ka(Vn)),J0=Jl(function(d,m,S){m!=null&&typeof m.toString!="function"&&(m=Yn.call(m)),wt.call(d,m)?d[m].push(S):d[m]=[S]},ze),Y0=et(Kr);function wn(d){return rr(d)?Bc(d):Uo(d)}function or(d){return rr(d)?Bc(d,!0):w0(d)}function W0(d,m){var S={};return m=ze(m,3),hi(d,function(A,P,F){_r(S,m(A,P,F),A)}),S}function my(d,m){var S={};return m=ze(m,3),hi(d,function(A,P,F){_r(S,P,m(A,P,F))}),S}var Va=Bo(function(d,m,S){zl(d,m,S)}),$a=Bo(function(d,m,S,A){zl(d,m,S,A)}),gy=Oi(function(d,m){var S={};if(d==null)return S;var A=!1;m=zt(m,function(F){return F=Cr(F,d),A||(A=F.length>1),F}),Xr(d,Rh(d),S),A&&(S=zn(S,y|_|T,vg));for(var P=m.length;P--;)ql(S,m[P]);return S});function K0(d,m){return Ja(d,wd(ze(m)))}var Ga=Oi(function(d,m){return d==null?{}:ah(d,m)});function Ja(d,m){if(d==null)return{};var S=zt(Rh(d),function(A){return[A]});return m=ze(m),Ln(d,S,function(A,P){return m(A,P[0])})}function yy(d,m,S){m=Cr(m,d);var A=-1,P=m.length;for(P||(P=1,d=n);++A<P;){var F=d==null?n:d[Qn(m[A])];F===n&&(A=P,F=S),d=Nr(F)?F.call(d):F}return d}function Id(d,m,S){return d==null?d:Ra(d,m,S)}function bp(d,m,S,A){return A=typeof A=="function"?A:n,d==null?d:Ra(d,m,S,A)}var Rd=Ch(wn),Cu=Ch(or);function vy(d,m,S){var A=Xe(d),P=A||Jo(d)||Yo(d);if(m=ze(m,4),S==null){var F=d&&d.constructor;P?S=A?new F:[]:Vt(d)?S=Nr(F)?No(Ni(d)):{}:S={}}return(P?yr:hi)(d,function(J,X,ie){return m(S,J,X,ie)}),S}function by(d,m){return d==null?!0:ql(d,m)}function X0(d,m,S){return d==null?d:hh(d,m,Qc(S))}function xy(d,m,S,A){return A=typeof A=="function"?A:n,d==null?d:hh(d,m,Qc(S),A)}function Ya(d){return d==null?[]:$f(d,wn(d))}function xp(d){return d==null?[]:$f(d,or(d))}function Q0(d,m,S){return S===n&&(S=m,m=n),S!==n&&(S=Mr(S),S=S===S?S:0),m!==n&&(m=Mr(m),m=m===m?m:0),di(Mr(d),m,S)}function Nd(d,m,S){return m=ho(m),S===n?(S=m,m=0):S=ho(S),d=Mr(d),Oo(d,m,S)}function Md(d,m,S){if(S&&typeof S!="boolean"&&On(d,m,S)&&(m=S=n),S===n&&(typeof m=="boolean"?(S=m,m=n):typeof d=="boolean"&&(S=d,d=n)),d===n&&m===n?(d=0,m=1):(d=ho(d),m===n?(m=d,d=0):m=ho(m)),d>m){var A=d;d=m,m=A}if(S||d%1||m%1){var P=Zi();return un(d+P*(m-d+xs("1e-"+((P+"").length-1))),m)}return Ia(d,m)}var Dd=Ps(function(d,m,S){return m=m.toLowerCase(),d+(S?wy(m):m)});function wy(d){return js(St(d).toLowerCase())}function Wa(d){return d=St(d),d&&d.replace(ra,kl).replace(Rm,"")}function Z0(d,m,S){d=St(d),m=Xn(m);var A=d.length;S=S===n?A:di($e(S),0,A);var P=S;return S-=m.length,S>=0&&d.slice(S,P)==m}function _y(d){return d=St(d),d&&rc.test(d)?d.replace(hl,h0):d}function Sy(d){return d=St(d),d&&gm.test(d)?d.replace(ic,"\\$&"):d}var Ey=Ps(function(d,m,S){return d+(S?"-":"")+m.toLowerCase()}),Ty=Ps(function(d,m,S){return d+(S?" ":"")+m.toLowerCase()}),wp=Eh("toLowerCase");function Cy(d,m,S){d=St(d),m=$e(m);var A=m?aa(d):0;if(!m||A>=m)return d;var P=(m-A)/2;return Fo(Nl(P),S)+d+Fo(ha(P),S)}function Ay(d,m,S){d=St(d),m=$e(m);var A=m?aa(d):0;return m&&A<m?d+Fo(m-A,S):d}function Pd(d,m,S){d=St(d),m=$e(m);var A=m?aa(d):0;return m&&A<m?Fo(m-A,S)+d:d}function eb(d,m,S){return S||m==null?m=0:m&&(m=+m),Hr(St(d).replace(oc,""),m||0)}function tb(d,m,S){return(S?On(d,m,S):m===n)?m=1:m=$e(m),pi(St(d),m)}function _p(){var d=arguments,m=St(d[0]);return d.length<3?m:m.replace(d[1],d[2])}var Sp=Ps(function(d,m,S){return d+(S?"_":"")+m.toLowerCase()});function Ld(d,m,S){return S&&typeof S!="number"&&On(d,m,S)&&(m=S=n),S=S===n?V:S>>>0,S?(d=St(d),d&&(typeof m=="string"||m!=null&&!_u(m))&&(m=Xn(m),!m&&Ss(d))?mi(Jt(d),0,S):d.split(m,S)):[]}var Ep=Ps(function(d,m,S){return d+(S?" ":"")+js(m)});function ky(d,m,S){return d=St(d),S=S==null?0:di($e(S),0,d.length),m=Xn(m),d.slice(S,S+m.length)==m}function Tp(d,m,S){var A=B.templateSettings;S&&On(d,m,S)&&(m=n),d=St(d),m=Ha({},m,A,Ah);var P=Ha({},m.imports,A.imports,Ah),F=wn(P),J=$f(P,F),X,ie,_e=0,Se=m.interpolate||Gi,Te="__p += '",Re=kc((m.escape||Gi).source+"|"+Se.source+"|"+(Se===If?na:Gi).source+"|"+(m.evaluate||Gi).source+"|$","g"),Oe="//# sourceURL="+(wt.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jf+"]")+`
`;d.replace(Re,function(Je,ht,mt,xi,Dr,wi){return mt||(mt=xi),Te+=d.slice(_e,wi).replace(yl,Tc),ht&&(X=!0,Te+=`' +
__e(`+ht+`) +
'`),Dr&&(ie=!0,Te+=`';
`+Dr+`;
__p += '`),mt&&(Te+=`' +
((__t = (`+mt+`)) == null ? '' : __t) +
'`),_e=wi+Je.length,Je}),Te+=`';
`;var Ge=wt.call(m,"variable")&&m.variable;if(!Ge)Te=`with (obj) {
`+Te+`
}
`;else if(An.test(Ge))throw new Ke(c);Te=(ie?Te.replace(oi,""):Te).replace(Qv,"$1").replace(nc,"$1;"),Te="function("+(Ge||"obj")+`) {
`+(Ge?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Te+`return __p
}`;var st=Cp(function(){return at(F,Oe+"return "+Te).apply(n,J)});if(st.source=Te,Ed(st))throw st;return st}function Ko(d){return St(d).toLowerCase()}function Xo(d){return St(d).toUpperCase()}function Qo(d,m,S){if(d=St(d),d&&(S||m===n))return _s(d);if(!d||!(m=Xn(m)))return d;var A=Jt(d),P=Jt(m),F=Gf(A,P),J=Jf(A,P)+1;return mi(A,F,J).join("")}function Au(d,m,S){if(d=St(d),d&&(S||m===n))return d.slice(0,la(d)+1);if(!d||!(m=Xn(m)))return d;var A=Jt(d),P=Jf(A,Jt(m))+1;return mi(A,0,P).join("")}function ku(d,m,S){if(d=St(d),d&&(S||m===n))return d.replace(oc,"");if(!d||!(m=Xn(m)))return d;var A=Jt(d),P=Gf(A,Jt(m));return mi(A,P).join("")}function Zo(d,m){var S=z,A=te;if(Vt(m)){var P="separator"in m?m.separator:P;S="length"in m?$e(m.length):S,A="omission"in m?Xn(m.omission):A}d=St(d);var F=d.length;if(Ss(d)){var J=Jt(d);F=J.length}if(S>=F)return d;var X=S-aa(A);if(X<1)return A;var ie=J?mi(J,0,X).join(""):d.slice(0,X);if(P===n)return ie+A;if(J&&(X+=ie.length-X),_u(P)){if(d.slice(X).search(P)){var _e,Se=ie;for(P.global||(P=kc(P.source,St(sc.exec(P))+"g")),P.lastIndex=0;_e=P.exec(Se);)var Te=_e.index;ie=ie.slice(0,Te===n?X:Te)}}else if(d.indexOf(Xn(P),X)!=X){var Re=ie.lastIndexOf(P);Re>-1&&(ie=ie.slice(0,Re))}return ie+A}function nb(d){return d=St(d),d&&ms.test(d)?d.replace(fl,Vm):d}var Iy=Ps(function(d,m,S){return d+(S?" ":"")+m.toUpperCase()}),js=Eh("toUpperCase");function Ry(d,m,S){return d=St(d),m=S?n:m,m===n?Yf(d)?Jm(d):d0(d):d.match(m)||[]}var Cp=et(function(d,m){try{return gr(d,n,m)}catch(S){return Ed(S)?S:new Ke(S)}}),Od=Oi(function(d,m){return yr(m,function(S){S=Qn(S),_r(d,S,xd(d[S],d))}),d});function Ny(d){var m=d==null?0:d.length,S=ze();return d=m?zt(d,function(A){if(typeof A[1]!="function")throw new br(l);return[S(A[0]),A[1]]}):[],et(function(A){for(var P=-1;++P<m;){var F=d[P];if(gr(F[0],this,A))return gr(F[1],this,A)}})}function rb(d){return ig(zn(d,y))}function Ka(d){return function(){return d}}function Ud(d,m){return d==null||d!==d?m:d}var My=Ma(),Xa=Ma(!0);function Vn(d){return d}function Iu(d){return Ca(typeof d=="function"?d:zn(d,y))}function Bd(d){return Jc(zn(d,y))}function Dy(d,m){return sh(d,zn(m,y))}var ib=et(function(d,m){return function(S){return Kr(S,d,m)}}),Fd=et(function(d,m){return function(S){return Kr(d,S,m)}});function i(d,m,S){var A=wn(m),P=ro(m,A);S==null&&!(Vt(m)&&(P.length||!A.length))&&(S=m,m=d,d=this,P=ro(m,wn(m)));var F=!(Vt(S)&&"chain"in S)||!!S.chain,J=Nr(d);return yr(P,function(X){var ie=m[X];d[X]=ie,J&&(d.prototype[X]=function(){var _e=this.__chain__;if(F||_e){var Se=d(this.__wrapped__),Te=Se.__actions__=qn(this.__actions__);return Te.push({func:ie,args:arguments,thisArg:d}),Se.__chain__=_e,Se}return ie.apply(d,Ao([this.value()],arguments))})}),d}function s(){return pn._===this&&(pn._=jr),this}function u(){}function p(d){return d=$e(d),et(function(m){return Yc(m,d)})}var w=td(zt),E=td(Um),R=td(qf);function O(d){return nu(d)?ws(Qn(d)):sn(d)}function Y(d){return function(m){return d==null?n:Li(d,m)}}var ae=nd(),ye=nd(!0);function we(){return[]}function ce(){return!1}function pe(){return{}}function Me(){return""}function qe(){return!0}function Mt(d,m){if(d=$e(d),d<1||d>le)return[];var S=V,A=un(d,V);m=ze(m),d-=V;for(var P=Ec(A,m);++S<d;)m(S);return P}function ne(d){return Xe(d)?zt(d,Qn):ir(d)?[d]:qn(Uh(St(d)))}function Q(d){var m=++Wm;return St(d)+m}var se=Yl(function(d,m){return d+m},0),be=Kl("ceil"),Be=Yl(function(d,m){return d/m},1),yt=Kl("floor");function Pe(d){return d&&d.length?fi(d,Vn,Bl):n}function nt(d,m){return d&&d.length?fi(d,ze(m,2),Bl):n}function dt(d){return _c(d,Vn)}function vt(d,m){return _c(d,ze(m,2))}function es(d){return d&&d.length?fi(d,Vn,Ht):n}function ob(d,m){return d&&d.length?fi(d,ze(m,2),Ht):n}var Gk=Yl(function(d,m){return d*m},1),Jk=Kl("round"),Yk=Yl(function(d,m){return d-m},0);function Wk(d){return d&&d.length?Sc(d,Vn):0}function Kk(d,m){return d&&d.length?Sc(d,ze(m,2)):0}return B.after=Wg,B.ary=ep,B.assign=uy,B.assignIn=Ad,B.assignInWith=Ha,B.assignWith=H0,B.at=Qr,B.before=tp,B.bind=xd,B.bindAll=Od,B.bindKey=np,B.castArray=U0,B.chain=fu,B.chunk=Cg,B.compact=Bh,B.concat=Fh,B.cond=Ny,B.conforms=rb,B.constant=Ka,B.countBy=Fg,B.create=yp,B.curry=gu,B.curryRight=rp,B.debounce=ip,B.defaults=cy,B.defaultsDeep=dy,B.defer=kt,B.delay=op,B.difference=hd,B.differenceBy=Ag,B.differenceWith=ao,B.drop=fn,B.dropRight=jh,B.dropRightWhile=kg,B.dropWhile=xn,B.fill=A0,B.filter=Xh,B.flatMap=nr,B.flatMapDeep=zg,B.flatMapDepth=qg,B.flatten=Ut,B.flattenDeep=Zn,B.flattenDepth=lo,B.flip=P0,B.flow=My,B.flowRight=Xa,B.fromPairs=Ig,B.functions=V0,B.functionsIn=$0,B.groupBy=yd,B.initial=k0,B.intersection=pd,B.intersectionBy=er,B.intersectionWith=yi,B.invert=G0,B.invertBy=J0,B.invokeMap=ja,B.iteratee=Iu,B.keyBy=Vg,B.keys=wn,B.keysIn=or,B.map=pu,B.mapKeys=W0,B.mapValues=my,B.matches=Bd,B.matchesProperty=Dy,B.memoize=yu,B.merge=Va,B.mergeWith=$a,B.method=ib,B.methodOf=Fd,B.mixin=i,B.negate=wd,B.nthArg=p,B.omit=gy,B.omitBy=K0,B.once=L0,B.orderBy=$g,B.over=w,B.overArgs=O0,B.overEvery=E,B.overSome=R,B.partial=qa,B.partialRight=Bs,B.partition=Gg,B.pick=Ga,B.pickBy=Ja,B.property=O,B.propertyOf=Y,B.pull=Ls,B.pullAll=Bi,B.pullAllBy=Vh,B.pullAllWith=$h,B.pullAt=vi,B.range=ae,B.rangeRight=ye,B.rearg=sp,B.reject=N0,B.remove=Dg,B.rest=_d,B.reverse=zo,B.sampleSize=D0,B.set=Id,B.setWith=bp,B.shuffle=Jg,B.slice=lu,B.sortBy=bd,B.sortedUniq=md,B.sortedUniqBy=Ug,B.split=Ld,B.spread=ap,B.tail=I0,B.take=R0,B.takeRight=xt,B.takeRightWhile=Lt,B.takeWhile=lt,B.tap=Bg,B.throttle=Go,B.thru=Us,B.toArray=ly,B.toPairs=Rd,B.toPairsIn=Cu,B.toPath=ne,B.toPlainObject=Cd,B.transform=vy,B.unary=Fi,B.union=ct,B.unionBy=At,B.unionWith=Ar,B.uniq=qo,B.uniqBy=Ua,B.uniqWith=Gh,B.unset=by,B.unzip=bi,B.unzipWith=Wt,B.update=X0,B.updateWith=xy,B.values=Ya,B.valuesIn=xp,B.without=Ho,B.words=Ry,B.wrap=vu,B.xor=Os,B.xorBy=Jh,B.xorWith=kr,B.zip=Ba,B.zipObject=du,B.zipObjectDeep=tr,B.zipWith=Yh,B.entries=Rd,B.entriesIn=Cu,B.extend=Ad,B.extendWith=Ha,i(B,B),B.add=se,B.attempt=Cp,B.camelCase=Dd,B.capitalize=wy,B.ceil=be,B.clamp=Q0,B.clone=Kg,B.cloneDeep=Qg,B.cloneDeepWith=Zg,B.cloneWith=Xg,B.conformsTo=B0,B.deburr=Wa,B.defaultTo=Ud,B.divide=Be,B.endsWith=Z0,B.eq=Rr,B.escape=_y,B.escapeRegExp=Sy,B.every=hu,B.find=Ir,B.findIndex=zh,B.findKey=fy,B.findLast=jg,B.findLastIndex=qh,B.findLastKey=Tu,B.floor=yt,B.forEach=Hg,B.forEachRight=fo,B.forIn=Zr,B.forInRight=hy,B.forOwn=kd,B.forOwnRight=po,B.get=Wo,B.gt=ey,B.gte=ty,B.has=py,B.hasIn=vp,B.head=Hh,B.identity=Vn,B.includes=Qh,B.indexOf=Rg,B.inRange=Nd,B.invoke=Y0,B.isArguments=Fs,B.isArray=Xe,B.isArrayBuffer=lp,B.isArrayLike=rr,B.isArrayLikeObject=an,B.isBoolean=bu,B.isBuffer=Jo,B.isDate=ny,B.isElement=ut,B.isEmpty=up,B.isEqual=Sd,B.isEqualWith=cp,B.isError=Ed,B.isFinite=dp,B.isFunction=Nr,B.isInteger=xu,B.isLength=Td,B.isMap=ry,B.isMatch=iy,B.isMatchWith=oy,B.isNaN=Nt,B.isNative=fp,B.isNil=F0,B.isNull=Mn,B.isNumber=hp,B.isObject=Vt,B.isObjectLike=tn,B.isPlainObject=wu,B.isRegExp=_u,B.isSafeInteger=pp,B.isSet=Su,B.isString=Eu,B.isSymbol=ir,B.isTypedArray=Yo,B.isUndefined=mp,B.isWeakMap=j0,B.isWeakSet=sy,B.join=Ng,B.kebabCase=Ey,B.last=Bt,B.lastIndexOf=Mg,B.lowerCase=Ty,B.lowerFirst=wp,B.lt=z0,B.lte=ay,B.max=Pe,B.maxBy=nt,B.mean=dt,B.meanBy=vt,B.min=es,B.minBy=ob,B.stubArray=we,B.stubFalse=ce,B.stubObject=pe,B.stubString=Me,B.stubTrue=qe,B.multiply=Gk,B.nth=uo,B.noConflict=s,B.noop=u,B.now=mu,B.pad=Cy,B.padEnd=Ay,B.padStart=Pd,B.parseInt=eb,B.random=Md,B.reduce=vd,B.reduceRight=Zh,B.repeat=tb,B.replace=_p,B.result=yy,B.round=Jk,B.runInContext=Z,B.sample=M0,B.size=Yg,B.snakeCase=Sp,B.some=za,B.sortedIndex=uu,B.sortedIndexBy=Oa,B.sortedIndexOf=Pg,B.sortedLastIndex=Lg,B.sortedLastIndexBy=cu,B.sortedLastIndexOf=Og,B.startCase=Ep,B.startsWith=ky,B.subtract=Yk,B.sum=Wk,B.sumBy=Kk,B.template=Tp,B.times=Mt,B.toFinite=ho,B.toInteger=$e,B.toLength=gp,B.toLower=Ko,B.toNumber=Mr,B.toSafeInteger=q0,B.toString=St,B.toUpper=Xo,B.trim=Qo,B.trimEnd=Au,B.trimStart=ku,B.truncate=Zo,B.unescape=nb,B.uniqueId=Q,B.upperCase=Iy,B.upperFirst=js,B.each=Hg,B.eachRight=fo,B.first=Hh,i(B,(function(){var d={};return hi(B,function(m,S){wt.call(B.prototype,S)||(d[S]=m)}),d})(),{chain:!1}),B.VERSION=r,yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){B[d].placeholder=B}),yr(["drop","take"],function(d,m){Qe.prototype[d]=function(S){S=S===n?1:Qt($e(S),0);var A=this.__filtered__&&!m?new Qe(this):this.clone();return A.__filtered__?A.__takeCount__=un(S,A.__takeCount__):A.__views__.push({size:un(S,V),type:d+(A.__dir__<0?"Right":"")}),A},Qe.prototype[d+"Right"]=function(S){return this.reverse()[d](S).reverse()}}),yr(["filter","map","takeWhile"],function(d,m){var S=m+1,A=S==ue||S==K;Qe.prototype[d]=function(P){var F=this.clone();return F.__iteratees__.push({iteratee:ze(P,3),type:S}),F.__filtered__=F.__filtered__||A,F}}),yr(["head","last"],function(d,m){var S="take"+(m?"Right":"");Qe.prototype[d]=function(){return this[S](1).value()[0]}}),yr(["initial","tail"],function(d,m){var S="drop"+(m?"":"Right");Qe.prototype[d]=function(){return this.__filtered__?new Qe(this):this[S](1)}}),Qe.prototype.compact=function(){return this.filter(Vn)},Qe.prototype.find=function(d){return this.filter(d).head()},Qe.prototype.findLast=function(d){return this.reverse().find(d)},Qe.prototype.invokeMap=et(function(d,m){return typeof d=="function"?new Qe(this):this.map(function(S){return Kr(S,d,m)})}),Qe.prototype.reject=function(d){return this.filter(wd(ze(d)))},Qe.prototype.slice=function(d,m){d=$e(d);var S=this;return S.__filtered__&&(d>0||m<0)?new Qe(S):(d<0?S=S.takeRight(-d):d&&(S=S.drop(d)),m!==n&&(m=$e(m),S=m<0?S.dropRight(-m):S.take(m-d)),S)},Qe.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Qe.prototype.toArray=function(){return this.take(V)},hi(Qe.prototype,function(d,m){var S=/^(?:filter|find|map|reject)|While$/.test(m),A=/^(?:head|last)$/.test(m),P=B[A?"take"+(m=="last"?"Right":""):m],F=A||/^find/.test(m);P&&(B.prototype[m]=function(){var J=this.__wrapped__,X=A?[1]:arguments,ie=J instanceof Qe,_e=X[0],Se=ie||Xe(J),Te=function(ht){var mt=P.apply(B,Ao([ht],X));return A&&Re?mt[0]:mt};Se&&S&&typeof _e=="function"&&_e.length!=1&&(ie=Se=!1);var Re=this.__chain__,Oe=!!this.__actions__.length,Ge=F&&!Re,st=ie&&!Oe;if(!F&&Se){J=st?J:new Qe(this);var Je=d.apply(J,X);return Je.__actions__.push({func:Us,args:[Te],thisArg:n}),new Wn(Je,Re)}return Ge&&st?d.apply(this,X):(Je=this.thru(Te),Ge?A?Je.value()[0]:Je.value():Je)})}),yr(["pop","push","shift","sort","splice","unshift"],function(d){var m=Il[d],S=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",A=/^(?:pop|shift)$/.test(d);B.prototype[d]=function(){var P=arguments;if(A&&!this.__chain__){var F=this.value();return m.apply(Xe(F)?F:[],P)}return this[S](function(J){return m.apply(Xe(J)?J:[],P)})}}),hi(Qe.prototype,function(d,m){var S=B[m];if(S){var A=S.name+"";wt.call(_t,A)||(_t[A]=[]),_t[A].push({name:m,func:S})}}),_t[Da(n,I).name]=[{name:"wrapper",func:n}],Qe.prototype.clone=eo,Qe.prototype.reverse=Do,Qe.prototype.value=to,B.prototype.at=gd,B.prototype.chain=Vo,B.prototype.commit=gn,B.prototype.next=$o,B.prototype.plant=co,B.prototype.reverse=Wh,B.prototype.toJSON=B.prototype.valueOf=B.prototype.value=Kh,B.prototype.first=B.prototype.head,kn&&(B.prototype[kn]=Fa),B}),ua=Xf();ai?((ai.exports=ua)._=ua,Sl._=ua):pn._=ua}).call(JO)})(Op,Op.exports)),Op.exports}var WO=YO();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const Gd=new Map,mC=(()=>{const t=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async e=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),e!=null&&e.id&&Gd.has(e.id)){const o=Gd.get(e.id);if(o)return o}const r=new AudioContext(e);return e!=null&&e.id&&Gd.set(e.id,r),r}catch{if(await t,e!=null&&e.id&&Gd.has(e.id)){const o=Gd.get(e.id);if(o)return o}const r=new AudioContext(e);return e!=null&&e.id&&Gd.set(e.id,r),r}}})();function KO(t){var e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/class XO{constructor(e,n){this.model=dC,this.emitter=new pC,this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter),this._status="disconnected",n&&(this.model=n),this.client=new cC({apiKey:e})}get status(){return this._status}async connect(e){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting";const n={onopen:this.onOpen.bind(this),onmessage:this.onMessage.bind(this),onerror:this.onError.bind(this),onclose:this.onClose.bind(this)};try{this.session=await this.client.live.connect({model:this.model,config:{...e},callbacks:n})}catch(r){console.error("Error connecting to GenAI Live:",r),this._status="disconnected",this.session=void 0;const o=new ErrorEvent("error",{error:r,message:(r==null?void 0:r.message)||"Failed to connect."});return this.onError(o),!1}return this._status="connected",!0}disconnect(){var e;return(e=this.session)==null||e.close(),this.session=void 0,this._status="disconnected",this.log("client.close","Disconnected"),!0}send(e,n=!0){if(this._status!=="connected"||!this.session){this.emitter.emit("error",new ErrorEvent("Client is not connected"));return}this.session.sendClientContent({turns:e,turnComplete:n}),this.log("client.send",e)}sendRealtimeText(e){if(this._status!=="connected"||!this.session){this.emitter.emit("error",new ErrorEvent("Client is not connected")),console.error(`sendRealtimeText: Client is not connected, for message: ${e}`);return}this.session.sendRealtimeInput({text:e}),this.log("client.send",e)}sendRealtimeInput(e){if(this._status!=="connected"||!this.session){this.emitter.emit("error",new ErrorEvent("Client is not connected"));return}e.forEach(a=>{this.session.sendRealtimeInput({media:a})});let n=!1,r=!1;for(let a=0;a<e.length;a++){const l=e[a];if(l.mimeType.includes("audio")&&(n=!0),l.mimeType.includes("image")&&(r=!0),n&&r)break}let o="unknown";n&&r?o="audio + video":n?o="audio":r&&(o="video"),this.log("client.realtimeInput",o)}sendToolResponse(e){if(this._status!=="connected"||!this.session){this.emitter.emit("error",new ErrorEvent("Client is not connected"));return}e.functionResponses&&e.functionResponses.length&&this.session.sendToolResponse({functionResponses:e.functionResponses}),this.log("client.toolResponse",{toolResponse:e})}onMessage(e){if(e.setupComplete){this.emitter.emit("setupcomplete");return}if(e.toolCall){this.log("server.toolCall",e),this.emitter.emit("toolcall",e.toolCall);return}if(e.toolCallCancellation){this.log("receive.toolCallCancellation",e),this.emitter.emit("toolcallcancellation",e.toolCallCancellation);return}if(e.serverContent){const{serverContent:n}=e;if(n.interrupted){this.log("receive.serverContent","interrupted"),this.emitter.emit("interrupted");return}if(n.inputTranscription&&(this.emitter.emit("inputTranscription",n.inputTranscription.text,n.inputTranscription.isFinal??!1),this.log("server.inputTranscription",n.inputTranscription.text)),n.outputTranscription&&(this.emitter.emit("outputTranscription",n.outputTranscription.text,n.outputTranscription.isFinal??!1),this.log("server.outputTranscription",n.outputTranscription.text)),n.modelTurn){let r=n.modelTurn.parts||[];const o=r.filter(c=>{var h,f;return(f=(h=c.inlineData)==null?void 0:h.mimeType)==null?void 0:f.startsWith("audio/pcm")}),a=o.map(c=>{var h;return(h=c.inlineData)==null?void 0:h.data}),l=WO.difference(r,o);if(a.forEach(c=>{if(c){const h=KO(c);this.emitter.emit("audio",h),this.log("server.audio",`buffer (${h.byteLength})`)}}),l.length>0){const c={modelTurn:{parts:l}};this.emitter.emit("content",c),this.log("server.content",e)}}n.turnComplete&&(this.log("server.send","turnComplete"),this.emitter.emit("turncomplete")),n.generationComplete&&(this.log("server.send","generationComplete"),this.emitter.emit("generationcomplete"))}}onError(e){this._status="disconnected",console.error("error:",e);const n=`Could not connect to GenAI Live: ${e.message}`;this.log(`server.${e.type}`,n),this.emitter.emit("error",e)}onOpen(){this._status="connected",this.emitter.emit("open")}onClose(e){this._status="disconnected";let n=e.reason||"";if(n.toLowerCase().includes("error")){const r="ERROR]",o=n.indexOf(r);o>0&&(n=n.slice(o+r.length+1,1/0))}this.log(`server.${e.type}`,`disconnected ${n?`with reason: ${n}`:""}`),this.emitter.emit("close",e)}log(e,n){this.emitter.emit("log",{type:e,message:n,date:new Date})}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const Vy=new Map,Ax=(t,e)=>{const n=new Blob([`registerProcessor("${t}", ${e})`],{type:"application/javascript"});return URL.createObjectURL(n)};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/class QO{constructor(e){this.context=e,this.sampleRate=24e3,this.bufferSize=7680,this.audioQueue=[],this.isPlaying=!1,this.isStreamComplete=!1,this.checkInterval=null,this.scheduledTime=0,this.initialBufferTime=.1,this.endOfQueueAudioSource=null,this.onComplete=()=>{},this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(e,n,r){let o=Vy.get(this.context);if(o&&o[e])return o[e].handlers.push(r),Promise.resolve(this);o||(Vy.set(this.context,{}),o=Vy.get(this.context)),o[e]={handlers:[r]};const a=Ax(e,n);await this.context.audioWorklet.addModule(a);const l=new AudioWorkletNode(this.context,e);return o[e].node=l,this}_processPCM16Chunk(e){const n=new Float32Array(e.length/2),r=new DataView(e.buffer);for(let o=0;o<e.length/2;o++)try{const a=r.getInt16(o*2,!0);n[o]=a/32768}catch(a){console.error(a)}return n}addPCM16(e){this.isStreamComplete=!1;let n=this._processPCM16Chunk(e);for(;n.length>=this.bufferSize;){const r=n.slice(0,this.bufferSize);this.audioQueue.push(r),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const n=this.context.createBuffer(1,e.length,this.sampleRate);return n.getChannelData(0).set(e),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),r=this.createAudioBuffer(n),o=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=o,o.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===o&&(this.endOfQueueAudioSource=null,this.onComplete())}),o.buffer=r,o.connect(this.gainNode);const a=Vy.get(this.context);a&&Object.entries(a).forEach(([c,h])=>{const{node:f,handlers:g}=h;f&&(o.connect(f),f.port.onmessage=function(y){g.forEach(_=>{_.call(f.port,y)})},f.connect(this.context.destination))});const l=Math.max(this.scheduledTime,this.context.currentTime);o.start(l),this.scheduledTime=l+r.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const gC=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`;/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*//**
* @license
* SPDX-License-Identifier: Apache-2.0
*/const ZO="AIzaSyCCbXfjrXEP24S_91o2B1ktZUGo4kE4LeI",e5="You are a helpful assistant that provides concise answers based on the user's query. Provide details for the top 3 results, unless the user requests less. Provide the name and a concise one line description that highlights a unique, interesting, or fun aspect about the place. Do not state addresses. ";async function t5({prompt:t,enableWidget:e=!0,lat:n,lng:r,systemInstruction:o}){const a="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent",l={contents:[{parts:[{text:t}]}],system_instruction:{parts:[{text:o||e5}]},tools:[{google_maps:{enable_widget:e}}],generationConfig:{thinkingConfig:{thinkingBudget:0}}};n!==void 0&&r!==void 0&&(l.toolConfig={retrievalConfig:{latLng:{latitude:n,longitude:r}}});try{const c=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":ZO},body:JSON.stringify(l)});if(!c.ok){const f=await c.text();throw console.error("Error from Generative Language API:",f),new Error(`API request failed with status ${c.status}: ${f}`)}return await c.json()}catch(c){throw console.error(`Error calling Maps grounding REST API: ${c}`),c}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*//**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const n5={"dubai hills estate":{lat:25.1118,lng:55.2575},"palm jumeirah":{lat:25.1189,lng:55.1383},"downtown dubai":{lat:25.1972,lng:55.2744},"dubai marina":{lat:25.0784,lng:55.1384},"arabian ranches":{lat:25.0683,lng:55.2515}},r5={"dubai hills estate":[{name:"Maple at Dubai Hills",type:"Villas",position:{lat:25.105,lng:55.26}},{name:"Park Heights",type:"Apartments",position:{lat:25.115,lng:55.255}},{name:"Golfville",type:"Off-plan",position:{lat:25.11,lng:55.259}}],"downtown dubai":[{name:"Burj Khalifa Residences",type:"Apartments",position:{lat:25.1972,lng:55.2744}},{name:"The Address Downtown",type:"Apartments",position:{lat:25.1945,lng:55.2787}},{name:"Grande Opera District",type:"Off-plan",position:{lat:25.193,lng:55.276}}],"palm jumeirah":[{name:"The Palm Tower",type:"Apartments",position:{lat:25.1118,lng:55.1495}},{name:"XXII Carat",type:"Villas",position:{lat:25.1025,lng:55.1275}}],"dubai marina":[{name:"Marina Gate",type:"Apartments",position:{lat:25.087,lng:55.147}},{name:"Address Beach Resort",type:"Apartments",position:{lat:25.078,lng:55.133}}]};async function i5(t,e,n,r="mentioned"){if(r==="none"||!(t!=null&&t.length))return[];let o=t.filter(h=>{var f;return(f=h.maps)==null?void 0:f.placeId});if(r==="mentioned"&&n&&(o=o.filter(h=>{var f;return((f=h.maps)==null?void 0:f.title)&&n.includes(h.maps.title)})),!o.length)return[];const a=o.map(h=>{const f=h.maps.placeId.replace("places/","");return new e.Place({id:f}).fetchFields({fields:["location","displayName"]})});return(await Promise.allSettled(a)).map((h,f)=>{var T;if(h.status!=="fulfilled"||!h.value.place.location)return null;const{place:g}=h.value,y=o[f];let _=!0;return r==="all"&&(_=!!(n&&((T=y.maps)!=null&&T.title)&&n.includes(y.maps.title))),{position:{lat:g.location.lat(),lng:g.location.lng(),altitude:1},label:g.displayName??"",showLabel:_}}).filter(h=>h!==null)}function o5(t,e){if(e.some(r=>{var o;return(o=r.maps)==null?void 0:o.placeAnswerSources})&&t.length===1){const{setPreventAutoFrame:r,setMarkers:o,setCameraTarget:a}=os.getState();r(!0),o(t),a({center:{...t[0].position,altitude:200},range:500,tilt:60,heading:0,roll:0})}else{const{setPreventAutoFrame:r,setMarkers:o}=os.getState();r(!1),o(t)}}const s5=async(t,e)=>{var y,_,T;const{setHeldGroundedResponse:n,setHeldGroundingChunks:r,placesLib:o}=e,{query:a,markerBehavior:l="mentioned",systemInstruction:c,enableWidget:h}=t,f=await t5({prompt:a,systemInstruction:c,enableWidget:h});if(!f)return"Failed to get a response from maps grounding.";n(f);const g=(T=(_=(y=f==null?void 0:f.candidates)==null?void 0:y[0])==null?void 0:_.groundingMetadata)==null?void 0:T.groundingChunks;if(g&&g.length>0)r(g);else return os.getState().setMarkers([]),f;return o&&l!=="none"?(async()=>{var C,k,N,I,L;try{const D=(L=(I=(N=(k=(C=f==null?void 0:f.candidates)==null?void 0:C[0])==null?void 0:k.content)==null?void 0:N.parts)==null?void 0:I[0])==null?void 0:L.text,$=await i5(g,o,D,l);o5($,g)}catch(D){console.error("Error processing place details and updating map:",D)}})():l==="none"&&os.getState().setMarkers([]),f},a5=async(t,e)=>{const{communityName:n}=t;if(typeof n!="string")return"Invalid community name provided.";const r=n.toLowerCase(),o=n5[r];if(!o){const a=`Sorry, I couldn't find the community "${n}". Please try another, like "Dubai Hills Estate" or "Downtown Dubai".`;return vn.getState().addTurn({role:"system",text:a,isFinal:!0}),a}return os.getState().clearMarkers(),os.getState().setCameraTarget({center:{...o,altitude:2e3},range:1e4,tilt:30,heading:0,roll:0}),`Located ${n} on the map.`},l5=async(t,e)=>{const{communityName:n,projectType:r}=t;if(typeof n!="string"||typeof r!="string")return"Invalid community name or project type provided.";const o=n.toLowerCase(),a=r5[o];if(!a)return`I don't have project data for "${n}" right now.`;const l=a.filter(g=>g.type.toLowerCase().includes(r.toLowerCase()));if(l.length===0)return`I couldn't find any "${r}" projects in ${n}. You could try another type.`;const c=l.map(g=>({position:{...g.position,altitude:1},label:g.name,showLabel:!0})),{setMarkers:h,setPreventAutoFrame:f}=os.getState();return f(!1),h(c),`Found and marked ${l.length} ${r} projects in ${n}.`},u5={mapsGrounding:s5,locateCommunity:a5,findProjects:l5};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*//**
* @license
* SPDX-License-Identifier: Apache-2.0
*/function c5({apiKey:t,map:e,placesLib:n,elevationLib:r,geocoder:o,padding:a}){const{model:l}=Qp(),c=M.useMemo(()=>new XO(t,l),[t,l]),h=M.useRef(null),[f,g]=M.useState(0),[y,_]=M.useState(!1),[T,C]=M.useState(!1),[k,N]=M.useState({}),[I,L]=M.useState(void 0),[D,$]=M.useState(void 0),G=M.useCallback(()=>{L(void 0)},[]),j=M.useCallback(()=>{$(void 0)},[]);M.useEffect(()=>{h.current||mC({id:"audio-out"}).then(W=>{h.current=new QO(W),C(!0),h.current.addWorklet("vumeter-out",gC,z=>{g(z.data.volume)}).catch(z=>{console.error("Error adding worklet:",z)})})},[]),M.useEffect(()=>{const W=()=>{_(!0)},z=()=>{c.sendRealtimeText("hello")},te=oe=>{_(!1),de();let le="Session ended. Press 'Play' to start a new session. "+oe.reason;vn.getState().addTurn({role:"agent",text:le,isFinal:!0})},de=()=>{h.current&&h.current.stop()},xe=()=>{de();const{updateLastTurn:oe,turns:le}=vn.getState(),Ee=le[le.length-1];Ee&&!Ee.isFinal&&oe({isFinal:!0})},ue=oe=>{h.current&&h.current.addPCM16(new Uint8Array(oe))},fe=()=>{};c.on("open",W),c.on("setupcomplete",z),c.on("close",te),c.on("interrupted",xe),c.on("audio",ue),c.on("generationcomplete",fe);const K=async oe=>{vn.getState().setIsAwaitingFunctionResponse(!0);try{const le=[],Ee={map:e,placesLib:n,elevationLib:r,geocoder:o,padding:a,setHeldGroundedResponse:$,setHeldGroundingChunks:L};for(const H of oe.functionCalls){const V=`Triggering function call: **${H.name}**
\`\`\`json
${JSON.stringify(H.args,null,2)}
\`\`\``;vn.getState().addTurn({role:"system",text:V,isFinal:!0});let re="ok";try{const U=u5[H.name];U?re=await U(H.args,Ee):(re=`Unknown tool called: ${H.name}.`,console.warn(re)),le.push({id:H.id,name:H.name,response:{result:re}})}catch(U){const me=`Error executing tool ${H.name}.`;console.error(me,U),vn.getState().addTurn({role:"system",text:me,isFinal:!0}),le.push({id:H.id,name:H.name,response:{result:me}})}}if(le.length>0){const H=`Function call response:
\`\`\`json
${JSON.stringify(le,null,2)}
\`\`\``;vn.getState().addTurn({role:"system",text:H,isFinal:!0})}c.sendToolResponse({functionResponses:le})}finally{vn.getState().setIsAwaitingFunctionResponse(!1)}};return c.on("toolcall",K),()=>{c.off("open",W),c.off("setupcomplete",z),c.off("close",te),c.off("interrupted",xe),c.off("audio",ue),c.off("toolcall",K),c.off("generationcomplete",fe)}},[c,e,n,r,o,a,$,L]);const q=M.useCallback(async()=>{if(!k)throw new Error("config has not been set");vn.getState().clearTurns(),os.getState().clearMarkers(),c.disconnect(),await c.connect(k)},[c,k]),ee=M.useCallback(async()=>{c.disconnect(),_(!1)},[_,c]);return{client:c,config:k,setConfig:N,connect:q,connected:y,disconnect:ee,volume:f,heldGroundingChunks:I,clearHeldGroundingChunks:G,heldGroundedResponse:D,clearHeldGroundedResponse:j,audioStreamer:h}}const yC=M.createContext(void 0),d5=({apiKey:t,children:e,map:n,placesLib:r,elevationLib:o,geocoder:a,padding:l})=>{const c=c5({apiKey:t,map:n,placesLib:r,elevationLib:o,geocoder:a,padding:l});return b.jsx(yC.Provider,{value:c,children:e})},Pv=()=>{const t=M.useContext(yC);if(!t)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return t},f5=["gemini-2.5-flash-native-audio-preview-09-2025","gemini-2.5-flash-native-audio-latest","gemini-live-2.5-flash-preview","gemini-2.0-flash-live-001"];function vC(){const{isSidebarOpen:t,toggleSidebar:e,showSystemMessages:n,toggleShowSystemMessages:r}=yw(),{systemPrompt:o,model:a,voice:l,setSystemPrompt:c,setModel:h,setVoice:f,isEasterEggMode:g,activePersona:y,setPersona:_}=Qp(),{connected:T}=Pv(),C=M.useMemo(()=>FO.includes(a)?BO:UO,[a]);M.useEffect(()=>{C.some(N=>N.name===l)||f(fC)},[C,l,f]);const k=()=>{const{systemPrompt:N,model:I}=Qp.getState(),{tools:L}=hC.getState(),{turns:D}=vn.getState(),$={configuration:{model:I,systemPrompt:N},tools:L,conversation:D.map(z=>({...z,timestamp:z.timestamp.toISOString()}))},G=JSON.stringify($,null,2),j=new Blob([G],{type:"application/json"}),q=URL.createObjectURL(j),ee=document.createElement("a"),W=new Date().toISOString().replace(/[:.]/g,"-");ee.href=q,ee.download=`live-api-logs-${W}.json`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(q)};return b.jsx(b.Fragment,{children:b.jsxs("aside",{className:Pu("sidebar",{open:t}),children:[b.jsxs("div",{className:"sidebar-header",children:[b.jsx("h3",{children:"Settings"}),b.jsx("button",{onClick:e,className:"close-button",children:b.jsx("span",{className:"icon",children:"close"})})]}),b.jsxs("div",{className:"sidebar-content",children:[b.jsxs("div",{className:"sidebar-section",children:[b.jsxs("fieldset",{disabled:T,children:[g&&b.jsxs("label",{children:["Persona",b.jsx("select",{value:y,onChange:N=>_(N.target.value),children:Object.keys(Zd).map(N=>b.jsx("option",{value:N,children:N},N))})]}),b.jsxs("label",{children:["System Prompt",b.jsx("textarea",{value:o,onChange:N=>c(N.target.value),rows:10,placeholder:"Describe the role and personality of the AI...",disabled:g})]}),b.jsxs("label",{children:["Model",b.jsx("select",{value:a,onChange:N=>h(N.target.value),disabled:!g,children:f5.map(N=>b.jsx("option",{value:N,children:N},N))})]}),b.jsxs("label",{children:["Voice",b.jsx("select",{value:l,onChange:N=>f(N.target.value),children:C.map(N=>b.jsxs("option",{value:N.name,children:[N.name," (",N.description,")"]},N.name))})]})]}),b.jsxs("div",{className:"settings-toggle-item",children:[b.jsxs("label",{className:"tool-checkbox-wrapper",children:[b.jsx("input",{type:"checkbox",id:"system-message-toggle",checked:n,onChange:r}),b.jsx("span",{className:"checkbox-visual"})]}),b.jsx("label",{htmlFor:"system-message-toggle",className:"settings-toggle-label",children:"Show system messages"})]})]}),b.jsxs("div",{className:"sidebar-actions",children:[b.jsxs("button",{onClick:k,title:"Export session logs",children:[b.jsx("span",{className:"icon",children:"download"}),"Export Logs"]}),b.jsxs("button",{onClick:vn.getState().clearTurns,title:"Reset session logs",children:[b.jsx("span",{className:"icon",children:"refresh"}),"Reset Session"]})]})]})]})})}const bC=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),xC=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663l.001.109m-2.25-6.336a4.5 4.5 0 10-6.364-6.364 4.5 4.5 0 006.364 6.364z"})}),wC=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Tb=({title:t,value:e,icon:n})=>b.jsxs("div",{className:"bg-brand-secondary p-6 rounded-xl shadow-lg flex items-center gap-4",children:[b.jsx("div",{className:"bg-brand-primary p-3 rounded-lg",children:b.jsx(n,{className:"w-8 h-8 text-brand-gold"})}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-brand-light font-medium",children:t}),b.jsx("p",{className:"text-2xl font-bold text-brand-text",children:e})]})]}),$y=({currentUser:t})=>{const[e,n]=M.useState(0),[r,o]=M.useState(!0);return M.useEffect(()=>{const a=async()=>{try{const{count:c,error:h}=await Si.from("users").select("*",{count:"exact",head:!0}).eq("role","Client");if(h)throw h;n(c||0)}catch(c){console.error("Error fetching client count:",c)}finally{o(!1)}};a();const l=Si.channel("clients-changes").on("postgres_changes",{event:"*",schema:"public",table:"users",filter:"role=eq.Client"},()=>{a()}).subscribe();return()=>{Si.removeChannel(l)}},[]),b.jsxs("div",{className:"h-full flex flex-col gap-6",children:[b.jsxs("div",{children:[b.jsxs("h1",{className:"text-3xl font-bold text-brand-text",children:["Welcome back, ",t.name,"!"]}),b.jsx("p",{className:"text-brand-light mt-1",children:"Here's a snapshot of your agency's performance."})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.jsx(Tb,{title:"Registered Clients",value:r?"...":e.toString(),icon:xC}),b.jsx(Tb,{title:"Content Pieces Published",value:"18",icon:wC}),b.jsx(Tb,{title:"Market Reports Generated",value:"7",icon:bC})]}),b.jsxs("div",{className:"flex-1 bg-brand-secondary p-6 rounded-xl shadow-lg",children:[b.jsx("h2",{className:"text-xl font-bold text-brand-text mb-4",children:"Activity Feed"}),b.jsxs("div",{className:"text-brand-light space-y-4",children:[b.jsxs("p",{children:[b.jsx("span",{className:"font-semibold text-brand-text",children:"Fatima Al-Fahim"})," approved a new post for Dubai Hills Estate."]}),b.jsxs("p",{children:[b.jsx("span",{className:"font-semibold text-brand-text",children:"Liam Chen"})," added a new client: 'Aarav Sharma'."]}),b.jsxs("p",{children:[b.jsx("span",{className:"font-semibold text-brand-text",children:"You"})," generated a market report for 'Dubai vs. London'."]})]})]})]})},_C=t=>new Promise(e=>setTimeout(e,t)),h5=async()=>(await _C(400),console.log("SIMULATING: Fetched all project folders from Google Drive."),F1.map(t=>({id:t.id,name:t.name,developer:t.developer}))),p5=async t=>(await _C(600),console.log(`SIMULATING: Fetched assets for project ${t} from Google Drive.`),F1.find(e=>e.id===t)),m5=async t=>(console.log("SIMULATING: Uploading card to Google Drive..."),new Promise(e=>{setTimeout(()=>{const n=`drive_mock_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;console.log(`SIMULATION SUCCESS: File saved with mock Google Drive ID: ${n}`),e(n)},1e3)})),g5="AIzaSyCYTvt7YMcKjSNTnBa42djlndCeDvZHkr0",$i=new cC({apiKey:g5}),y5="gemini-2.5-pro",vw="gemini-2.5-flash",SC="gemini-2.5-flash-image",v5=async(t,e,n)=>{var h,f,g;if(!$i)throw new Error("Google AI API key not configured. Please add VITE_GOOGLE_API_KEY to your .env file.");const r=`Generate a detailed market intelligence report comparing the luxury real estate market in ${t} with ${e.join(", ")}. Focus on the following metrics: ${n.join(", ")}. Provide a concise summary for each city, a comparative table, and an overall investment outlook. Use markdown for formatting.`,o=await $i.models.generateContent({model:y5,contents:r,config:{tools:[{googleSearch:{}}]}}),a=((g=(f=(h=o.candidates)==null?void 0:h[0])==null?void 0:f.groundingMetadata)==null?void 0:g.groundingChunks)||[],l=o.text.length/4,c=l/1e3*.0025;return{report:o.text,sources:a,tokenCount:l,cost:c}},b5=async t=>{if(!$i)throw new Error("Google AI API key not configured. Please add VITE_GOOGLE_API_KEY to your .env file.");const n={inlineData:{data:t.split(",")[1],mimeType:"image/jpeg"}},r={text:"Extract the person's full name, email address, and phone number from this business card. Respond in JSON format."},o=await $i.models.generateContent({model:SC,contents:{parts:[n,r]},config:{responseMimeType:"application/json",responseSchema:{type:Hi.OBJECT,properties:{name:{type:Hi.STRING},email:{type:Hi.STRING},phone:{type:Hi.STRING}},required:["name","email","phone"]}}});return JSON.parse(o.text)},x5=async t=>{var o,a,l;if(!$i)throw new Error("Google AI API key not configured. Please add VITE_GOOGLE_API_KEY to your .env file.");const e=t[t.length-1].content.toLowerCase();if((e.includes("nearby")||e.includes("around me")||e.includes("close to me"))&&!t.some(c=>c.content.includes("System Info: User location")))return{role:"model",content:"To find properties near you, I'll need your current location. Can I access it?",action:"request_location"};const n=await $i.models.generateContent({model:vw,contents:`You are a helpful real estate assistant for Darie, serving high-net-worth clients interested in Dubai properties. Be polite, professional, and knowledgeable. Always include the company contact details when appropriate, especially at the end of conversations. The user's message history is below. Provide a concise and helpful response to the latest message.

${JSON.stringify(t)}`,config:{tools:[{googleSearch:{}}]}}),r=((l=(a=(o=n.candidates)==null?void 0:o[0])==null?void 0:a.groundingMetadata)==null?void 0:l.groundingChunks)||[];return{role:"model",content:n.text,sources:r}},w5=async t=>{var r,o,a;if(!$i)throw new Error("Google AI API key not configured. Please add VITE_GOOGLE_API_KEY to your .env file.");const e=await $i.models.generateContent({model:vw,contents:`You are "Pro AI", an internal assistant for the real estate agency Darie. Staff will ask you about internal data like campaign performance, content schedules, and market data. Use the provided context to answer. Be direct and professional. The user's message history is below. Respond to the latest message.

${JSON.stringify(t)}`,config:{tools:[{googleSearch:{}}]}}),n=((a=(o=(r=e.candidates)==null?void 0:r[0])==null?void 0:o.groundingMetadata)==null?void 0:a.groundingChunks)||[];return{role:"model",content:e.text,sources:n}},_5=async(t,e,n,r,o)=>{if(!$i)throw new Error("Google AI API key not configured. Please add VITE_GOOGLE_API_KEY to your .env file.");const a=`
    ${t}

    ---
    CONTEXT:
    Factsheet: ${n}
    User Keywords: ${e}
    Target Platform: ${r}
    ${o?`Asset Name: ${o}`:""}
    ---

    Generate the post copy now. Include the official company branding for Darie at the end.
  `;return(await $i.models.generateContent({model:vw,contents:a})).text},S5=async(t,e)=>{var h,f,g;if(!$i)throw new Error("Google AI API key not configured. Please add VITE_GOOGLE_API_KEY to your .env file.");const n=t.split(",")[1],r=((h=t.match(/data:([^;]+);/))==null?void 0:h[1])||"image/jpeg",o={inlineData:{data:n,mimeType:r}},a={text:`Enhance this real estate photo based on the following instruction: "${e}". Return only the enhanced image.`},c=(g=(f=(await $i.models.generateContent({model:SC,contents:{parts:[o,a]},config:{responseModalities:[hf.IMAGE]}})).candidates)==null?void 0:f[0])==null?void 0:g.content.parts.find(y=>y.inlineData);if(c!=null&&c.inlineData)return`data:${c.inlineData.mimeType};base64,${c.inlineData.data}`;throw new Error("AI did not return an enhanced image.")},E5=async(t,e,n)=>(console.log("SIMULATING HeyGen Video Generation with prompt:",t,"and apiKey:",e,"imageUrl:",n),new Promise(r=>{setTimeout(()=>{r("https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4")},5e3)})),T5=`You are an expert real estate marketing content designer for Darie.
Create a promotional image for a real estate campaign, optimized for digital ads or social media posts.

 Objective:
Generate a visually captivating ad image that highlights either a project/development or a specific property/unit.

 Input Sources:
- Factsheet: developer name, project name, handover date, payment plan, amenities, location.
- Brochure: property types, floor plans.
- Image Input: project render or unit photo (should be incorporated into the composition).

 Visual Composition:
- Use a premium real estate aesthetic: elegant lighting, realistic architecture, professional layout.
- Display: Developer name, project name, 3-4 key selling points, property types, handover date, payment plan summary.
- If off-plan, include "EOI Now Open" badge.
- Always include a Call-to-Action (CTA) button: "Register Interest ", "Visit Landing Page ", or "Book Viewing ".
- Add brand color overlays and a soft gradient for text readability.

 Output Requirements:
- Format: Square (1:1) for social media.
- Professional, high-resolution composition.
- Clear text hierarchy and a prominent CTA.

 Example Concept:
Luxury Waterfront Living  Marina Vista by Emaar. Handover Q4 2025 | 80/20 Payment Plan. Register Your EOI Now 

Now generate the ad image composition, visually integrating all major details. If an image input is provided, make it the central visual focus.`,C5=`You are a professional real estate video director for Darie creating a high-conversion marketing video.
The video should merge brand visuals with property walkthroughs, emphasizing lifestyle, trust, and urgency.

 Objective:
Produce a 3060 second promotional video that visually communicates developer reputation, project features, payment info, and a strong call-to-action.

 Input Sources:
- Factsheet: project name, developer, handover, payment plan, amenities.
- Brochure: floor plan, design.
- Video Inputs: Developers promotional visuals and a property advisors walkthrough video.

 Video Structure & Scene Guide:
1.  **Intro (35s):** Cinematic intro with project logo, name, location, and developer logo.
2.  **Developer Highlights (58s):** Use developer's branded footage. Overlay text with property types and handover date.
3.  **Amenities & Lifestyle (810s):** Footage of pool, gym, community. Overlay text with key amenities.
4.  **Property Walkthrough (1015s):** Seamlessly merge developer footage with advisor walkthrough video. Overlay unit details (e.g., "Spacious 2BR  1,350 sq.ft | Sea View").
5.  **Floor Plan & Payment (58s):** Show floor plan snapshot. Overlay starting price and payment plan.
6.  **CTA Outro (5s):** Strong CTA overlay: "Register Your Interest  [Landing Page URL]" or "Book a Viewing Today ". Include Darie agency logo.

 Output Requirements:
- Duration: 3060 seconds.
- Aspect ratio: 9:16 (for social media).
- Combine visuals fluidly, maintain a premium tone, and use modern transitions.
- Add background music, clean text overlays, and a clear CTA.

 Example Summary Script:
Introducing Marina Vista by Emaar  where luxury meets the waterfront. Choose from 14 BR apartments with flexible 80/20 payment plans. Handover Q4 2025. Register your EOI now at [landing page link].

Now generate the video, combining visuals, text overlays, and CTA flow according to the structure above.`,Cb={[Sn.Image]:T5,[Sn.Video]:C5,[Sn.Text]:"Generate a concise text-only post."},EC=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),kx=t=>b.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"})]}),Lr={brandName:"Darie Real Estate",logoUrl:"https://www.lockwoodandcarter.com/20250903_1915_Monogram%20with%20Transparency_remix_01k481z814e0a9007y5pvb4cew.png",colors:{text:"#E6EDF3",light:"#8B949E",overlayOpacity:.6},font:"Montserrat, sans-serif",ctaStyle:{backgroundColor:"#D4AF37",textColor:"#0D1117",text:"Register Now "},disclaimer:"Marketed exclusively by Darie Real Estate"},mv=t=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...t,children:b.jsx("path",{d:"M12 2.04c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm2.24 10.95h-1.61v4.61h-2.27v-4.61h-1.08v-1.99h1.08v-1.21c0-1.07.65-1.92 2.17-1.92h1.49v1.99h-.92c-.39 0-.46.18-.46.47v.67h1.42l-.19 1.99z"})}),TC=t=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...t,children:b.jsx("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14zm-11.5 5.5v8h3v-8h-3zm1.5-3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm8 3v3.5c0 1.5-.5 2.5-2 2.5s-1.5-1-1.5-2.5V8.5h-3v8h3v-4.5c0 .5.5 1.5 1.5 1.5s1.5-1 1.5-2.5V12h3v-3.5h-3z"})}),CC=t=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[b.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),b.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),b.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]}),A5={[ti.Facebook]:mv,[ti.LinkedIn]:TC,[ti.Instagram]:CC},k5=({imageSrc:t,projectName:e,platform:n})=>{const r=A5[n]||mv;return b.jsxs("div",{style:{fontFamily:Lr.font,position:"relative",width:"100%",aspectRatio:"1 / 1",backgroundColor:"#161B22",borderRadius:"12px",overflow:"hidden",border:"1px solid #30363D"},children:[b.jsxs("div",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[b.jsx("img",{src:Lr.logoUrl,alt:"Logo",style:{width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover"}}),b.jsxs("div",{children:[b.jsx("p",{style:{fontWeight:600,fontSize:"14px",color:Lr.colors.text},children:Lr.brandName}),b.jsx("p",{style:{fontSize:"12px",color:Lr.colors.light},children:"Sponsored"})]})]}),b.jsxs("div",{style:{position:"relative",width:"100%",aspectRatio:"16 / 9",backgroundColor:"#0D1117"},children:[b.jsx("img",{src:t,alt:`${e} preview`,style:{width:"100%",height:"100%",objectFit:"cover"}}),b.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(to top, rgba(13, 17, 23, ${Lr.colors.overlayOpacity}) 20%, transparent 80%)`}}),b.jsx("img",{src:Lr.logoUrl,alt:"Watermark",style:{position:"absolute",top:"16px",left:"16px",width:"48px",height:"48px",opacity:.8,filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.7))",objectFit:"cover"}})]}),b.jsxs("div",{style:{padding:"12px",display:"flex",flexDirection:"column",gap:"8px"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsx("div",{style:{backgroundColor:Lr.ctaStyle.backgroundColor,color:Lr.ctaStyle.textColor,padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:600,textAlign:"center"},children:Lr.ctaStyle.text}),b.jsx(r,{style:{width:"24px",height:"24px",color:Lr.colors.light}})]}),b.jsx("p",{style:{fontSize:"10px",color:Lr.colors.light,opacity:.7},children:Lr.disclaimer})]})]})},AC=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),I5=t=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...t,children:b.jsx("path",{d:"M21.582 7.243c-.24-.888-.91-1.56-1.798-1.798C18.24 5 12 5 12 5s-6.24 0-7.784.445c-.888.238-1.558.91-1.798 1.798C2 8.787 2 12 2 12s0 3.213.42 4.757c.24.888.91 1.56 1.798 1.798C5.76 19 12 19 12 19s6.24 0 7.784-.445c.888-.238 1.558-.91 1.798-1.798C22 15.213 22 12 22 12s0-3.213-.418-4.757zM10 15.464V8.536l4.952 3.464L10 15.464z"})}),R5=t=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),N5={[ti.Facebook]:mv,[ti.LinkedIn]:TC,[ti.Instagram]:CC,[ti.YouTube]:I5,[ti.Twitter]:mv},M5=({isOpen:t,onClose:e,onSave:n,project:r,currentUser:o,selectedDate:a,post:l})=>{const[c,h]=M.useState("POST_TYPE_SELECTION"),[f,g]=M.useState(null),[y,_]=M.useState(ti.Facebook),[T,C]=M.useState(""),[k,N]=M.useState(""),[I,L]=M.useState(null),[D,$]=M.useState(null),[G,j]=M.useState(""),[q,ee]=M.useState(!1),[W,z]=M.useState(""),[te,de]=M.useState(""),xe=M.useRef(null),ue=()=>{h("POST_TYPE_SELECTION"),g(null),_(ti.Facebook),C(""),L(null),j(""),ee(!1),z(""),$(null);const V=l?new Date(l.scheduledDate):new Date(a);V.setHours(10,0);const re=new Date(V.getTime()-V.getTimezoneOffset()*6e4).toISOString().slice(0,16);if(N(re),l){g(l.postType),_(l.platform),C(l.postText);const U=l.imageUrl||l.videoUrl,me=r.assets.find(Ce=>Ce.url===U);me?L(me):U&&L({id:"existing-asset",name:"Previously Used Asset",url:U,type:l.postType===Sn.Image?"image":"video"}),h("CONTENT_GENERATION")}};M.useEffect(()=>{t&&ue()},[t,l,a,r]);const fe=V=>{var U;const re=(U=V.target.files)==null?void 0:U[0];if(re){const me=new FileReader;me.onloadend=()=>{const Ce=me.result,Ie={id:`upload-${Date.now()}`,name:re.name,url:Ce,type:f===Sn.Image?"image":"video"};L(Ie),h("CONTENT_GENERATION")},me.readAsDataURL(re)}},K=async()=>{var re;const V=((re=r.assets.find(U=>U.type==="factsheet"))==null?void 0:re.content)||"No factsheet available.";if(!(!G||!f)){ee(!0),z("Generating post copy...");try{const U=Cb[f],me=await _5(U,G,V,y,I==null?void 0:I.name);C(me)}catch(U){z(U instanceof Error?U.message:"Failed to generate copy.")}finally{ee(!1),z("")}}},oe=async()=>{if(!(!I||!G)){ee(!0),z("Enhancing image...");try{const V=await S5(I.url,G),re={...I,url:V,id:`enhanced-${Date.now()}`};L(re),z("Image enhanced successfully!")}catch(V){z(V instanceof Error?V.message:"Failed to enhance image.")}finally{ee(!1)}}},le=async()=>{if(G){ee(!0),z("Initializing video generation with HeyGen...");try{const re=`${Cb[Sn.Video]}

User Keywords: ${G}`,U=await E5(re,te,I==null?void 0:I.url);$(U),z("Video generated successfully!")}catch(V){z(V instanceof Error?V.message:"Failed to generate video.")}finally{ee(!1)}}},Ee=async V=>{if(!f)return;const re={projectId:r.id,platform:y,postType:f,status:V,scheduledDate:new Date(k).toISOString(),createdBy:(l==null?void 0:l.createdBy)||o.id,postText:T,imageUrl:f===Sn.Image?I==null?void 0:I.url:void 0,videoUrl:f===Sn.Video?D||(I==null?void 0:I.url):void 0};try{l?await z1(l.id,{...re,approvedBy:l.approvedBy}):await dI(re),n()}catch(U){console.error("Failed to save post:",U)}};if(!t)return null;const H=()=>{switch(c){case"POST_TYPE_SELECTION":return b.jsxs("div",{className:"p-8 flex flex-col items-center justify-center gap-8",children:[b.jsx("h3",{className:"text-2xl font-bold text-brand-text",children:"What type of content do you want to create?"}),b.jsxs("div",{className:"flex gap-8",children:[b.jsxs("button",{onClick:()=>{g(Sn.Image),h("ASSET_SELECTION")},className:"flex flex-col items-center gap-4 p-8 bg-brand-primary rounded-xl border-2 border-brand-accent hover:border-brand-gold transition-colors",children:[b.jsx(EC,{className:"w-16 h-16 text-brand-gold"}),b.jsx("span",{className:"text-xl font-semibold text-brand-text",children:"Image Post"})]}),b.jsxs("button",{onClick:()=>{g(Sn.Video),h("ASSET_SELECTION")},className:"flex flex-col items-center gap-4 p-8 bg-brand-primary rounded-xl border-2 border-brand-accent hover:border-brand-gold transition-colors",children:[b.jsx(kx,{className:"w-16 h-16 text-brand-gold"}),b.jsx("span",{className:"text-xl font-semibold text-brand-text",children:"Video Post"})]})]})]});case"ASSET_SELECTION":const V=r.assets.filter(U=>U.type===(f===Sn.Image?"image":"video"));return b.jsxs("div",{className:"p-6 flex flex-col gap-4",children:[b.jsx("h3",{className:"text-xl font-bold text-brand-text",children:"Select a visual asset for your post"}),b.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-4 overflow-y-auto max-h-96",children:[b.jsxs("button",{onClick:()=>{var U;return(U=xe.current)==null?void 0:U.click()},className:"aspect-square bg-brand-primary rounded-lg flex flex-col items-center justify-center text-brand-light border-2 border-dashed border-brand-accent hover:border-brand-gold transition-colors",children:[b.jsx(AC,{className:"w-10 h-10 mb-2"}),b.jsxs("span",{className:"text-sm font-semibold",children:["Upload ",f]})]}),b.jsx("input",{type:"file",ref:xe,onChange:fe,className:"hidden",accept:f===Sn.Image?"image/*":"video/*"}),V.map(U=>b.jsxs("button",{onClick:()=>{L(U),h("CONTENT_GENERATION")},className:"relative aspect-square rounded-lg overflow-hidden ring-2 ring-transparent hover:ring-brand-gold transition-all group",children:[b.jsx("img",{src:U.url,alt:U.name,className:"w-full h-full object-cover"}),b.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:b.jsx("p",{className:"text-white text-xs truncate",children:U.name})})]},U.id))]})]});case"CONTENT_GENERATION":const re=N5[y];return b.jsxs(b.Fragment,{children:[b.jsxs("main",{className:"p-6 flex-1 overflow-y-auto grid grid-cols-1 md:grid-cols-2 gap-6",children:[b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsxs("div",{className:"bg-brand-primary p-4 rounded-lg border border-brand-accent",children:[b.jsx("h4",{className:"font-bold text-brand-gold text-sm mb-2",children:"MASTER PROMPT"}),b.jsx("pre",{className:"text-xs text-brand-light whitespace-pre-wrap font-sans max-h-24 overflow-y-auto",children:Cb[f]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"keywords",className:"block text-sm font-medium text-brand-light mb-1",children:"Keywords / Focus"}),b.jsx("textarea",{id:"keywords",value:G,onChange:U=>j(U.target.value),placeholder:"e.g., family amenities, panoramic sea views, limited time offer",className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text",rows:2})]}),f===Sn.Image&&b.jsxs("button",{onClick:oe,disabled:q||!I,className:"w-full bg-brand-accent text-brand-text font-semibold py-2 px-3 rounded-md flex items-center justify-center gap-2 hover:bg-brand-light hover:text-brand-primary disabled:opacity-50",children:[q&&W.includes("Enhancing")?b.jsx("div",{className:"w-4 h-4 border-2 border-t-transparent border-current rounded-full animate-spin"}):b.jsx(Yp,{className:"w-4 h-4"}),"Enhance Image with AI"]}),f===Sn.Video&&b.jsxs("div",{className:"bg-brand-primary p-3 rounded-lg border border-brand-accent",children:[b.jsx("label",{htmlFor:"heygen-key",className:"block text-sm font-medium text-brand-light mb-1",children:"HeyGen API Key"}),b.jsx("input",{type:"password",id:"heygen-key",value:te,onChange:U=>de(U.target.value),placeholder:"Enter your HeyGen API key...",className:"w-full bg-brand-secondary border border-brand-accent rounded-md p-2 text-brand-text"}),b.jsxs("button",{onClick:le,disabled:q||!te,className:"w-full mt-2 bg-brand-gold text-brand-primary font-bold py-2 px-3 rounded-md flex items-center justify-center gap-2 hover:bg-yellow-400 disabled:bg-brand-accent disabled:cursor-not-allowed",children:[q&&W.includes("video")?b.jsx("div",{className:"w-4 h-4 border-2 border-t-transparent border-current rounded-full animate-spin"}):b.jsx(kx,{className:"w-4 h-4"}),"Generate Video"]})]}),b.jsxs("div",{className:"flex-1 flex flex-col",children:[b.jsx("label",{htmlFor:"postText",className:"block text-sm font-medium text-brand-light mb-1",children:"Post Copy"}),b.jsx("textarea",{id:"postText",value:T,onChange:U=>C(U.target.value),placeholder:"AI generated content will appear here...",className:"w-full flex-1 bg-brand-primary border border-brand-accent rounded-md p-3 focus:ring-2 focus:ring-brand-gold text-brand-text resize-none",rows:6}),b.jsxs("button",{onClick:K,disabled:q,className:"w-full mt-2 bg-brand-gold/20 text-brand-gold text-sm font-semibold py-2 px-3 rounded-md flex items-center justify-center gap-2 hover:bg-brand-gold/40 disabled:opacity-50",children:[q&&W.includes("copy")?b.jsx("div",{className:"w-4 h-4 border-2 border-t-transparent border-current rounded-full animate-spin"}):b.jsx(Yp,{className:"w-4 h-4"}),"Generate Copy"]})]})]}),b.jsxs("div",{className:"flex flex-col gap-4",children:[W&&b.jsx("div",{className:"text-center text-sm text-brand-light p-2 bg-brand-primary rounded-md",children:W}),b.jsxs("div",{className:"bg-brand-primary border border-brand-accent rounded-lg p-4 w-full max-w-md mx-auto",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[b.jsx("img",{src:Lr.logoUrl,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}),b.jsxs("div",{children:[b.jsx("p",{className:"font-bold text-sm text-brand-text",children:Lr.brandName}),b.jsxs("p",{className:"text-xs text-brand-light flex items-center gap-1",children:["Sponsored  ",b.jsx(re,{className:"w-3 h-3"})]})]})]}),T&&b.jsx("div",{className:"text-brand-light text-sm whitespace-pre-wrap mb-3",children:T.split(`
`).map((U,me)=>b.jsx("p",{children:U||""},me))}),f===Sn.Image&&I&&b.jsx(k5,{imageSrc:I.url,projectName:r.name,platform:y}),f===Sn.Video&&b.jsx("div",{className:"w-full aspect-video bg-brand-secondary rounded-lg flex items-center justify-center text-brand-light border border-brand-accent",children:D?b.jsx("video",{src:D,controls:!0,className:"w-full h-full rounded-lg"}):I?b.jsxs("div",{className:"text-center p-4",children:[b.jsx("p",{className:"font-semibold",children:"Input Video:"}),b.jsx("img",{src:I.url,alt:I.name,className:"w-full h-auto object-contain rounded-md my-2 max-h-24"}),b.jsx("p",{className:"mt-4 text-xs opacity-70",children:"Generated video will appear here."})]}):b.jsx("p",{children:"No video selected."})}),b.jsxs("div",{className:"mt-3 pt-2 border-t border-brand-accent flex justify-around text-sm font-semibold text-brand-light",children:[b.jsx("button",{className:"flex-1 p-2 rounded-md hover:bg-brand-secondary",children:"Like"}),b.jsx("button",{className:"flex-1 p-2 rounded-md hover:bg-brand-secondary",children:"Comment"}),b.jsx("button",{className:"flex-1 p-2 rounded-md hover:bg-brand-secondary",children:"Share"})]})]})]})]}),b.jsxs("footer",{className:"p-4 border-t border-brand-accent flex justify-end items-center gap-3 flex-shrink-0",children:[b.jsx("button",{onClick:()=>Ee($n.Draft),className:"bg-brand-accent text-brand-text font-semibold py-2 px-4 rounded-lg hover:bg-brand-light hover:text-brand-primary transition-colors",children:"Save Draft"}),b.jsxs("button",{onClick:()=>Ee($n.PendingApproval),className:"bg-brand-gold text-brand-primary font-bold py-2 px-4 rounded-lg hover:bg-yellow-400 transition-colors",children:["Submit for Approval to ",y]})]})]})}};return b.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",children:b.jsxs("div",{className:"bg-brand-secondary rounded-2xl shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[b.jsxs("header",{className:"p-4 border-b border-brand-accent flex justify-between items-center flex-shrink-0",children:[b.jsxs("h2",{className:"text-xl font-bold text-brand-text",children:[l?"Edit":"Create"," Content for ",r.name]}),b.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-brand-accent transition-colors",children:b.jsx(R5,{className:"w-6 h-6 text-brand-light"})})]}),H()]})})},D5=(t,e)=>{if(e)return"bg-red-500/20 text-red-300 ring-red-500";switch(t){case $n.Draft:return"bg-gray-500/20 text-gray-300 ring-gray-500";case $n.PendingApproval:return"bg-yellow-500/20 text-yellow-300 ring-yellow-500";case $n.Approved:return"bg-green-500/20 text-green-300 ring-green-500";case $n.Published:return"bg-blue-500/20 text-blue-300 ring-blue-500";default:return"bg-brand-primary ring-brand-accent"}},P5=({projectId:t,currentUser:e,viewMode:n,currentDate:r})=>{const[o,a]=M.useState(null),[l,c]=M.useState([]),[h,f]=M.useState(!0),[g,y]=M.useState(!1),[_,T]=M.useState(null),[C,k]=M.useState(null),N=async()=>{try{f(!0);const[q,ee]=await Promise.all([p5(t),j1()]);a(q||null),c(ee.filter(W=>W.projectId===t))}catch(q){console.error("Failed to load planner data:",q)}finally{f(!1)}};M.useEffect(()=>{N()},[t]),M.useEffect(()=>{const q=setInterval(()=>{const ee=new Date;l.forEach(W=>{W.status===$n.Approved&&new Date(W.scheduledDate)<=ee&&$(W.id,$n.Published,e.id)})},6e4);return()=>clearInterval(q)},[l,e.id]);const I=q=>{T(q),k(null),y(!0)},L=q=>{T(new Date(q.scheduledDate)),k(q),y(!0)},D=()=>{y(!1),N()},$=async(q,ee,W)=>{const z={status:ee};ee===$n.Approved&&(z.approvedBy=W),await z1(q,z),N()},G=M.useMemo(()=>{if(n==="FourWeek"){const q=new Date;return q.setHours(0,0,0,0),Array.from({length:28},(ee,W)=>{const z=new Date(q);return z.setDate(q.getDate()+W),{date:z,isCurrentMonth:!0}})}else{const q=r.getFullYear(),ee=r.getMonth(),W=new Date(q,ee,1),z=new Date(q,ee+1,0),te=[],de=W.getDay();for(let ue=0;ue<de;ue++){const fe=new Date(W);fe.setDate(fe.getDate()-(de-ue)),te.push({date:fe,isCurrentMonth:!1})}for(let ue=1;ue<=z.getDate();ue++)te.push({date:new Date(q,ee,ue),isCurrentMonth:!0});z.getDay();const xe=(7-te.length%7)%7;for(let ue=1;ue<=xe;ue++){const fe=new Date(z);fe.setDate(fe.getDate()+ue),te.push({date:fe,isCurrentMonth:!1})}return te}},[n,r]);if(h)return b.jsx("div",{className:"text-center p-8",children:"Loading Planner..."});if(!o)return b.jsx("div",{className:"text-center p-8",children:"Project data could not be loaded."});const j=e.role===Ft.Owner||e.role===Ft.Admin;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:`grid gap-2 ${n==="FourWeek"?"grid-cols-4":"grid-cols-7"}`,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(q=>b.jsx("div",{className:"text-center font-bold text-brand-light text-sm mb-2",children:q},q)),G.map(({date:q,isCurrentMonth:ee})=>{const W=l.filter(z=>new Date(z.scheduledDate).toDateString()===q.toDateString());return b.jsxs("div",{className:`bg-brand-primary h-40 rounded-lg p-2 flex flex-col gap-1 overflow-y-auto ${ee?"":"opacity-40"}`,children:[b.jsx("div",{className:`font-semibold text-xs ${ee?"text-brand-text":"text-brand-light/70"}`,children:q.getDate()}),W.map(z=>{const te=z.status===$n.PendingApproval&&new Date(z.scheduledDate).getTime()-Date.now()<0,de=z.postType==="Video"?kx:EC;return b.jsxs("div",{className:`p-1.5 rounded-md text-xs cursor-pointer ring-1 ${D5(z.status,te)}`,children:[b.jsxs("div",{className:"font-bold truncate flex items-center gap-1.5",onClick:()=>L(z),children:[b.jsx(de,{className:"w-3.5 h-3.5 shrink-0"}),z.platform," Post"]}),b.jsxs("div",{className:"flex justify-between items-center mt-1",children:[b.jsx("span",{className:"text-xs opacity-80",children:z.status}),j&&z.status===$n.PendingApproval&&b.jsx("button",{onClick:()=>$(z.id,$n.Approved,e.id),className:"px-1 py-0.5 bg-green-500/50 rounded text-green-200 hover:bg-green-500/70 text-[10px]",children:"Approve"})]})]},z.id)}),ee&&b.jsx("button",{onClick:()=>I(q),className:"mt-auto text-center text-xs text-brand-light hover:text-brand-text w-full",children:"+ Schedule"})]},q.toISOString())})]}),g&&_&&b.jsx(M5,{isOpen:g,onClose:()=>y(!1),onSave:D,project:o,currentUser:e,selectedDate:_,post:C})]})},L5=({currentUser:t})=>{const[e,n]=M.useState([]),[r,o]=M.useState(null),[a,l]=M.useState(!0),[c,h]=M.useState(null),[f,g]=M.useState("FourWeek"),[y,_]=M.useState(new Date);M.useEffect(()=>{(async()=>{try{l(!0);const N=await h5();n(N),N.length>0&&o(N[0].id)}catch(N){h(N instanceof Error?N.message:"Failed to load projects.")}finally{l(!1)}})()},[]);const T=()=>{_(k=>new Date(k.getFullYear(),k.getMonth()-1,1))},C=()=>{_(k=>new Date(k.getFullYear(),k.getMonth()+1,1))};return b.jsxs("div",{className:"h-full flex flex-col gap-4",children:[b.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(wC,{className:"w-8 h-8 text-brand-gold"}),b.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"Content Studio & Planner"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"project-select",className:"sr-only",children:"Select Project"}),b.jsx("select",{id:"project-select",value:r||"",onChange:k=>o(k.target.value),disabled:a||e.length===0,className:"bg-brand-secondary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition text-brand-text",children:a?b.jsx("option",{children:"Loading Projects..."}):e.map(k=>b.jsxs("option",{value:k.id,children:[k.developer.toUpperCase()," - ",k.name]},k.id))})]})]}),c&&b.jsx("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-md",children:c}),b.jsxs("div",{className:"flex-1 bg-brand-secondary p-4 rounded-xl shadow-lg overflow-y-auto flex flex-col gap-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 px-2",children:[b.jsxs("div",{className:"flex items-center gap-2 bg-brand-primary p-1 rounded-lg w-fit",children:[b.jsx("button",{onClick:()=>g("FourWeek"),className:`px-3 py-1 rounded-md text-sm font-semibold transition-colors ${f==="FourWeek"?"bg-brand-gold text-brand-primary":"text-brand-light hover:text-brand-text"}`,children:"4-Week View"}),b.jsx("button",{onClick:()=>g("Monthly"),className:`px-3 py-1 rounded-md text-sm font-semibold transition-colors ${f==="Monthly"?"bg-brand-gold text-brand-primary":"text-brand-light hover:text-brand-text"}`,children:"Monthly View"})]}),f==="Monthly"&&b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("button",{onClick:T,className:"p-2 rounded-md hover:bg-brand-primary text-brand-light",children:"< Prev"}),b.jsx("span",{className:"font-bold text-lg text-brand-text w-36 text-center",children:y.toLocaleString("default",{month:"long",year:"numeric"})}),b.jsx("button",{onClick:C,className:"p-2 rounded-md hover:bg-brand-primary text-brand-light",children:"Next >"})]})]}),r?b.jsx(P5,{projectId:r,currentUser:t,viewMode:f,currentDate:y},r):b.jsx("div",{className:"flex items-center justify-center h-full text-brand-light",children:a?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-6 h-6 border-4 border-t-transparent border-brand-gold rounded-full animate-spin"}),b.jsx("p",{children:"Loading project data..."})]}):b.jsx("p",{children:"No projects found. Please add projects to your Google Drive."})})]})]})},O5=t=>b.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 10.5c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 21c4.97 0 9-4.03 9-9h-9v9z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12V3m0 9l-3.375-6.04m6.75 6.04L12 3"})]}),U5=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z"})}),B5=/-\s+\*\*(.*?):\*\*(.*)/,F5=/\*\*(.*?)\*\*/g,Gy=t=>{const e=[];let n=0;return t.replace(F5,(r,o,a)=>(a>n&&e.push(t.substring(n,a)),e.push(b.jsx("strong",{children:o},a)),n=a+r.length,r)),n<t.length&&e.push(t.substring(n)),b.jsx(b.Fragment,{children:e.map((r,o)=>b.jsx(We.Fragment,{children:r},o))})},j5=({content:t})=>{const e=t.split(`
`).filter(r=>r.trim()!==""),n=[];return e.forEach((r,o)=>{const a=r.match(B5);if(r.startsWith("### ")){const l=r.substring(4),c=l.match(/(\s[])$/),h=c?l.replace(c[0],""):l,f=c?c[1]:null;n.push(b.jsx("div",{className:"bg-brand-primary/50 p-4 rounded-lg border border-brand-accent mt-4",children:b.jsxs("div",{className:"flex items-center gap-3",children:[f&&b.jsx("span",{className:"text-2xl",children:f}),b.jsx("h3",{className:"text-lg font-bold text-brand-text",children:h})]})},o))}else if(a){const[,l,c]=a;n.push(b.jsx("div",{className:"bg-brand-primary/20 p-3 rounded-md my-2",children:b.jsxs("div",{className:"flex justify-between items-center text-sm",children:[b.jsx("span",{className:"text-brand-light",children:l.trim()}),b.jsx("span",{className:"font-bold text-brand-text text-right",children:c.trim()})]})},o))}else r.startsWith("## ")?n.push(b.jsx("h2",{className:"text-xl font-bold text-brand-text mt-6 mb-2 border-b border-brand-accent pb-1",children:Gy(r.substring(3))},o)):r.startsWith("# ")?n.push(b.jsx("h1",{className:"text-2xl font-bold text-brand-gold mt-4 mb-3",children:Gy(r.substring(2))},o)):r.startsWith("- ")?n.push(b.jsx("p",{className:"text-sm my-1 pl-4",children:Gy(r.substring(2))},o)):n.push(b.jsx("p",{className:"my-2 text-brand-light text-sm",children:Gy(r)},o))}),b.jsx("div",{className:"text-brand-text max-w-none",children:n})},Ab=["Abu Dhabi","Bangalore","Chennai","Delhi","Dubai","Hyderabad","London","Los Angeles","Mumbai","New York","Paris","Shanghai","Singapore","Sydney","Tokyo"],z5=[{id:"Pricing",name:"Pricing"},{id:"Investment Returns",name:"Investment Returns"},{id:"Market Activity",name:"Market Activity"},{id:"Supply & Development",name:"Supply & Development"},{id:"Economic Factors",name:"Economic Factors"},{id:"Livability & Infrastructure",name:"Livability & Infrastructure"},{id:"Regulatory & Ownership",name:"Regulatory & Ownership"},{id:"Currency Stability & Exchange Rate",name:"Currency Stability & Exchange Rate"}],q5=()=>{const[t,e]=M.useState(Ab[4]),[n,r]=M.useState(["London","New York","Singapore"]),[o,a]=M.useState(["Pricing","Investment Returns","Market Activity"]),[l,c]=M.useState(null),[h,f]=M.useState(!1),[g,y]=M.useState(null),_=k=>{r(N=>N.includes(k)?N.filter(I=>I!==k):[...N,k])},T=k=>{a(N=>N.includes(k)?N.filter(I=>I!==k):[...N,k])},C=M.useCallback(async()=>{if(!t){y("Please select a primary city.");return}if(o.length===0){y("Please select at least one metric to analyze.");return}f(!0),y(null),c(null);try{const k=await v5(t,n,o);c(k)}catch(k){y(k instanceof Error?k.message:"An unknown error occurred."),console.error(k)}finally{f(!1)}},[t,n,o]);return b.jsxs("div",{className:"h-full flex flex-col gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(bC,{className:"w-8 h-8 text-brand-gold"}),b.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"Market Intelligence Engine"})]}),g&&b.jsx("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-md",children:g}),b.jsxs("div",{className:"bg-brand-secondary p-6 rounded-xl shadow-lg flex flex-col gap-6",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"primary-city",className:"block font-medium text-brand-light mb-2",children:"1. Select Primary City"}),b.jsx("select",{id:"primary-city",value:t,onChange:k=>e(k.target.value),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-3 focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition text-brand-text",children:Ab.map(k=>b.jsx("option",{value:k,children:k},k))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block font-medium text-brand-light mb-2",children:"2. Select Comparison Cities"}),b.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 p-3 bg-brand-primary rounded-md border border-brand-accent max-h-32 overflow-y-auto",children:Ab.filter(k=>k!==t).map(k=>b.jsxs("label",{className:"flex items-center gap-2 text-sm text-brand-text cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:n.includes(k),onChange:()=>_(k),className:"form-checkbox bg-brand-primary border-brand-accent text-brand-gold focus:ring-brand-gold"}),k]},k))})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block font-medium text-brand-light mb-2",children:"3. Choose Metrics for Report"}),b.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:z5.map(k=>b.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-md bg-brand-primary border border-brand-accent cursor-pointer hover:border-brand-light transition",children:[b.jsx("input",{type:"checkbox",checked:o.includes(k.id),onChange:()=>T(k.id),className:"form-checkbox bg-brand-accent border-brand-light text-brand-gold focus:ring-brand-gold"}),b.jsx("span",{className:"text-sm text-brand-text",children:k.name})]},k.id))})]}),b.jsx("button",{onClick:C,disabled:h,className:"w-full sm:w-auto self-start bg-brand-gold text-brand-primary font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 hover:bg-yellow-400 transition-colors disabled:bg-brand-accent disabled:cursor-not-allowed",children:h?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-brand-primary rounded-full animate-spin"}),"Generating Report..."]}):b.jsxs(b.Fragment,{children:[b.jsx(Yp,{className:"w-5 h-5"}),"Generate Report"]})})]}),h&&b.jsxs("div",{className:"flex-1 bg-brand-secondary p-6 rounded-xl shadow-lg flex flex-col items-center justify-center text-brand-light",children:[b.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-brand-gold rounded-full animate-spin"}),b.jsx("p",{className:"mt-4 text-lg",children:"Analyzing global market data..."}),b.jsx("p",{className:"text-sm",children:"This may take a moment."})]}),l&&b.jsxs("div",{className:"flex-1 bg-brand-secondary p-6 rounded-xl shadow-lg overflow-y-auto",children:[b.jsx(j5,{content:l.report}),b.jsx("div",{className:"mt-8 pt-4 border-t border-brand-accent/50",children:b.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.sources&&l.sources.length>0&&b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-bold text-brand-text mb-2",children:"Data Sources"}),b.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:l.sources.map((k,N)=>k.web&&b.jsx("li",{children:b.jsx("a",{href:k.web.uri,target:"_blank",rel:"noopener noreferrer",className:"text-brand-gold/80 hover:text-brand-gold underline transition break-all",children:k.web.title||k.web.uri})},N))})]}),b.jsxs("div",{className:"flex flex-col gap-2 self-start sm:self-center",children:[l.tokenCount&&b.jsxs("div",{className:"bg-brand-primary/50 text-brand-light text-sm p-3 rounded-lg flex items-center gap-3",children:[b.jsx(O5,{className:"w-5 h-5 text-brand-gold"}),b.jsxs("span",{children:["Report generated using ",b.jsx("strong",{children:l.tokenCount.toFixed(0)})," tokens."]})]}),l.cost!==void 0&&b.jsxs("div",{className:"bg-brand-primary/50 text-brand-light text-sm p-3 rounded-lg flex items-center gap-3",children:[b.jsx(U5,{className:"w-5 h-5 text-brand-gold"}),b.jsxs("span",{children:["Estimated Cost: ",b.jsxs("strong",{children:["$",l.cost.toFixed(6)]})," USD"]})]})]})]})})]})]})},H5=({clients:t,users:e})=>{const n=new Map(e.map(r=>[r.id,r.name]));return b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full text-left table-auto",children:[b.jsx("thead",{className:"border-b border-brand-accent",children:b.jsxs("tr",{children:[b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider",children:"Name"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider hidden md:table-cell",children:"Email"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider hidden lg:table-cell",children:"Phone"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider",children:"Property Advisor"})]})}),b.jsx("tbody",{className:"divide-y divide-brand-accent",children:t.map(r=>b.jsxs("tr",{className:"hover:bg-brand-accent/30 transition-colors",children:[b.jsx("td",{className:"p-4 text-brand-text font-medium",children:r.name}),b.jsx("td",{className:"p-4 text-brand-light hidden md:table-cell",children:r.email}),b.jsx("td",{className:"p-4 text-brand-light hidden lg:table-cell",children:r.phone}),b.jsx("td",{className:"p-4 text-brand-light",children:n.get(r.propertyAdvisorId)||"Unassigned"})]},r.id))})]})})},V5=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.25V7.5a2.25 2.25 0 012.25-2.25h1.5M3 15.75V16.5a2.25 2.25 0 002.25 2.25h1.5M16.5 20.25h1.5a2.25 2.25 0 002.25-2.25V16.5M19.5 8.25V7.5a2.25 2.25 0 00-2.25-2.25h-1.5"})}),$5=({currentUser:t})=>{const[e,n]=M.useState([]),[r,o]=M.useState([]),[a,l]=M.useState(!0),[c,h]=M.useState(""),[f,g]=M.useState(!1),[y,_]=M.useState(null),T=M.useRef(null);M.useEffect(()=>{const I=async()=>{try{l(!0);const{data:D,error:$}=await Si.from("users").select("*").eq("role","Client").order("created_at",{ascending:!1});if($)throw $;const G=(D||[]).map(q=>({id:q.id,name:`${q.first_name||""} ${q.last_name||""}`.trim(),email:q.email,phone:q.phone||"",propertyAdvisorId:"",cardDriveId:void 0})),j=await cw.getAll();n(G),o(j)}catch(D){_("Failed to load data."),console.error("Error loading clients:",D)}finally{l(!1)}};I();const L=Si.channel("client-users-changes").on("postgres_changes",{event:"*",schema:"public",table:"users",filter:"role=eq.Client"},()=>{I()}).subscribe();return()=>{Si.removeChannel(L)}},[]);const C=M.useMemo(()=>{let I;return t.role===Ft.Owner||t.role===Ft.Admin?I=e:t.role===Ft.PropertyAdvisor?I=e.filter(L=>L.propertyAdvisorId===t.id):I=[],c?I.filter(L=>L.name.toLowerCase().includes(c.toLowerCase())||L.email.toLowerCase().includes(c.toLowerCase())):I},[t,c,e]),k=async I=>{var D;const L=(D=I.target.files)==null?void 0:D[0];if(L){g(!0),_(null);try{const $=new FileReader;$.onloadend=async()=>{const G=$.result,j=await b5(G),q=await m5(G);if(!j.name||!j.email||!j.phone)throw new Error("Failed to extract complete client information from the card. Please check the image or enter details manually.");const ee={name:j.name,email:j.email,phone:j.phone,propertyAdvisorId:t.id,cardDriveId:q},W=await cI(ee);n(z=>[W,...z])},$.readAsDataURL(L)}catch($){_($ instanceof Error?$.message:"An unknown error occurred during card processing."),console.error($)}finally{g(!1),T.current&&(T.current.value="")}}},N=()=>{var I;(I=T.current)==null||I.click()};return b.jsxs("div",{className:"h-full flex flex-col gap-4",children:[b.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(xC,{className:"w-8 h-8 text-brand-gold"}),b.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"Client Registry"})]}),b.jsx("button",{onClick:N,disabled:f,className:"bg-brand-gold text-brand-primary font-bold py-2 px-4 rounded-lg flex items-center justify-center gap-2 hover:bg-yellow-400 transition-colors disabled:bg-brand-accent disabled:cursor-not-allowed",children:f?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-brand-primary rounded-full animate-spin"}),"Processing..."]}):b.jsxs(b.Fragment,{children:[b.jsx(V5,{className:"w-5 h-5"}),"Add from Card"]})}),b.jsx("input",{type:"file",ref:T,onChange:k,className:"hidden",accept:"image/*"})]}),y&&b.jsx("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-md",children:y}),b.jsx("div",{className:"bg-brand-secondary p-4 rounded-xl shadow-lg",children:b.jsx("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:I=>h(I.target.value),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-3 focus:ring-2 focus:ring-brand-gold focus:border-brand-gold transition text-brand-text"})}),b.jsx("div",{className:"flex-1 bg-brand-secondary p-4 rounded-xl shadow-lg overflow-y-auto",children:a?b.jsxs("div",{className:"flex items-center justify-center h-full text-brand-light",children:[b.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-brand-gold rounded-full animate-spin"}),b.jsx("p",{className:"ml-4",children:"Loading Clients..."})]}):t.role===Ft.Client?b.jsx("div",{className:"flex items-center justify-center h-full text-brand-light",children:b.jsx("p",{children:"Client-specific dashboard view coming soon."})}):C.length>0?b.jsx(H5,{clients:C,users:r}):b.jsx("div",{className:"flex items-center justify-center h-full text-brand-light",children:b.jsx("p",{children:c?"No clients match your search.":"You have no clients assigned."})})})]})},kC=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),G5=t=>{switch(t){case ni.Draft:return"bg-gray-500/20 text-gray-300";case ni.Signed:return"bg-green-500/20 text-green-300";case ni.Expired:return"bg-red-500/20 text-red-300";default:return"bg-brand-primary"}},J5=({contracts:t,users:e})=>{const n=new Map(e.map(o=>[o.id,o.name])),r=o=>new Date(o).toLocaleDateString();return b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full text-left table-auto",children:[b.jsx("thead",{className:"border-b border-brand-accent",children:b.jsxs("tr",{children:[b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider",children:"Developer/Client Name"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider hidden md:table-cell",children:"Type"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider hidden lg:table-cell",children:"Created By"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider hidden sm:table-cell",children:"Date Signed"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider hidden sm:table-cell",children:"Date Expiry"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider",children:"Status"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider",children:"Document"})]})}),b.jsx("tbody",{className:"divide-y divide-brand-accent",children:t.map(o=>b.jsxs("tr",{className:"hover:bg-brand-accent/30 transition-colors",children:[b.jsx("td",{className:"p-4 text-brand-text font-medium",children:o.partyName}),b.jsx("td",{className:"p-4 text-brand-light hidden md:table-cell",children:o.type}),b.jsx("td",{className:"p-4 text-brand-light hidden lg:table-cell",children:n.get(o.createdBy)||"Unknown"}),b.jsx("td",{className:"p-4 text-brand-light hidden sm:table-cell",children:r(o.startDate)}),b.jsx("td",{className:"p-4 text-brand-light hidden sm:table-cell",children:r(o.expiryDate)}),b.jsx("td",{className:"p-4",children:b.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${G5(o.status)}`,children:o.status})}),b.jsx("td",{className:"p-4",children:b.jsx("a",{href:o.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"text-brand-gold hover:text-yellow-400 transition-colors","aria-label":"View Document",children:b.jsx(kC,{className:"w-5 h-5"})})})]},o.id))})]})})},Y5=t=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",strokeWidth:1.5,stroke:"currentColor",...t,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),W5=({isOpen:t,onClose:e,onSave:n,currentUser:r})=>{const[o,a]=M.useState(rs.AgencyAgreement),[l,c]=M.useState(""),[h,f]=M.useState(""),[g,y]=M.useState(""),[_,T]=M.useState(ni.Draft),[C,k]=M.useState(""),[N,I]=M.useState(!1),[L,D]=M.useState(null),$=()=>{a(rs.AgencyAgreement),c(""),f(""),y(""),T(ni.Draft),k(""),D(null)},G=()=>{$(),e()},j=async q=>{if(q.preventDefault(),!l||!h||!g||!C){D("All fields are required.");return}D(null),I(!0);const ee={type:o,partyName:l,startDate:new Date(h).toISOString(),expiryDate:new Date(g).toISOString(),status:_,documentUrl:C,createdBy:r.id};try{await hI(ee),n(),G()}catch(W){D(W instanceof Error?W.message:"Failed to create contract.")}finally{I(!1)}};return t?b.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",children:b.jsxs("div",{className:"bg-brand-secondary rounded-2xl shadow-xl w-full max-w-lg",children:[b.jsxs("header",{className:"p-4 border-b border-brand-accent flex justify-between items-center",children:[b.jsx("h2",{className:"text-xl font-bold text-brand-text",children:"Create New Contract"}),b.jsx("button",{onClick:G,className:"p-2 rounded-full hover:bg-brand-accent transition-colors",children:b.jsx(Y5,{className:"w-6 h-6 text-brand-light"})})]}),b.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[L&&b.jsx("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-md text-sm",children:L}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-brand-light mb-1",children:"Contract Type"}),b.jsx("select",{id:"type",value:o,onChange:q=>a(q.target.value),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text",children:Object.values(rs).map(q=>b.jsx("option",{value:q,children:q},q))})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"partyName",className:"block text-sm font-medium text-brand-light mb-1",children:"Developer/Client Legal Name"}),b.jsx("input",{type:"text",id:"partyName",value:l,onChange:q=>c(q.target.value),placeholder:"e.g., Emaar Properties PJSC",className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text"})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-brand-light mb-1",children:"Date Signed"}),b.jsx("input",{type:"date",id:"startDate",value:h,onChange:q=>f(q.target.value),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-brand-light mb-1",children:"Date Expiry"}),b.jsx("input",{type:"date",id:"expiryDate",value:g,onChange:q=>y(q.target.value),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text"})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-brand-light mb-1",children:"Status"}),b.jsx("select",{id:"status",value:_,onChange:q=>T(q.target.value),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text",children:Object.values(ni).map(q=>b.jsx("option",{value:q,children:q},q))})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"documentUrl",className:"block text-sm font-medium text-brand-light mb-1",children:"Google Drive Link"}),b.jsx("input",{type:"url",id:"documentUrl",value:C,onChange:q=>k(q.target.value),placeholder:"https://docs.google.com/...",className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text"})]}),b.jsxs("footer",{className:"pt-4 flex justify-end items-center gap-3",children:[b.jsx("button",{type:"button",onClick:G,className:"bg-brand-accent text-brand-text font-semibold py-2 px-4 rounded-lg hover:bg-brand-light hover:text-brand-primary transition-colors",children:"Cancel"}),b.jsx("button",{type:"submit",disabled:N,className:"bg-brand-gold text-brand-primary font-bold py-2 px-4 rounded-lg hover:bg-yellow-400 disabled:bg-brand-accent disabled:cursor-not-allowed transition-colors",children:N?"Saving...":"Save Contract"})]})]})]})}):null},K5=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),IC=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),X5=({currentUser:t})=>{const[e,n]=M.useState([]),[r,o]=M.useState([]),[a,l]=M.useState(!0),[c,h]=M.useState(null),[f,g]=M.useState(!1),[y,_]=M.useState("All"),T=async()=>{try{l(!0);const[I,L]=await Promise.all([fI(),cw.getAll()]);n(I),o(L),h(null)}catch{h("Failed to load data.")}finally{l(!1)}};M.useEffect(()=>{T()},[]);const C=()=>{T()},k=M.useMemo(()=>e.filter(I=>t.role===Ft.Owner||t.role===Ft.Admin?!0:I.createdBy===t.id).filter(I=>y==="All"?!0:I.status===y),[e,t,y]),N=["All",ni.Draft,ni.Signed,ni.Expired];return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"h-full flex flex-col gap-4",children:[b.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(K5,{className:"w-8 h-8 text-brand-gold"}),b.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"Contracts Management"})]}),b.jsxs("button",{onClick:()=>g(!0),className:"bg-brand-gold text-brand-primary font-bold py-2 px-4 rounded-lg flex items-center justify-center gap-2 hover:bg-yellow-400 transition-colors",children:[b.jsx(IC,{className:"w-5 h-5"}),"New Contract"]})]}),c&&b.jsx("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-md",children:c}),b.jsx("div",{className:"flex items-center gap-2 bg-brand-secondary p-2 rounded-lg",children:N.map(I=>b.jsx("button",{onClick:()=>_(I),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-colors ${y===I?"bg-brand-gold text-brand-primary":"text-brand-light hover:bg-brand-accent hover:text-brand-text"}`,children:I},I))}),b.jsx("div",{className:"flex-1 bg-brand-secondary p-4 rounded-xl shadow-lg overflow-y-auto",children:a?b.jsxs("div",{className:"flex items-center justify-center h-full text-brand-light",children:[b.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-brand-gold rounded-full animate-spin"}),b.jsx("p",{className:"ml-4",children:"Loading Contracts..."})]}):k.length>0?b.jsx(J5,{contracts:k,users:r}):b.jsx("div",{className:"flex items-center justify-center h-full text-brand-light",children:b.jsx("p",{children:"No contracts match the current filter."})})})]}),b.jsx(W5,{isOpen:f,onClose:()=>g(!1),onSave:C,currentUser:t})]})},Q5=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.5 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})}),Z5=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m9.75 11.375c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375"})}),e3=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),t3=`You are an expert real estate marketing content designer.
Create a promotional image for a real estate campaign, optimized for digital ads or social media posts.

 Objective:

Generate a visually captivating ad image that highlights either:

A project/development (multiple units or towers), or

A specific property/unit (individual apartment, villa, townhouse).

 Input Sources:

Factsheet  developer name, project name, handover date, payment plan, amenities, project location

Brochure  property types, floor plans, elevations

Image Input (if provided)  project render or unit photo (should be incorporated into the composition)

 Visual Composition:

Use premium real estate aesthetic: elegant lighting, realistic architecture, professional layout.

Display:

Developer name & logo

Project name & location

Key selling points (34 bullets)

Property types available (14 BR apartments / villas)

Handover date

Payment plan summary (e.g., 70/30, post-handover options)

If off-plan: include Launch Date and EOI Now Open badge.

For unit-specific ads, replace general info with:

Floor plan snapshot

Unit size (sq.ft or sq.m)

Key features (balcony, sea view, open kitchen, etc.)

View Floor Plan or Book a Viewing button visual.

Always include a Call-to-Action button (CTA) with one of:

Register Interest 

Visit Landing Page 

Book Viewing 

Add brand color overlays and a soft gradient for text readability.

 Output Requirements:

Format: Landscape (16:9) for digital ads OR Square (1:1) for social media.

Professional, high-resolution composition.

Text hierarchy: large project name  medium tagline  smaller details  clear CTA button.

Optional QR code area linking to the projects landing page.

 Example Concept:

Luxury Waterfront Living  Marina Vista by Emaar
Handover Q4 2025 | 80/20 Payment Plan
Register Your EOI Now 

Now generate the ad image composition, visually integrating all major details.
If an image input is provided, make it the central visual focus.`,n3=`You are a professional real estate video director creating a high-conversion marketing video for a real estate project or unit.
The video should merge brand visuals with property walkthroughs, emphasizing lifestyle, trust, and urgency.

 Objective:

Produce a 3060 second promotional video that visually communicates:

Developer reputation

Project features or unit details

Payment and handover info

Call-to-action with landing page link

 Input Sources:

Factsheet: project name, developer, handover, payment plan, amenities, property types.

Brochure: floor plan, design, and unit-specific elevation.

Video Inputs:

Developers video content (renders, promotional visuals)

Property advisors walkthrough video (authentic on-site or model walkthrough)

Combine these inputs into a cohesive, professional sequence.

 Video Structure & Scene Guide:

Scene 1  Intro (35 sec)

Smooth cinematic intro with project logo and tagline

Background: hero shot of the tower/community

Overlay text:

Project name

Location

Developer logo

Scene 2  Developer Highlights (58 sec)

Use developers branded footage.

Display project overview, architectural renders, or location aerials.

Overlay text:

Luxury 14 BR Apartments or Waterfront Villas by [Developer]

Handover [Quarter/Year]

Scene 3  Amenities & Lifestyle (810 sec)

Footage: pool, gym, community view, kids area.

Overlay text: Resort-Style Amenities / Smart Home Ready / Vibrant Community.

Scene 4  Property Walkthrough (1015 sec)

Merge developer footage with advisor walkthrough video seamlessly.

Transition to advisor voiceover or captions describing unit highlights.

Overlay: Spacious 2BR  1,350 sq.ft | Sea View | Open Kitchen.

Scene 5  Floor Plan & Payment Info (58 sec)

Show floor plan snapshot or animated layout.

Overlay text:

Starting from AED [price]

Payment Plan: 70/30 | Post-Handover Options.

Scene 6  Launch / EOI Section (if Off-Plan)

Text:

Launches [Date]

EOI Now Open  Reserve Your Spot.

Animation of the landing page preview or QR code.

Scene 7  CTA Outro (5 sec)

Strong CTA overlay:

Register Your Interest  [Landing Page URL]

Book a Viewing Today 

Include agency logo + developer logo side by side.

Soft fade-out with tagline music.

 Output Requirements:

Duration: 3060 seconds

Aspect ratio: 16:9 (YouTube/landing) or 9:16 (Instagram/TikTok ads)

Combine both developer visuals + advisor walkthrough fluidly

Maintain premium tone, real estate branding, and modern transitions

Add smooth background music, clean text overlays, and clear CTA ending.

 Example Summary Script:

Introducing Marina Vista by Emaar  where luxury meets the waterfront.
Choose from 14 BR apartments with flexible 80/20 payment plans.
Handover Q4 2025.
Register your EOI now at [landing page link].

Now generate the video concept, combining visuals, text overlays, and CTA flow according to the structure above.`,lE=({title:t,promptText:e})=>{const[n,r]=M.useState(!1),o=()=>{navigator.clipboard.writeText(e).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)})};return b.jsxs("div",{className:"bg-brand-secondary rounded-xl shadow-lg flex flex-col h-full",children:[b.jsxs("div",{className:"p-4 border-b border-brand-accent flex justify-between items-center",children:[b.jsx("h3",{className:"text-lg font-bold text-brand-gold",children:t}),b.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm bg-brand-primary text-brand-light font-semibold py-2 px-3 rounded-lg hover:bg-brand-accent hover:text-brand-text transition-colors",children:[n?b.jsx(e3,{className:"w-5 h-5 text-green-400"}):b.jsx(Z5,{className:"w-5 h-5"}),n?"Copied!":"Copy Prompt"]})]}),b.jsx("div",{className:"p-6 overflow-y-auto",children:b.jsx("pre",{className:"text-brand-light text-sm whitespace-pre-wrap font-sans",children:e})})]})},r3=()=>b.jsxs("div",{className:"h-full flex flex-col gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Q5,{className:"w-8 h-8 text-brand-gold"}),b.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"AI Content Master Prompts"})]}),b.jsx("p",{className:"text-brand-light max-w-4xl",children:"This is your central library for high-performance AI prompts. Use these templates as a starting point for generating consistent, on-brand creative content for your marketing campaigns."}),b.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-8 mt-4",children:[b.jsx(lE,{title:" Image Content Generator",promptText:t3}),b.jsx(lE,{title:" Video Content Generator (Veo)",promptText:n3})]})]}),i3=({onLogin:t,onClientLogin:e,onStaffRegister:n})=>b.jsxs("div",{className:"min-h-screen bg-cover bg-center flex flex-col items-center justify-center text-white",style:{backgroundImage:"url(https://images.unsplash.com/photo-1613490493576-7fde63acd811?q=80&w=2071&auto=format&fit=crop)"},children:[b.jsx("div",{className:"absolute inset-0 bg-black/60 z-0"}),b.jsxs("div",{className:"relative z-10 text-center p-8 max-w-3xl flex flex-col items-center",children:[b.jsx("h1",{className:"text-5xl md:text-6xl font-bold",children:"Welcome to Darie"}),b.jsx("p",{className:"text-xl text-brand-gold mt-2 mb-4 font-semibold",children:"Your Real Estate AI Partner"}),b.jsx("p",{className:"text-lg md:text-xl text-brand-light mb-8",children:"The all-in-one AI-powered operating system for elite real estate agencies. Streamline content creation, gain market intelligence, and manage clientsall in one place."}),b.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[b.jsx("button",{onClick:t,className:"bg-brand-gold text-brand-primary font-bold py-3 px-8 rounded-lg text-lg hover:bg-yellow-400 transition-colors shadow-lg",children:"Login"}),b.jsx("button",{onClick:e,className:"bg-white text-brand-primary font-bold py-3 px-8 rounded-lg text-lg hover:bg-gray-100 transition-colors shadow-lg border-2 border-brand-gold",children:"Client Sign Up"})]}),b.jsx("button",{onClick:n,className:"mt-6 text-brand-light hover:text-brand-gold transition-colors text-sm font-medium underline",children:"Staff Registration"})]}),b.jsx("footer",{className:"absolute bottom-4 text-sm text-brand-light/70 z-10",children:b.jsx("p",{children:" 2025 Darie. Powering elite real estate agencies."})})]}),RC=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h18M3 21h18"})}),o3=({listing:t})=>{const e=n=>`AED ${n.toLocaleString()}`;return b.jsxs("div",{className:"bg-brand-primary rounded-lg overflow-hidden border border-brand-accent flex flex-col md:flex-row",children:[b.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full md:w-64 h-48 md:h-auto object-cover"}),b.jsxs("div",{className:"p-6 flex flex-col justify-between",children:[b.jsxs("div",{children:[b.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full mb-2 inline-block ${t.status==="For Sale"?"bg-green-500/20 text-green-300":"bg-gray-500/20 text-gray-300"}`,children:t.status}),b.jsx("h4",{className:"font-bold text-xl text-brand-text",children:t.title}),b.jsx("p",{className:"text-md text-brand-light",children:t.address})]}),b.jsxs("div",{className:"flex flex-wrap items-baseline gap-x-6 gap-y-2 mt-4",children:[b.jsx("p",{className:"text-2xl font-bold text-brand-gold",children:e(t.price)}),b.jsxs("div",{className:"flex gap-4 text-brand-light",children:[b.jsxs("span",{children:[t.bedrooms," Beds"]}),b.jsxs("span",{children:[t.bathrooms," Baths"]}),b.jsxs("span",{children:[t.sqft.toLocaleString()," sqft"]})]})]})]})]})},s3=({currentUser:t})=>{const[e,n]=M.useState([]),[r,o]=M.useState(!0);return M.useEffect(()=>{(async()=>{o(!0);try{const l=await mI(t.id);n(l)}catch(l){console.error("Failed to fetch listings:",l)}finally{o(!1)}})()},[t.id]),b.jsxs("div",{className:"h-full flex flex-col gap-6",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(RC,{className:"w-8 h-8 text-brand-gold"}),b.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"My Listings"})]}),b.jsx("div",{className:"flex-1 space-y-6 overflow-y-auto",children:r?b.jsx("div",{className:"text-center p-8 text-brand-light",children:"Loading your listings..."}):e.length>0?e.map(a=>b.jsx(o3,{listing:a},a.id)):b.jsx("div",{className:"text-center p-8 text-brand-light",children:"You do not have any active listings with us."})})]})},a3=t=>b.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193l-3.722.537a56.029 56.029 0 01-4.908 0l-3.722-.537C5.347 17.1 4.5 16.136 4.5 15v-4.286c0-.97.616-1.813 1.5-2.097v6.096c0 .662.537 1.2 1.2 1.2h10.2c.663 0 1.2-.538 1.2-1.2v-6.096z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 7.5l-3.75 3-3.75-3"})]}),NC=t=>b.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955a.75.75 0 011.06 0l8.955 8.955a.75.75 0 01-1.06 1.06L12 4.061 3.31 12.75a.75.75 0 01-1.06-1.06l.001-.001z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.25a.75.75 0 01.75.75v6a.75.75 0 01-1.5 0v-6a.75.75 0 01.75-.75z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12.75v6a2.25 2.25 0 002.25 2.25h12a2.25 2.25 0 002.25-2.25v-6"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 12.75a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})]}),MC=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"})}),l3=({className:t})=>b.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),u3=[{id:zi.AI,label:"Ask AI Assistant",icon:a3},{id:zi.MapAssistant,label:"Map Assistant",icon:l3},{id:zi.Listings,label:"My Listings",icon:RC},{id:zi.Mortgage,label:"Mortgage Calculator",icon:NC},{id:zi.Vault,label:"My Vault",icon:MC}],c3=({currentView:t,setCurrentView:e})=>b.jsx("aside",{className:"bg-brand-secondary w-20 sm:w-72 flex-shrink-0 flex flex-col items-center sm:items-stretch border-r border-brand-accent",children:b.jsx("nav",{className:"p-4 space-y-3 mt-4",children:u3.map(n=>b.jsxs("button",{onClick:()=>e(n.id),className:`flex items-center gap-4 p-3 rounded-lg w-full transition-colors ${t===n.id?"bg-brand-accent text-brand-text font-bold":"text-brand-light hover:bg-brand-primary/50 hover:text-brand-text"}`,title:n.label,children:[b.jsx(n.icon,{className:"w-6 h-6 shrink-0"}),b.jsx("span",{className:"hidden sm:block",children:n.label})]},n.id))})}),d3=()=>{const[t,e]=M.useState(2e6),[n,r]=M.useState(20),[o,a]=M.useState(4.5),[l,c]=M.useState(25),h=g=>`AED ${g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,f=M.useMemo(()=>{const g=t*(1-n/100);if(g<=0)return 0;const y=o/100/12;if(y<=0)return 0;const _=l*12;return _<=0?0:g*(y*Math.pow(1+y,_)/(Math.pow(1+y,_)-1))},[t,n,o,l]);return b.jsxs("div",{className:"h-full flex flex-col gap-6",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(NC,{className:"w-8 h-8 text-brand-gold"}),b.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"Mortgage Calculator"})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[b.jsxs("div",{className:"bg-brand-secondary p-6 rounded-xl shadow-lg space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-brand-light mb-1",children:"Property Price (AED)"}),b.jsx("input",{type:"number",id:"price",value:t,onChange:g=>e(Number(g.target.value)),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"downPayment",className:"block text-sm font-medium text-brand-light mb-1",children:"Down Payment (%)"}),b.jsx("input",{type:"number",id:"downPayment",value:n,onChange:g=>r(Number(g.target.value)),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text"}),b.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:g=>r(Number(g.target.value)),className:"w-full h-2 bg-brand-primary rounded-lg appearance-none cursor-pointer mt-2"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"interestRate",className:"block text-sm font-medium text-brand-light mb-1",children:"Interest Rate (%)"}),b.jsx("input",{type:"number",step:"0.1",id:"interestRate",value:o,onChange:g=>a(Number(g.target.value)),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"loanTerm",className:"block text-sm font-medium text-brand-light mb-1",children:"Loan Term (Years)"}),b.jsx("input",{type:"number",id:"loanTerm",value:l,onChange:g=>c(Number(g.target.value)),className:"w-full bg-brand-primary border border-brand-accent rounded-md p-2 focus:ring-2 focus:ring-brand-gold text-brand-text"})]})]}),b.jsxs("div",{className:"bg-brand-secondary p-6 rounded-xl shadow-lg flex flex-col items-center justify-center text-center",children:[b.jsx("p",{className:"text-brand-light",children:"Estimated Monthly Payment"}),b.jsx("p",{className:"text-5xl font-bold text-brand-gold my-4",children:h(f)}),b.jsxs("div",{className:"w-full mt-4 space-y-2 text-sm",children:[b.jsxs("div",{className:"flex justify-between p-3 bg-brand-primary/50 rounded-md",children:[b.jsx("span",{className:"text-brand-light",children:"Loan Amount"}),b.jsx("span",{className:"font-semibold text-brand-text",children:h(t*(1-n/100))})]}),b.jsxs("div",{className:"flex justify-between p-3 bg-brand-primary/50 rounded-md",children:[b.jsx("span",{className:"text-brand-light",children:"Total Interest Paid"}),b.jsx("span",{className:"font-semibold text-brand-text",children:h(f*l*12-t*(1-n/100))})]}),b.jsxs("div",{className:"flex justify-between p-3 bg-brand-primary/50 rounded-md",children:[b.jsx("span",{className:"text-brand-light",children:"Total Payment"}),b.jsx("span",{className:"font-semibold text-brand-text",children:h(f*l*12)})]})]}),b.jsx("p",{className:"text-xs text-brand-light/50 mt-6",children:"This is an estimate for informational purposes only. Consult with a financial advisor for precise figures."})]})]})]})},f3=({currentUser:t})=>{const[e,n]=M.useState([]),[r,o]=M.useState(!0),[a,l]=M.useState(!1),c=M.useRef(null),h=async()=>{o(!0);try{const y=await gI(t.id);n(y)}catch(y){console.error("Failed to fetch vault documents:",y)}finally{o(!1)}};M.useEffect(()=>{h()},[t.id]);const f=()=>{var y;(y=c.current)==null||y.click()},g=async y=>{var T;const _=(T=y.target.files)==null?void 0:T[0];if(_){l(!0);try{const C={clientId:t.id,name:_.name,type:"Other",uploadDate:new Date().toISOString(),url:"#"};await yI(C),h()}catch(C){console.error("Failed to upload document",C)}finally{l(!1),c.current&&(c.current.value="")}}};return b.jsxs("div",{className:"h-full flex flex-col gap-6",children:[b.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(MC,{className:"w-8 h-8 text-brand-gold"}),b.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"My Vault"})]}),b.jsx("button",{onClick:f,disabled:a,className:"bg-brand-gold text-brand-primary font-bold py-2 px-4 rounded-lg flex items-center justify-center gap-2 hover:bg-yellow-400 disabled:bg-brand-accent disabled:cursor-not-allowed",children:a?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-brand-primary rounded-full animate-spin"}),"Uploading..."]}):b.jsxs(b.Fragment,{children:[b.jsx(AC,{className:"w-5 h-5"}),"Upload Document"]})}),b.jsx("input",{type:"file",ref:c,onChange:g,className:"hidden"})]}),b.jsxs("div",{className:"flex-1 bg-brand-secondary p-4 rounded-xl shadow-lg overflow-y-auto",children:[r?b.jsx("div",{className:"text-center p-8 text-brand-light",children:"Loading documents..."}):b.jsxs("table",{className:"w-full text-left table-auto",children:[b.jsx("thead",{className:"border-b border-brand-accent",children:b.jsxs("tr",{children:[b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider",children:"Document Name"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider hidden md:table-cell",children:"Type"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider hidden sm:table-cell",children:"Date Uploaded"}),b.jsx("th",{className:"p-4 text-sm font-semibold text-brand-light tracking-wider",children:"Link"})]})}),b.jsx("tbody",{className:"divide-y divide-brand-accent",children:e.map(y=>b.jsxs("tr",{className:"hover:bg-brand-accent/30 transition-colors",children:[b.jsx("td",{className:"p-4 text-brand-text font-medium",children:y.name}),b.jsx("td",{className:"p-4 text-brand-light hidden md:table-cell",children:y.type}),b.jsx("td",{className:"p-4 text-brand-light hidden sm:table-cell",children:new Date(y.uploadDate).toLocaleDateString()}),b.jsx("td",{className:"p-4",children:b.jsx("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"text-brand-gold hover:text-yellow-400",children:b.jsx(kC,{className:"w-5 h-5"})})})]},y.id))})]}),!r&&e.length===0&&b.jsx("div",{className:"text-center p-8 text-brand-light",children:"Your vault is empty. Upload your first document to get started."})]})]})},h3=({sessions:t,activeSessionId:e,onNewSession:n,onSelectSession:r,isOpen:o,setIsOpen:a})=>b.jsxs("aside",{className:`bg-brand-secondary flex-shrink-0 flex flex-col transition-all duration-300 ${o?"w-72":"w-0"}`,children:[b.jsx("div",{className:`p-4 border-b border-brand-accent flex-shrink-0 flex justify-between items-center overflow-hidden ${!o&&"hidden"}`,children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Yp,{className:"w-7 h-7 text-brand-gold"}),b.jsx("h1",{className:"text-lg font-bold tracking-wider",children:"Client AI"})]})}),b.jsx("div",{className:`p-2 overflow-hidden ${!o&&"hidden"}`,children:b.jsxs("button",{onClick:n,className:"w-full flex items-center gap-3 p-3 rounded-lg text-left text-brand-text bg-brand-primary hover:bg-brand-accent transition-colors",children:[b.jsx(IC,{className:"w-5 h-5"}),"New Conversation"]})}),b.jsx("nav",{className:`flex-1 overflow-y-auto p-2 space-y-1 overflow-hidden ${!o&&"hidden"}`,children:t.map(l=>b.jsx("button",{onClick:()=>r(l.id),className:`w-full text-left p-3 rounded-lg truncate text-sm transition-colors ${e===l.id?"bg-brand-accent font-semibold":"text-brand-light hover:bg-brand-primary/50"}`,children:l.title},l.id))})]}),p3=/\*\*(.*?)\*\*/g,Jd=t=>{const e=[];let n=0;return t.replace(p3,(r,o,a)=>(a>n&&e.push(t.substring(n,a)),e.push(b.jsx("strong",{children:o},a)),n=a+r.length,r)),n<t.length&&e.push(t.substring(n)),b.jsx(b.Fragment,{children:e.map((r,o)=>b.jsx(We.Fragment,{children:r},o))})},m3=({content:t})=>{const e=t.split(`
`),n=[];let r=[],o=!1,a=[],l=[];const c=()=>{r.length>0&&(n.push(b.jsx("ul",{className:"list-disc list-inside space-y-1 my-2 pl-4",children:r},`ul-${n.length}`)),r=[])},h=()=>{a.length>0&&n.push(b.jsx("div",{className:"overflow-x-auto my-4 border border-brand-accent rounded-lg",children:b.jsxs("table",{className:"w-full text-left border-collapse",children:[b.jsx("thead",{children:b.jsx("tr",{className:"bg-brand-accent/30",children:a.map((f,g)=>b.jsx("th",{className:"p-3 text-sm font-semibold text-brand-text",children:Jd(f)},g))})}),b.jsx("tbody",{children:l.map((f,g)=>b.jsx("tr",{className:"border-t border-brand-accent hover:bg-brand-accent/20 transition-colors",children:f.map((y,_)=>b.jsx("td",{className:"p-3 text-sm text-brand-light",children:Jd(y)},_))},g))})]},`table-${n.length}`)},`table-wrapper-${n.length}`)),o=!1,a=[],l=[]};return e.forEach((f,g)=>{var _;const y=f.trim();if(y.startsWith("|")&&y.endsWith("|")){c();const T=y.split("|").slice(1,-1).map(C=>C.trim());if(!o)o=!0,a=T;else{if(T.every(C=>/^-+$/.test(C.replace(/ /g,""))))return;l.push(T)}}else o&&h(),f.startsWith("## ")?(c(),n.push(b.jsx("h2",{className:"text-xl font-bold text-brand-text mt-6 mb-2 border-b border-brand-accent pb-1",children:Jd(f.substring(3))},g))):f.startsWith("# ")?(c(),n.push(b.jsx("h1",{className:"text-2xl font-bold text-brand-gold mt-4 mb-3",children:Jd(f.substring(2))},g))):y.startsWith("- ")?r.push(b.jsx("li",{children:Jd(y.substring(2))},g)):y===""?(c(),n.length>0&&!((_=n[n.length-1].key)!=null&&_.toString().includes("spacer"))&&n.push(b.jsx("div",{className:"h-2"},`spacer-${g}`))):(c(),n.push(b.jsx("p",{className:"my-2",children:Jd(f)},g)))}),h(),c(),b.jsx("div",{className:"text-brand-text max-w-none",children:n})},g3=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.195.025.39.044.588.05H11.25m-3.442 2.186c.195-.025.39-.044.588-.05H11.25m0 0a2.25 2.25 0 002.25-2.25m-2.25 2.25a2.25 2.25 0 01-2.25-2.25M15 5.25a2.25 2.25 0 00-2.25-2.25H7.5A2.25 2.25 0 005.25 5.25v13.5A2.25 2.25 0 007.5 21h7.5a2.25 2.25 0 002.25-2.25V5.25z"})}),y3=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:b.jsx("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})}),v3=t=>b.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),b3=({message:t})=>{const e=t.role==="model";return b.jsx("div",{className:`flex gap-4 my-4 ${e?"justify-start":"justify-end"}`,children:b.jsxs("div",{className:`w-fit max-w-2xl p-4 rounded-2xl ${e?"bg-brand-secondary rounded-tl-none":"bg-brand-gold text-brand-primary rounded-br-none"}`,children:[b.jsx(m3,{content:t.content}),t.sources&&t.sources.length>0&&b.jsxs("div",{className:"mt-4 pt-2 border-t border-brand-accent/30",children:[b.jsx("h4",{className:"text-xs font-bold text-brand-light mb-1",children:"Sources:"}),b.jsx("ul",{className:"list-decimal list-inside space-y-1 text-xs",children:t.sources.map((n,r)=>n.web&&b.jsx("li",{children:b.jsx("a",{href:n.web.uri,target:"_blank",rel:"noopener noreferrer",className:`${e?"text-brand-gold/80 hover:text-brand-gold":"text-blue-800 hover:text-blue-600"} underline transition break-all`,children:n.web.title||n.web.uri})},r))})]})]})})},x3=({session:t,onSendMessage:e,isLoading:n,error:r,toggleSidebar:o})=>{const[a,l]=M.useState(""),c=M.useRef(null);M.useEffect(()=>{var y;(y=c.current)==null||y.scrollIntoView({behavior:"smooth"})},[t.messages,n]);const h=()=>{a.trim()&&!n&&(e(a.trim()),l(""))},f=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),h())},g=()=>{navigator.clipboard.writeText(`Shared conversation: ${t.title}
(URL functionality not implemented)`),alert("Conversation details copied to clipboard (simulation).")};return b.jsxs("div",{className:"flex-1 flex flex-col h-full bg-brand-primary",children:[b.jsxs("header",{className:"p-4 border-b border-brand-accent flex justify-between items-center flex-shrink-0",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("button",{onClick:o,className:"p-2 rounded-md hover:bg-brand-secondary",children:b.jsx(v3,{className:"w-6 h-6 text-brand-light"})}),b.jsx("h2",{className:"font-bold text-lg text-brand-text truncate",children:t.title})]}),b.jsx("button",{onClick:g,className:"flex items-center gap-2 p-2 rounded-md hover:bg-brand-secondary text-brand-light hover:text-brand-text transition-colors","aria-label":"Share Conversation",children:b.jsx(g3,{className:"w-5 h-5"})})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto px-6",children:[t.messages.map((y,_)=>b.jsx(b3,{message:y},_)),n&&b.jsx("div",{className:"flex gap-4 my-4 justify-start",children:b.jsx("div",{className:"w-fit max-w-2xl p-4 rounded-2xl bg-brand-secondary rounded-tl-none",children:b.jsxs("div",{className:"flex items-center gap-2 text-brand-light",children:[b.jsx("div",{className:"w-3 h-3 bg-brand-gold rounded-full animate-pulse"}),b.jsx("div",{className:"w-3 h-3 bg-brand-gold rounded-full animate-pulse delay-75"}),b.jsx("div",{className:"w-3 h-3 bg-brand-gold rounded-full animate-pulse delay-150"})]})})}),b.jsx("div",{ref:c})]}),b.jsx("div",{className:"p-4 flex-shrink-0",children:b.jsxs("div",{className:"bg-brand-secondary rounded-xl p-2 flex items-center gap-2 border border-brand-accent focus-within:border-brand-gold transition-all",children:[b.jsx("textarea",{value:a,onChange:y=>l(y.target.value),onKeyDown:f,placeholder:"Ask me anything about Dubai real estate...",className:"w-full bg-transparent p-2 focus:outline-none resize-none text-brand-text",rows:1,disabled:n}),b.jsx("button",{onClick:h,disabled:n||!a.trim(),className:"bg-brand-gold text-brand-primary p-2 rounded-lg hover:bg-yellow-400 disabled:bg-brand-accent disabled:cursor-not-allowed transition-colors","aria-label":"Send Message",children:b.jsx(y3,{className:"w-5 h-5"})})]})})]})},w3=(t,e)=>{const[n,r]=M.useState({[Lu.Staff]:[],[Lu.Client]:[]}),[o,a]=M.useState(null),[l,c]=M.useState(!1),[h,f]=M.useState(null),g=n[e],y=k=>{r(N=>({...N,[e]:typeof k=="function"?k(N[e]):k}))};M.useEffect(()=>{var k;g.length===0?_():g.find(N=>N.id===o)||a(((k=g[0])==null?void 0:k.id)||null)},[e,t]);const _=()=>{const N=e===Lu.Client?`Hello ${t.name}, how can I assist you with your real estate needs today?`:`Hello ${t.name}. I am Pro AI, your internal assistant. How can I help you? You can ask about campaign metrics, content schedules, and more.`,I={id:`session_${Date.now()}`,title:"New Conversation",messages:[{role:"model",content:N}]};y(L=>[I,...L]),a(I.id)},T=M.useCallback(async k=>{if(!o)return;const N={role:"user",content:k},I=g.find($=>$.id===o);if(!I)return;const L=[...I.messages,N];y($=>$.map(G=>G.id===o?{...G,messages:L}:G)),c(!0),f(null);let D=!1;try{const G=await(e===Lu.Client?x5:w5)(L);if(e===Lu.Client&&G.action==="request_location"){y(j=>j.map(q=>q.id===o?{...q,messages:[...L,G]}:q)),c(!1),D=!0,navigator.geolocation.getCurrentPosition(j=>{const q=`(System Info: User location is Lat ${j.coords.latitude}, Lon ${j.coords.longitude}). Based on my location, please continue. Also, please ask if this location is significant for the search if I haven't specified another location.`;T(q)},j=>{T("(System Info: User denied location access). Please ask for a specific location name to proceed.")});return}y(j=>j.map(q=>{if(q.id===o){const ee=[...L,G],W=q.messages.length<=1?k.substring(0,40)+"...":q.title;return{...q,title:W,messages:ee}}return q}))}catch($){const G=$ instanceof Error?$.message:"An unknown error occurred.";f(G);const j={role:"model",content:G};y(q=>q.map(ee=>ee.id===o?{...ee,messages:[...L,j]}:ee))}finally{D||c(!1)}},[o,g,e]),C=g.find(k=>k.id===o);return{sessions:g,activeSessionId:o,activeSession:C,isLoading:l,error:h,handleNewSession:_,handleSendMessage:T,setActiveSessionId:a}},uE=({currentUser:t})=>{const[e,n]=M.useState(!0),{sessions:r,activeSession:o,activeSessionId:a,isLoading:l,error:c,handleNewSession:h,handleSendMessage:f,setActiveSessionId:g}=w3(t,Lu.Client),y=()=>o?b.jsx(x3,{session:o,onSendMessage:f,isLoading:l,error:c,toggleSidebar:()=>n(!e)}):b.jsx("div",{className:"flex-1 flex items-center justify-center text-brand-light",children:"Select a conversation or start a new one to ask the AI Assistant."});return b.jsxs("div",{className:"flex h-full overflow-hidden bg-brand-secondary rounded-xl shadow-lg",children:[b.jsx(h3,{sessions:r,activeSessionId:a,onNewSession:h,onSelectSession:g,isOpen:e,setIsOpen:n}),y()]})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const _3=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`;/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/function S3(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,o=0;o<r;o++)e+=String.fromCharCode(n[o]);return window.btoa(e)}class E3{constructor(e=16e3){this.sampleRate=e,this.emitter=new pC,this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter),this.recording=!1,this.starting=null}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async(e,n)=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await mC({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const r="audio-recorder-worklet",o=Ax(r,_3);await this.audioContext.audioWorklet.addModule(o),this.recordingWorklet=new AudioWorkletNode(this.audioContext,r),this.recordingWorklet.port.onmessage=async l=>{const c=l.data.data.int16arrayBuffer;if(c){const h=S3(c);this.emitter.emit("data",h)}},this.source.connect(this.recordingWorklet);const a="vu-meter";await this.audioContext.audioWorklet.addModule(Ax(a,gC)),this.vuWorklet=new AudioWorkletNode(this.audioContext,a),this.vuWorklet.port.onmessage=l=>{this.emitter.emit("volume",l.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,e(),this.starting=null})}stop(){const e=()=>{var n,r;(n=this.source)==null||n.disconnect(),(r=this.stream)==null||r.getTracks().forEach(o=>o.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0};if(this.starting){this.starting.then(e);return}e()}}const cE=t=>{const[e,n]=M.useState(!1);return M.useEffect(()=>{const r=window.matchMedia(t);r.matches!==e&&n(r.matches);const o=()=>{n(r.matches)};return r.addEventListener("change",o),()=>r.removeEventListener("change",o)},[e,t]),e};function T3({trayRef:t}){const[e,n]=M.useState(!1),[r]=M.useState(()=>new E3),[o,a]=M.useState(!0),[l,c]=M.useState(""),h=M.useRef(null),{toggleSidebar:f}=yw(),{activateEasterEggMode:g}=Qp(),y=M.useRef([]),_=cE("(max-width: 768px), (orientation: landscape) and (max-height: 768px)"),[T,C]=M.useState(!1),k=cE("(orientation: landscape) and (max-height: 768px)"),{client:N,connected:I,connect:L,disconnect:D,audioStreamer:$}=Pv();M.useEffect(()=>{$.current&&($.current.gainNode.gain.value=e?0:1)},[e,$]),M.useEffect(()=>{!I&&h.current&&h.current.focus()},[I]),M.useEffect(()=>{const z=te=>{N.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:te}])};return I&&!o&&r?(r.on("data",z),r.start()):r.stop(),()=>{r.off("data",z)}},[I,N,o,r]);const G=()=>{a(!o)},j=async z=>{if(z.preventDefault(),!l.trim())return;vn.getState().addTurn({role:"user",text:l,isFinal:!0});const te=l;if(c(""),!I){console.warn("Cannot send text message: not connected to live stream."),vn.getState().addTurn({role:"system",text:"Cannot send message. Please connect to the stream first.",isFinal:!0});return}N.sendRealtimeText(te)},q=()=>{f();const z=Date.now();y.current.push(z),y.current=y.current.filter(te=>z-te<3e3),y.current.length>=6&&(g(),vn.getState().addTurn({role:"system",text:"You've unlocked Scavenger Hunt mode!.",isFinal:!0}),y.current=[])},ee=o?"Unmute microphone":"Mute microphone",W=I?"Stop streaming":"Start streaming";return b.jsx("section",{className:"control-tray",ref:t,children:b.jsxs("nav",{className:Pu("actions-nav",{"text-entry-visible-landscape":k&&T}),children:[b.jsxs("button",{ref:h,className:Pu("action-button connect-toggle",{connected:I}),onClick:I?D:L,"aria-label":W,children:[b.jsx("span",{className:"material-symbols-outlined filled",children:I?"pause":"play_arrow"}),b.jsx("span",{className:"button-tooltip",children:W})]}),b.jsxs("button",{type:"button","aria-label":e?"Audio output off":"Audio output on",className:Pu("action-button",{"speaker-on":!e,"speaker-off":e}),onClick:()=>n(!e),children:[b.jsx("span",{className:"material-symbols-outlined",children:e?"volume_off":"volume_up"}),b.jsx("span",{className:"button-tooltip",children:e?"Unmute audio output":"Mute audio output"})]}),b.jsxs("button",{className:Pu("action-button mic-button",{"mic-on":!o,"mic-off":o}),onClick:G,"aria-label":ee,children:[o?b.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):b.jsx("span",{className:"material-symbols-outlined filled",children:"mic"}),b.jsx("span",{className:"button-tooltip",children:ee})]}),b.jsxs("button",{className:Pu("action-button keyboard-toggle-button"),onClick:()=>C(!T),"aria-label":"Toggle text input",children:[b.jsx("span",{className:"icon",children:T?"keyboard_hide":"keyboard"}),b.jsx("span",{className:"button-tooltip",children:"Toggle text input"})]}),(!_||T)&&b.jsxs("form",{className:"prompt-form",onSubmit:j,children:[b.jsx("input",{type:"text",className:"prompt-input",placeholder:I?"Type a message...":"Connect to start typing...",value:l,onChange:z=>c(z.target.value),"aria-label":"Text prompt",disabled:!I}),b.jsx("button",{type:"submit",className:"send-button",disabled:!l.trim()||!I,"aria-label":"Send message",children:b.jsx("span",{className:"icon",children:"send"})})]}),b.jsxs("button",{className:Pu("action-button"),onClick:q,"aria-label":"Settings",children:[b.jsx("span",{className:"icon",children:"tune"}),b.jsx("span",{className:"button-tooltip",children:"Settings"})]})]})})}const C3=M.memo(T3);function A3(){var c;const{client:t}=Pv(),[e,n]=M.useState(null);M.useEffect(()=>{function h(f){console.error(f),n(f)}return t.on("error",h),()=>{t.off("error",h)}},[t]);const r="Gemini Live API in AI Studio has a limited free quota each day. Come back tomorrow to continue.";let o="Something went wrong. Please try again.",a=(e==null?void 0:e.message)||null,l=!0;return(c=e==null?void 0:e.message)!=null&&c.includes("RESOURCE_EXHAUSTED")&&(o=r,a=null,l=!1),e?b.jsxs("div",{className:"error-screen",children:[b.jsx("div",{style:{fontSize:48},children:""}),b.jsx("div",{className:"error-message-container",style:{fontSize:22,lineHeight:1.2,opacity:.5},children:o}),l?b.jsx("button",{className:"close-button",onClick:()=>{n(null)},children:"Close"}):null,a?b.jsx("div",{className:"error-raw-message-container",style:{fontSize:15,lineHeight:1.2,opacity:.4},children:a}):null]}):b.jsx("div",{style:{display:"none"}})}function k3(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const I3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,R3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,N3={};function dE(t,e){return(N3.jsx?R3:I3).test(t)}const M3=/[ \t\n\f\r]/g;function D3(t){return typeof t=="object"?t.type==="text"?fE(t.value):!1:fE(t)}function fE(t){return t.replace(M3,"")===""}class lm{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}lm.prototype.normal={};lm.prototype.property={};lm.prototype.space=void 0;function DC(t,e){const n={},r={};for(const o of t)Object.assign(n,o.property),Object.assign(r,o.normal);return new lm(n,r,e)}function Ix(t){return t.toLowerCase()}class ri{constructor(e,n){this.attribute=n,this.property=e}}ri.prototype.attribute="";ri.prototype.booleanish=!1;ri.prototype.boolean=!1;ri.prototype.commaOrSpaceSeparated=!1;ri.prototype.commaSeparated=!1;ri.prototype.defined=!1;ri.prototype.mustUseProperty=!1;ri.prototype.number=!1;ri.prototype.overloadedBoolean=!1;ri.prototype.property="";ri.prototype.spaceSeparated=!1;ri.prototype.space=void 0;let P3=0;const ot=tc(),_n=tc(),Rx=tc(),Ae=tc(),Gt=tc(),lf=tc(),_i=tc();function tc(){return 2**++P3}const Nx=Object.freeze(Object.defineProperty({__proto__:null,boolean:ot,booleanish:_n,commaOrSpaceSeparated:_i,commaSeparated:lf,number:Ae,overloadedBoolean:Rx,spaceSeparated:Gt},Symbol.toStringTag,{value:"Module"})),kb=Object.keys(Nx);class bw extends ri{constructor(e,n,r,o){let a=-1;if(super(e,n),hE(this,"space",o),typeof r=="number")for(;++a<kb.length;){const l=kb[a];hE(this,kb[a],(r&Nx[l])===Nx[l])}}}bw.prototype.defined=!0;function hE(t,e,n){n&&(t[e]=n)}function Ef(t){const e={},n={};for(const[r,o]of Object.entries(t.properties)){const a=new bw(r,t.transform(t.attributes||{},r),o,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[Ix(r)]=r,n[Ix(a.attribute)]=r}return new lm(e,n,t.space)}const PC=Ef({properties:{ariaActiveDescendant:null,ariaAtomic:_n,ariaAutoComplete:null,ariaBusy:_n,ariaChecked:_n,ariaColCount:Ae,ariaColIndex:Ae,ariaColSpan:Ae,ariaControls:Gt,ariaCurrent:null,ariaDescribedBy:Gt,ariaDetails:null,ariaDisabled:_n,ariaDropEffect:Gt,ariaErrorMessage:null,ariaExpanded:_n,ariaFlowTo:Gt,ariaGrabbed:_n,ariaHasPopup:null,ariaHidden:_n,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gt,ariaLevel:Ae,ariaLive:null,ariaModal:_n,ariaMultiLine:_n,ariaMultiSelectable:_n,ariaOrientation:null,ariaOwns:Gt,ariaPlaceholder:null,ariaPosInSet:Ae,ariaPressed:_n,ariaReadOnly:_n,ariaRelevant:null,ariaRequired:_n,ariaRoleDescription:Gt,ariaRowCount:Ae,ariaRowIndex:Ae,ariaRowSpan:Ae,ariaSelected:_n,ariaSetSize:Ae,ariaSort:null,ariaValueMax:Ae,ariaValueMin:Ae,ariaValueNow:Ae,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function LC(t,e){return e in t?t[e]:e}function OC(t,e){return LC(t,e.toLowerCase())}const L3=Ef({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:lf,acceptCharset:Gt,accessKey:Gt,action:null,allow:null,allowFullScreen:ot,allowPaymentRequest:ot,allowUserMedia:ot,alt:null,as:null,async:ot,autoCapitalize:null,autoComplete:Gt,autoFocus:ot,autoPlay:ot,blocking:Gt,capture:null,charSet:null,checked:ot,cite:null,className:Gt,cols:Ae,colSpan:null,content:null,contentEditable:_n,controls:ot,controlsList:Gt,coords:Ae|lf,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ot,defer:ot,dir:null,dirName:null,disabled:ot,download:Rx,draggable:_n,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ot,formTarget:null,headers:Gt,height:Ae,hidden:Rx,high:Ae,href:null,hrefLang:null,htmlFor:Gt,httpEquiv:Gt,id:null,imageSizes:null,imageSrcSet:null,inert:ot,inputMode:null,integrity:null,is:null,isMap:ot,itemId:null,itemProp:Gt,itemRef:Gt,itemScope:ot,itemType:Gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ot,low:Ae,manifest:null,max:null,maxLength:Ae,media:null,method:null,min:null,minLength:Ae,multiple:ot,muted:ot,name:null,nonce:null,noModule:ot,noValidate:ot,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ot,optimum:Ae,pattern:null,ping:Gt,placeholder:null,playsInline:ot,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ot,referrerPolicy:null,rel:Gt,required:ot,reversed:ot,rows:Ae,rowSpan:Ae,sandbox:Gt,scope:null,scoped:ot,seamless:ot,selected:ot,shadowRootClonable:ot,shadowRootDelegatesFocus:ot,shadowRootMode:null,shape:null,size:Ae,sizes:null,slot:null,span:Ae,spellCheck:_n,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ae,step:null,style:null,tabIndex:Ae,target:null,title:null,translate:null,type:null,typeMustMatch:ot,useMap:null,value:_n,width:Ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Gt,axis:null,background:null,bgColor:null,border:Ae,borderColor:null,bottomMargin:Ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ot,declare:ot,event:null,face:null,frame:null,frameBorder:null,hSpace:Ae,leftMargin:Ae,link:null,longDesc:null,lowSrc:null,marginHeight:Ae,marginWidth:Ae,noResize:ot,noHref:ot,noShade:ot,noWrap:ot,object:null,profile:null,prompt:null,rev:null,rightMargin:Ae,rules:null,scheme:null,scrolling:_n,standby:null,summary:null,text:null,topMargin:Ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ot,disableRemotePlayback:ot,prefix:null,property:null,results:Ae,security:null,unselectable:null},space:"html",transform:OC}),O3=Ef({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:_i,accentHeight:Ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ae,amplitude:Ae,arabicForm:null,ascent:Ae,attributeName:null,attributeType:null,azimuth:Ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ae,by:null,calcMode:null,capHeight:Ae,className:Gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ae,diffuseConstant:Ae,direction:null,display:null,dur:null,divisor:Ae,dominantBaseline:null,download:ot,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ae,enableBackground:null,end:null,event:null,exponent:Ae,externalResourcesRequired:null,fill:null,fillOpacity:Ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:lf,g2:lf,glyphName:lf,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ae,horizOriginX:Ae,horizOriginY:Ae,id:null,ideographic:Ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ae,k:Ae,k1:Ae,k2:Ae,k3:Ae,k4:Ae,kernelMatrix:_i,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ae,overlineThickness:Ae,paintOrder:null,panose1:null,path:null,pathLength:Ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ae,pointsAtY:Ae,pointsAtZ:Ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:_i,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:_i,rev:_i,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:_i,requiredFeatures:_i,requiredFonts:_i,requiredFormats:_i,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ae,specularExponent:Ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ae,strikethroughThickness:Ae,string:null,stroke:null,strokeDashArray:_i,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ae,strokeOpacity:Ae,strokeWidth:null,style:null,surfaceScale:Ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:_i,tabIndex:Ae,tableValues:null,target:null,targetX:Ae,targetY:Ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:_i,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ae,underlineThickness:Ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ae,values:null,vAlphabetic:Ae,vMathematical:Ae,vectorEffect:null,vHanging:Ae,vIdeographic:Ae,version:null,vertAdvY:Ae,vertOriginX:Ae,vertOriginY:Ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:LC}),UC=Ef({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),BC=Ef({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:OC}),FC=Ef({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),U3={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},B3=/[A-Z]/g,pE=/-[a-z]/g,F3=/^data[-\w.:]+$/i;function j3(t,e){const n=Ix(e);let r=e,o=ri;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&F3.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(pE,q3);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!pE.test(a)){let l=a.replace(B3,z3);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}o=bw}return new o(r,e)}function z3(t){return"-"+t.toLowerCase()}function q3(t){return t.charAt(1).toUpperCase()}const H3=DC([PC,L3,UC,BC,FC],"html"),xw=DC([PC,O3,UC,BC,FC],"svg");function V3(t){return t.join(" ").trim()}var Yd={},Ib,mE;function $3(){if(mE)return Ib;mE=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,h=`
`,f="/",g="*",y="",_="comment",T="declaration";function C(N,I){if(typeof N!="string")throw new TypeError("First argument must be a string");if(!N)return[];I=I||{};var L=1,D=1;function $(ue){var fe=ue.match(e);fe&&(L+=fe.length);var K=ue.lastIndexOf(h);D=~K?ue.length-K:D+ue.length}function G(){var ue={line:L,column:D};return function(fe){return fe.position=new j(ue),W(),fe}}function j(ue){this.start=ue,this.end={line:L,column:D},this.source=I.source}j.prototype.content=N;function q(ue){var fe=new Error(I.source+":"+L+":"+D+": "+ue);if(fe.reason=ue,fe.filename=I.source,fe.line=L,fe.column=D,fe.source=N,!I.silent)throw fe}function ee(ue){var fe=ue.exec(N);if(fe){var K=fe[0];return $(K),N=N.slice(K.length),fe}}function W(){ee(n)}function z(ue){var fe;for(ue=ue||[];fe=te();)fe!==!1&&ue.push(fe);return ue}function te(){var ue=G();if(!(f!=N.charAt(0)||g!=N.charAt(1))){for(var fe=2;y!=N.charAt(fe)&&(g!=N.charAt(fe)||f!=N.charAt(fe+1));)++fe;if(fe+=2,y===N.charAt(fe-1))return q("End of comment missing");var K=N.slice(2,fe-2);return D+=2,$(K),N=N.slice(fe),D+=2,ue({type:_,comment:K})}}function de(){var ue=G(),fe=ee(r);if(fe){if(te(),!ee(o))return q("property missing ':'");var K=ee(a),oe=ue({type:T,property:k(fe[0].replace(t,y)),value:K?k(K[0].replace(t,y)):y});return ee(l),oe}}function xe(){var ue=[];z(ue);for(var fe;fe=de();)fe!==!1&&(ue.push(fe),z(ue));return ue}return W(),xe()}function k(N){return N?N.replace(c,y):y}return Ib=C,Ib}var gE;function G3(){if(gE)return Yd;gE=1;var t=Yd&&Yd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.default=n;const e=t($3());function n(r,o){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),c=typeof o=="function";return l.forEach(h=>{if(h.type!=="declaration")return;const{property:f,value:g}=h;c?o(f,g,h):g&&(a=a||{},a[f]=g)}),a}return Yd}var Np={},yE;function J3(){if(yE)return Np;yE=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,a=function(f){return!f||n.test(f)||t.test(f)},l=function(f,g){return g.toUpperCase()},c=function(f,g){return"".concat(g,"-")},h=function(f,g){return g===void 0&&(g={}),a(f)?f:(f=f.toLowerCase(),g.reactCompat?f=f.replace(o,c):f=f.replace(r,c),f.replace(e,l))};return Np.camelCase=h,Np}var Mp,vE;function Y3(){if(vE)return Mp;vE=1;var t=Mp&&Mp.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},e=t(G3()),n=J3();function r(o,a){var l={};return!o||typeof o!="string"||(0,e.default)(o,function(c,h){c&&h&&(l[(0,n.camelCase)(c,a)]=h)}),l}return r.default=r,Mp=r,Mp}var W3=Y3();const K3=sl(W3),jC=zC("end"),ww=zC("start");function zC(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function X3(t){const e=ww(t),n=jC(t);if(e&&n)return{start:e,end:n}}function Vp(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?bE(t.position):"start"in t||"end"in t?bE(t):"line"in t||"column"in t?Mx(t):""}function Mx(t){return xE(t&&t.line)+":"+xE(t&&t.column)}function bE(t){return Mx(t&&t.start)+"-"+Mx(t&&t.end)}function xE(t){return t&&typeof t=="number"?t:1}class dr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let o="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?o=e:!a.cause&&e&&(l=!0,o=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const h=r.indexOf(":");h===-1?a.ruleId=r:(a.source=r.slice(0,h),a.ruleId=r.slice(h+1))}if(!a.place&&a.ancestors&&a.ancestors){const h=a.ancestors[a.ancestors.length-1];h&&(a.place=h.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=c?c.line:void 0,this.name=Vp(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}dr.prototype.file="";dr.prototype.name="";dr.prototype.reason="";dr.prototype.message="";dr.prototype.stack="";dr.prototype.column=void 0;dr.prototype.line=void 0;dr.prototype.ancestors=void 0;dr.prototype.cause=void 0;dr.prototype.fatal=void 0;dr.prototype.place=void 0;dr.prototype.ruleId=void 0;dr.prototype.source=void 0;const _w={}.hasOwnProperty,Q3=new Map,Z3=/[A-Z]/g,eU=new Set(["table","tbody","thead","tfoot","tr"]),tU=new Set(["td","th"]),qC="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function nU(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=cU(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=uU(n,e.jsx,e.jsxs)}const o={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?xw:H3,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=HC(o,t,void 0);return a&&typeof a!="string"?a:o.create(t,o.Fragment,{children:a||void 0},void 0)}function HC(t,e,n){if(e.type==="element")return rU(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return iU(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return sU(t,e,n);if(e.type==="mdxjsEsm")return oU(t,e);if(e.type==="root")return aU(t,e,n);if(e.type==="text")return lU(t,e)}function rU(t,e,n){const r=t.schema;let o=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(o=xw,t.schema=o),t.ancestors.push(e);const a=$C(t,e.tagName,!1),l=dU(t,e);let c=Ew(t,e);return eU.has(e.tagName)&&(c=c.filter(function(h){return typeof h=="string"?!D3(h):!0})),VC(t,l,a,e),Sw(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function iU(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Zp(t,e.position)}function oU(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Zp(t,e.position)}function sU(t,e,n){const r=t.schema;let o=r;e.name==="svg"&&r.space==="html"&&(o=xw,t.schema=o),t.ancestors.push(e);const a=e.name===null?t.Fragment:$C(t,e.name,!0),l=fU(t,e),c=Ew(t,e);return VC(t,l,a,e),Sw(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function aU(t,e,n){const r={};return Sw(r,Ew(t,e)),t.create(e,t.Fragment,r,n)}function lU(t,e){return e.value}function VC(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Sw(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function uU(t,e,n){return r;function r(o,a,l,c){const f=Array.isArray(l.children)?n:e;return c?f(a,l,c):f(a,l)}}function cU(t,e){return n;function n(r,o,a,l){const c=Array.isArray(a.children),h=ww(r);return e(o,a,l,c,{columnNumber:h?h.column-1:void 0,fileName:t,lineNumber:h?h.line:void 0},void 0)}}function dU(t,e){const n={};let r,o;for(o in e.properties)if(o!=="children"&&_w.call(e.properties,o)){const a=hU(t,o,e.properties[o]);if(a){const[l,c]=a;t.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&tU.has(e.tagName)?r=c:n[l]=c}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function fU(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Zp(t,e.position);else{const o=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,a=t.evaluater.evaluateExpression(c.expression)}else Zp(t,e.position);else a=r.value===null?!0:r.value;n[o]=a}return n}function Ew(t,e){const n=[];let r=-1;const o=t.passKeys?new Map:Q3;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const h=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(h){const f=o.get(h)||0;l=h+"-"+f,o.set(h,f+1)}}const c=HC(t,a,l);c!==void 0&&n.push(c)}return n}function hU(t,e,n){const r=j3(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?k3(n):V3(n)),r.property==="style"){let o=typeof n=="object"?n:pU(t,String(n));return t.stylePropertyNameCase==="css"&&(o=mU(o)),["style",o]}return[t.elementAttributeNameCase==="react"&&r.space?U3[r.property]||r.property:r.attribute,n]}}function pU(t,e){try{return K3(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,o=new dr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=t.filePath||void 0,o.url=qC+"#cannot-parse-style-attribute",o}}function $C(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const o=e.split(".");let a=-1,l;for(;++a<o.length;){const c=dE(o[a])?{type:"Identifier",name:o[a]}:{type:"Literal",value:o[a]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}r=l}else r=dE(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const o=r.value;return _w.call(t.components,o)?t.components[o]:o}if(t.evaluater)return t.evaluater.evaluateExpression(r);Zp(t)}function Zp(t,e){const n=new dr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=qC+"#cannot-handle-mdx-estrees-without-createevaluater",n}function mU(t){const e={};let n;for(n in t)_w.call(t,n)&&(e[gU(n)]=t[n]);return e}function gU(t){let e=t.replace(Z3,yU);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function yU(t){return"-"+t.toLowerCase()}const Rb={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},vU={};function Tw(t,e){const n=vU,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return GC(t,r,o)}function GC(t,e,n){if(bU(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return wE(t.children,e,n)}return Array.isArray(t)?wE(t,e,n):""}function wE(t,e,n){const r=[];let o=-1;for(;++o<t.length;)r[o]=GC(t[o],e,n);return r.join("")}function bU(t){return!!(t&&typeof t=="object")}const _E=document.createElement("i");function Cw(t){const e="&"+t+";";_E.innerHTML=e;const n=_E.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ci(t,e,n,r){const o=t.length;let a=0,l;if(e<0?e=-e>o?0:o+e:e=e>o?o:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function qi(t,e){return t.length>0?(Ci(t,t.length,0,e),t):e}const SE={}.hasOwnProperty;function JC(t){const e={};let n=-1;for(;++n<t.length;)xU(e,t[n]);return e}function xU(t,e){let n;for(n in e){const o=(SE.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){SE.call(o,l)||(o[l]=[]);const c=a[l];wU(o[l],Array.isArray(c)?c:c?[c]:[])}}}function wU(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ci(t,0,0,r)}function YC(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function xo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Or=ul(/[A-Za-z]/),cr=ul(/[\dA-Za-z]/),_U=ul(/[#-'*+\--9=?A-Z^-~]/);function gv(t){return t!==null&&(t<32||t===127)}const Dx=ul(/\d/),SU=ul(/[\dA-Fa-f]/),EU=ul(/[!-/:-@[-`{-~]/);function He(t){return t!==null&&t<-2}function jt(t){return t!==null&&(t<0||t===32)}function pt(t){return t===-2||t===-1||t===32}const Lv=ul(new RegExp("\\p{P}|\\p{S}","u")),Gu=ul(/\s/);function ul(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Tf(t){const e=[];let n=-1,r=0,o=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&cr(t.charCodeAt(n+1))&&cr(t.charCodeAt(n+2)))o=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const c=t.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(l=String.fromCharCode(a,c),o=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+o+1,l=""),o&&(n+=o,o=0)}return e.join("")+t.slice(r)}function bt(t,e,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(h){return pt(h)?(t.enter(n),c(h)):e(h)}function c(h){return pt(h)&&a++<o?(t.consume(h),c):(t.exit(n),e(h))}}const TU={tokenize:CU};function CU(t){const e=t.attempt(this.parser.constructs.contentInitial,r,o);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),bt(t,e,"linePrefix")}function o(c){return t.enter("paragraph"),a(c)}function a(c){const h=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return He(c)?(t.consume(c),t.exit("chunkText"),a):(t.consume(c),l)}}const AU={tokenize:kU},EE={tokenize:IU};function kU(t){const e=this,n=[];let r=0,o,a,l;return c;function c(D){if(r<n.length){const $=n[r];return e.containerState=$[1],t.attempt($[0].continuation,h,f)(D)}return f(D)}function h(D){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&L();const $=e.events.length;let G=$,j;for(;G--;)if(e.events[G][0]==="exit"&&e.events[G][1].type==="chunkFlow"){j=e.events[G][1].end;break}I(r);let q=$;for(;q<e.events.length;)e.events[q][1].end={...j},q++;return Ci(e.events,G+1,0,e.events.slice($)),e.events.length=q,f(D)}return c(D)}function f(D){if(r===n.length){if(!o)return _(D);if(o.currentConstruct&&o.currentConstruct.concrete)return C(D);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(EE,g,y)(D)}function g(D){return o&&L(),I(r),_(D)}function y(D){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,C(D)}function _(D){return e.containerState={},t.attempt(EE,T,C)(D)}function T(D){return r++,n.push([e.currentConstruct,e.containerState]),_(D)}function C(D){if(D===null){o&&L(),I(0),t.consume(D);return}return o=o||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:a}),k(D)}function k(D){if(D===null){N(t.exit("chunkFlow"),!0),I(0),t.consume(D);return}return He(D)?(t.consume(D),N(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(D),k)}function N(D,$){const G=e.sliceStream(D);if($&&G.push(null),D.previous=a,a&&(a.next=D),a=D,o.defineSkip(D.start),o.write(G),e.parser.lazy[D.start.line]){let j=o.events.length;for(;j--;)if(o.events[j][1].start.offset<l&&(!o.events[j][1].end||o.events[j][1].end.offset>l))return;const q=e.events.length;let ee=q,W,z;for(;ee--;)if(e.events[ee][0]==="exit"&&e.events[ee][1].type==="chunkFlow"){if(W){z=e.events[ee][1].end;break}W=!0}for(I(r),j=q;j<e.events.length;)e.events[j][1].end={...z},j++;Ci(e.events,ee+1,0,e.events.slice(q)),e.events.length=j}}function I(D){let $=n.length;for(;$-- >D;){const G=n[$];e.containerState=G[1],G[0].exit.call(e,t)}n.length=D}function L(){o.write([null]),a=void 0,o=void 0,e.containerState._closeFlow=void 0}}function IU(t,e,n){return bt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function pf(t){if(t===null||jt(t)||Gu(t))return 1;if(Lv(t))return 2}function Ov(t,e,n){const r=[];let o=-1;for(;++o<t.length;){const a=t[o].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const Px={name:"attention",resolveAll:RU,tokenize:NU};function RU(t,e){let n=-1,r,o,a,l,c,h,f,g;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;h=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const y={...t[r][1].end},_={...t[n][1].start};TE(y,-h),TE(_,h),l={type:h>1?"strongSequence":"emphasisSequence",start:y,end:{...t[r][1].end}},c={type:h>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:_},a={type:h>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},o={type:h>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[r][1].end={...l.start},t[n][1].start={...c.end},f=[],t[r][1].end.offset-t[r][1].start.offset&&(f=qi(f,[["enter",t[r][1],e],["exit",t[r][1],e]])),f=qi(f,[["enter",o,e],["enter",l,e],["exit",l,e],["enter",a,e]]),f=qi(f,Ov(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),f=qi(f,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",o,e]]),t[n][1].end.offset-t[n][1].start.offset?(g=2,f=qi(f,[["enter",t[n][1],e],["exit",t[n][1],e]])):g=0,Ci(t,r-1,n-r+3,f),n=r+f.length-g-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function NU(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=pf(r);let a;return l;function l(h){return a=h,t.enter("attentionSequence"),c(h)}function c(h){if(h===a)return t.consume(h),c;const f=t.exit("attentionSequence"),g=pf(h),y=!g||g===2&&o||n.includes(h),_=!o||o===2&&g||n.includes(r);return f._open=!!(a===42?y:y&&(o||!_)),f._close=!!(a===42?_:_&&(g||!y)),e(h)}}function TE(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const MU={name:"autolink",tokenize:DU};function DU(t,e,n){let r=0;return o;function o(T){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(T){return Or(T)?(t.consume(T),l):T===64?n(T):f(T)}function l(T){return T===43||T===45||T===46||cr(T)?(r=1,c(T)):f(T)}function c(T){return T===58?(t.consume(T),r=0,h):(T===43||T===45||T===46||cr(T))&&r++<32?(t.consume(T),c):(r=0,f(T))}function h(T){return T===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.exit("autolink"),e):T===null||T===32||T===60||gv(T)?n(T):(t.consume(T),h)}function f(T){return T===64?(t.consume(T),g):_U(T)?(t.consume(T),f):n(T)}function g(T){return cr(T)?y(T):n(T)}function y(T){return T===46?(t.consume(T),r=0,g):T===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.exit("autolink"),e):_(T)}function _(T){if((T===45||cr(T))&&r++<63){const C=T===45?_:y;return t.consume(T),C}return n(T)}}const um={partial:!0,tokenize:PU};function PU(t,e,n){return r;function r(a){return pt(a)?bt(t,o,"linePrefix")(a):o(a)}function o(a){return a===null||He(a)?e(a):n(a)}}const WC={continuation:{tokenize:OU},exit:UU,name:"blockQuote",tokenize:LU};function LU(t,e,n){const r=this;return o;function o(l){if(l===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return pt(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function OU(t,e,n){const r=this;return o;function o(l){return pt(l)?bt(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(WC,e,n)(l)}}function UU(t){t.exit("blockQuote")}const KC={name:"characterEscape",tokenize:BU};function BU(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),o}function o(a){return EU(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const XC={name:"characterReference",tokenize:FU};function FU(t,e,n){const r=this;let o=0,a,l;return c;function c(y){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),h}function h(y){return y===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(y),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),a=31,l=cr,g(y))}function f(y){return y===88||y===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(y),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=SU,g):(t.enter("characterReferenceValue"),a=7,l=Dx,g(y))}function g(y){if(y===59&&o){const _=t.exit("characterReferenceValue");return l===cr&&!Cw(r.sliceSerialize(_))?n(y):(t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(y)&&o++<a?(t.consume(y),g):n(y)}}const CE={partial:!0,tokenize:zU},AE={concrete:!0,name:"codeFenced",tokenize:jU};function jU(t,e,n){const r=this,o={partial:!0,tokenize:G};let a=0,l=0,c;return h;function h(j){return f(j)}function f(j){const q=r.events[r.events.length-1];return a=q&&q[1].type==="linePrefix"?q[2].sliceSerialize(q[1],!0).length:0,c=j,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),g(j)}function g(j){return j===c?(l++,t.consume(j),g):l<3?n(j):(t.exit("codeFencedFenceSequence"),pt(j)?bt(t,y,"whitespace")(j):y(j))}function y(j){return j===null||He(j)?(t.exit("codeFencedFence"),r.interrupt?e(j):t.check(CE,k,$)(j)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),_(j))}function _(j){return j===null||He(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),y(j)):pt(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),bt(t,T,"whitespace")(j)):j===96&&j===c?n(j):(t.consume(j),_)}function T(j){return j===null||He(j)?y(j):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),C(j))}function C(j){return j===null||He(j)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y(j)):j===96&&j===c?n(j):(t.consume(j),C)}function k(j){return t.attempt(o,$,N)(j)}function N(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),I}function I(j){return a>0&&pt(j)?bt(t,L,"linePrefix",a+1)(j):L(j)}function L(j){return j===null||He(j)?t.check(CE,k,$)(j):(t.enter("codeFlowValue"),D(j))}function D(j){return j===null||He(j)?(t.exit("codeFlowValue"),L(j)):(t.consume(j),D)}function $(j){return t.exit("codeFenced"),e(j)}function G(j,q,ee){let W=0;return z;function z(fe){return j.enter("lineEnding"),j.consume(fe),j.exit("lineEnding"),te}function te(fe){return j.enter("codeFencedFence"),pt(fe)?bt(j,de,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(fe):de(fe)}function de(fe){return fe===c?(j.enter("codeFencedFenceSequence"),xe(fe)):ee(fe)}function xe(fe){return fe===c?(W++,j.consume(fe),xe):W>=l?(j.exit("codeFencedFenceSequence"),pt(fe)?bt(j,ue,"whitespace")(fe):ue(fe)):ee(fe)}function ue(fe){return fe===null||He(fe)?(j.exit("codeFencedFence"),q(fe)):ee(fe)}}}function zU(t,e,n){const r=this;return o;function o(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const Nb={name:"codeIndented",tokenize:HU},qU={partial:!0,tokenize:VU};function HU(t,e,n){const r=this;return o;function o(f){return t.enter("codeIndented"),bt(t,a,"linePrefix",5)(f)}function a(f){const g=r.events[r.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?h(f):He(f)?t.attempt(qU,l,h)(f):(t.enter("codeFlowValue"),c(f))}function c(f){return f===null||He(f)?(t.exit("codeFlowValue"),l(f)):(t.consume(f),c)}function h(f){return t.exit("codeIndented"),e(f)}}function VU(t,e,n){const r=this;return o;function o(l){return r.parser.lazy[r.now().line]?n(l):He(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),o):bt(t,a,"linePrefix",5)(l)}function a(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):He(l)?o(l):n(l)}}const $U={name:"codeText",previous:JU,resolve:GU,tokenize:YU};function GU(t){let e=t.length-4,n=3,r,o;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)o===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(o=r):(r===e||t[r][1].type==="lineEnding")&&(t[o][1].type="codeTextData",r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),e-=r-o-2,r=o+2),o=void 0);return t}function JU(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function YU(t,e,n){let r=0,o,a;return l;function l(y){return t.enter("codeText"),t.enter("codeTextSequence"),c(y)}function c(y){return y===96?(t.consume(y),r++,c):(t.exit("codeTextSequence"),h(y))}function h(y){return y===null?n(y):y===32?(t.enter("space"),t.consume(y),t.exit("space"),h):y===96?(a=t.enter("codeTextSequence"),o=0,g(y)):He(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),h):(t.enter("codeTextData"),f(y))}function f(y){return y===null||y===32||y===96||He(y)?(t.exit("codeTextData"),h(y)):(t.consume(y),f)}function g(y){return y===96?(t.consume(y),o++,g):o===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(y)):(a.type="codeTextData",f(y))}}class WU{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const o=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return r&&Dp(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Dp(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Dp(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Dp(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Dp(this.left,n.reverse())}}}function Dp(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function QC(t){const e={};let n=-1,r,o,a,l,c,h,f;const g=new WU(t);for(;++n<g.length;){for(;n in e;)n=e[n];if(r=g.get(n),n&&r[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(h=r[1]._tokenizer.events,a=0,a<h.length&&h[a][1].type==="lineEndingBlank"&&(a+=2),a<h.length&&h[a][1].type==="content"))for(;++a<h.length&&h[a][1].type!=="content";)h[a][1].type==="chunkText"&&(h[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,KU(g,n)),n=e[n],f=!0);else if(r[1]._container){for(a=n,o=void 0;a--;)if(l=g.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(o&&(g.get(o)[1].type="lineEndingBlank"),l[1].type="lineEnding",o=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;o&&(r[1].end={...g.get(o)[1].start},c=g.slice(o,n),c.unshift(r),g.splice(o,n-o+1,c))}}return Ci(t,0,Number.POSITIVE_INFINITY,g.slice(0)),!f}function KU(t,e){const n=t.get(e)[1],r=t.get(e)[2];let o=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,h=[],f={};let g,y,_=-1,T=n,C=0,k=0;const N=[k];for(;T;){for(;t.get(++o)[1]!==T;);a.push(o),T._tokenizer||(g=r.sliceStream(T),T.next||g.push(null),y&&l.defineSkip(T.start),T._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(g),T._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),y=T,T=T.next}for(T=n;++_<c.length;)c[_][0]==="exit"&&c[_-1][0]==="enter"&&c[_][1].type===c[_-1][1].type&&c[_][1].start.line!==c[_][1].end.line&&(k=_+1,N.push(k),T._tokenizer=void 0,T.previous=void 0,T=T.next);for(l.events=[],T?(T._tokenizer=void 0,T.previous=void 0):N.pop(),_=N.length;_--;){const I=c.slice(N[_],N[_+1]),L=a.pop();h.push([L,L+I.length-1]),t.splice(L,2,I)}for(h.reverse(),_=-1;++_<h.length;)f[C+h[_][0]]=C+h[_][1],C+=h[_][1]-h[_][0]-1;return f}const XU={resolve:ZU,tokenize:e4},QU={partial:!0,tokenize:t4};function ZU(t){return QC(t),t}function e4(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),o(c)}function o(c){return c===null?a(c):He(c)?t.check(QU,l,a)(c):(t.consume(c),o)}function a(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function t4(t,e,n){const r=this;return o;function o(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),bt(t,a,"linePrefix")}function a(l){if(l===null||He(l))return n(l);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function ZC(t,e,n,r,o,a,l,c,h){const f=h||Number.POSITIVE_INFINITY;let g=0;return y;function y(I){return I===60?(t.enter(r),t.enter(o),t.enter(a),t.consume(I),t.exit(a),_):I===null||I===32||I===41||gv(I)?n(I):(t.enter(r),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),k(I))}function _(I){return I===62?(t.enter(a),t.consume(I),t.exit(a),t.exit(o),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),T(I))}function T(I){return I===62?(t.exit("chunkString"),t.exit(c),_(I)):I===null||I===60||He(I)?n(I):(t.consume(I),I===92?C:T)}function C(I){return I===60||I===62||I===92?(t.consume(I),T):T(I)}function k(I){return!g&&(I===null||I===41||jt(I))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(r),e(I)):g<f&&I===40?(t.consume(I),g++,k):I===41?(t.consume(I),g--,k):I===null||I===32||I===40||gv(I)?n(I):(t.consume(I),I===92?N:k)}function N(I){return I===40||I===41||I===92?(t.consume(I),k):k(I)}}function eA(t,e,n,r,o,a){const l=this;let c=0,h;return f;function f(T){return t.enter(r),t.enter(o),t.consume(T),t.exit(o),t.enter(a),g}function g(T){return c>999||T===null||T===91||T===93&&!h||T===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(T):T===93?(t.exit(a),t.enter(o),t.consume(T),t.exit(o),t.exit(r),e):He(T)?(t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),g):(t.enter("chunkString",{contentType:"string"}),y(T))}function y(T){return T===null||T===91||T===93||He(T)||c++>999?(t.exit("chunkString"),g(T)):(t.consume(T),h||(h=!pt(T)),T===92?_:y)}function _(T){return T===91||T===92||T===93?(t.consume(T),c++,y):y(T)}}function tA(t,e,n,r,o,a){let l;return c;function c(_){return _===34||_===39||_===40?(t.enter(r),t.enter(o),t.consume(_),t.exit(o),l=_===40?41:_,h):n(_)}function h(_){return _===l?(t.enter(o),t.consume(_),t.exit(o),t.exit(r),e):(t.enter(a),f(_))}function f(_){return _===l?(t.exit(a),h(l)):_===null?n(_):He(_)?(t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),bt(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),g(_))}function g(_){return _===l||_===null||He(_)?(t.exit("chunkString"),f(_)):(t.consume(_),_===92?y:g)}function y(_){return _===l||_===92?(t.consume(_),g):g(_)}}function $p(t,e){let n;return r;function r(o){return He(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),n=!0,r):pt(o)?bt(t,r,n?"linePrefix":"lineSuffix")(o):e(o)}}const n4={name:"definition",tokenize:i4},r4={partial:!0,tokenize:o4};function i4(t,e,n){const r=this;let o;return a;function a(T){return t.enter("definition"),l(T)}function l(T){return eA.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(T)}function c(T){return o=xo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),T===58?(t.enter("definitionMarker"),t.consume(T),t.exit("definitionMarker"),h):n(T)}function h(T){return jt(T)?$p(t,f)(T):f(T)}function f(T){return ZC(t,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(T)}function g(T){return t.attempt(r4,y,y)(T)}function y(T){return pt(T)?bt(t,_,"whitespace")(T):_(T)}function _(T){return T===null||He(T)?(t.exit("definition"),r.parser.defined.push(o),e(T)):n(T)}}function o4(t,e,n){return r;function r(c){return jt(c)?$p(t,o)(c):n(c)}function o(c){return tA(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return pt(c)?bt(t,l,"whitespace")(c):l(c)}function l(c){return c===null||He(c)?e(c):n(c)}}const s4={name:"hardBreakEscape",tokenize:a4};function a4(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),o}function o(a){return He(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const l4={name:"headingAtx",resolve:u4,tokenize:c4};function u4(t,e){let n=t.length-2,r=3,o,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(o={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ci(t,r,n-r+1,[["enter",o,e],["enter",a,e],["exit",a,e],["exit",o,e]])),t}function c4(t,e,n){let r=0;return o;function o(g){return t.enter("atxHeading"),a(g)}function a(g){return t.enter("atxHeadingSequence"),l(g)}function l(g){return g===35&&r++<6?(t.consume(g),l):g===null||jt(g)?(t.exit("atxHeadingSequence"),c(g)):n(g)}function c(g){return g===35?(t.enter("atxHeadingSequence"),h(g)):g===null||He(g)?(t.exit("atxHeading"),e(g)):pt(g)?bt(t,c,"whitespace")(g):(t.enter("atxHeadingText"),f(g))}function h(g){return g===35?(t.consume(g),h):(t.exit("atxHeadingSequence"),c(g))}function f(g){return g===null||g===35||jt(g)?(t.exit("atxHeadingText"),c(g)):(t.consume(g),f)}}const d4=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],kE=["pre","script","style","textarea"],f4={concrete:!0,name:"htmlFlow",resolveTo:m4,tokenize:g4},h4={partial:!0,tokenize:v4},p4={partial:!0,tokenize:y4};function m4(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function g4(t,e,n){const r=this;let o,a,l,c,h;return f;function f(U){return g(U)}function g(U){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(U),y}function y(U){return U===33?(t.consume(U),_):U===47?(t.consume(U),a=!0,k):U===63?(t.consume(U),o=3,r.interrupt?e:H):Or(U)?(t.consume(U),l=String.fromCharCode(U),N):n(U)}function _(U){return U===45?(t.consume(U),o=2,T):U===91?(t.consume(U),o=5,c=0,C):Or(U)?(t.consume(U),o=4,r.interrupt?e:H):n(U)}function T(U){return U===45?(t.consume(U),r.interrupt?e:H):n(U)}function C(U){const me="CDATA[";return U===me.charCodeAt(c++)?(t.consume(U),c===me.length?r.interrupt?e:de:C):n(U)}function k(U){return Or(U)?(t.consume(U),l=String.fromCharCode(U),N):n(U)}function N(U){if(U===null||U===47||U===62||jt(U)){const me=U===47,Ce=l.toLowerCase();return!me&&!a&&kE.includes(Ce)?(o=1,r.interrupt?e(U):de(U)):d4.includes(l.toLowerCase())?(o=6,me?(t.consume(U),I):r.interrupt?e(U):de(U)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(U):a?L(U):D(U))}return U===45||cr(U)?(t.consume(U),l+=String.fromCharCode(U),N):n(U)}function I(U){return U===62?(t.consume(U),r.interrupt?e:de):n(U)}function L(U){return pt(U)?(t.consume(U),L):z(U)}function D(U){return U===47?(t.consume(U),z):U===58||U===95||Or(U)?(t.consume(U),$):pt(U)?(t.consume(U),D):z(U)}function $(U){return U===45||U===46||U===58||U===95||cr(U)?(t.consume(U),$):G(U)}function G(U){return U===61?(t.consume(U),j):pt(U)?(t.consume(U),G):D(U)}function j(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(t.consume(U),h=U,q):pt(U)?(t.consume(U),j):ee(U)}function q(U){return U===h?(t.consume(U),h=null,W):U===null||He(U)?n(U):(t.consume(U),q)}function ee(U){return U===null||U===34||U===39||U===47||U===60||U===61||U===62||U===96||jt(U)?G(U):(t.consume(U),ee)}function W(U){return U===47||U===62||pt(U)?D(U):n(U)}function z(U){return U===62?(t.consume(U),te):n(U)}function te(U){return U===null||He(U)?de(U):pt(U)?(t.consume(U),te):n(U)}function de(U){return U===45&&o===2?(t.consume(U),K):U===60&&o===1?(t.consume(U),oe):U===62&&o===4?(t.consume(U),V):U===63&&o===3?(t.consume(U),H):U===93&&o===5?(t.consume(U),Ee):He(U)&&(o===6||o===7)?(t.exit("htmlFlowData"),t.check(h4,re,xe)(U)):U===null||He(U)?(t.exit("htmlFlowData"),xe(U)):(t.consume(U),de)}function xe(U){return t.check(p4,ue,re)(U)}function ue(U){return t.enter("lineEnding"),t.consume(U),t.exit("lineEnding"),fe}function fe(U){return U===null||He(U)?xe(U):(t.enter("htmlFlowData"),de(U))}function K(U){return U===45?(t.consume(U),H):de(U)}function oe(U){return U===47?(t.consume(U),l="",le):de(U)}function le(U){if(U===62){const me=l.toLowerCase();return kE.includes(me)?(t.consume(U),V):de(U)}return Or(U)&&l.length<8?(t.consume(U),l+=String.fromCharCode(U),le):de(U)}function Ee(U){return U===93?(t.consume(U),H):de(U)}function H(U){return U===62?(t.consume(U),V):U===45&&o===2?(t.consume(U),H):de(U)}function V(U){return U===null||He(U)?(t.exit("htmlFlowData"),re(U)):(t.consume(U),V)}function re(U){return t.exit("htmlFlow"),e(U)}}function y4(t,e,n){const r=this;return o;function o(l){return He(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function v4(t,e,n){return r;function r(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),t.attempt(um,e,n)}}const b4={name:"htmlText",tokenize:x4};function x4(t,e,n){const r=this;let o,a,l;return c;function c(H){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(H),h}function h(H){return H===33?(t.consume(H),f):H===47?(t.consume(H),G):H===63?(t.consume(H),D):Or(H)?(t.consume(H),ee):n(H)}function f(H){return H===45?(t.consume(H),g):H===91?(t.consume(H),a=0,C):Or(H)?(t.consume(H),L):n(H)}function g(H){return H===45?(t.consume(H),T):n(H)}function y(H){return H===null?n(H):H===45?(t.consume(H),_):He(H)?(l=y,oe(H)):(t.consume(H),y)}function _(H){return H===45?(t.consume(H),T):y(H)}function T(H){return H===62?K(H):H===45?_(H):y(H)}function C(H){const V="CDATA[";return H===V.charCodeAt(a++)?(t.consume(H),a===V.length?k:C):n(H)}function k(H){return H===null?n(H):H===93?(t.consume(H),N):He(H)?(l=k,oe(H)):(t.consume(H),k)}function N(H){return H===93?(t.consume(H),I):k(H)}function I(H){return H===62?K(H):H===93?(t.consume(H),I):k(H)}function L(H){return H===null||H===62?K(H):He(H)?(l=L,oe(H)):(t.consume(H),L)}function D(H){return H===null?n(H):H===63?(t.consume(H),$):He(H)?(l=D,oe(H)):(t.consume(H),D)}function $(H){return H===62?K(H):D(H)}function G(H){return Or(H)?(t.consume(H),j):n(H)}function j(H){return H===45||cr(H)?(t.consume(H),j):q(H)}function q(H){return He(H)?(l=q,oe(H)):pt(H)?(t.consume(H),q):K(H)}function ee(H){return H===45||cr(H)?(t.consume(H),ee):H===47||H===62||jt(H)?W(H):n(H)}function W(H){return H===47?(t.consume(H),K):H===58||H===95||Or(H)?(t.consume(H),z):He(H)?(l=W,oe(H)):pt(H)?(t.consume(H),W):K(H)}function z(H){return H===45||H===46||H===58||H===95||cr(H)?(t.consume(H),z):te(H)}function te(H){return H===61?(t.consume(H),de):He(H)?(l=te,oe(H)):pt(H)?(t.consume(H),te):W(H)}function de(H){return H===null||H===60||H===61||H===62||H===96?n(H):H===34||H===39?(t.consume(H),o=H,xe):He(H)?(l=de,oe(H)):pt(H)?(t.consume(H),de):(t.consume(H),ue)}function xe(H){return H===o?(t.consume(H),o=void 0,fe):H===null?n(H):He(H)?(l=xe,oe(H)):(t.consume(H),xe)}function ue(H){return H===null||H===34||H===39||H===60||H===61||H===96?n(H):H===47||H===62||jt(H)?W(H):(t.consume(H),ue)}function fe(H){return H===47||H===62||jt(H)?W(H):n(H)}function K(H){return H===62?(t.consume(H),t.exit("htmlTextData"),t.exit("htmlText"),e):n(H)}function oe(H){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(H),t.exit("lineEnding"),le}function le(H){return pt(H)?bt(t,Ee,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):Ee(H)}function Ee(H){return t.enter("htmlTextData"),l(H)}}const Aw={name:"labelEnd",resolveAll:E4,resolveTo:T4,tokenize:C4},w4={tokenize:A4},_4={tokenize:k4},S4={tokenize:I4};function E4(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const o=r.type==="labelImage"?4:2;r.type="data",e+=o}}return t.length!==n.length&&Ci(t,0,t.length,n),t}function T4(t,e){let n=t.length,r=0,o,a,l,c;for(;n--;)if(o=t[n][1],a){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;t[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(a=n,o.type!=="labelLink")){r=2;break}}else o.type==="labelEnd"&&(l=n);const h={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},g={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",h,e],["enter",f,e]],c=qi(c,t.slice(a+1,a+r+3)),c=qi(c,[["enter",g,e]]),c=qi(c,Ov(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),c=qi(c,[["exit",g,e],t[l-2],t[l-1],["exit",f,e]]),c=qi(c,t.slice(l+1)),c=qi(c,[["exit",h,e]]),Ci(t,a,t.length,c),t}function C4(t,e,n){const r=this;let o=r.events.length,a,l;for(;o--;)if((r.events[o][1].type==="labelImage"||r.events[o][1].type==="labelLink")&&!r.events[o][1]._balanced){a=r.events[o][1];break}return c;function c(_){return a?a._inactive?y(_):(l=r.parser.defined.includes(xo(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(_),t.exit("labelMarker"),t.exit("labelEnd"),h):n(_)}function h(_){return _===40?t.attempt(w4,g,l?g:y)(_):_===91?t.attempt(_4,g,l?f:y)(_):l?g(_):y(_)}function f(_){return t.attempt(S4,g,y)(_)}function g(_){return e(_)}function y(_){return a._balanced=!0,n(_)}}function A4(t,e,n){return r;function r(y){return t.enter("resource"),t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),o}function o(y){return jt(y)?$p(t,a)(y):a(y)}function a(y){return y===41?g(y):ZC(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function l(y){return jt(y)?$p(t,h)(y):g(y)}function c(y){return n(y)}function h(y){return y===34||y===39||y===40?tA(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):g(y)}function f(y){return jt(y)?$p(t,g)(y):g(y)}function g(y){return y===41?(t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),t.exit("resource"),e):n(y)}}function k4(t,e,n){const r=this;return o;function o(c){return eA.call(r,t,a,l,"reference","referenceMarker","referenceString")(c)}function a(c){return r.parser.defined.includes(xo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function l(c){return n(c)}}function I4(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),o}function o(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const R4={name:"labelStartImage",resolveAll:Aw.resolveAll,tokenize:N4};function N4(t,e,n){const r=this;return o;function o(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),a}function a(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const M4={name:"labelStartLink",resolveAll:Aw.resolveAll,tokenize:D4};function D4(t,e,n){const r=this;return o;function o(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Mb={name:"lineEnding",tokenize:P4};function P4(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),bt(t,e,"linePrefix")}}const ov={name:"thematicBreak",tokenize:L4};function L4(t,e,n){let r=0,o;return a;function a(f){return t.enter("thematicBreak"),l(f)}function l(f){return o=f,c(f)}function c(f){return f===o?(t.enter("thematicBreakSequence"),h(f)):r>=3&&(f===null||He(f))?(t.exit("thematicBreak"),e(f)):n(f)}function h(f){return f===o?(t.consume(f),r++,h):(t.exit("thematicBreakSequence"),pt(f)?bt(t,c,"whitespace")(f):c(f))}}const ei={continuation:{tokenize:F4},exit:z4,name:"list",tokenize:B4},O4={partial:!0,tokenize:q4},U4={partial:!0,tokenize:j4};function B4(t,e,n){const r=this,o=r.events[r.events.length-1];let a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,l=0;return c;function c(T){const C=r.containerState.type||(T===42||T===43||T===45?"listUnordered":"listOrdered");if(C==="listUnordered"?!r.containerState.marker||T===r.containerState.marker:Dx(T)){if(r.containerState.type||(r.containerState.type=C,t.enter(C,{_container:!0})),C==="listUnordered")return t.enter("listItemPrefix"),T===42||T===45?t.check(ov,n,f)(T):f(T);if(!r.interrupt||T===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),h(T)}return n(T)}function h(T){return Dx(T)&&++l<10?(t.consume(T),h):(!r.interrupt||l<2)&&(r.containerState.marker?T===r.containerState.marker:T===41||T===46)?(t.exit("listItemValue"),f(T)):n(T)}function f(T){return t.enter("listItemMarker"),t.consume(T),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||T,t.check(um,r.interrupt?n:g,t.attempt(O4,_,y))}function g(T){return r.containerState.initialBlankLine=!0,a++,_(T)}function y(T){return pt(T)?(t.enter("listItemPrefixWhitespace"),t.consume(T),t.exit("listItemPrefixWhitespace"),_):n(T)}function _(T){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(T)}}function F4(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(um,o,a);function o(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,bt(t,e,"listItemIndent",r.containerState.size+1)(c)}function a(c){return r.containerState.furtherBlankLines||!pt(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(U4,e,l)(c))}function l(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,bt(t,t.attempt(ei,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function j4(t,e,n){const r=this;return bt(t,o,"listItemIndent",r.containerState.size+1);function o(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function z4(t){t.exit(this.containerState.type)}function q4(t,e,n){const r=this;return bt(t,o,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(a){const l=r.events[r.events.length-1];return!pt(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const IE={name:"setextUnderline",resolveTo:H4,tokenize:V4};function H4(t,e){let n=t.length,r,o,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(o=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[o][1].type="setextHeadingText",a?(t.splice(o,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function V4(t,e,n){const r=this;let o;return a;function a(f){let g=r.events.length,y;for(;g--;)if(r.events[g][1].type!=="lineEnding"&&r.events[g][1].type!=="linePrefix"&&r.events[g][1].type!=="content"){y=r.events[g][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||y)?(t.enter("setextHeadingLine"),o=f,l(f)):n(f)}function l(f){return t.enter("setextHeadingLineSequence"),c(f)}function c(f){return f===o?(t.consume(f),c):(t.exit("setextHeadingLineSequence"),pt(f)?bt(t,h,"lineSuffix")(f):h(f))}function h(f){return f===null||He(f)?(t.exit("setextHeadingLine"),e(f)):n(f)}}const $4={tokenize:G4};function G4(t){const e=this,n=t.attempt(um,r,t.attempt(this.parser.constructs.flowInitial,o,bt(t,t.attempt(this.parser.constructs.flow,o,t.attempt(XU,o)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function o(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const J4={resolveAll:rA()},Y4=nA("string"),W4=nA("text");function nA(t){return{resolveAll:rA(t==="text"?K4:void 0),tokenize:e};function e(n){const r=this,o=this.parser.constructs[t],a=n.attempt(o,l,c);return l;function l(g){return f(g)?a(g):c(g)}function c(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),h}function h(g){return f(g)?(n.exit("data"),a(g)):(n.consume(g),h)}function f(g){if(g===null)return!0;const y=o[g];let _=-1;if(y)for(;++_<y.length;){const T=y[_];if(!T.previous||T.previous.call(r,r.previous))return!0}return!1}}}function rA(t){return e;function e(n,r){let o=-1,a;for(;++o<=n.length;)a===void 0?n[o]&&n[o][1].type==="data"&&(a=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==a+2&&(n[a][1].end=n[o-1][1].end,n.splice(a+2,o-a-2),o=a+2),a=void 0);return t?t(n,r):n}}function K4(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],o=e.sliceStream(r);let a=o.length,l=-1,c=0,h;for(;a--;){const f=o[a];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(f===-2)h=!0,c++;else if(f!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const f={type:n===t.length||h||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(t.splice(n,0,["enter",f,e],["exit",f,e]),n+=2)}n++}return t}const X4={42:ei,43:ei,45:ei,48:ei,49:ei,50:ei,51:ei,52:ei,53:ei,54:ei,55:ei,56:ei,57:ei,62:WC},Q4={91:n4},Z4={[-2]:Nb,[-1]:Nb,32:Nb},eB={35:l4,42:ov,45:[IE,ov],60:f4,61:IE,95:ov,96:AE,126:AE},tB={38:XC,92:KC},nB={[-5]:Mb,[-4]:Mb,[-3]:Mb,33:R4,38:XC,42:Px,60:[MU,b4],91:M4,92:[s4,KC],93:Aw,95:Px,96:$U},rB={null:[Px,J4]},iB={null:[42,95]},oB={null:[]},sB=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:iB,contentInitial:Q4,disable:oB,document:X4,flow:eB,flowInitial:Z4,insideSpan:rB,string:tB,text:nB},Symbol.toStringTag,{value:"Module"}));function aB(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},a=[];let l=[],c=[];const h={attempt:q(G),check:q(j),consume:L,enter:D,exit:$,interrupt:q(j,{interrupt:!0})},f={code:null,containerState:{},defineSkip:k,events:[],now:C,parser:t,previous:null,sliceSerialize:_,sliceStream:T,write:y};let g=e.tokenize.call(f,h);return e.resolveAll&&a.push(e),f;function y(te){return l=qi(l,te),N(),l[l.length-1]!==null?[]:(ee(e,0),f.events=Ov(a,f.events,f),f.events)}function _(te,de){return uB(T(te),de)}function T(te){return lB(l,te)}function C(){const{_bufferIndex:te,_index:de,line:xe,column:ue,offset:fe}=r;return{_bufferIndex:te,_index:de,line:xe,column:ue,offset:fe}}function k(te){o[te.line]=te.column,z()}function N(){let te;for(;r._index<l.length;){const de=l[r._index];if(typeof de=="string")for(te=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===te&&r._bufferIndex<de.length;)I(de.charCodeAt(r._bufferIndex));else I(de)}}function I(te){g=g(te)}function L(te){He(te)?(r.line++,r.column=1,r.offset+=te===-3?2:1,z()):te!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=te}function D(te,de){const xe=de||{};return xe.type=te,xe.start=C(),f.events.push(["enter",xe,f]),c.push(xe),xe}function $(te){const de=c.pop();return de.end=C(),f.events.push(["exit",de,f]),de}function G(te,de){ee(te,de.from)}function j(te,de){de.restore()}function q(te,de){return xe;function xe(ue,fe,K){let oe,le,Ee,H;return Array.isArray(ue)?re(ue):"tokenize"in ue?re([ue]):V(ue);function V(Ie){return Ve;function Ve(rt){const Ue=rt!==null&&Ie[rt],Xt=rt!==null&&Ie.null,hn=[...Array.isArray(Ue)?Ue:Ue?[Ue]:[],...Array.isArray(Xt)?Xt:Xt?[Xt]:[]];return re(hn)(rt)}}function re(Ie){return oe=Ie,le=0,Ie.length===0?K:U(Ie[le])}function U(Ie){return Ve;function Ve(rt){return H=W(),Ee=Ie,Ie.partial||(f.currentConstruct=Ie),Ie.name&&f.parser.constructs.disable.null.includes(Ie.name)?Ce():Ie.tokenize.call(de?Object.assign(Object.create(f),de):f,h,me,Ce)(rt)}}function me(Ie){return te(Ee,H),fe}function Ce(Ie){return H.restore(),++le<oe.length?U(oe[le]):K}}}function ee(te,de){te.resolveAll&&!a.includes(te)&&a.push(te),te.resolve&&Ci(f.events,de,f.events.length-de,te.resolve(f.events.slice(de),f)),te.resolveTo&&(f.events=te.resolveTo(f.events,f))}function W(){const te=C(),de=f.previous,xe=f.currentConstruct,ue=f.events.length,fe=Array.from(c);return{from:ue,restore:K};function K(){r=te,f.previous=de,f.currentConstruct=xe,f.events.length=ue,c=fe,z()}}function z(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}function lB(t,e){const n=e.start._index,r=e.start._bufferIndex,o=e.end._index,a=e.end._bufferIndex;let l;if(n===o)l=[t[n].slice(r,a)];else{if(l=t.slice(n,o),r>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(r):l.shift()}a>0&&l.push(t[o].slice(0,a))}return l}function uB(t,e){let n=-1;const r=[];let o;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&o)continue;l=" ";break}default:l=String.fromCharCode(a)}o=a===-2,r.push(l)}return r.join("")}function cB(t){const r={constructs:JC([sB,...(t||{}).extensions||[]]),content:o(TU),defined:[],document:o(AU),flow:o($4),lazy:{},string:o(Y4),text:o(W4)};return r;function o(a){return l;function l(c){return aB(r,a,c)}}}function dB(t){for(;!QC(t););return t}const RE=/[\0\t\n\r]/g;function fB(){let t=1,e="",n=!0,r;return o;function o(a,l,c){const h=[];let f,g,y,_,T;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),y=0,e="",n&&(a.charCodeAt(0)===65279&&y++,n=void 0);y<a.length;){if(RE.lastIndex=y,f=RE.exec(a),_=f&&f.index!==void 0?f.index:a.length,T=a.charCodeAt(_),!f){e=a.slice(y);break}if(T===10&&y===_&&r)h.push(-3),r=void 0;else switch(r&&(h.push(-5),r=void 0),y<_&&(h.push(a.slice(y,_)),t+=_-y),T){case 0:{h.push(65533),t++;break}case 9:{for(g=Math.ceil(t/4)*4,h.push(-2);t++<g;)h.push(-1);break}case 10:{h.push(-4),t=1;break}default:r=!0,t=1}y=_+1}return c&&(r&&h.push(-5),e&&h.push(e),h.push(null)),h}}const hB=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function pB(t){return t.replace(hB,mB)}function mB(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),a=o===120||o===88;return YC(n.slice(a?2:1),a?16:10)}return Cw(n)||t}const iA={}.hasOwnProperty;function gB(t,e,n){return typeof e!="string"&&(n=e,e=void 0),yB(n)(dB(cB(n).document().write(fB()(t,e,!0))))}function yB(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ea),autolinkProtocol:W,autolinkEmail:W,atxHeading:a(hr),blockQuote:a(Xt),characterEscape:W,characterReference:W,codeFenced:a(hn),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(hn,l),codeText:a(fr,l),codeTextData:W,data:W,codeFlowValue:W,definition:a(fs),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(nn),hardBreakEscape:a(Zs),hardBreakTrailing:a(Zs),htmlFlow:a(Br,l),htmlFlowData:W,htmlText:a(Br,l),htmlTextData:W,image:a(dl),label:l,link:a(ea),listItem:a(Bn),listItemValue:_,listOrdered:a(ki,y),listUnordered:a(ki),paragraph:a(hs),reference:U,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(hr),strong:a(ta),thematicBreak:a(ps)},exit:{atxHeading:h(),atxHeadingSequence:G,autolink:h(),autolinkEmail:Ue,autolinkProtocol:rt,blockQuote:h(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:Ce,characterReferenceMarkerNumeric:Ce,characterReferenceValue:Ie,characterReference:Ve,codeFenced:h(N),codeFencedFence:k,codeFencedFenceInfo:T,codeFencedFenceMeta:C,codeFlowValue:z,codeIndented:h(I),codeText:h(fe),codeTextData:z,data:z,definition:h(),definitionDestinationString:$,definitionLabelString:L,definitionTitleString:D,emphasis:h(),hardBreakEscape:h(de),hardBreakTrailing:h(de),htmlFlow:h(xe),htmlFlowData:z,htmlText:h(ue),htmlTextData:z,image:h(oe),label:Ee,labelText:le,lineEnding:te,link:h(K),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:me,resourceDestinationString:H,resourceTitleString:V,resource:re,setextHeading:h(ee),setextHeadingLineSequence:q,setextHeadingText:j,strong:h(),thematicBreak:h()}};oA(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ve){let ke={type:"root",children:[]};const je={stack:[ke],tokenStack:[],config:e,enter:c,exit:f,buffer:l,resume:g,data:n},it=[];let gt=-1;for(;++gt<ve.length;)if(ve[gt][1].type==="listOrdered"||ve[gt][1].type==="listUnordered")if(ve[gt][0]==="enter")it.push(gt);else{const jn=it.pop();gt=o(ve,jn,gt)}for(gt=-1;++gt<ve.length;){const jn=e[ve[gt][0]];iA.call(jn,ve[gt][1].type)&&jn[ve[gt][1].type].call(Object.assign({sliceSerialize:ve[gt][2].sliceSerialize},je),ve[gt][1])}if(je.tokenStack.length>0){const jn=je.tokenStack[je.tokenStack.length-1];(jn[1]||NE).call(je,void 0,jn[0])}for(ke.position={start:Za(ve.length>0?ve[0][1].start:{line:1,column:1,offset:0}),end:Za(ve.length>0?ve[ve.length-2][1].end:{line:1,column:1,offset:0})},gt=-1;++gt<e.transforms.length;)ke=e.transforms[gt](ke)||ke;return ke}function o(ve,ke,je){let it=ke-1,gt=-1,jn=!1,ii,Cn,rn,Pn;for(;++it<=je;){const Tt=ve[it];switch(Tt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Tt[0]==="enter"?gt++:gt--,Pn=void 0;break}case"lineEndingBlank":{Tt[0]==="enter"&&(ii&&!Pn&&!gt&&!rn&&(rn=it),Pn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Pn=void 0}if(!gt&&Tt[0]==="enter"&&Tt[1].type==="listItemPrefix"||gt===-1&&Tt[0]==="exit"&&(Tt[1].type==="listUnordered"||Tt[1].type==="listOrdered")){if(ii){let Ii=it;for(Cn=void 0;Ii--;){const oi=ve[Ii];if(oi[1].type==="lineEnding"||oi[1].type==="lineEndingBlank"){if(oi[0]==="exit")continue;Cn&&(ve[Cn][1].type="lineEndingBlank",jn=!0),oi[1].type="lineEnding",Cn=Ii}else if(!(oi[1].type==="linePrefix"||oi[1].type==="blockQuotePrefix"||oi[1].type==="blockQuotePrefixWhitespace"||oi[1].type==="blockQuoteMarker"||oi[1].type==="listItemIndent"))break}rn&&(!Cn||rn<Cn)&&(ii._spread=!0),ii.end=Object.assign({},Cn?ve[Cn][1].start:Tt[1].end),ve.splice(Cn||it,0,["exit",ii,Tt[2]]),it++,je++}if(Tt[1].type==="listItemPrefix"){const Ii={type:"listItem",_spread:!1,start:Object.assign({},Tt[1].start),end:void 0};ii=Ii,ve.splice(it,0,["enter",Ii,Tt[2]]),it++,je++,rn=void 0,Pn=!0}}}return ve[ke][1]._spread=jn,je}function a(ve,ke){return je;function je(it){c.call(this,ve(it),it),ke&&ke.call(this,it)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(ve,ke,je){this.stack[this.stack.length-1].children.push(ve),this.stack.push(ve),this.tokenStack.push([ke,je||void 0]),ve.position={start:Za(ke.start),end:void 0}}function h(ve){return ke;function ke(je){ve&&ve.call(this,je),f.call(this,je)}}function f(ve,ke){const je=this.stack.pop(),it=this.tokenStack.pop();if(it)it[0].type!==ve.type&&(ke?ke.call(this,ve,it[0]):(it[1]||NE).call(this,ve,it[0]));else throw new Error("Cannot close `"+ve.type+"` ("+Vp({start:ve.start,end:ve.end})+"): its not open");je.position.end=Za(ve.end)}function g(){return Tw(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function _(ve){if(this.data.expectingFirstListItemValue){const ke=this.stack[this.stack.length-2];ke.start=Number.parseInt(this.sliceSerialize(ve),10),this.data.expectingFirstListItemValue=void 0}}function T(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.lang=ve}function C(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.meta=ve}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function N(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ve.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function I(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ve.replace(/(\r?\n|\r)$/g,"")}function L(ve){const ke=this.resume(),je=this.stack[this.stack.length-1];je.label=ke,je.identifier=xo(this.sliceSerialize(ve)).toLowerCase()}function D(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.title=ve}function $(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.url=ve}function G(ve){const ke=this.stack[this.stack.length-1];if(!ke.depth){const je=this.sliceSerialize(ve).length;ke.depth=je}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function q(ve){const ke=this.stack[this.stack.length-1];ke.depth=this.sliceSerialize(ve).codePointAt(0)===61?1:2}function ee(){this.data.setextHeadingSlurpLineEnding=void 0}function W(ve){const je=this.stack[this.stack.length-1].children;let it=je[je.length-1];(!it||it.type!=="text")&&(it=Fn(),it.position={start:Za(ve.start),end:void 0},je.push(it)),this.stack.push(it)}function z(ve){const ke=this.stack.pop();ke.value+=this.sliceSerialize(ve),ke.position.end=Za(ve.end)}function te(ve){const ke=this.stack[this.stack.length-1];if(this.data.atHardBreak){const je=ke.children[ke.children.length-1];je.position.end=Za(ve.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ke.type)&&(W.call(this,ve),z.call(this,ve))}function de(){this.data.atHardBreak=!0}function xe(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ve}function ue(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ve}function fe(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ve}function K(){const ve=this.stack[this.stack.length-1];if(this.data.inReference){const ke=this.data.referenceType||"shortcut";ve.type+="Reference",ve.referenceType=ke,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;this.data.referenceType=void 0}function oe(){const ve=this.stack[this.stack.length-1];if(this.data.inReference){const ke=this.data.referenceType||"shortcut";ve.type+="Reference",ve.referenceType=ke,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;this.data.referenceType=void 0}function le(ve){const ke=this.sliceSerialize(ve),je=this.stack[this.stack.length-2];je.label=pB(ke),je.identifier=xo(ke).toLowerCase()}function Ee(){const ve=this.stack[this.stack.length-1],ke=this.resume(),je=this.stack[this.stack.length-1];if(this.data.inReference=!0,je.type==="link"){const it=ve.children;je.children=it}else je.alt=ke}function H(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.url=ve}function V(){const ve=this.resume(),ke=this.stack[this.stack.length-1];ke.title=ve}function re(){this.data.inReference=void 0}function U(){this.data.referenceType="collapsed"}function me(ve){const ke=this.resume(),je=this.stack[this.stack.length-1];je.label=ke,je.identifier=xo(this.sliceSerialize(ve)).toLowerCase(),this.data.referenceType="full"}function Ce(ve){this.data.characterReferenceType=ve.type}function Ie(ve){const ke=this.sliceSerialize(ve),je=this.data.characterReferenceType;let it;je?(it=YC(ke,je==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):it=Cw(ke);const gt=this.stack[this.stack.length-1];gt.value+=it}function Ve(ve){const ke=this.stack.pop();ke.position.end=Za(ve.end)}function rt(ve){z.call(this,ve);const ke=this.stack[this.stack.length-1];ke.url=this.sliceSerialize(ve)}function Ue(ve){z.call(this,ve);const ke=this.stack[this.stack.length-1];ke.url="mailto:"+this.sliceSerialize(ve)}function Xt(){return{type:"blockquote",children:[]}}function hn(){return{type:"code",lang:null,meta:null,value:""}}function fr(){return{type:"inlineCode",value:""}}function fs(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function nn(){return{type:"emphasis",children:[]}}function hr(){return{type:"heading",depth:0,children:[]}}function Zs(){return{type:"break"}}function Br(){return{type:"html",value:""}}function dl(){return{type:"image",title:null,url:"",alt:null}}function ea(){return{type:"link",title:null,url:"",children:[]}}function ki(ve){return{type:"list",ordered:ve.type==="listOrdered",start:null,spread:ve._spread,children:[]}}function Bn(ve){return{type:"listItem",spread:ve._spread,checked:null,children:[]}}function hs(){return{type:"paragraph",children:[]}}function ta(){return{type:"strong",children:[]}}function Fn(){return{type:"text",value:""}}function ps(){return{type:"thematicBreak"}}}function Za(t){return{line:t.line,column:t.column,offset:t.offset}}function oA(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?oA(t,r):vB(t,r)}}function vB(t,e){let n;for(n in e)if(iA.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function NE(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Vp({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Vp({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Vp({start:e.start,end:e.end})+") is still open")}function bB(t){const e=this;e.parser=n;function n(r){return gB(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function xB(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function wB(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function _B(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}function SB(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function EB(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function TB(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),o=Tf(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,c+=1,t.footnoteCounts.set(r,c);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,h);const f={type:"element",tagName:"sup",properties:{},children:[h]};return t.patch(e,f),t.applyData(e,f)}function CB(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function AB(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function sA(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const o=t.all(e),a=o[0];a&&a.type==="text"?a.value="["+a.value:o.unshift({type:"text",value:"["});const l=o[o.length-1];return l&&l.type==="text"?l.value+=r:o.push({type:"text",value:r}),o}function kB(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return sA(t,e);const o={src:Tf(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(o.title=r.title);const a={type:"element",tagName:"img",properties:o,children:[]};return t.patch(e,a),t.applyData(e,a)}function IB(t,e){const n={src:Tf(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function RB(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function NB(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return sA(t,e);const o={href:Tf(r.url||"")};r.title!==null&&r.title!==void 0&&(o.title=r.title);const a={type:"element",tagName:"a",properties:o,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function MB(t,e){const n={href:Tf(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function DB(t,e,n){const r=t.all(e),o=n?PB(n):aA(e),a={},l=[];if(typeof e.checked=="boolean"){const g=r[0];let y;g&&g.type==="element"&&g.tagName==="p"?y=g:(y={type:"element",tagName:"p",properties:{},children:[]},r.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const g=r[c];(o||c!==0||g.type!=="element"||g.tagName!=="p")&&l.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!o?l.push(...g.children):l.push(g)}const h=r[r.length-1];h&&(o||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,f),t.applyData(e,f)}function PB(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=aA(n[r])}return e}function aA(t){const e=t.spread;return e??t.children.length>1}function LB(t,e){const n={},r=t.all(e);let o=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++o<r.length;){const l=r[o];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function OB(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function UB(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function BB(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function FB(t,e){const n=t.all(e),r=n.shift(),o=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),o.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=ww(e.children[1]),h=jC(e.children[e.children.length-1]);c&&h&&(l.position={start:c,end:h}),o.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(o,!0)};return t.patch(e,a),t.applyData(e,a)}function jB(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:e.children.length;let h=-1;const f=[];for(;++h<c;){const y=e.children[h],_={},T=l?l[h]:void 0;T&&(_.align=T);let C={type:"element",tagName:a,properties:_,children:[]};y&&(C.children=t.all(y),t.patch(y,C),C=t.applyData(y,C)),f.push(C)}const g={type:"element",tagName:"tr",properties:{},children:t.wrap(f,!0)};return t.patch(e,g),t.applyData(e,g)}function zB(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const ME=9,DE=32;function qB(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),o=0;const a=[];for(;r;)a.push(PE(e.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(e);return a.push(PE(e.slice(o),o>0,!1)),a.join("")}function PE(t,e,n){let r=0,o=t.length;if(e){let a=t.codePointAt(r);for(;a===ME||a===DE;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(o-1);for(;a===ME||a===DE;)o--,a=t.codePointAt(o-1)}return o>r?t.slice(r,o):""}function HB(t,e){const n={type:"text",value:qB(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function VB(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const $B={blockquote:xB,break:wB,code:_B,delete:SB,emphasis:EB,footnoteReference:TB,heading:CB,html:AB,imageReference:kB,image:IB,inlineCode:RB,linkReference:NB,link:MB,listItem:DB,list:LB,paragraph:OB,root:UB,strong:BB,table:FB,tableCell:zB,tableRow:jB,text:HB,thematicBreak:VB,toml:Jy,yaml:Jy,definition:Jy,footnoteDefinition:Jy};function Jy(){}const lA=-1,Uv=0,Gp=1,yv=2,kw=3,Iw=4,Rw=5,Nw=6,uA=7,cA=8,LE=typeof self=="object"?self:globalThis,GB=(t,e)=>{const n=(o,a)=>(t.set(a,o),o),r=o=>{if(t.has(o))return t.get(o);const[a,l]=e[o];switch(a){case Uv:case lA:return n(l,o);case Gp:{const c=n([],o);for(const h of l)c.push(r(h));return c}case yv:{const c=n({},o);for(const[h,f]of l)c[r(h)]=r(f);return c}case kw:return n(new Date(l),o);case Iw:{const{source:c,flags:h}=l;return n(new RegExp(c,h),o)}case Rw:{const c=n(new Map,o);for(const[h,f]of l)c.set(r(h),r(f));return c}case Nw:{const c=n(new Set,o);for(const h of l)c.add(r(h));return c}case uA:{const{name:c,message:h}=l;return n(new LE[c](h),o)}case cA:return n(BigInt(l),o);case"BigInt":return n(Object(BigInt(l)),o);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new LE[a](l),o)};return r},OE=t=>GB(new Map,t)(0),Wd="",{toString:JB}={},{keys:YB}=Object,Pp=t=>{const e=typeof t;if(e!=="object"||!t)return[Uv,e];const n=JB.call(t).slice(8,-1);switch(n){case"Array":return[Gp,Wd];case"Object":return[yv,Wd];case"Date":return[kw,Wd];case"RegExp":return[Iw,Wd];case"Map":return[Rw,Wd];case"Set":return[Nw,Wd];case"DataView":return[Gp,n]}return n.includes("Array")?[Gp,n]:n.includes("Error")?[uA,n]:[yv,n]},Yy=([t,e])=>t===Uv&&(e==="function"||e==="symbol"),WB=(t,e,n,r)=>{const o=(l,c)=>{const h=r.push(l)-1;return n.set(c,h),h},a=l=>{if(n.has(l))return n.get(l);let[c,h]=Pp(l);switch(c){case Uv:{let g=l;switch(h){case"bigint":c=cA,g=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+h);g=null;break;case"undefined":return o([lA],l)}return o([c,g],l)}case Gp:{if(h){let _=l;return h==="DataView"?_=new Uint8Array(l.buffer):h==="ArrayBuffer"&&(_=new Uint8Array(l)),o([h,[..._]],l)}const g=[],y=o([c,g],l);for(const _ of l)g.push(a(_));return y}case yv:{if(h)switch(h){case"BigInt":return o([h,l.toString()],l);case"Boolean":case"Number":case"String":return o([h,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const g=[],y=o([c,g],l);for(const _ of YB(l))(t||!Yy(Pp(l[_])))&&g.push([a(_),a(l[_])]);return y}case kw:return o([c,l.toISOString()],l);case Iw:{const{source:g,flags:y}=l;return o([c,{source:g,flags:y}],l)}case Rw:{const g=[],y=o([c,g],l);for(const[_,T]of l)(t||!(Yy(Pp(_))||Yy(Pp(T))))&&g.push([a(_),a(T)]);return y}case Nw:{const g=[],y=o([c,g],l);for(const _ of l)(t||!Yy(Pp(_)))&&g.push(a(_));return y}}const{message:f}=l;return o([c,{name:h,message:f}],l)};return a},UE=(t,{json:e,lossy:n}={})=>{const r=[];return WB(!(e||n),!!e,new Map,r)(t),r},vv=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?OE(UE(t,e)):structuredClone(t):(t,e)=>OE(UE(t,e));function KB(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function XB(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function QB(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||KB,r=t.options.footnoteBackLabel||XB,o=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let h=-1;for(;++h<t.footnoteOrder.length;){const f=t.footnoteById.get(t.footnoteOrder[h]);if(!f)continue;const g=t.all(f),y=String(f.identifier).toUpperCase(),_=Tf(y.toLowerCase());let T=0;const C=[],k=t.footnoteCounts.get(y);for(;k!==void 0&&++T<=k;){C.length>0&&C.push({type:"text",value:" "});let L=typeof n=="string"?n:n(h,T);typeof L=="string"&&(L={type:"text",value:L}),C.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+_+(T>1?"-"+T:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(h,T),className:["data-footnote-backref"]},children:Array.isArray(L)?L:[L]})}const N=g[g.length-1];if(N&&N.type==="element"&&N.tagName==="p"){const L=N.children[N.children.length-1];L&&L.type==="text"?L.value+=" ":N.children.push({type:"text",value:" "}),N.children.push(...C)}else g.push(...C);const I={type:"element",tagName:"li",properties:{id:e+"fn-"+_},children:t.wrap(g,!0)};t.patch(f,I),c.push(I)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...vv(l),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const Bv=(function(t){if(t==null)return n6;if(typeof t=="function")return Fv(t);if(typeof t=="object")return Array.isArray(t)?ZB(t):e6(t);if(typeof t=="string")return t6(t);throw new Error("Expected function, string, or object as test")});function ZB(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Bv(t[n]);return Fv(r);function r(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function e6(t){const e=t;return Fv(n);function n(r){const o=r;let a;for(a in t)if(o[a]!==e[a])return!1;return!0}}function t6(t){return Fv(e);function e(n){return n&&n.type===t}}function Fv(t){return e;function e(n,r,o){return!!(r6(n)&&t.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}function n6(){return!0}function r6(t){return t!==null&&typeof t=="object"&&"type"in t}const dA=[],i6=!0,Lx=!1,o6="skip";function fA(t,e,n,r){let o;typeof e=="function"&&typeof n!="function"?(r=n,n=e):o=e;const a=Bv(o),l=r?-1:1;c(t,void 0,[])();function c(h,f,g){const y=h&&typeof h=="object"?h:{};if(typeof y.type=="string"){const T=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(_,"name",{value:"node ("+(h.type+(T?"<"+T+">":""))+")"})}return _;function _(){let T=dA,C,k,N;if((!e||a(h,f,g[g.length-1]||void 0))&&(T=s6(n(h,g)),T[0]===Lx))return T;if("children"in h&&h.children){const I=h;if(I.children&&T[0]!==o6)for(k=(r?I.children.length:-1)+l,N=g.concat(I);k>-1&&k<I.children.length;){const L=I.children[k];if(C=c(L,k,N)(),C[0]===Lx)return C;k=typeof C[1]=="number"?C[1]:k+l}}return T}}}function s6(t){return Array.isArray(t)?t:typeof t=="number"?[i6,t]:t==null?dA:[t]}function Mw(t,e,n,r){let o,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,o=n):(a=e,l=n,o=r),fA(t,a,c,o);function c(h,f){const g=f[f.length-1],y=g?g.children.indexOf(h):void 0;return l(h,y,g)}}const Ox={}.hasOwnProperty,a6={};function l6(t,e){const n=e||a6,r=new Map,o=new Map,a=new Map,l={...$B,...n.handlers},c={all:f,applyData:c6,definitionById:r,footnoteById:o,footnoteCounts:a,footnoteOrder:[],handlers:l,one:h,options:n,patch:u6,wrap:f6};return Mw(t,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const y=g.type==="definition"?r:o,_=String(g.identifier).toUpperCase();y.has(_)||y.set(_,g)}}),c;function h(g,y){const _=g.type,T=c.handlers[_];if(Ox.call(c.handlers,_)&&T)return T(c,g,y);if(c.options.passThrough&&c.options.passThrough.includes(_)){if("children"in g){const{children:k,...N}=g,I=vv(N);return I.children=c.all(g),I}return vv(g)}return(c.options.unknownHandler||d6)(c,g,y)}function f(g){const y=[];if("children"in g){const _=g.children;let T=-1;for(;++T<_.length;){const C=c.one(_[T],g);if(C){if(T&&_[T-1].type==="break"&&(!Array.isArray(C)&&C.type==="text"&&(C.value=BE(C.value)),!Array.isArray(C)&&C.type==="element")){const k=C.children[0];k&&k.type==="text"&&(k.value=BE(k.value))}Array.isArray(C)?y.push(...C):y.push(C)}}}return y}}function u6(t,e){t.position&&(e.position=X3(t))}function c6(t,e){let n=e;if(t&&t.data){const r=t.data.hName,o=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,vv(a)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function d6(t,e){const n=e.data||{},r="value"in e&&!(Ox.call(n,"hProperties")||Ox.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function f6(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function BE(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function FE(t,e){const n=l6(t,e),r=n.one(t,void 0),o=QB(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return o&&a.children.push({type:"text",value:`
`},o),a}function h6(t,e){return t&&"run"in t?async function(n,r){const o=FE(n,{file:r,...e});await t.run(o,r)}:function(n,r){return FE(n,{file:r,...t||e})}}function jE(t){if(t)throw t}var Db,zE;function p6(){if(zE)return Db;zE=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(f){return typeof Array.isArray=="function"?Array.isArray(f):e.call(f)==="[object Array]"},a=function(f){if(!f||e.call(f)!=="[object Object]")return!1;var g=t.call(f,"constructor"),y=f.constructor&&f.constructor.prototype&&t.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!g&&!y)return!1;var _;for(_ in f);return typeof _>"u"||t.call(f,_)},l=function(f,g){n&&g.name==="__proto__"?n(f,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):f[g.name]=g.newValue},c=function(f,g){if(g==="__proto__")if(t.call(f,g)){if(r)return r(f,g).value}else return;return f[g]};return Db=function h(){var f,g,y,_,T,C,k=arguments[0],N=1,I=arguments.length,L=!1;for(typeof k=="boolean"&&(L=k,k=arguments[1]||{},N=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});N<I;++N)if(f=arguments[N],f!=null)for(g in f)y=c(k,g),_=c(f,g),k!==_&&(L&&_&&(a(_)||(T=o(_)))?(T?(T=!1,C=y&&o(y)?y:[]):C=y&&a(y)?y:{},l(k,{name:g,newValue:h(L,C,_)})):typeof _<"u"&&l(k,{name:g,newValue:_}));return k},Db}var m6=p6();const Pb=sl(m6);function Ux(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function g6(){const t=[],e={run:n,use:r};return e;function n(...o){let a=-1;const l=o.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...o);function c(h,...f){const g=t[++a];let y=-1;if(h){l(h);return}for(;++y<o.length;)(f[y]===null||f[y]===void 0)&&(f[y]=o[y]);o=f,g?y6(g,c)(...f):l(null,...f)}}function r(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return t.push(o),e}}function y6(t,e){let n;return r;function r(...l){const c=t.length>l.length;let h;c&&l.push(o);try{h=t.apply(this,l)}catch(f){const g=f;if(c&&n)throw g;return o(g)}c||(h&&h.then&&typeof h.then=="function"?h.then(a,o):h instanceof Error?o(h):a(h))}function o(l,...c){n||(n=!0,e(l,...c))}function a(l){o(null,l)}}const ns={basename:v6,dirname:b6,extname:x6,join:w6,sep:"/"};function v6(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');cm(t);let n=0,r=-1,o=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;o--;)if(t.codePointAt(o)===47){if(a){n=o+1;break}}else r<0&&(a=!0,r=o+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,c=e.length-1;for(;o--;)if(t.codePointAt(o)===47){if(a){n=o+1;break}}else l<0&&(a=!0,l=o+1),c>-1&&(t.codePointAt(o)===e.codePointAt(c--)?c<0&&(r=o):(c=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function b6(t){if(cm(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function x6(t){cm(t);let e=t.length,n=-1,r=0,o=-1,a=0,l;for(;e--;){const c=t.codePointAt(e);if(c===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),c===46?o<0?o=e:a!==1&&(a=1):o>-1&&(a=-1)}return o<0||n<0||a===0||a===1&&o===n-1&&o===r+1?"":t.slice(o,n)}function w6(...t){let e=-1,n;for(;++e<t.length;)cm(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":_6(n)}function _6(t){cm(t);const e=t.codePointAt(0)===47;let n=S6(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function S6(t,e){let n="",r=0,o=-1,a=0,l=-1,c,h;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(o===l-1||a===1))if(o!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",r=0):(n=n.slice(0,h),r=n.length-1-n.lastIndexOf("/")),o=l,a=0;continue}}else if(n.length>0){n="",r=0,o=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(o+1,l):n=t.slice(o+1,l),r=l-o-1;o=l,a=0}else c===46&&a>-1?a++:a=-1}return n}function cm(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const E6={cwd:T6};function T6(){return"/"}function Bx(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function C6(t){if(typeof t=="string")t=new URL(t);else if(!Bx(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return A6(t)}function A6(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(e)}const Lb=["history","path","basename","stem","extname","dirname"];class hA{constructor(e){let n;e?Bx(e)?n={path:e}:typeof e=="string"||k6(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":E6.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Lb.length;){const a=Lb[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let o;for(o in n)Lb.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?ns.basename(this.path):void 0}set basename(e){Ub(e,"basename"),Ob(e,"basename"),this.path=ns.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ns.dirname(this.path):void 0}set dirname(e){qE(this.basename,"dirname"),this.path=ns.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ns.extname(this.path):void 0}set extname(e){if(Ob(e,"extname"),qE(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ns.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Bx(e)&&(e=C6(e)),Ub(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ns.basename(this.path,this.extname):void 0}set stem(e){Ub(e,"stem"),Ob(e,"stem"),this.path=ns.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const o=this.message(e,n,r);throw o.fatal=!0,o}info(e,n,r){const o=this.message(e,n,r);return o.fatal=void 0,o}message(e,n,r){const o=new dr(e,n,r);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Ob(t,e){if(t&&t.includes(ns.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ns.sep+"`")}function Ub(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function qE(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function k6(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const I6=(function(t){const r=this.constructor.prototype,o=r[t],a=function(){return o.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),R6={}.hasOwnProperty;class Dw extends I6{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=g6()}copy(){const e=new Dw;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Pb(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(jb("data",this.frozen),this.namespace[e]=n,this):R6.call(this.namespace,e)&&this.namespace[e]||void 0:e?(jb("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const o=n.call(e,...r);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Wy(e),r=this.parser||this.Parser;return Bb("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Bb("process",this.parser||this.Parser),Fb("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(a,l){const c=Wy(e),h=r.parse(c);r.run(h,c,function(g,y,_){if(g||!y||!_)return f(g);const T=y,C=r.stringify(T,_);D6(C)?_.value=C:_.result=C,f(g,_)});function f(g,y){g||!y?l(g):a?a(y):n(void 0,y)}}}processSync(e){let n=!1,r;return this.freeze(),Bb("processSync",this.parser||this.Parser),Fb("processSync",this.compiler||this.Compiler),this.process(e,o),VE("processSync","process",n),r;function o(a,l){n=!0,jE(a),r=l}}run(e,n,r){HE(e),this.freeze();const o=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,c){const h=Wy(n);o.run(e,h,f);function f(g,y,_){const T=y||e;g?c(g):l?l(T):r(void 0,T,_)}}}runSync(e,n){let r=!1,o;return this.run(e,n,a),VE("runSync","run",r),o;function a(l,c){jE(l),o=c,r=!0}}stringify(e,n){this.freeze();const r=Wy(n),o=this.compiler||this.Compiler;return Fb("stringify",o),HE(e),o(e,r)}use(e,...n){const r=this.attachers,o=this.namespace;if(jb("use",this.frozen),e!=null)if(typeof e=="function")h(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(f){if(typeof f=="function")h(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[g,...y]=f;h(g,y)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(f.plugins),f.settings&&(o.settings=Pb(!0,o.settings,f.settings))}function c(f){let g=-1;if(f!=null)if(Array.isArray(f))for(;++g<f.length;){const y=f[g];a(y)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function h(f,g){let y=-1,_=-1;for(;++y<r.length;)if(r[y][0]===f){_=y;break}if(_===-1)r.push([f,...g]);else if(g.length>0){let[T,...C]=g;const k=r[_][1];Ux(k)&&Ux(T)&&(T=Pb(!0,k,T)),r[_]=[f,T,...C]}}}}const N6=new Dw().freeze();function Bb(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Fb(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function jb(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function HE(t){if(!Ux(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function VE(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Wy(t){return M6(t)?t:new hA(t)}function M6(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function D6(t){return typeof t=="string"||P6(t)}function P6(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const L6="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",$E=[],GE={allowDangerousHtml:!0},O6=/^(https?|ircs?|mailto|xmpp)$/i,U6=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function JE(t){const e=B6(t),n=F6(t);return j6(e.runSync(e.parse(n),n),t)}function B6(t){const e=t.rehypePlugins||$E,n=t.remarkPlugins||$E,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...GE}:GE;return N6().use(bB).use(n).use(h6,r).use(e)}function F6(t){const e=t.children||"",n=new hA;return typeof e=="string"&&(n.value=e),n}function j6(t,e){const n=e.allowedElements,r=e.allowElement,o=e.components,a=e.disallowedElements,l=e.skipHtml,c=e.unwrapDisallowed,h=e.urlTransform||z6;for(const g of U6)Object.hasOwn(e,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+L6+g.id,void 0);return Mw(t,f),nU(t,{Fragment:b.Fragment,components:o,ignoreInvalidStyle:!0,jsx:b.jsx,jsxs:b.jsxs,passKeys:!0,passNode:!0});function f(g,y,_){if(g.type==="raw"&&_&&typeof y=="number")return l?_.children.splice(y,1):_.children[y]={type:"text",value:g.value},y;if(g.type==="element"){let T;for(T in Rb)if(Object.hasOwn(Rb,T)&&Object.hasOwn(g.properties,T)){const C=g.properties[T],k=Rb[T];(k===null||k.includes(g.tagName))&&(g.properties[T]=h(String(C||""),T,g))}}if(g.type==="element"){let T=n?!n.includes(g.tagName):a?a.includes(g.tagName):!1;if(!T&&r&&typeof y=="number"&&(T=!r(g,y,_)),T&&_&&typeof y=="number")return c&&g.children?_.children.splice(y,1,...g.children):_.children.splice(y,1),y}}}function z6(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),o=t.indexOf("/");return e===-1||o!==-1&&e>o||n!==-1&&e>n||r!==-1&&e>r||O6.test(t.slice(0,e))?t:""}function YE(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,o=n.indexOf(e);for(;o!==-1;)r++,o=n.indexOf(e,o+e.length);return r}function q6(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function H6(t,e,n){const o=Bv((n||{}).ignore||[]),a=V6(e);let l=-1;for(;++l<a.length;)fA(t,"text",c);function c(f,g){let y=-1,_;for(;++y<g.length;){const T=g[y],C=_?_.children:void 0;if(o(T,C?C.indexOf(T):void 0,_))return;_=T}if(_)return h(f,g)}function h(f,g){const y=g[g.length-1],_=a[l][0],T=a[l][1];let C=0;const N=y.children.indexOf(f);let I=!1,L=[];_.lastIndex=0;let D=_.exec(f.value);for(;D;){const $=D.index,G={index:D.index,input:D.input,stack:[...g,f]};let j=T(...D,G);if(typeof j=="string"&&(j=j.length>0?{type:"text",value:j}:void 0),j===!1?_.lastIndex=$+1:(C!==$&&L.push({type:"text",value:f.value.slice(C,$)}),Array.isArray(j)?L.push(...j):j&&L.push(j),C=$+D[0].length,I=!0),!_.global)break;D=_.exec(f.value)}return I?(C<f.value.length&&L.push({type:"text",value:f.value.slice(C)}),y.children.splice(N,1,...L)):L=[f],N+L.length}}function V6(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const o=n[r];e.push([$6(o[0]),G6(o[1])])}return e}function $6(t){return typeof t=="string"?new RegExp(q6(t),"g"):t}function G6(t){return typeof t=="function"?t:function(){return t}}const zb="phrasing",qb=["autolink","link","image","label"];function J6(){return{transforms:[eF],enter:{literalAutolink:W6,literalAutolinkEmail:Hb,literalAutolinkHttp:Hb,literalAutolinkWww:Hb},exit:{literalAutolink:Z6,literalAutolinkEmail:Q6,literalAutolinkHttp:K6,literalAutolinkWww:X6}}}function Y6(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:zb,notInConstruct:qb},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:zb,notInConstruct:qb},{character:":",before:"[ps]",after:"\\/",inConstruct:zb,notInConstruct:qb}]}}function W6(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Hb(t){this.config.enter.autolinkProtocol.call(this,t)}function K6(t){this.config.exit.autolinkProtocol.call(this,t)}function X6(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Q6(t){this.config.exit.autolinkEmail.call(this,t)}function Z6(t){this.exit(t)}function eF(t){H6(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,tF],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),nF]],{ignore:["link","linkReference"]})}function tF(t,e,n,r,o){let a="";if(!pA(o)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!rF(n)))return!1;const l=iF(n+r);if(!l[0])return!1;const c={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function nF(t,e,n,r){return!pA(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function rF(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function iF(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const o=YE(t,"(");let a=YE(t,")");for(;r!==-1&&o>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function pA(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Gu(n)||Lv(n))&&(!e||n!==47)}mA.peek=hF;function oF(){this.buffer()}function sF(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function aF(){this.buffer()}function lF(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function uF(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=xo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function cF(t){this.exit(t)}function dF(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=xo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function fF(t){this.exit(t)}function hF(){return"["}function mA(t,e,n,r){const o=n.createTracker(r);let a=o.move("[^");const l=n.enter("footnoteReference"),c=n.enter("reference");return a+=o.move(n.safe(n.associationId(t),{after:"]",before:a})),c(),l(),a+=o.move("]"),a}function pF(){return{enter:{gfmFootnoteCallString:oF,gfmFootnoteCall:sF,gfmFootnoteDefinitionLabelString:aF,gfmFootnoteDefinition:lF},exit:{gfmFootnoteCallString:uF,gfmFootnoteCall:cF,gfmFootnoteDefinitionLabelString:dF,gfmFootnoteDefinition:fF}}}function mF(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:mA},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,o,a,l){const c=a.createTracker(l);let h=c.move("[^");const f=a.enter("footnoteDefinition"),g=a.enter("label");return h+=c.move(a.safe(a.associationId(r),{before:h,after:"]"})),g(),h+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),h+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,c.current()),e?gA:gF))),f(),h}}function gF(t,e,n){return e===0?t:gA(t,e,n)}function gA(t,e,n){return(n?"":"    ")+t}const yF=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];yA.peek=_F;function vF(){return{canContainEols:["delete"],enter:{strikethrough:xF},exit:{strikethrough:wF}}}function bF(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:yF}],handlers:{delete:yA}}}function xF(t){this.enter({type:"delete",children:[]},t)}function wF(t){this.exit(t)}function yA(t,e,n,r){const o=n.createTracker(r),a=n.enter("strikethrough");let l=o.move("~~");return l+=n.containerPhrasing(t,{...o.current(),before:l,after:"~"}),l+=o.move("~~"),a(),l}function _F(){return"~"}function SF(t){return t.length}function EF(t,e){const n=e||{},r=(n.align||[]).concat(),o=n.stringLength||SF,a=[],l=[],c=[],h=[];let f=0,g=-1;for(;++g<t.length;){const k=[],N=[];let I=-1;for(t[g].length>f&&(f=t[g].length);++I<t[g].length;){const L=TF(t[g][I]);if(n.alignDelimiters!==!1){const D=o(L);N[I]=D,(h[I]===void 0||D>h[I])&&(h[I]=D)}k.push(L)}l[g]=k,c[g]=N}let y=-1;if(typeof r=="object"&&"length"in r)for(;++y<f;)a[y]=WE(r[y]);else{const k=WE(r);for(;++y<f;)a[y]=k}y=-1;const _=[],T=[];for(;++y<f;){const k=a[y];let N="",I="";k===99?(N=":",I=":"):k===108?N=":":k===114&&(I=":");let L=n.alignDelimiters===!1?1:Math.max(1,h[y]-N.length-I.length);const D=N+"-".repeat(L)+I;n.alignDelimiters!==!1&&(L=N.length+L+I.length,L>h[y]&&(h[y]=L),T[y]=L),_[y]=D}l.splice(1,0,_),c.splice(1,0,T),g=-1;const C=[];for(;++g<l.length;){const k=l[g],N=c[g];y=-1;const I=[];for(;++y<f;){const L=k[y]||"";let D="",$="";if(n.alignDelimiters!==!1){const G=h[y]-(N[y]||0),j=a[y];j===114?D=" ".repeat(G):j===99?G%2?(D=" ".repeat(G/2+.5),$=" ".repeat(G/2-.5)):(D=" ".repeat(G/2),$=D):$=" ".repeat(G)}n.delimiterStart!==!1&&!y&&I.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&L==="")&&(n.delimiterStart!==!1||y)&&I.push(" "),n.alignDelimiters!==!1&&I.push(D),I.push(L),n.alignDelimiters!==!1&&I.push($),n.padding!==!1&&I.push(" "),(n.delimiterEnd!==!1||y!==f-1)&&I.push("|")}C.push(n.delimiterEnd===!1?I.join("").replace(/ +$/,""):I.join(""))}return C.join(`
`)}function TF(t){return t==null?"":String(t)}function WE(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function CF(t,e,n,r){const o=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),AF);return o(),l}function AF(t,e,n){return">"+(n?"":" ")+t}function kF(t,e){return KE(t,e.inConstruct,!0)&&!KE(t,e.notInConstruct,!1)}function KE(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function XE(t,e,n,r){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&kF(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function IF(t,e){const n=String(t);let r=n.indexOf(e),o=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===o?++a>l&&(l=a):a=1,o=r+e.length,r=n.indexOf(e,o);return l}function RF(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function NF(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function MF(t,e,n,r){const o=NF(n),a=t.value||"",l=o==="`"?"GraveAccent":"Tilde";if(RF(t,n)){const y=n.enter("codeIndented"),_=n.indentLines(a,DF);return y(),_}const c=n.createTracker(r),h=o.repeat(Math.max(IF(a,o)+1,3)),f=n.enter("codeFenced");let g=c.move(h);if(t.lang){const y=n.enter(`codeFencedLang${l}`);g+=c.move(n.safe(t.lang,{before:g,after:" ",encode:["`"],...c.current()})),y()}if(t.lang&&t.meta){const y=n.enter(`codeFencedMeta${l}`);g+=c.move(" "),g+=c.move(n.safe(t.meta,{before:g,after:`
`,encode:["`"],...c.current()})),y()}return g+=c.move(`
`),a&&(g+=c.move(a+`
`)),g+=c.move(h),f(),g}function DF(t,e,n){return(n?"":"    ")+t}function Pw(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function PF(t,e,n,r){const o=Pw(n),a=o==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const h=n.createTracker(r);let f=h.move("[");return f+=h.move(n.safe(n.associationId(t),{before:f,after:"]",...h.current()})),f+=h.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(n.safe(t.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(c=n.enter("destinationRaw"),f+=h.move(n.safe(t.url,{before:f,after:t.title?" ":`
`,...h.current()}))),c(),t.title&&(c=n.enter(`title${a}`),f+=h.move(" "+o),f+=h.move(n.safe(t.title,{before:f,after:o,...h.current()})),f+=h.move(o),c()),l(),f}function LF(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function em(t){return"&#x"+t.toString(16).toUpperCase()+";"}function bv(t,e,n){const r=pf(t),o=pf(e);return r===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}vA.peek=OF;function vA(t,e,n,r){const o=LF(n),a=n.enter("emphasis"),l=n.createTracker(r),c=l.move(o);let h=l.move(n.containerPhrasing(t,{after:o,before:c,...l.current()}));const f=h.charCodeAt(0),g=bv(r.before.charCodeAt(r.before.length-1),f,o);g.inside&&(h=em(f)+h.slice(1));const y=h.charCodeAt(h.length-1),_=bv(r.after.charCodeAt(0),y,o);_.inside&&(h=h.slice(0,-1)+em(y));const T=l.move(o);return a(),n.attentionEncodeSurroundingInfo={after:_.outside,before:g.outside},c+h+T}function OF(t,e,n){return n.options.emphasis||"*"}function UF(t,e){let n=!1;return Mw(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Lx}),!!((!t.depth||t.depth<3)&&Tw(t)&&(e.options.setext||n))}function BF(t,e,n,r){const o=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(UF(t,n)){const g=n.enter("headingSetext"),y=n.enter("phrasing"),_=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return y(),g(),_+`
`+(o===1?"=":"-").repeat(_.length-(Math.max(_.lastIndexOf("\r"),_.lastIndexOf(`
`))+1))}const l="#".repeat(o),c=n.enter("headingAtx"),h=n.enter("phrasing");a.move(l+" ");let f=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(f)&&(f=em(f.charCodeAt(0))+f.slice(1)),f=f?l+" "+f:l,n.options.closeAtx&&(f+=" "+l),h(),c(),f}bA.peek=FF;function bA(t){return t.value||""}function FF(){return"<"}xA.peek=jF;function xA(t,e,n,r){const o=Pw(n),a=o==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const h=n.createTracker(r);let f=h.move("![");return f+=h.move(n.safe(t.alt,{before:f,after:"]",...h.current()})),f+=h.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(n.safe(t.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(c=n.enter("destinationRaw"),f+=h.move(n.safe(t.url,{before:f,after:t.title?" ":")",...h.current()}))),c(),t.title&&(c=n.enter(`title${a}`),f+=h.move(" "+o),f+=h.move(n.safe(t.title,{before:f,after:o,...h.current()})),f+=h.move(o),c()),f+=h.move(")"),l(),f}function jF(){return"!"}wA.peek=zF;function wA(t,e,n,r){const o=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(r);let h=c.move("![");const f=n.safe(t.alt,{before:h,after:"]",...c.current()});h+=c.move(f+"]["),l();const g=n.stack;n.stack=[],l=n.enter("reference");const y=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return l(),n.stack=g,a(),o==="full"||!f||f!==y?h+=c.move(y+"]"):o==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function zF(){return"!"}_A.peek=qF;function _A(t,e,n){let r=t.value||"",o="`",a=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],c=n.compilePattern(l);let h;if(l.atBreak)for(;h=c.exec(r);){let f=h.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(h.index+1)}}return o+r+o}function qF(){return"`"}function SA(t,e){const n=Tw(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}EA.peek=HF;function EA(t,e,n,r){const o=Pw(n),a=o==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let c,h;if(SA(t,n)){const g=n.stack;n.stack=[],c=n.enter("autolink");let y=l.move("<");return y+=l.move(n.containerPhrasing(t,{before:y,after:">",...l.current()})),y+=l.move(">"),c(),n.stack=g,y}c=n.enter("link"),h=n.enter("label");let f=l.move("[");return f+=l.move(n.containerPhrasing(t,{before:f,after:"](",...l.current()})),f+=l.move("]("),h(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(h=n.enter("destinationLiteral"),f+=l.move("<"),f+=l.move(n.safe(t.url,{before:f,after:">",...l.current()})),f+=l.move(">")):(h=n.enter("destinationRaw"),f+=l.move(n.safe(t.url,{before:f,after:t.title?" ":")",...l.current()}))),h(),t.title&&(h=n.enter(`title${a}`),f+=l.move(" "+o),f+=l.move(n.safe(t.title,{before:f,after:o,...l.current()})),f+=l.move(o),h()),f+=l.move(")"),c(),f}function HF(t,e,n){return SA(t,n)?"<":"["}TA.peek=VF;function TA(t,e,n,r){const o=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(r);let h=c.move("[");const f=n.containerPhrasing(t,{before:h,after:"]",...c.current()});h+=c.move(f+"]["),l();const g=n.stack;n.stack=[],l=n.enter("reference");const y=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return l(),n.stack=g,a(),o==="full"||!f||f!==y?h+=c.move(y+"]"):o==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function VF(){return"["}function Lw(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function $F(t){const e=Lw(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function GF(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function CA(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function JF(t,e,n,r){const o=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?GF(n):Lw(n);const c=t.ordered?l==="."?")":".":$F(n);let h=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const g=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&g&&(!g.children||!g.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),CA(n)===l&&g){let y=-1;for(;++y<t.children.length;){const _=t.children[y];if(_&&_.type==="listItem"&&_.children&&_.children[0]&&_.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(l=c),n.bulletCurrent=l;const f=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,o(),f}function YF(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function WF(t,e,n,r){const o=YF(n);let a=n.bulletCurrent||Lw(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(o==="tab"||o==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(r);c.move(a+" ".repeat(l-a.length)),c.shift(l);const h=n.enter("listItem"),f=n.indentLines(n.containerFlow(t,c.current()),g);return h(),f;function g(y,_,T){return _?(T?"":" ".repeat(l))+y:(T?a:a+" ".repeat(l-a.length))+y}}function KF(t,e,n,r){const o=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),o(),l}const XF=Bv(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function QF(t,e,n,r){return(t.children.some(function(l){return XF(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function ZF(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}AA.peek=ej;function AA(t,e,n,r){const o=ZF(n),a=n.enter("strong"),l=n.createTracker(r),c=l.move(o+o);let h=l.move(n.containerPhrasing(t,{after:o,before:c,...l.current()}));const f=h.charCodeAt(0),g=bv(r.before.charCodeAt(r.before.length-1),f,o);g.inside&&(h=em(f)+h.slice(1));const y=h.charCodeAt(h.length-1),_=bv(r.after.charCodeAt(0),y,o);_.inside&&(h=h.slice(0,-1)+em(y));const T=l.move(o+o);return a(),n.attentionEncodeSurroundingInfo={after:_.outside,before:g.outside},c+h+T}function ej(t,e,n){return n.options.strong||"*"}function tj(t,e,n,r){return n.safe(t.value,r)}function nj(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function rj(t,e,n){const r=(CA(n)+(n.options.ruleSpaces?" ":"")).repeat(nj(n));return n.options.ruleSpaces?r.slice(0,-1):r}const kA={blockquote:CF,break:XE,code:MF,definition:PF,emphasis:vA,hardBreak:XE,heading:BF,html:bA,image:xA,imageReference:wA,inlineCode:_A,link:EA,linkReference:TA,list:JF,listItem:WF,paragraph:KF,root:QF,strong:AA,text:tj,thematicBreak:rj};function ij(){return{enter:{table:oj,tableData:QE,tableHeader:QE,tableRow:aj},exit:{codeText:lj,table:sj,tableData:Vb,tableHeader:Vb,tableRow:Vb}}}function oj(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function sj(t){this.exit(t),this.data.inTable=void 0}function aj(t){this.enter({type:"tableRow",children:[]},t)}function Vb(t){this.exit(t)}function QE(t){this.enter({type:"tableCell",children:[]},t)}function lj(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,uj));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function uj(t,e){return e==="|"?e:t}function cj(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,o=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:_,table:l,tableCell:h,tableRow:c}};function l(T,C,k,N){return f(g(T,k,N),T.align)}function c(T,C,k,N){const I=y(T,k,N),L=f([I]);return L.slice(0,L.indexOf(`
`))}function h(T,C,k,N){const I=k.enter("tableCell"),L=k.enter("phrasing"),D=k.containerPhrasing(T,{...N,before:a,after:a});return L(),I(),D}function f(T,C){return EF(T,{align:C,alignDelimiters:r,padding:n,stringLength:o})}function g(T,C,k){const N=T.children;let I=-1;const L=[],D=C.enter("table");for(;++I<N.length;)L[I]=y(N[I],C,k);return D(),L}function y(T,C,k){const N=T.children;let I=-1;const L=[],D=C.enter("tableRow");for(;++I<N.length;)L[I]=h(N[I],T,C,k);return D(),L}function _(T,C,k){let N=kA.inlineCode(T,C,k);return k.stack.includes("tableCell")&&(N=N.replace(/\|/g,"\\$&")),N}}function dj(){return{exit:{taskListCheckValueChecked:ZE,taskListCheckValueUnchecked:ZE,paragraph:hj}}}function fj(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:pj}}}function ZE(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function hj(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const o=e.children;let a=-1,l;for(;++a<o.length;){const c=o[a];if(c.type==="paragraph"){l=c;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function pj(t,e,n,r){const o=t.children[0],a=typeof t.checked=="boolean"&&o&&o.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",c=n.createTracker(r);a&&c.move(l);let h=kA.listItem(t,e,n,{...r,...c.current()});return a&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),h;function f(g){return g+l}}function mj(){return[J6(),pF(),vF(),ij(),dj()]}function gj(t){return{extensions:[Y6(),mF(t),bF(),cj(t),fj()]}}const yj={tokenize:Sj,partial:!0},IA={tokenize:Ej,partial:!0},RA={tokenize:Tj,partial:!0},NA={tokenize:Cj,partial:!0},vj={tokenize:Aj,partial:!0},MA={name:"wwwAutolink",tokenize:wj,previous:PA},DA={name:"protocolAutolink",tokenize:_j,previous:LA},Ks={name:"emailAutolink",tokenize:xj,previous:OA},ls={};function bj(){return{text:ls}}let Mu=48;for(;Mu<123;)ls[Mu]=Ks,Mu++,Mu===58?Mu=65:Mu===91&&(Mu=97);ls[43]=Ks;ls[45]=Ks;ls[46]=Ks;ls[95]=Ks;ls[72]=[Ks,DA];ls[104]=[Ks,DA];ls[87]=[Ks,MA];ls[119]=[Ks,MA];function xj(t,e,n){const r=this;let o,a;return l;function l(y){return!Fx(y)||!OA.call(r,r.previous)||Ow(r.events)?n(y):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(y))}function c(y){return Fx(y)?(t.consume(y),c):y===64?(t.consume(y),h):n(y)}function h(y){return y===46?t.check(vj,g,f)(y):y===45||y===95||cr(y)?(a=!0,t.consume(y),h):g(y)}function f(y){return t.consume(y),o=!0,h}function g(y){return a&&o&&Or(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(y)):n(y)}}function wj(t,e,n){const r=this;return o;function o(l){return l!==87&&l!==119||!PA.call(r,r.previous)||Ow(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(yj,t.attempt(IA,t.attempt(RA,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function _j(t,e,n){const r=this;let o="",a=!1;return l;function l(y){return(y===72||y===104)&&LA.call(r,r.previous)&&!Ow(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),o+=String.fromCodePoint(y),t.consume(y),c):n(y)}function c(y){if(Or(y)&&o.length<5)return o+=String.fromCodePoint(y),t.consume(y),c;if(y===58){const _=o.toLowerCase();if(_==="http"||_==="https")return t.consume(y),h}return n(y)}function h(y){return y===47?(t.consume(y),a?f:(a=!0,h)):n(y)}function f(y){return y===null||gv(y)||jt(y)||Gu(y)||Lv(y)?n(y):t.attempt(IA,t.attempt(RA,g),n)(y)}function g(y){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(y)}}function Sj(t,e,n){let r=0;return o;function o(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),o):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function Ej(t,e,n){let r,o,a;return l;function l(f){return f===46||f===95?t.check(NA,h,c)(f):f===null||jt(f)||Gu(f)||f!==45&&Lv(f)?h(f):(a=!0,t.consume(f),l)}function c(f){return f===95?r=!0:(o=r,r=void 0),t.consume(f),l}function h(f){return o||r||!a?n(f):e(f)}}function Tj(t,e){let n=0,r=0;return o;function o(l){return l===40?(n++,t.consume(l),o):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(NA,e,a)(l):l===null||jt(l)||Gu(l)?e(l):(t.consume(l),o)}function a(l){return l===41&&r++,t.consume(l),o}}function Cj(t,e,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),r):c===38?(t.consume(c),a):c===93?(t.consume(c),o):c===60||c===null||jt(c)||Gu(c)?e(c):n(c)}function o(c){return c===null||c===40||c===91||jt(c)||Gu(c)?e(c):r(c)}function a(c){return Or(c)?l(c):n(c)}function l(c){return c===59?(t.consume(c),r):Or(c)?(t.consume(c),l):n(c)}}function Aj(t,e,n){return r;function r(a){return t.consume(a),o}function o(a){return cr(a)?n(a):e(a)}}function PA(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||jt(t)}function LA(t){return!Or(t)}function OA(t){return!(t===47||Fx(t))}function Fx(t){return t===43||t===45||t===46||t===95||cr(t)}function Ow(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const kj={tokenize:Oj,partial:!0};function Ij(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Dj,continuation:{tokenize:Pj},exit:Lj}},text:{91:{name:"gfmFootnoteCall",tokenize:Mj},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Rj,resolveTo:Nj}}}}function Rj(t,e,n){const r=this;let o=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;o--;){const h=r.events[o][1];if(h.type==="labelImage"){l=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return c;function c(h){if(!l||!l._balanced)return n(h);const f=xo(r.sliceSerialize({start:l.end,end:r.now()}));return f.codePointAt(0)!==94||!a.includes(f.slice(1))?n(h):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),e(h))}}function Nj(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",o,e],["exit",o,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...c),t}function Mj(t,e,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return c;function c(y){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(y),t.exit("gfmFootnoteCallLabelMarker"),h}function h(y){return y!==94?n(y):(t.enter("gfmFootnoteCallMarker"),t.consume(y),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",f)}function f(y){if(a>999||y===93&&!l||y===null||y===91||jt(y))return n(y);if(y===93){t.exit("chunkString");const _=t.exit("gfmFootnoteCallString");return o.includes(xo(r.sliceSerialize(_)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(y),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(y)}return jt(y)||(l=!0),a++,t.consume(y),y===92?g:f}function g(y){return y===91||y===92||y===93?(t.consume(y),a++,f):f(y)}}function Dj(t,e,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,c;return h;function h(C){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(C),t.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(C){return C===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(C),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",g):n(C)}function g(C){if(l>999||C===93&&!c||C===null||C===91||jt(C))return n(C);if(C===93){t.exit("chunkString");const k=t.exit("gfmFootnoteDefinitionLabelString");return a=xo(r.sliceSerialize(k)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(C),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),_}return jt(C)||(c=!0),l++,t.consume(C),C===92?y:g}function y(C){return C===91||C===92||C===93?(t.consume(C),l++,g):g(C)}function _(C){return C===58?(t.enter("definitionMarker"),t.consume(C),t.exit("definitionMarker"),o.includes(a)||o.push(a),bt(t,T,"gfmFootnoteDefinitionWhitespace")):n(C)}function T(C){return e(C)}}function Pj(t,e,n){return t.check(um,e,t.attempt(kj,e,n))}function Lj(t){t.exit("gfmFootnoteDefinition")}function Oj(t,e,n){const r=this;return bt(t,o,"gfmFootnoteDefinitionIndent",5);function o(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function Uj(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:o};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function o(l,c){let h=-1;for(;++h<l.length;)if(l[h][0]==="enter"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._close){let f=h;for(;f--;)if(l[f][0]==="exit"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._open&&l[h][1].end.offset-l[h][1].start.offset===l[f][1].end.offset-l[f][1].start.offset){l[h][1].type="strikethroughSequence",l[f][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},l[f][1].start),end:Object.assign({},l[h][1].end)},y={type:"strikethroughText",start:Object.assign({},l[f][1].end),end:Object.assign({},l[h][1].start)},_=[["enter",g,c],["enter",l[f][1],c],["exit",l[f][1],c],["enter",y,c]],T=c.parser.constructs.insideSpan.null;T&&Ci(_,_.length,0,Ov(T,l.slice(f+1,h),c)),Ci(_,_.length,0,[["exit",y,c],["enter",l[h][1],c],["exit",l[h][1],c],["exit",g,c]]),Ci(l,f-1,h-f+3,_),h=f+_.length-2;break}}for(h=-1;++h<l.length;)l[h][1].type==="strikethroughSequenceTemporary"&&(l[h][1].type="data");return l}function a(l,c,h){const f=this.previous,g=this.events;let y=0;return _;function _(C){return f===126&&g[g.length-1][1].type!=="characterEscape"?h(C):(l.enter("strikethroughSequenceTemporary"),T(C))}function T(C){const k=pf(f);if(C===126)return y>1?h(C):(l.consume(C),y++,T);if(y<2&&!n)return h(C);const N=l.exit("strikethroughSequenceTemporary"),I=pf(C);return N._open=!I||I===2&&!!k,N._close=!k||k===2&&!!I,c(C)}}}class Bj{constructor(){this.map=[]}add(e,n,r){Fj(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let o=r.pop();for(;o;){for(const a of o)e.push(a);o=r.pop()}this.map.length=0}}function Fj(t,e,n,r){let o=0;if(!(n===0&&r.length===0)){for(;o<t.map.length;){if(t.map[o][0]===e){t.map[o][1]+=n,t.map[o][2].push(...r);return}o+=1}t.map.push([e,n,r])}}function jj(t,e){let n=!1;const r=[];for(;e<t.length;){const o=t[e];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function zj(){return{flow:{null:{name:"table",tokenize:qj,resolveAll:Hj}}}}function qj(t,e,n){const r=this;let o=0,a=0,l;return c;function c(z){let te=r.events.length-1;for(;te>-1;){const ue=r.events[te][1].type;if(ue==="lineEnding"||ue==="linePrefix")te--;else break}const de=te>-1?r.events[te][1].type:null,xe=de==="tableHead"||de==="tableRow"?j:h;return xe===j&&r.parser.lazy[r.now().line]?n(z):xe(z)}function h(z){return t.enter("tableHead"),t.enter("tableRow"),f(z)}function f(z){return z===124||(l=!0,a+=1),g(z)}function g(z){return z===null?n(z):He(z)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),T):n(z):pt(z)?bt(t,g,"whitespace")(z):(a+=1,l&&(l=!1,o+=1),z===124?(t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),l=!0,g):(t.enter("data"),y(z)))}function y(z){return z===null||z===124||jt(z)?(t.exit("data"),g(z)):(t.consume(z),z===92?_:y)}function _(z){return z===92||z===124?(t.consume(z),y):y(z)}function T(z){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(z):(t.enter("tableDelimiterRow"),l=!1,pt(z)?bt(t,C,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):C(z))}function C(z){return z===45||z===58?N(z):z===124?(l=!0,t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),k):G(z)}function k(z){return pt(z)?bt(t,N,"whitespace")(z):N(z)}function N(z){return z===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(z),t.exit("tableDelimiterMarker"),I):z===45?(a+=1,I(z)):z===null||He(z)?$(z):G(z)}function I(z){return z===45?(t.enter("tableDelimiterFiller"),L(z)):G(z)}function L(z){return z===45?(t.consume(z),L):z===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(z),t.exit("tableDelimiterMarker"),D):(t.exit("tableDelimiterFiller"),D(z))}function D(z){return pt(z)?bt(t,$,"whitespace")(z):$(z)}function $(z){return z===124?C(z):z===null||He(z)?!l||o!==a?G(z):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(z)):G(z)}function G(z){return n(z)}function j(z){return t.enter("tableRow"),q(z)}function q(z){return z===124?(t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),q):z===null||He(z)?(t.exit("tableRow"),e(z)):pt(z)?bt(t,q,"whitespace")(z):(t.enter("data"),ee(z))}function ee(z){return z===null||z===124||jt(z)?(t.exit("data"),q(z)):(t.consume(z),z===92?W:ee)}function W(z){return z===92||z===124?(t.consume(z),ee):ee(z)}}function Hj(t,e){let n=-1,r=!0,o=0,a=[0,0,0,0],l=[0,0,0,0],c=!1,h=0,f,g,y;const _=new Bj;for(;++n<t.length;){const T=t[n],C=T[1];T[0]==="enter"?C.type==="tableHead"?(c=!1,h!==0&&(e1(_,e,h,f,g),g=void 0,h=0),f={type:"table",start:Object.assign({},C.start),end:Object.assign({},C.end)},_.add(n,0,[["enter",f,e]])):C.type==="tableRow"||C.type==="tableDelimiterRow"?(r=!0,y=void 0,a=[0,0,0,0],l=[0,n+1,0,0],c&&(c=!1,g={type:"tableBody",start:Object.assign({},C.start),end:Object.assign({},C.end)},_.add(n,0,[["enter",g,e]])),o=C.type==="tableDelimiterRow"?2:g?3:1):o&&(C.type==="data"||C.type==="tableDelimiterMarker"||C.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],y=Ky(_,e,a,o,void 0,y),a=[0,0,0,0]),l[2]=n)):C.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],y=Ky(_,e,a,o,void 0,y)),a=l,l=[a[1],n,0,0])):C.type==="tableHead"?(c=!0,h=n):C.type==="tableRow"||C.type==="tableDelimiterRow"?(h=n,a[1]!==0?(l[0]=l[1],y=Ky(_,e,a,o,n,y)):l[1]!==0&&(y=Ky(_,e,l,o,n,y)),o=0):o&&(C.type==="data"||C.type==="tableDelimiterMarker"||C.type==="tableDelimiterFiller")&&(l[3]=n)}for(h!==0&&e1(_,e,h,f,g),_.consume(e.events),n=-1;++n<e.events.length;){const T=e.events[n];T[0]==="enter"&&T[1].type==="table"&&(T[1]._align=jj(e.events,n))}return t}function Ky(t,e,n,r,o,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},ef(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const h=ef(e.events,n[1]);if(a={type:l,start:Object.assign({},h),end:Object.assign({},h)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const f=ef(e.events,n[2]),g=ef(e.events,n[3]),y={type:c,start:Object.assign({},f),end:Object.assign({},g)};if(t.add(n[2],0,[["enter",y,e]]),r!==2){const _=e.events[n[2]],T=e.events[n[3]];if(_[1].end=Object.assign({},T[1].end),_[1].type="chunkText",_[1].contentType="text",n[3]>n[2]+1){const C=n[2]+1,k=n[3]-n[2]-1;t.add(C,k,[])}}t.add(n[3]+1,0,[["exit",y,e]])}return o!==void 0&&(a.end=Object.assign({},ef(e.events,o)),t.add(o,0,[["exit",a,e]]),a=void 0),a}function e1(t,e,n,r,o){const a=[],l=ef(e.events,n);o&&(o.end=Object.assign({},l),a.push(["exit",o,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function ef(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const Vj={name:"tasklistCheck",tokenize:Gj};function $j(){return{text:{91:Vj}}}function Gj(t,e,n){const r=this;return o;function o(h){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(h):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),a)}function a(h){return jt(h)?(t.enter("taskListCheckValueUnchecked"),t.consume(h),t.exit("taskListCheckValueUnchecked"),l):h===88||h===120?(t.enter("taskListCheckValueChecked"),t.consume(h),t.exit("taskListCheckValueChecked"),l):n(h)}function l(h){return h===93?(t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(h)}function c(h){return He(h)?e(h):pt(h)?t.check({tokenize:Jj},e,n)(h):n(h)}}function Jj(t,e,n){return bt(t,r,"whitespace");function r(o){return o===null?n(o):e(o)}}function Yj(t){return JC([bj(),Ij(),Uj(t),zj(),$j()])}const Wj={};function t1(t){const e=this,n=t||Wj,r=e.data(),o=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);o.push(Yj(n)),a.push(mj()),l.push(gj(n))}const UA=typeof document<"u"?We.useLayoutEffect:()=>{};var $b;const Kj=($b=We.useInsertionEffect)!==null&&$b!==void 0?$b:UA;function Xj(t){const e=M.useRef(null);return Kj(()=>{e.current=t},[t]),M.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}const cl=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},Fu=t=>t&&"window"in t&&t.window===t?t:cl(t).defaultView||window;function Qj(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function Zj(t){return Qj(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let ez=!1;function Uw(){return ez}function BA(t,e){if(!Uw())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let n=e;for(;n!==null;){if(n===t)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:Zj(n)?n=n.host:n=n.parentNode}return!1}const jx=(t=document)=>{var e;if(!Uw())return t.activeElement;let n=t.activeElement;for(;n&&"shadowRoot"in n&&(!((e=n.shadowRoot)===null||e===void 0)&&e.activeElement);)n=n.shadowRoot.activeElement;return n};function FA(t){return Uw()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function tz(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let n=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(n)&&n.some(r=>t.test(r.brand))||t.test(window.navigator.userAgent)}function nz(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function jA(t){let e=null;return()=>(e==null&&(e=t()),e)}const rz=jA(function(){return nz(/^Mac/i)}),iz=jA(function(){return tz(/Android/i)});function zA(){let t=M.useRef(new Map),e=M.useCallback((o,a,l,c)=>{let h=c!=null&&c.once?(...f)=>{t.current.delete(l),l(...f)}:l;t.current.set(l,{type:a,eventTarget:o,fn:h,options:c}),o.addEventListener(a,h,c)},[]),n=M.useCallback((o,a,l,c)=>{var h;let f=((h=t.current.get(l))===null||h===void 0?void 0:h.fn)||l;o.removeEventListener(a,f,c),t.current.delete(l)},[]),r=M.useCallback(()=>{t.current.forEach((o,a)=>{n(o.eventTarget,o.type,a,o.options)})},[n]);return M.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function oz(t){return t.pointerType===""&&t.isTrusted?!0:iz()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}var mf=U1();function qA(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function sz(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function HA(t){let e=M.useRef({isFocused:!1,observer:null});UA(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=Xj(r=>{t==null||t(r)});return M.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let o=r.target,a=l=>{if(e.current.isFocused=!1,o.disabled){let c=qA(l);n(c)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};o.addEventListener("focusout",a,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&o.disabled){var l;(l=e.current.observer)===null||l===void 0||l.disconnect();let c=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:c})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:c}))}}),e.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let az=!1,dm=null,zx=new Set,Jp=new Map,Ju=!1,qx=!1;const lz={Tab:!0,Escape:!0};function Bw(t,e){for(let n of zx)n(t,e)}function uz(t){return!(t.metaKey||!rz()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function xv(t){Ju=!0,uz(t)&&(dm="keyboard",Bw("keyboard",t))}function uf(t){dm="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Ju=!0,Bw("pointer",t))}function VA(t){oz(t)&&(Ju=!0,dm="virtual")}function $A(t){t.target===window||t.target===document||az||!t.isTrusted||(!Ju&&!qx&&(dm="virtual",Bw("virtual",t)),Ju=!1,qx=!1)}function GA(){Ju=!1,qx=!0}function Hx(t){if(typeof window>"u"||typeof document>"u"||Jp.get(Fu(t)))return;const e=Fu(t),n=cl(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Ju=!0,r.apply(this,arguments)},n.addEventListener("keydown",xv,!0),n.addEventListener("keyup",xv,!0),n.addEventListener("click",VA,!0),e.addEventListener("focus",$A,!0),e.addEventListener("blur",GA,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",uf,!0),n.addEventListener("pointermove",uf,!0),n.addEventListener("pointerup",uf,!0)),e.addEventListener("beforeunload",()=>{JA(t)},{once:!0}),Jp.set(e,{focus:r})}const JA=(t,e)=>{const n=Fu(t),r=cl(t);e&&r.removeEventListener("DOMContentLoaded",e),Jp.has(n)&&(n.HTMLElement.prototype.focus=Jp.get(n).focus,r.removeEventListener("keydown",xv,!0),r.removeEventListener("keyup",xv,!0),r.removeEventListener("click",VA,!0),n.removeEventListener("focus",$A,!0),n.removeEventListener("blur",GA,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",uf,!0),r.removeEventListener("pointermove",uf,!0),r.removeEventListener("pointerup",uf,!0)),Jp.delete(n))};function cz(t){const e=cl(t);let n;return e.readyState!=="loading"?Hx(t):(n=()=>{Hx(t)},e.addEventListener("DOMContentLoaded",n)),()=>JA(t,n)}typeof document<"u"&&cz();function YA(){return dm!=="pointer"}const dz=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function fz(t,e,n){let r=cl(n==null?void 0:n.target);const o=typeof window<"u"?Fu(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?Fu(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,l=typeof window<"u"?Fu(n==null?void 0:n.target).HTMLElement:HTMLElement,c=typeof window<"u"?Fu(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||r.activeElement instanceof o&&!dz.has(r.activeElement.type)||r.activeElement instanceof a||r.activeElement instanceof l&&r.activeElement.isContentEditable,!(t&&e==="keyboard"&&n instanceof c&&!lz[n.key])}function hz(t,e,n){Hx(),M.useEffect(()=>{let r=(o,a)=>{fz(!!(n!=null&&n.isTextInput),o,a)&&t(YA())};return zx.add(r),()=>{zx.delete(r)}},e)}function pz(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:o}=t;const a=M.useCallback(h=>{if(h.target===h.currentTarget)return r&&r(h),o&&o(!1),!0},[r,o]),l=HA(a),c=M.useCallback(h=>{const f=cl(h.target),g=f?jx(f):jx();h.target===h.currentTarget&&g===FA(h.nativeEvent)&&(n&&n(h),o&&o(!0),l(h))},[o,n,l]);return{focusProps:{onFocus:!e&&(n||o||r)?c:void 0,onBlur:!e&&(r||o)?a:void 0}}}function mz(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:o}=t,a=M.useRef({isFocusWithin:!1}),{addGlobalListener:l,removeAllGlobalListeners:c}=zA(),h=M.useCallback(y=>{y.currentTarget.contains(y.target)&&a.current.isFocusWithin&&!y.currentTarget.contains(y.relatedTarget)&&(a.current.isFocusWithin=!1,c(),n&&n(y),o&&o(!1))},[n,o,a,c]),f=HA(h),g=M.useCallback(y=>{if(!y.currentTarget.contains(y.target))return;const _=cl(y.target),T=jx(_);if(!a.current.isFocusWithin&&T===FA(y.nativeEvent)){r&&r(y),o&&o(!0),a.current.isFocusWithin=!0,f(y);let C=y.currentTarget;l(_,"focus",k=>{if(a.current.isFocusWithin&&!BA(C,k.target)){let N=new _.defaultView.FocusEvent("blur",{relatedTarget:k.target});sz(N,C);let I=qA(N);h(I)}},{capture:!0})}},[r,o,f,l,h]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:g,onBlur:h}}}let Vx=!1,Xy=0;function gz(){Vx=!0,setTimeout(()=>{Vx=!1},50)}function n1(t){t.pointerType==="touch"&&gz()}function yz(){if(!(typeof document>"u"))return Xy===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",n1),Xy++,()=>{Xy--,!(Xy>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",n1)}}function vz(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:o}=t,[a,l]=M.useState(!1),c=M.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;M.useEffect(yz,[]);let{addGlobalListener:h,removeAllGlobalListeners:f}=zA(),{hoverProps:g,triggerHoverEnd:y}=M.useMemo(()=>{let _=(k,N)=>{if(c.pointerType=N,o||N==="touch"||c.isHovered||!k.currentTarget.contains(k.target))return;c.isHovered=!0;let I=k.currentTarget;c.target=I,h(cl(k.target),"pointerover",L=>{c.isHovered&&c.target&&!BA(c.target,L.target)&&T(L,L.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:I,pointerType:N}),n&&n(!0),l(!0)},T=(k,N)=>{let I=c.target;c.pointerType="",c.target=null,!(N==="touch"||!c.isHovered||!I)&&(c.isHovered=!1,f(),r&&r({type:"hoverend",target:I,pointerType:N}),n&&n(!1),l(!1))},C={};return typeof PointerEvent<"u"&&(C.onPointerEnter=k=>{Vx&&k.pointerType==="mouse"||_(k,k.pointerType)},C.onPointerLeave=k=>{!o&&k.currentTarget.contains(k.target)&&T(k,k.pointerType)}),{hoverProps:C,triggerHoverEnd:T}},[e,n,r,o,c,h,f]);return M.useEffect(()=>{o&&y({currentTarget:c.target},c.pointerType)},[o]),{hoverProps:g,isHovered:a}}function bz(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,o=M.useRef({isFocused:!1,isFocusVisible:e||YA()}),[a,l]=M.useState(!1),[c,h]=M.useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=M.useCallback(()=>h(o.current.isFocused&&o.current.isFocusVisible),[]),g=M.useCallback(T=>{o.current.isFocused=T,l(T),f()},[f]);hz(T=>{o.current.isFocusVisible=T,f()},[],{isTextInput:n});let{focusProps:y}=pz({isDisabled:r,onFocusChange:g}),{focusWithinProps:_}=mz({isDisabled:!r,onFocusWithinChange:g});return{isFocused:a,isFocusVisible:c,focusProps:r?_:y}}var xz=Object.defineProperty,wz=(t,e,n)=>e in t?xz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gb=(t,e,n)=>(wz(t,typeof e!="symbol"?e+"":e,n),n);let _z=class{constructor(){Gb(this,"current",this.detect()),Gb(this,"handoffState","pending"),Gb(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Hu=new _z;function Cf(t){var e;return Hu.isServer?null:t==null?document:(e=t==null?void 0:t.ownerDocument)!=null?e:document}function Yu(t){var e,n;return Hu.isServer?null:t==null?document:(n=(e=t==null?void 0:t.getRootNode)==null?void 0:e.call(t))!=null?n:document}function gf(t){var e,n;return(n=(e=Yu(t))==null?void 0:e.activeElement)!=null?n:null}function WA(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Xs(){let t=[],e={addEventListener(n,r,o,a){return n.addEventListener(r,o,a),e.add(()=>n.removeEventListener(r,o,a))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return WA(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,o){let a=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:o}),this.add(()=>{Object.assign(n.style,{[r]:a})})},group(n){let r=Xs();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let o of t.splice(r,1))o()}},dispose(){for(let n of t.splice(0))n()}};return e}function jv(){let[t]=M.useState(Xs);return M.useEffect(()=>()=>t.dispose(),[t]),t}let us=(t,e)=>{Hu.isServer?M.useEffect(t,e):M.useLayoutEffect(t,e)};function rl(t){let e=M.useRef(t);return us(()=>{e.current=t},[t]),e}let Ot=function(t){let e=rl(t);return We.useCallback((...n)=>e.current(...n),[e])};function Sz(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function Ez(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function Tz({disabled:t=!1}={}){let e=M.useRef(null),[n,r]=M.useState(!1),o=jv(),a=Ot(()=>{e.current=null,r(!1),o.dispose()}),l=Ot(c=>{if(o.dispose(),e.current===null){e.current=c.currentTarget,r(!0);{let h=Cf(c.currentTarget);o.addEventListener(h,"pointerup",a,!1),o.addEventListener(h,"pointermove",f=>{if(e.current){let g=Sz(f);r(Ez(g,e.current.getBoundingClientRect()))}},!1),o.addEventListener(h,"pointercancel",a,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:l,onPointerUp:a,onClick:a}}}function fm(t){return M.useMemo(()=>t,Object.values(t))}function r1(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function ss(t,e,...n){if(t in e){let o=e[t];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ss),r}var tm=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(tm||{}),Cz=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Cz||{});function Qs(){let t=kz();return M.useCallback(e=>Az({mergeRefs:t,...e}),[t])}function Az({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:o,visible:a=!0,name:l,mergeRefs:c}){c=c??Iz;let h=KA(e,t);if(a)return Qy(h,n,r,l,c);let f=o??0;if(f&2){let{static:g=!1,...y}=h;if(g)return Qy(y,n,r,l,c)}if(f&1){let{unmount:g=!0,...y}=h;return ss(g?0:1,{0(){return null},1(){return Qy({...y,hidden:!0,style:{display:"none"}},n,r,l,c)}})}return Qy(h,n,r,l,c)}function Qy(t,e={},n,r,o){let{as:a=n,children:l,refName:c="ref",...h}=Jb(t,["unmount","static"]),f=t.ref!==void 0?{[c]:t.ref}:{},g=typeof l=="function"?l(e):l;"className"in h&&h.className&&typeof h.className=="function"&&(h.className=h.className(e)),h["aria-labelledby"]&&h["aria-labelledby"]===h.id&&(h["aria-labelledby"]=void 0);let y={};if(e){let _=!1,T=[];for(let[C,k]of Object.entries(e))typeof k=="boolean"&&(_=!0),k===!0&&T.push(C.replace(/([A-Z])/g,N=>`-${N.toLowerCase()}`));if(_){y["data-headlessui-state"]=T.join(" ");for(let C of T)y[`data-${C}`]=""}}if(sv(a)&&(Object.keys(Kd(h)).length>0||Object.keys(Kd(y)).length>0))if(!M.isValidElement(g)||Array.isArray(g)&&g.length>1||Nz(g)){if(Object.keys(Kd(h)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Kd(h)).concat(Object.keys(Kd(y))).map(_=>`  - ${_}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(_=>`  - ${_}`).join(`
`)].join(`
`))}else{let _=g.props,T=_==null?void 0:_.className,C=typeof T=="function"?(...I)=>r1(T(...I),h.className):r1(T,h.className),k=C?{className:C}:{},N=KA(g.props,Kd(Jb(h,["ref"])));for(let I in y)I in N&&delete y[I];return M.cloneElement(g,Object.assign({},N,y,f,{ref:o(Rz(g),f.ref)},k))}return M.createElement(a,Object.assign({},Jb(h,["ref"]),!sv(a)&&f,!sv(a)&&y),g)}function kz(){let t=M.useRef([]),e=M.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function Iz(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function KA(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):e[o]=r[o];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[o=>{var a;return(a=o==null?void 0:o.preventDefault)==null?void 0:a.call(o)}]);for(let r in n)Object.assign(e,{[r](o,...a){let l=n[r];for(let c of l){if((o instanceof Event||(o==null?void 0:o.nativeEvent)instanceof Event)&&o.defaultPrevented)return;c(o,...a)}}});return e}function $x(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):e[o]=r[o];for(let r in n)Object.assign(e,{[r](...o){let a=n[r];for(let l of a)l==null||l(...o)}});return e}function cs(t){var e;return Object.assign(M.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Kd(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Jb(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function Rz(t){return We.version.split(".")[0]>="19"?t.props.ref:t.ref}function sv(t){return t===M.Fragment||t===Symbol.for("react.fragment")}function Nz(t){return sv(t.type)}let Mz="span";var nm=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(nm||{});function Dz(t,e){var n;let{features:r=1,...o}=t,a={ref:e,"aria-hidden":(r&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Qs()({ourProps:a,theirProps:o,slot:{},defaultTag:Mz,name:"Hidden"})}let wv=cs(Dz);function Pz(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function Vu(t){return Pz(t)&&"tagName"in t}function Gs(t){return Vu(t)&&"accessKey"in t}function nf(t){return Vu(t)&&"tabIndex"in t}function Lz(t){return Vu(t)&&"style"in t}function Oz(t){return Gs(t)&&t.nodeName==="IFRAME"}function Uz(t){return Gs(t)&&t.nodeName==="INPUT"}function Bz(t){return Gs(t)&&t.nodeName==="FIELDSET"}function XA(t){return Gs(t)&&t.nodeName==="LEGEND"}function QA(t){let e=t.parentElement,n=null;for(;e&&!Bz(e);)XA(e)&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&Fz(n)?!1:r}function Fz(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(XA(e))return!1;e=e.previousElementSibling}return!0}let ZA=Symbol();function ek(t,e=!0){return Object.assign(t,{[ZA]:e})}function Js(...t){let e=M.useRef(t);M.useEffect(()=>{e.current=t},[t]);let n=Ot(r=>{for(let o of e.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return t.every(r=>r==null||(r==null?void 0:r[ZA]))?void 0:n}var el=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(el||{});let jz=M.createContext(()=>{});function tk({value:t,children:e}){return We.createElement(jz.Provider,{value:t},e)}function i1(t){if(t===null)return{width:0,height:0};let{width:e,height:n}=t.getBoundingClientRect();return{width:e,height:n}}function zz(t,e,n=!1){let[r,o]=M.useState(()=>i1(e));return us(()=>{if(!e||!t)return;let a=Xs();return a.requestAnimationFrame(function l(){a.requestAnimationFrame(l),o(c=>{let h=i1(e);return h.width===c.width&&h.height===c.height?c:h})}),()=>{a.dispose()}},[e,t]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}let nk=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};var qz=Object.defineProperty,Hz=(t,e,n)=>e in t?qz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vz=(t,e,n)=>(Hz(t,e+"",n),n),rk=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},ji=(t,e,n)=>(rk(t,e,"read from private field"),n?n.call(t):e.get(t)),Yb=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},o1=(t,e,n,r)=>(rk(t,e,"write to private field"),e.set(t,n),n),ts,Up,Bp;let ik=class{constructor(e){Yb(this,ts,{}),Yb(this,Up,new nk(()=>new Set)),Yb(this,Bp,new Set),Vz(this,"disposables",Xs()),o1(this,ts,e),Hu.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return ji(this,ts)}subscribe(e,n){if(Hu.isServer)return()=>{};let r={selector:e,callback:n,current:e(ji(this,ts))};return ji(this,Bp).add(r),this.disposables.add(()=>{ji(this,Bp).delete(r)})}on(e,n){return Hu.isServer?()=>{}:(ji(this,Up).get(e).add(n),this.disposables.add(()=>{ji(this,Up).get(e).delete(n)}))}send(e){let n=this.reduce(ji(this,ts),e);if(n!==ji(this,ts)){o1(this,ts,n);for(let r of ji(this,Bp)){let o=r.selector(ji(this,ts));ok(r.current,o)||(r.current=o,r.callback(o))}for(let r of ji(this,Up).get(e.type))r(ji(this,ts),e)}}};ts=new WeakMap,Up=new WeakMap,Bp=new WeakMap;function ok(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:Wb(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:Wb(t.entries(),e.entries()):s1(t)&&s1(e)?Wb(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function Wb(t,e){do{let n=t.next(),r=e.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function s1(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var $z=Object.defineProperty,Gz=(t,e,n)=>e in t?$z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,a1=(t,e,n)=>(Gz(t,typeof e!="symbol"?e+"":e,n),n),Jz=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(Jz||{});let Yz={0(t,e){let n=e.id,r=t.stack,o=t.stack.indexOf(n);if(o!==-1){let a=t.stack.slice();return a.splice(o,1),a.push(n),r=a,{...t,stack:r}}return{...t,stack:[...t.stack,n]}},1(t,e){let n=e.id,r=t.stack.indexOf(n);if(r===-1)return t;let o=t.stack.slice();return o.splice(r,1),{...t,stack:o}}},Wz=class sk extends ik{constructor(){super(...arguments),a1(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),a1(this,"selectors",{isTop:(e,n)=>e.stack[e.stack.length-1]===n,inStack:(e,n)=>e.stack.includes(n)})}static new(){return new sk({stack:[]})}reduce(e,n){return ss(n.type,Yz,e,n)}};const ak=new nk(()=>Wz.new());var Kb={exports:{}},Xb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function Kz(){if(l1)return Xb;l1=1;var t=Av();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,o=t.useRef,a=t.useEffect,l=t.useMemo,c=t.useDebugValue;return Xb.useSyncExternalStoreWithSelector=function(h,f,g,y,_){var T=o(null);if(T.current===null){var C={hasValue:!1,value:null};T.current=C}else C=T.current;T=l(function(){function N(G){if(!I){if(I=!0,L=G,G=y(G),_!==void 0&&C.hasValue){var j=C.value;if(_(j,G))return D=j}return D=G}if(j=D,n(L,G))return j;var q=y(G);return _!==void 0&&_(j,q)?(L=G,j):(L=G,D=q)}var I=!1,L,D,$=g===void 0?null:g;return[function(){return N(f())},$===null?void 0:function(){return N($())}]},[f,g,y,_]);var k=r(h,T[0],T[1]);return a(function(){C.hasValue=!0,C.value=k},[k]),c(k),k},Xb}var u1;function Xz(){return u1||(u1=1,Kb.exports=Kz()),Kb.exports}var Qz=Xz();function Wu(t,e,n=ok){return Qz.useSyncExternalStoreWithSelector(Ot(r=>t.subscribe(Zz,r)),Ot(()=>t.state),Ot(()=>t.state),Ot(e),n)}function Zz(t){return t}function eq(t,e){let n=M.useId(),r=ak.get(e),[o,a]=Wu(r,M.useCallback(l=>[r.selectors.isTop(l,n),r.selectors.inStack(l,n)],[r,n]));return us(()=>{if(t)return r.actions.push(n),()=>r.actions.pop(n)},[r,t,n]),t?a?o:!0:!1}function tq(t,e,n){let r=rl(o=>{let a=o.getBoundingClientRect();a.x===0&&a.y===0&&a.width===0&&a.height===0&&n()});M.useEffect(()=>{if(!t)return;let o=e===null?null:Gs(e)?e:e.current;if(!o)return;let a=Xs();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>r.current(o));l.observe(o),a.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>r.current(o));l.observe(o),a.add(()=>l.disconnect())}return()=>a.dispose()},[e,r,t])}let Gx=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),nq=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Hs=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Hs||{}),_v=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(_v||{}),rq=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(rq||{});function zv(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Gx)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function iq(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(nq)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Fw=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Fw||{});function lk(t,e=0){var n;return t===((n=Cf(t))==null?void 0:n.body)?!1:ss(e,{0(){return t.matches(Gx)},1(){let r=t;for(;r!==null;){if(r.matches(Gx))return!0;r=r.parentElement}return!1}})}var oq=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(oq||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let sq=["textarea","input"].join(",");function aq(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,sq))!=null?n:!1}function lq(t,e=n=>n){return t.slice().sort((n,r)=>{let o=e(n),a=e(r);if(o===null||a===null)return 0;let l=o.compareDocumentPosition(a);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ju(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:o=[]}={}){let a=Array.isArray(t)?t.length>0?Yu(t[0]):document:Yu(t),l=Array.isArray(t)?n?lq(t):t:e&64?iq(t):zv(t);o.length>0&&l.length>1&&(l=l.filter(T=>!o.some(C=>C!=null&&"current"in C?(C==null?void 0:C.current)===T:C===T))),r=r??(a==null?void 0:a.activeElement);let c=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,l.indexOf(r))-1;if(e&4)return Math.max(0,l.indexOf(r))+1;if(e&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=e&32?{preventScroll:!0}:{},g=0,y=l.length,_;do{if(g>=y||g+y<=0)return 0;let T=h+g;if(e&16)T=(T+y)%y;else{if(T<0)return 3;if(T>=y)return 1}_=l[T],_==null||_.focus(f),g+=c}while(_!==gf(_));return e&6&&aq(_)&&_.select(),2}function uk(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function uq(){return/Android/gi.test(window.navigator.userAgent)}function c1(){return uk()||uq()}function Zy(t,e,n,r){let o=rl(n);M.useEffect(()=>{if(!t)return;function a(l){o.current(l)}return document.addEventListener(e,a,r),()=>document.removeEventListener(e,a,r)},[t,e,r])}function ck(t,e,n,r){let o=rl(n);M.useEffect(()=>{if(!t)return;function a(l){o.current(l)}return window.addEventListener(e,a,r),()=>window.removeEventListener(e,a,r)},[t,e,r])}const d1=30;function cq(t,e,n){let r=rl(n),o=M.useCallback(function(c,h){if(c.defaultPrevented)return;let f=h(c);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let g=(function y(_){return typeof _=="function"?y(_()):Array.isArray(_)||_ instanceof Set?_:[_]})(e);for(let y of g)if(y!==null&&(y.contains(f)||c.composed&&c.composedPath().includes(y)))return;return!lk(f,Fw.Loose)&&f.tabIndex!==-1&&c.preventDefault(),r.current(c,f)},[r,e]),a=M.useRef(null);Zy(t,"pointerdown",c=>{var h,f;c1()||(a.current=((f=(h=c.composedPath)==null?void 0:h.call(c))==null?void 0:f[0])||c.target)},!0),Zy(t,"pointerup",c=>{if(c1()||!a.current)return;let h=a.current;return a.current=null,o(c,()=>h)},!0);let l=M.useRef({x:0,y:0});Zy(t,"touchstart",c=>{l.current.x=c.touches[0].clientX,l.current.y=c.touches[0].clientY},!0),Zy(t,"touchend",c=>{let h={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(h.x-l.current.x)>=d1||Math.abs(h.y-l.current.y)>=d1))return o(c,()=>nf(c.target)?c.target:null)},!0),ck(t,"blur",c=>o(c,()=>Oz(window.document.activeElement)?window.document.activeElement:null),!0)}function Jx(...t){return M.useMemo(()=>Cf(...t),[...t])}function dq(...t){return M.useMemo(()=>Yu(...t),[...t])}function fq(t,e,n,r){let o=rl(n);M.useEffect(()=>{t=t??window;function a(l){o.current(l)}return t.addEventListener(e,a,r),()=>t.removeEventListener(e,a,r)},[t,e,r])}function hq(t,e){return M.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function pq(t){return M.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function mq(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(o){return r.add(o),()=>r.delete(o)},dispatch(o,...a){let l=e[o].call(n,...a);l&&(n=l,r.forEach(c=>c()))}}}function gq(){let t;return{before({doc:e}){var n;let r=e.documentElement,o=(n=e.defaultView)!=null?n:window;t=Math.max(0,o.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,o=Math.max(0,r.clientWidth-r.offsetWidth),a=Math.max(0,t-o);n.style(r,"paddingRight",`${a}px`)}}}function yq(){return uk()?{before({doc:t,d:e,meta:n}){function r(o){for(let a of n().containers)for(let l of a())if(l.contains(o))return!0;return!1}e.microTask(()=>{var o;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let c=Xs();c.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>c.dispose()))}let a=(o=window.scrollY)!=null?o:window.pageYOffset,l=null;e.addEventListener(t,"click",c=>{if(nf(c.target))try{let h=c.target.closest("a");if(!h)return;let{hash:f}=new URL(h.href),g=t.querySelector(f);nf(g)&&!r(g)&&(l=g)}catch{}},!0),e.group(c=>{e.addEventListener(t,"touchstart",h=>{if(c.dispose(),nf(h.target)&&Lz(h.target))if(r(h.target)){let f=h.target;for(;f.parentElement&&r(f.parentElement);)f=f.parentElement;c.style(f,"overscrollBehavior","contain")}else c.style(h.target,"touchAction","none")})}),e.addEventListener(t,"touchmove",c=>{if(nf(c.target)){if(Uz(c.target))return;if(r(c.target)){let h=c.target;for(;h.parentElement&&h.dataset.headlessuiPortal!==""&&!(h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth);)h=h.parentElement;h.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()}},{passive:!1}),e.add(()=>{var c;let h=(c=window.scrollY)!=null?c:window.pageYOffset;a!==h&&window.scrollTo(0,a),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function vq(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function f1(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let zu=mq(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Xs(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(e),r.computedMeta=f1(r.meta),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e),n.computedMeta=f1(n.meta)),this},SCROLL_PREVENT(t){let e={doc:t.doc,d:t.d,meta(){return t.computedMeta}},n=[yq(),gq(),vq()];n.forEach(({before:r})=>r==null?void 0:r(e)),n.forEach(({after:r})=>r==null?void 0:r(e))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});zu.subscribe(()=>{let t=zu.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",o=n.count!==0;(o&&!r||!o&&r)&&zu.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&zu.dispatch("TEARDOWN",n)}});function bq(t,e,n=()=>({containers:[]})){let r=pq(zu),o=e?r.get(e):void 0,a=o?o.count>0:!1;return us(()=>{if(!(!e||!t))return zu.dispatch("PUSH",e,n),()=>zu.dispatch("POP",e,n)},[t,e]),a}function xq(t,e,n=()=>[document.body]){let r=eq(t,"scroll-lock");bq(r,e,o=>{var a;return{containers:[...(a=o.containers)!=null?a:[],n]}})}function wq(t=0){let[e,n]=M.useState(t),r=M.useCallback(h=>n(h),[]),o=M.useCallback(h=>n(f=>f|h),[]),a=M.useCallback(h=>(e&h)===h,[e]),l=M.useCallback(h=>n(f=>f&~h),[]),c=M.useCallback(h=>n(f=>f^h),[]);return{flags:e,setFlag:r,addFlag:o,hasFlag:a,removeFlag:l,toggleFlag:c}}var _q={},h1,p1;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((h1=process==null?void 0:_q)==null?void 0:h1.NODE_ENV)==="test"&&typeof((p1=Element==null?void 0:Element.prototype)==null?void 0:p1.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Sq=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(Sq||{});function dk(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function fk(t,e,n,r){let[o,a]=M.useState(n),{hasFlag:l,addFlag:c,removeFlag:h}=wq(t&&o?3:0),f=M.useRef(!1),g=M.useRef(!1),y=jv();return us(()=>{var _;if(t){if(n&&a(!0),!e){n&&c(3);return}return(_=void 0)==null||_.call(r,n),Eq(e,{inFlight:f,prepare(){g.current?g.current=!1:g.current=f.current,f.current=!0,!g.current&&(n?(c(3),h(4)):(c(4),h(2)))},run(){g.current?n?(h(3),c(4)):(h(4),c(3)):n?h(1):c(1)},done(){var T;g.current&&Aq(e)||(f.current=!1,h(7),n||a(!1),(T=void 0)==null||T.call(r,n))}})}},[t,n,e,y]),t?[o,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Eq(t,{prepare:e,run:n,done:r,inFlight:o}){let a=Xs();return Cq(t,{prepare:e,inFlight:o}),a.nextFrame(()=>{n(),a.requestAnimationFrame(()=>{a.add(Tq(t,r))})}),a.dispose}function Tq(t,e){var n,r;let o=Xs();if(!t)return o.dispose;let a=!1;o.add(()=>{a=!0});let l=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(c=>c instanceof CSSTransition))!=null?r:[];return l.length===0?(e(),o.dispose):(Promise.allSettled(l.map(c=>c.finished)).then(()=>{a||e()}),o.dispose)}function Cq(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function Aq(t){var e,n;return((n=(e=t.getAnimations)==null?void 0:e.call(t))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function qv(){return typeof window<"u"}function Af(t){return hk(t)?(t.nodeName||"").toLowerCase():"#document"}function Ai(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ds(t){var e;return(e=(hk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function hk(t){return qv()?t instanceof Node||t instanceof Ai(t).Node:!1}function Ur(t){return qv()?t instanceof Element||t instanceof Ai(t).Element:!1}function as(t){return qv()?t instanceof HTMLElement||t instanceof Ai(t).HTMLElement:!1}function m1(t){return!qv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ai(t).ShadowRoot}const kq=new Set(["inline","contents"]);function hm(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=wo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!kq.has(o)}const Iq=new Set(["table","td","th"]);function Rq(t){return Iq.has(Af(t))}const Nq=[":popover-open",":modal"];function Hv(t){return Nq.some(e=>{try{return t.matches(e)}catch{return!1}})}const Mq=["transform","translate","scale","rotate","perspective"],Dq=["transform","translate","scale","rotate","perspective","filter"],Pq=["paint","layout","strict","content"];function jw(t){const e=zw(),n=Ur(t)?wo(t):t;return Mq.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Dq.some(r=>(n.willChange||"").includes(r))||Pq.some(r=>(n.contain||"").includes(r))}function Lq(t){let e=il(t);for(;as(e)&&!yf(e);){if(jw(e))return e;if(Hv(e))return null;e=il(e)}return null}function zw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Oq=new Set(["html","body","#document"]);function yf(t){return Oq.has(Af(t))}function wo(t){return Ai(t).getComputedStyle(t)}function Vv(t){return Ur(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function il(t){if(Af(t)==="html")return t;const e=t.assignedSlot||t.parentNode||m1(t)&&t.host||ds(t);return m1(e)?e.host:e}function pk(t){const e=il(t);return yf(e)?t.ownerDocument?t.ownerDocument.body:t.body:as(e)&&hm(e)?e:pk(e)}function rm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=pk(t),a=o===((r=t.ownerDocument)==null?void 0:r.body),l=Ai(o);if(a){const c=Yx(l);return e.concat(l,l.visualViewport||[],hm(o)?o:[],c&&n?rm(c):[])}return e.concat(o,rm(o,[],n))}function Yx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Uq(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}const Ku=Math.min,lr=Math.max,im=Math.round,ev=Math.floor,is=t=>({x:t,y:t}),Bq={left:"right",right:"left",bottom:"top",top:"bottom"},Fq={start:"end",end:"start"};function g1(t,e,n){return lr(t,Ku(e,n))}function kf(t,e){return typeof t=="function"?t(e):t}function ol(t){return t.split("-")[0]}function pm(t){return t.split("-")[1]}function mk(t){return t==="x"?"y":"x"}function gk(t){return t==="y"?"height":"width"}const jq=new Set(["top","bottom"]);function Vs(t){return jq.has(ol(t))?"y":"x"}function yk(t){return mk(Vs(t))}function zq(t,e,n){n===void 0&&(n=!1);const r=pm(t),o=yk(t),a=gk(o);let l=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=Sv(l)),[l,Sv(l)]}function qq(t){const e=Sv(t);return[Wx(t),e,Wx(e)]}function Wx(t){return t.replace(/start|end/g,e=>Fq[e])}const y1=["left","right"],v1=["right","left"],Hq=["top","bottom"],Vq=["bottom","top"];function $q(t,e,n){switch(t){case"top":case"bottom":return n?e?v1:y1:e?y1:v1;case"left":case"right":return e?Hq:Vq;default:return[]}}function Gq(t,e,n,r){const o=pm(t);let a=$q(ol(t),n==="start",r);return o&&(a=a.map(l=>l+"-"+o),e&&(a=a.concat(a.map(Wx)))),a}function Sv(t){return t.replace(/left|right|bottom|top/g,e=>Bq[e])}function Jq(t){return{top:0,right:0,bottom:0,left:0,...t}}function Yq(t){return typeof t!="number"?Jq(t):{top:t,right:t,bottom:t,left:t}}function Ev(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function b1(t,e,n){let{reference:r,floating:o}=t;const a=Vs(e),l=yk(e),c=gk(l),h=ol(e),f=a==="y",g=r.x+r.width/2-o.width/2,y=r.y+r.height/2-o.height/2,_=r[c]/2-o[c]/2;let T;switch(h){case"top":T={x:g,y:r.y-o.height};break;case"bottom":T={x:g,y:r.y+r.height};break;case"right":T={x:r.x+r.width,y};break;case"left":T={x:r.x-o.width,y};break;default:T={x:r.x,y:r.y}}switch(pm(e)){case"start":T[l]-=_*(n&&f?-1:1);break;case"end":T[l]+=_*(n&&f?-1:1);break}return T}const Wq=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:l}=n,c=a.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:o}),{x:g,y}=b1(f,r,h),_=r,T={},C=0;for(let k=0;k<c.length;k++){const{name:N,fn:I}=c[k],{x:L,y:D,data:$,reset:G}=await I({x:g,y,initialPlacement:r,placement:_,strategy:o,middlewareData:T,rects:f,platform:l,elements:{reference:t,floating:e}});g=L??g,y=D??y,T={...T,[N]:{...T[N],...$}},G&&C<=50&&(C++,typeof G=="object"&&(G.placement&&(_=G.placement),G.rects&&(f=G.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:o}):G.rects),{x:g,y}=b1(f,_,h)),k=-1)}return{x:g,y,placement:_,strategy:o,middlewareData:T}};async function $v(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:a,rects:l,elements:c,strategy:h}=t,{boundary:f="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:_=!1,padding:T=0}=kf(e,t),C=Yq(T),N=c[_?y==="floating"?"reference":"floating":y],I=Ev(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(N)))==null||n?N:N.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:f,rootBoundary:g,strategy:h})),L=y==="floating"?{x:r,y:o,width:l.floating.width,height:l.floating.height}:l.reference,D=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),$=await(a.isElement==null?void 0:a.isElement(D))?await(a.getScale==null?void 0:a.getScale(D))||{x:1,y:1}:{x:1,y:1},G=Ev(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:L,offsetParent:D,strategy:h}):L);return{top:(I.top-G.top+C.top)/$.y,bottom:(G.bottom-I.bottom+C.bottom)/$.y,left:(I.left-G.left+C.left)/$.x,right:(G.right-I.right+C.right)/$.x}}const Kq=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:a,rects:l,initialPlacement:c,platform:h,elements:f}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:_,fallbackStrategy:T="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:k=!0,...N}=kf(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const I=ol(o),L=Vs(c),D=ol(c)===c,$=await(h.isRTL==null?void 0:h.isRTL(f.floating)),G=_||(D||!k?[Sv(c)]:qq(c)),j=C!=="none";!_&&j&&G.push(...Gq(c,k,C,$));const q=[c,...G],ee=await $v(e,N),W=[];let z=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&W.push(ee[I]),y){const ue=zq(o,l,$);W.push(ee[ue[0]],ee[ue[1]])}if(z=[...z,{placement:o,overflows:W}],!W.every(ue=>ue<=0)){var te,de;const ue=(((te=a.flip)==null?void 0:te.index)||0)+1,fe=q[ue];if(fe&&(!(y==="alignment"?L!==Vs(fe):!1)||z.every(le=>Vs(le.placement)===L?le.overflows[0]>0:!0)))return{data:{index:ue,overflows:z},reset:{placement:fe}};let K=(de=z.filter(oe=>oe.overflows[0]<=0).sort((oe,le)=>oe.overflows[1]-le.overflows[1])[0])==null?void 0:de.placement;if(!K)switch(T){case"bestFit":{var xe;const oe=(xe=z.filter(le=>{if(j){const Ee=Vs(le.placement);return Ee===L||Ee==="y"}return!0}).map(le=>[le.placement,le.overflows.filter(Ee=>Ee>0).reduce((Ee,H)=>Ee+H,0)]).sort((le,Ee)=>le[1]-Ee[1])[0])==null?void 0:xe[0];oe&&(K=oe);break}case"initialPlacement":K=c;break}if(o!==K)return{reset:{placement:K}}}return{}}}},Xq=new Set(["left","top"]);async function Qq(t,e){const{placement:n,platform:r,elements:o}=t,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),l=ol(n),c=pm(n),h=Vs(n)==="y",f=Xq.has(l)?-1:1,g=a&&h?-1:1,y=kf(e,t);let{mainAxis:_,crossAxis:T,alignmentAxis:C}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return c&&typeof C=="number"&&(T=c==="end"?C*-1:C),h?{x:T*g,y:_*f}:{x:_*f,y:T*g}}const Zq=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:a,placement:l,middlewareData:c}=e,h=await Qq(e,t);return l===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+h.x,y:a+h.y,data:{...h,placement:l}}}}},e8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:N=>{let{x:I,y:L}=N;return{x:I,y:L}}},...h}=kf(t,e),f={x:n,y:r},g=await $v(e,h),y=Vs(ol(o)),_=mk(y);let T=f[_],C=f[y];if(a){const N=_==="y"?"top":"left",I=_==="y"?"bottom":"right",L=T+g[N],D=T-g[I];T=g1(L,T,D)}if(l){const N=y==="y"?"top":"left",I=y==="y"?"bottom":"right",L=C+g[N],D=C-g[I];C=g1(L,C,D)}const k=c.fn({...e,[_]:T,[y]:C});return{...k,data:{x:k.x-n,y:k.y-r,enabled:{[_]:a,[y]:l}}}}}},t8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:a,platform:l,elements:c}=e,{apply:h=()=>{},...f}=kf(t,e),g=await $v(e,f),y=ol(o),_=pm(o),T=Vs(o)==="y",{width:C,height:k}=a.floating;let N,I;y==="top"||y==="bottom"?(N=y,I=_===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(I=y,N=_==="end"?"top":"bottom");const L=k-g.top-g.bottom,D=C-g.left-g.right,$=Ku(k-g[N],L),G=Ku(C-g[I],D),j=!e.middlewareData.shift;let q=$,ee=G;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(ee=D),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(q=L),j&&!_){const z=lr(g.left,0),te=lr(g.right,0),de=lr(g.top,0),xe=lr(g.bottom,0);T?ee=C-2*(z!==0||te!==0?z+te:lr(g.left,g.right)):q=k-2*(de!==0||xe!==0?de+xe:lr(g.top,g.bottom))}await h({...e,availableWidth:ee,availableHeight:q});const W=await l.getDimensions(c.floating);return C!==W.width||k!==W.height?{reset:{rects:!0}}:{}}}};function vk(t){const e=wo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=as(t),a=o?t.offsetWidth:n,l=o?t.offsetHeight:r,c=im(n)!==a||im(r)!==l;return c&&(n=a,r=l),{width:n,height:r,$:c}}function qw(t){return Ur(t)?t:t.contextElement}function cf(t){const e=qw(t);if(!as(e))return is(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:a}=vk(e);let l=(a?im(n.width):n.width)/r,c=(a?im(n.height):n.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const n8=is(0);function bk(t){const e=Ai(t);return!zw()||!e.visualViewport?n8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function r8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ai(t)?!1:e}function Xu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),a=qw(t);let l=is(1);e&&(r?Ur(r)&&(l=cf(r)):l=cf(t));const c=r8(a,n,r)?bk(a):is(0);let h=(o.left+c.x)/l.x,f=(o.top+c.y)/l.y,g=o.width/l.x,y=o.height/l.y;if(a){const _=Ai(a),T=r&&Ur(r)?Ai(r):r;let C=_,k=Yx(C);for(;k&&r&&T!==C;){const N=cf(k),I=k.getBoundingClientRect(),L=wo(k),D=I.left+(k.clientLeft+parseFloat(L.paddingLeft))*N.x,$=I.top+(k.clientTop+parseFloat(L.paddingTop))*N.y;h*=N.x,f*=N.y,g*=N.x,y*=N.y,h+=D,f+=$,C=Ai(k),k=Yx(C)}}return Ev({width:g,height:y,x:h,y:f})}function Gv(t,e){const n=Vv(t).scrollLeft;return e?e.left+n:Xu(ds(t)).left+n}function xk(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Gv(t,n),o=n.top+e.scrollTop;return{x:r,y:o}}function i8(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const a=o==="fixed",l=ds(r),c=e?Hv(e.floating):!1;if(r===l||c&&a)return n;let h={scrollLeft:0,scrollTop:0},f=is(1);const g=is(0),y=as(r);if((y||!y&&!a)&&((Af(r)!=="body"||hm(l))&&(h=Vv(r)),as(r))){const T=Xu(r);f=cf(r),g.x=T.x+r.clientLeft,g.y=T.y+r.clientTop}const _=l&&!y&&!a?xk(l,h):is(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-h.scrollLeft*f.x+g.x+_.x,y:n.y*f.y-h.scrollTop*f.y+g.y+_.y}}function o8(t){return Array.from(t.getClientRects())}function s8(t){const e=ds(t),n=Vv(t),r=t.ownerDocument.body,o=lr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=lr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Gv(t);const c=-n.scrollTop;return wo(r).direction==="rtl"&&(l+=lr(e.clientWidth,r.clientWidth)-o),{width:o,height:a,x:l,y:c}}const x1=25;function a8(t,e){const n=Ai(t),r=ds(t),o=n.visualViewport;let a=r.clientWidth,l=r.clientHeight,c=0,h=0;if(o){a=o.width,l=o.height;const g=zw();(!g||g&&e==="fixed")&&(c=o.offsetLeft,h=o.offsetTop)}const f=Gv(r);if(f<=0){const g=r.ownerDocument,y=g.body,_=getComputedStyle(y),T=g.compatMode==="CSS1Compat"&&parseFloat(_.marginLeft)+parseFloat(_.marginRight)||0,C=Math.abs(r.clientWidth-y.clientWidth-T);C<=x1&&(a-=C)}else f<=x1&&(a+=f);return{width:a,height:l,x:c,y:h}}const l8=new Set(["absolute","fixed"]);function u8(t,e){const n=Xu(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,a=as(t)?cf(t):is(1),l=t.clientWidth*a.x,c=t.clientHeight*a.y,h=o*a.x,f=r*a.y;return{width:l,height:c,x:h,y:f}}function w1(t,e,n){let r;if(e==="viewport")r=a8(t,n);else if(e==="document")r=s8(ds(t));else if(Ur(e))r=u8(e,n);else{const o=bk(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Ev(r)}function wk(t,e){const n=il(t);return n===e||!Ur(n)||yf(n)?!1:wo(n).position==="fixed"||wk(n,e)}function c8(t,e){const n=e.get(t);if(n)return n;let r=rm(t,[],!1).filter(c=>Ur(c)&&Af(c)!=="body"),o=null;const a=wo(t).position==="fixed";let l=a?il(t):t;for(;Ur(l)&&!yf(l);){const c=wo(l),h=jw(l);!h&&c.position==="fixed"&&(o=null),(a?!h&&!o:!h&&c.position==="static"&&!!o&&l8.has(o.position)||hm(l)&&!h&&wk(t,l))?r=r.filter(g=>g!==l):o=c,l=il(l)}return e.set(t,r),r}function d8(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const l=[...n==="clippingAncestors"?Hv(e)?[]:c8(e,this._c):[].concat(n),r],c=l[0],h=l.reduce((f,g)=>{const y=w1(e,g,o);return f.top=lr(y.top,f.top),f.right=Ku(y.right,f.right),f.bottom=Ku(y.bottom,f.bottom),f.left=lr(y.left,f.left),f},w1(e,c,o));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function f8(t){const{width:e,height:n}=vk(t);return{width:e,height:n}}function h8(t,e,n){const r=as(e),o=ds(e),a=n==="fixed",l=Xu(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const h=is(0);function f(){h.x=Gv(o)}if(r||!r&&!a)if((Af(e)!=="body"||hm(o))&&(c=Vv(e)),r){const T=Xu(e,!0,a,e);h.x=T.x+e.clientLeft,h.y=T.y+e.clientTop}else o&&f();a&&!r&&o&&f();const g=o&&!r&&!a?xk(o,c):is(0),y=l.left+c.scrollLeft-h.x-g.x,_=l.top+c.scrollTop-h.y-g.y;return{x:y,y:_,width:l.width,height:l.height}}function Qb(t){return wo(t).position==="static"}function _1(t,e){if(!as(t)||wo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ds(t)===n&&(n=n.ownerDocument.body),n}function _k(t,e){const n=Ai(t);if(Hv(t))return n;if(!as(t)){let o=il(t);for(;o&&!yf(o);){if(Ur(o)&&!Qb(o))return o;o=il(o)}return n}let r=_1(t,e);for(;r&&Rq(r)&&Qb(r);)r=_1(r,e);return r&&yf(r)&&Qb(r)&&!jw(r)?n:r||Lq(t)||n}const p8=async function(t){const e=this.getOffsetParent||_k,n=this.getDimensions,r=await n(t.floating);return{reference:h8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function m8(t){return wo(t).direction==="rtl"}const g8={convertOffsetParentRelativeRectToViewportRelativeRect:i8,getDocumentElement:ds,getClippingRect:d8,getOffsetParent:_k,getElementRects:p8,getClientRects:o8,getDimensions:f8,getScale:cf,isElement:Ur,isRTL:m8};function Sk(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function y8(t,e){let n=null,r;const o=ds(t);function a(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function l(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),a();const f=t.getBoundingClientRect(),{left:g,top:y,width:_,height:T}=f;if(c||e(),!_||!T)return;const C=ev(y),k=ev(o.clientWidth-(g+_)),N=ev(o.clientHeight-(y+T)),I=ev(g),D={rootMargin:-C+"px "+-k+"px "+-N+"px "+-I+"px",threshold:lr(0,Ku(1,h))||1};let $=!0;function G(j){const q=j[0].intersectionRatio;if(q!==h){if(!$)return l();q?l(!1,q):r=setTimeout(()=>{l(!1,1e-7)},1e3)}q===1&&!Sk(f,t.getBoundingClientRect())&&l(),$=!1}try{n=new IntersectionObserver(G,{...D,root:o.ownerDocument})}catch{n=new IntersectionObserver(G,D)}n.observe(t)}return l(!0),a}function v8(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,f=qw(t),g=o||a?[...f?rm(f):[],...rm(e)]:[];g.forEach(I=>{o&&I.addEventListener("scroll",n,{passive:!0}),a&&I.addEventListener("resize",n)});const y=f&&c?y8(f,n):null;let _=-1,T=null;l&&(T=new ResizeObserver(I=>{let[L]=I;L&&L.target===f&&T&&(T.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var D;(D=T)==null||D.observe(e)})),n()}),f&&!h&&T.observe(f),T.observe(e));let C,k=h?Xu(t):null;h&&N();function N(){const I=Xu(t);k&&!Sk(k,I)&&n(),k=I,C=requestAnimationFrame(N)}return n(),()=>{var I;g.forEach(L=>{o&&L.removeEventListener("scroll",n),a&&L.removeEventListener("resize",n)}),y==null||y(),(I=T)==null||I.disconnect(),T=null,h&&cancelAnimationFrame(C)}}const Zb=$v,b8=Zq,x8=e8,w8=Kq,_8=t8,S8=(t,e,n)=>{const r=new Map,o={platform:g8,...n},a={...o.platform,_c:r};return Wq(t,e,{...o,platform:a})};var E8=typeof document<"u",T8=function(){},av=E8?M.useLayoutEffect:T8;function Tv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Tv(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&t.$$typeof)&&!Tv(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function Ek(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function S1(t,e){const n=Ek(t);return Math.round(e*n)/n}function ex(t){const e=M.useRef(t);return av(()=>{e.current=t}),e}function C8(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:h,open:f}=t,[g,y]=M.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[_,T]=M.useState(r);Tv(_,r)||T(r);const[C,k]=M.useState(null),[N,I]=M.useState(null),L=M.useCallback(le=>{le!==j.current&&(j.current=le,k(le))},[]),D=M.useCallback(le=>{le!==q.current&&(q.current=le,I(le))},[]),$=a||C,G=l||N,j=M.useRef(null),q=M.useRef(null),ee=M.useRef(g),W=h!=null,z=ex(h),te=ex(o),de=ex(f),xe=M.useCallback(()=>{if(!j.current||!q.current)return;const le={placement:e,strategy:n,middleware:_};te.current&&(le.platform=te.current),S8(j.current,q.current,le).then(Ee=>{const H={...Ee,isPositioned:de.current!==!1};ue.current&&!Tv(ee.current,H)&&(ee.current=H,mf.flushSync(()=>{y(H)}))})},[_,e,n,te,de]);av(()=>{f===!1&&ee.current.isPositioned&&(ee.current.isPositioned=!1,y(le=>({...le,isPositioned:!1})))},[f]);const ue=M.useRef(!1);av(()=>(ue.current=!0,()=>{ue.current=!1}),[]),av(()=>{if($&&(j.current=$),G&&(q.current=G),$&&G){if(z.current)return z.current($,G,xe);xe()}},[$,G,xe,z,W]);const fe=M.useMemo(()=>({reference:j,floating:q,setReference:L,setFloating:D}),[L,D]),K=M.useMemo(()=>({reference:$,floating:G}),[$,G]),oe=M.useMemo(()=>{const le={position:n,left:0,top:0};if(!K.floating)return le;const Ee=S1(K.floating,g.x),H=S1(K.floating,g.y);return c?{...le,transform:"translate("+Ee+"px, "+H+"px)",...Ek(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Ee,top:H}},[n,c,K.floating,g.x,g.y]);return M.useMemo(()=>({...g,update:xe,refs:fe,elements:K,floatingStyles:oe}),[g,xe,fe,K,oe])}const Tk=(t,e)=>({...b8(t),options:[t,e]}),A8=(t,e)=>({...x8(t),options:[t,e]}),k8=(t,e)=>({...w8(t),options:[t,e]}),I8=(t,e)=>({..._8(t),options:[t,e]}),Ck={...eI},R8=Ck.useInsertionEffect,N8=R8||(t=>t());function Ak(t){const e=M.useRef(()=>{});return N8(()=>{e.current=t}),M.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var Kx=typeof document<"u"?M.useLayoutEffect:M.useEffect;let E1=!1,M8=0;const T1=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+M8++;function D8(){const[t,e]=M.useState(()=>E1?T1():void 0);return Kx(()=>{t==null&&e(T1())},[]),M.useEffect(()=>{E1=!0},[]),t}const P8=Ck.useId,L8=P8||D8;function O8(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const U8=M.createContext(null),B8=M.createContext(null),F8=()=>{var t;return((t=M.useContext(U8))==null?void 0:t.id)||null},j8=()=>M.useContext(B8),z8="data-floating-ui-focusable";function q8(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=L8(),a=M.useRef({}),[l]=M.useState(()=>O8()),c=F8()!=null,[h,f]=M.useState(r.reference),g=Ak((T,C,k)=>{a.current.openEvent=T?C:void 0,l.emit("openchange",{open:T,event:C,reason:k,nested:c}),n==null||n(T,C,k)}),y=M.useMemo(()=>({setPositionReference:f}),[]),_=M.useMemo(()=>({reference:h||r.reference||null,floating:r.floating||null,domReference:r.reference}),[h,r.reference,r.floating]);return M.useMemo(()=>({dataRef:a,open:e,onOpenChange:g,elements:_,events:l,floatingId:o,refs:y}),[e,g,_,l,o,y])}function H8(t){t===void 0&&(t={});const{nodeId:e}=t,n=q8({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[a,l]=M.useState(null),[c,h]=M.useState(null),g=(o==null?void 0:o.domReference)||a,y=M.useRef(null),_=j8();Kx(()=>{g&&(y.current=g)},[g]);const T=C8({...t,elements:{...o,...c&&{reference:c}}}),C=M.useCallback(D=>{const $=Ur(D)?{getBoundingClientRect:()=>D.getBoundingClientRect(),contextElement:D}:D;h($),T.refs.setReference($)},[T.refs]),k=M.useCallback(D=>{(Ur(D)||D===null)&&(y.current=D,l(D)),(Ur(T.refs.reference.current)||T.refs.reference.current===null||D!==null&&!Ur(D))&&T.refs.setReference(D)},[T.refs]),N=M.useMemo(()=>({...T.refs,setReference:k,setPositionReference:C,domReference:y}),[T.refs,k,C]),I=M.useMemo(()=>({...T.elements,domReference:g}),[T.elements,g]),L=M.useMemo(()=>({...T,...r,refs:N,elements:I,nodeId:e}),[T,N,I,e,r]);return Kx(()=>{r.dataRef.current.floatingContext=L;const D=_==null?void 0:_.nodesRef.current.find($=>$.id===e);D&&(D.context=L)}),M.useMemo(()=>({...T,context:L,refs:N,elements:I}),[T,N,I,L])}const C1="active",A1="selected";function tx(t,e,n){const r=new Map,o=n==="item";let a=t;if(o&&t){const{[C1]:l,[A1]:c,...h}=t;a=h}return{...n==="floating"&&{tabIndex:-1,[z8]:""},...a,...e.map(l=>{const c=l?l[n]:null;return typeof c=="function"?t?c(t):null:c}).concat(t).reduce((l,c)=>(c&&Object.entries(c).forEach(h=>{let[f,g]=h;if(!(o&&[C1,A1].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof g=="function"){var y;(y=r.get(f))==null||y.push(g),l[f]=function(){for(var _,T=arguments.length,C=new Array(T),k=0;k<T;k++)C[k]=arguments[k];return(_=r.get(f))==null?void 0:_.map(N=>N(...C)).find(N=>N!==void 0)}}}else l[f]=g}),l),{})}}function V8(t){t===void 0&&(t=[]);const e=t.map(c=>c==null?void 0:c.reference),n=t.map(c=>c==null?void 0:c.floating),r=t.map(c=>c==null?void 0:c.item),o=M.useCallback(c=>tx(c,t,"reference"),e),a=M.useCallback(c=>tx(c,t,"floating"),n),l=M.useCallback(c=>tx(c,t,"item"),r);return M.useMemo(()=>({getReferenceProps:o,getFloatingProps:a,getItemProps:l}),[o,a,l])}function k1(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const $8=t=>({name:"inner",options:t,async fn(e){const{listRef:n,overflowRef:r,onFallbackChange:o,offset:a=0,index:l=0,minItemsVisible:c=4,referenceOverflowThreshold:h=0,scrollRef:f,...g}=kf(t,e),{rects:y,elements:{floating:_}}=e,T=n.current[l],C=(f==null?void 0:f.current)||_,k=_.clientTop||C.clientTop,N=_.clientTop!==0,I=C.clientTop!==0,L=_===C;if(!T)return{};const D={...e,...await Tk(-T.offsetTop-_.clientTop-y.reference.height/2-T.offsetHeight/2-a).fn(e)},$=await Zb(k1(D,C.scrollHeight+k+_.clientTop),g),G=await Zb(D,{...g,elementContext:"reference"}),j=lr(0,$.top),q=D.y+j,z=(C.scrollHeight>C.clientHeight?te=>te:im)(lr(0,C.scrollHeight+(N&&L||I?k*2:0)-j-lr(0,$.bottom)));if(C.style.maxHeight=z+"px",C.scrollTop=j,o){const te=C.offsetHeight<T.offsetHeight*Ku(c,n.current.length)-1||G.top>=-h||G.bottom>=-h;mf.flushSync(()=>o(te))}return r&&(r.current=await Zb(k1({...D,y:q},C.offsetHeight+k+_.clientTop),g)),{y:q}}});function G8(t,e){const{open:n,elements:r}=t,{enabled:o=!0,overflowRef:a,scrollRef:l,onChange:c}=e,h=Ak(c),f=M.useRef(!1),g=M.useRef(null),y=M.useRef(null);M.useEffect(()=>{if(!o)return;function T(k){if(k.ctrlKey||!C||a.current==null)return;const N=k.deltaY,I=a.current.top>=-.5,L=a.current.bottom>=-.5,D=C.scrollHeight-C.clientHeight,$=N<0?-1:1,G=N<0?"max":"min";C.scrollHeight<=C.clientHeight||(!I&&N>0||!L&&N<0?(k.preventDefault(),mf.flushSync(()=>{h(j=>j+Math[G](N,D*$))})):/firefox/i.test(Uq())&&(C.scrollTop+=N))}const C=(l==null?void 0:l.current)||r.floating;if(n&&C)return C.addEventListener("wheel",T),requestAnimationFrame(()=>{g.current=C.scrollTop,a.current!=null&&(y.current={...a.current})}),()=>{g.current=null,y.current=null,C.removeEventListener("wheel",T)}},[o,n,r.floating,a,l,h]);const _=M.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const T=(l==null?void 0:l.current)||r.floating;if(!(!a.current||!T||!f.current)){if(g.current!==null){const C=T.scrollTop-g.current;(a.current.bottom<-.5&&C<-1||a.current.top<-.5&&C>1)&&mf.flushSync(()=>h(k=>k+C))}requestAnimationFrame(()=>{g.current=T.scrollTop})}}}),[r.floating,h,a,l]);return M.useMemo(()=>o?{floating:_}:{},[o,_])}let mm=M.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});mm.displayName="FloatingContext";let Hw=M.createContext(null);Hw.displayName="PlacementContext";function J8(t){return M.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function Y8(){return M.useContext(mm).setReference}function W8(){let{getFloatingProps:t,slot:e}=M.useContext(mm);return M.useCallback((...n)=>Object.assign({},t(...n),{"data-anchor":e.anchor}),[t,e])}function K8(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=M.useContext(Hw),n=M.useMemo(()=>t,[JSON.stringify(t,(o,a)=>{var l;return(l=a==null?void 0:a.outerHTML)!=null?l:a})]);us(()=>{e==null||e(n??null)},[e,n]);let r=M.useContext(mm);return M.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let I1=4;function X8({children:t,enabled:e=!0}){let[n,r]=M.useState(null),[o,a]=M.useState(0),l=M.useRef(null),[c,h]=M.useState(null);Q8(c);let f=e&&n!==null&&c!==null,{to:g="bottom",gap:y=0,offset:_=0,padding:T=0,inner:C}=Z8(n,c),[k,N="center"]=g.split(" ");us(()=>{f&&a(0)},[f]);let{refs:I,floatingStyles:L,context:D}=H8({open:f,placement:k==="selection"?N==="center"?"bottom":`bottom-${N}`:N==="center"?`${k}`:`${k}-${N}`,strategy:"absolute",transform:!1,middleware:[Tk({mainAxis:k==="selection"?0:y,crossAxis:_}),A8({padding:T}),k!=="selection"&&k8({padding:T}),k==="selection"&&C?$8({...C,padding:T,overflowRef:l,offset:o,minItemsVisible:I1,referenceOverflowThreshold:T,onFallbackChange(te){var de,xe;if(!te)return;let ue=D.elements.floating;if(!ue)return;let fe=parseFloat(getComputedStyle(ue).scrollPaddingBottom)||0,K=Math.min(I1,ue.childElementCount),oe=0,le=0;for(let Ee of(xe=(de=D.elements.floating)==null?void 0:de.childNodes)!=null?xe:[])if(Gs(Ee)){let H=Ee.offsetTop,V=H+Ee.clientHeight+fe,re=ue.scrollTop,U=re+ue.clientHeight;if(H>=re&&V<=U)K--;else{le=Math.max(0,Math.min(V,U)-Math.max(H,re)),oe=Ee.clientHeight;break}}K>=1&&a(Ee=>{let H=oe*K-le+fe;return Ee>=H?Ee:H})}}):null,I8({padding:T,apply({availableWidth:te,availableHeight:de,elements:xe}){Object.assign(xe.floating.style,{overflow:"auto",maxWidth:`${te}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${de}px)`})}})].filter(Boolean),whileElementsMounted:v8}),[$=k,G=N]=D.placement.split("-");k==="selection"&&($="selection");let j=M.useMemo(()=>({anchor:[$,G].filter(Boolean).join(" ")}),[$,G]),q=G8(D,{overflowRef:l,onChange:a}),{getReferenceProps:ee,getFloatingProps:W}=V8([q]),z=Ot(te=>{h(te),I.setFloating(te)});return M.createElement(Hw.Provider,{value:r},M.createElement(mm.Provider,{value:{setFloating:z,setReference:I.setReference,styles:L,getReferenceProps:ee,getFloatingProps:W,slot:j}},t))}function Q8(t){us(()=>{if(!t)return;let e=new MutationObserver(()=>{let n=window.getComputedStyle(t).maxHeight,r=parseFloat(n);if(isNaN(r))return;let o=parseInt(n);isNaN(o)||r!==o&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function Z8(t,e){var n,r,o;let a=nx((n=t==null?void 0:t.gap)!=null?n:"var(--anchor-gap, 0)",e),l=nx((r=t==null?void 0:t.offset)!=null?r:"var(--anchor-offset, 0)",e),c=nx((o=t==null?void 0:t.padding)!=null?o:"var(--anchor-padding, 0)",e);return{...t,gap:a,offset:l,padding:c}}function nx(t,e,n=void 0){let r=jv(),o=Ot((h,f)=>{if(h==null)return[n,null];if(typeof h=="number")return[h,null];if(typeof h=="string"){if(!f)return[n,null];let g=R1(h,f);return[g,y=>{let _=kk(h);{let T=_.map(C=>window.getComputedStyle(f).getPropertyValue(C));r.requestAnimationFrame(function C(){r.nextFrame(C);let k=!1;for(let[I,L]of _.entries()){let D=window.getComputedStyle(f).getPropertyValue(L);if(T[I]!==D){T[I]=D,k=!0;break}}if(!k)return;let N=R1(h,f);g!==N&&(y(N),g=N)})}return r.dispose}]}return[n,null]}),a=M.useMemo(()=>o(t,e)[0],[t,e]),[l=a,c]=M.useState();return us(()=>{let[h,f]=o(t,e);if(c(h),!!f)return f(c)},[t,e]),l}function kk(t){let e=/var\((.*)\)/.exec(t);if(e){let n=e[1].indexOf(",");if(n===-1)return[e[1]];let r=e[1].slice(0,n).trim(),o=e[1].slice(n+1).trim();return o?[r,...kk(o)]:[r]}return[]}function R1(t,e){let n=document.createElement("div");e.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return e.removeChild(n),r}let Jv=M.createContext(null);Jv.displayName="OpenClosedContext";var Qu=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Qu||{});function Ik(){return M.useContext(Jv)}function eH({value:t,children:e}){return We.createElement(Jv.Provider,{value:t},e)}function tH({children:t}){return We.createElement(Jv.Provider,{value:null},t)}function Rk(t){let e=Ot(t),n=M.useRef(!1);M.useEffect(()=>(n.current=!1,()=>{n.current=!0,WA(()=>{n.current&&e()})}),[e])}let nH=M.createContext(!1);function rH(){return M.useContext(nH)}function iH(t){let e=rH(),n=M.useContext(Mk),[r,o]=M.useState(()=>{var a;if(!e&&n!==null)return(a=n.current)!=null?a:null;if(Hu.isServer)return null;let l=t==null?void 0:t.getElementById("headlessui-portal-root");if(l)return l;if(t===null)return null;let c=t.createElement("div");return c.setAttribute("id","headlessui-portal-root"),t.body.appendChild(c)});return M.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),M.useEffect(()=>{e||n!==null&&o(n.current)},[n,o,e]),r}let Nk=M.Fragment,oH=cs(function(t,e){let{ownerDocument:n=null,...r}=t,o=M.useRef(null),a=Js(ek(_=>{o.current=_}),e),l=Jx(o.current),c=n??l,h=iH(c),f=M.useContext(Xx),g=jv(),y=Qs();return Rk(()=>{var _;h&&h.childNodes.length<=0&&((_=h.parentElement)==null||_.removeChild(h))}),h?mf.createPortal(We.createElement("div",{"data-headlessui-portal":"",ref:_=>{g.dispose(),f&&_&&g.add(f.register(_))}},y({ourProps:{ref:a},theirProps:r,slot:{},defaultTag:Nk,name:"Portal"})),h):null});function sH(t,e){let n=Js(e),{enabled:r=!0,ownerDocument:o,...a}=t,l=Qs();return r?We.createElement(oH,{...a,ownerDocument:o,ref:n}):l({ourProps:{ref:n},theirProps:a,slot:{},defaultTag:Nk,name:"Portal"})}let aH=M.Fragment,Mk=M.createContext(null);function lH(t,e){let{target:n,...r}=t,o={ref:Js(e)},a=Qs();return We.createElement(Mk.Provider,{value:n},a({ourProps:o,theirProps:r,defaultTag:aH,name:"Popover.Group"}))}let Xx=M.createContext(null);function uH(){let t=M.useContext(Xx),e=M.useRef([]),n=Ot(a=>(e.current.push(a),t&&t.register(a),()=>r(a))),r=Ot(a=>{let l=e.current.indexOf(a);l!==-1&&e.current.splice(l,1),t&&t.unregister(a)}),o=M.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,M.useMemo(()=>function({children:a}){return We.createElement(Xx.Provider,{value:o},a)},[o])]}let cH=cs(sH),dH=cs(lH),fH=Object.assign(cH,{Group:dH});function hH({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=Ot(()=>{var o,a;let l=Cf(n),c=[];for(let h of t)h!==null&&(Vu(h)?c.push(h):"current"in h&&Vu(h.current)&&c.push(h.current));if(e!=null&&e.current)for(let h of e.current)c.push(h);for(let h of(o=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?o:[])h!==document.body&&h!==document.head&&Vu(h)&&h.id!=="headlessui-portal-root"&&(n&&(h.contains(n)||h.contains((a=n==null?void 0:n.getRootNode())==null?void 0:a.host))||c.some(f=>h.contains(f))||c.push(h));return c});return{resolveContainers:r,contains:Ot(o=>r().some(a=>a.contains(o)))}}let Dk=M.createContext(null);function Pk({children:t,node:e}){let[n,r]=M.useState(null),o=Lk(e??n);return We.createElement(Dk.Provider,{value:o},t,o===null&&We.createElement(wv,{features:nm.Hidden,ref:a=>{var l,c;if(a){for(let h of(c=(l=Cf(a))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?c:[])if(h!==document.body&&h!==document.head&&Vu(h)&&h!=null&&h.contains(a)){r(h);break}}}}))}function Lk(t=null){var e;return(e=M.useContext(Dk))!=null?e:t}var $s=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))($s||{});function Ok(){let t=M.useRef(0);return ck(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}var pH=Object.defineProperty,mH=(t,e,n)=>e in t?pH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N1=(t,e,n)=>(mH(t,typeof e!="symbol"?e+"":e,n),n),Tn=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Tn||{}),gH=(t=>(t[t.OpenPopover=0]="OpenPopover",t[t.ClosePopover=1]="ClosePopover",t[t.SetButton=2]="SetButton",t[t.SetButtonId=3]="SetButtonId",t[t.SetPanel=4]="SetPanel",t[t.SetPanelId=5]="SetPanelId",t))(gH||{});let yH={0:t=>t.popoverState===0?t:{...t,popoverState:0,__demoMode:!1},1(t){return t.popoverState===1?t:{...t,popoverState:1,__demoMode:!1}},2(t,e){return t.button===e.button?t:{...t,button:e.button}},3(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},4(t,e){return t.panel===e.panel?t:{...t,panel:e.panel}},5(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}}};class Vw extends ik{constructor(e){super(e),N1(this,"actions",{close:()=>this.send({type:1}),refocusableClose:n=>{this.actions.close();let r=n?Gs(n)?n:"current"in n&&Gs(n.current)?n.current:this.state.button:this.state.button;r==null||r.focus()},open:()=>this.send({type:0}),setButtonId:n=>this.send({type:3,buttonId:n}),setButton:n=>this.send({type:2,button:n}),setPanelId:n=>this.send({type:5,panelId:n}),setPanel:n=>this.send({type:4,panel:n})}),N1(this,"selectors",{isPortalled:n=>{var r;if(!n.button||!n.panel)return!1;let o=(r=Cf(n.button))!=null?r:document;for(let y of o.querySelectorAll("body > *"))if(Number(y==null?void 0:y.contains(n.button))^Number(y==null?void 0:y.contains(n.panel)))return!0;let a=zv(o),l=a.indexOf(n.button),c=(l+a.length-1)%a.length,h=(l+1)%a.length,f=a[c],g=a[h];return!n.panel.contains(f)&&!n.panel.contains(g)}});{let n=this.state.id,r=ak.get(null);this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}}static new({id:e,__demoMode:n=!1}){return new Vw({id:e,__demoMode:n,popoverState:n?0:1,buttons:{current:[]},button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:{current:null},afterPanelSentinel:{current:null},afterButtonSentinel:{current:null}})}reduce(e,n){return ss(n.type,yH,e,n)}}const Uk=M.createContext(null);function Yv(t){let e=M.useContext(Uk);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Yv),n}return e}function vH({id:t,__demoMode:e=!1}){let n=M.useMemo(()=>Vw.new({id:t,__demoMode:e}),[]);return Rk(()=>n.dispose()),n}let $w=M.createContext(null);$w.displayName="PopoverGroupContext";function Bk(){return M.useContext($w)}let Wv=M.createContext(null);Wv.displayName="PopoverPanelContext";function bH(){return M.useContext(Wv)}let xH="div";function wH(t,e){var n;let r=M.useId(),{__demoMode:o=!1,...a}=t,l=vH({id:r,__demoMode:o}),c=M.useRef(null),h=Js(e,ek(ue=>{c.current=ue})),[f,g,y,_,T]=Wu(l,M.useCallback(ue=>[ue.popoverState,ue.button,ue.panel,ue.buttonId,ue.panelId],[])),C=dq((n=c.current)!=null?n:g),k=rl(_),N=rl(T),I=M.useMemo(()=>({buttonId:k,panelId:N,close:l.actions.close}),[k,N,l]),L=Bk(),D=L==null?void 0:L.registerPopover,$=Ot(()=>{var ue,fe;let K=gf((ue=c.current)!=null?ue:g);return(fe=L==null?void 0:L.isFocusWithinPopoverGroup())!=null?fe:K&&((g==null?void 0:g.contains(K))||(y==null?void 0:y.contains(K)))});M.useEffect(()=>D==null?void 0:D(I),[D,I]);let[G,j]=uH(),q=Lk(g),ee=hH({mainTreeNode:q,portals:G,defaultContainers:[{get current(){return l.state.button}},{get current(){return l.state.panel}}]});fq(C,"focus",ue=>{var fe,K,oe,le,Ee,H;ue.target!==window&&nf(ue.target)&&l.state.popoverState===Tn.Open&&($()||l.state.button&&l.state.panel&&(ee.contains(ue.target)||(K=(fe=l.state.beforePanelSentinel.current)==null?void 0:fe.contains)!=null&&K.call(fe,ue.target)||(le=(oe=l.state.afterPanelSentinel.current)==null?void 0:oe.contains)!=null&&le.call(oe,ue.target)||(H=(Ee=l.state.afterButtonSentinel.current)==null?void 0:Ee.contains)!=null&&H.call(Ee,ue.target)||l.actions.close()))},!0);let W=f===Tn.Open;cq(W,ee.resolveContainers,(ue,fe)=>{l.actions.close(),lk(fe,Fw.Loose)||(ue.preventDefault(),g==null||g.focus())});let z=fm({open:f===Tn.Open,close:l.actions.refocusableClose}),te=Wu(l,M.useCallback(ue=>ss(ue.popoverState,{[Tn.Open]:Qu.Open,[Tn.Closed]:Qu.Closed}),[])),de={ref:h},xe=Qs();return We.createElement(Pk,{node:q},We.createElement(X8,null,We.createElement(Wv.Provider,{value:null},We.createElement(Uk.Provider,{value:l},We.createElement(tk,{value:l.actions.refocusableClose},We.createElement(eH,{value:te},We.createElement(j,null,xe({ourProps:de,theirProps:a,slot:z,defaultTag:xH,name:"Popover"}))))))))}let _H="button";function SH(t,e){let n=M.useId(),{id:r=`headlessui-popover-button-${n}`,disabled:o=!1,autoFocus:a=!1,...l}=t,c=Yv("Popover.Button"),[h,f,g,y,_,T,C]=Wu(c,M.useCallback(me=>[me.popoverState,c.selectors.isPortalled(me),me.button,me.buttonId,me.panel,me.panelId,me.afterButtonSentinel],[])),k=M.useRef(null),N=`headlessui-focus-sentinel-${M.useId()}`,I=Bk(),L=I==null?void 0:I.closeOthers,D=bH()!==null;M.useEffect(()=>{if(!D)return c.actions.setButtonId(r),()=>c.actions.setButtonId(null)},[D,r,c]);let[$]=M.useState(()=>Symbol()),G=Js(k,e,Y8(),Ot(me=>{if(!D){if(me)c.state.buttons.current.push($);else{let Ce=c.state.buttons.current.indexOf($);Ce!==-1&&c.state.buttons.current.splice(Ce,1)}c.state.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),me&&c.actions.setButton(me)}})),j=Js(k,e),q=Ot(me=>{var Ce,Ie,Ve;if(D){if(c.state.popoverState===Tn.Closed)return;switch(me.key){case el.Space:case el.Enter:me.preventDefault(),(Ie=(Ce=me.target).click)==null||Ie.call(Ce),c.actions.close(),(Ve=c.state.button)==null||Ve.focus();break}}else switch(me.key){case el.Space:case el.Enter:me.preventDefault(),me.stopPropagation(),c.state.popoverState===Tn.Closed?(L==null||L(c.state.buttonId),c.actions.open()):c.actions.close();break;case el.Escape:if(c.state.popoverState!==Tn.Open)return L==null?void 0:L(c.state.buttonId);if(!k.current)return;let rt=gf(k.current);if(rt&&!k.current.contains(rt))return;me.preventDefault(),me.stopPropagation(),c.actions.close();break}}),ee=Ot(me=>{D||me.key===el.Space&&me.preventDefault()}),W=Ot(me=>{var Ce,Ie;QA(me.currentTarget)||o||(D?(c.actions.close(),(Ce=c.state.button)==null||Ce.focus()):(me.preventDefault(),me.stopPropagation(),c.state.popoverState===Tn.Closed?(L==null||L(c.state.buttonId),c.actions.open()):c.actions.close(),(Ie=c.state.button)==null||Ie.focus()))}),z=Ot(me=>{me.preventDefault(),me.stopPropagation()}),{isFocusVisible:te,focusProps:de}=bz({autoFocus:a}),{isHovered:xe,hoverProps:ue}=vz({isDisabled:o}),{pressed:fe,pressProps:K}=Tz({disabled:o}),oe=h===Tn.Open,le=fm({open:oe,active:fe||oe,disabled:o,hover:xe,focus:te,autofocus:a}),Ee=hq(t,g),H=$x(D?{ref:j,type:Ee,onKeyDown:q,onClick:W,disabled:o||void 0,autoFocus:a}:{ref:G,id:y,type:Ee,"aria-expanded":h===Tn.Open,"aria-controls":_?T:void 0,disabled:o||void 0,autoFocus:a,onKeyDown:q,onKeyUp:ee,onClick:W,onMouseDown:z},de,ue,K),V=Ok(),re=Ot(()=>{if(!Gs(c.state.panel))return;let me=c.state.panel;function Ce(){ss(V.current,{[$s.Forwards]:()=>ju(me,Hs.First),[$s.Backwards]:()=>ju(me,Hs.Last)})===_v.Error&&ju(zv(Yu(c.state.button)).filter(Ie=>Ie.dataset.headlessuiFocusGuard!=="true"),ss(V.current,{[$s.Forwards]:Hs.Next,[$s.Backwards]:Hs.Previous}),{relativeTo:c.state.button})}Ce()}),U=Qs();return We.createElement(We.Fragment,null,U({ourProps:H,theirProps:l,slot:le,defaultTag:_H,name:"Popover.Button"}),oe&&!D&&f&&We.createElement(wv,{id:N,ref:C,features:nm.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:re}))}let EH="div",TH=tm.RenderStrategy|tm.Static;function Fk(t,e){let n=M.useId(),{id:r=`headlessui-popover-backdrop-${n}`,transition:o=!1,...a}=t,l=Yv("Popover.Backdrop"),c=Wu(l,M.useCallback(I=>I.popoverState,[])),[h,f]=M.useState(null),g=Js(e,f),y=Ik(),[_,T]=fk(o,h,y!==null?(y&Qu.Open)===Qu.Open:c===Tn.Open),C=Ot(I=>{if(QA(I.currentTarget))return I.preventDefault();l.actions.close()}),k=fm({open:c===Tn.Open}),N={ref:g,id:r,"aria-hidden":!0,onClick:C,...dk(T)};return Qs()({ourProps:N,theirProps:a,slot:k,defaultTag:EH,features:TH,visible:_,name:"Popover.Backdrop"})}let CH="div",AH=tm.RenderStrategy|tm.Static;function kH(t,e){let n=M.useId(),{id:r=`headlessui-popover-panel-${n}`,focus:o=!1,anchor:a,portal:l=!1,modal:c=!1,transition:h=!1,...f}=t,g=Yv("Popover.Panel"),y=Wu(g,g.selectors.isPortalled),[_,T,C,k,N]=Wu(g,M.useCallback(U=>[U.popoverState,U.button,U.__demoMode,U.beforePanelSentinel,U.afterPanelSentinel],[])),I=`headlessui-focus-sentinel-before-${n}`,L=`headlessui-focus-sentinel-after-${n}`,D=M.useRef(null),$=J8(a),[G,j]=K8($),q=W8();$&&(l=!0);let[ee,W]=M.useState(null),z=Js(D,e,$?G:null,g.actions.setPanel,W),te=Jx(T),de=Jx(D.current);us(()=>(g.actions.setPanelId(r),()=>g.actions.setPanelId(null)),[r,g]);let xe=Ik(),[ue,fe]=fk(h,ee,xe!==null?(xe&Qu.Open)===Qu.Open:_===Tn.Open);tq(ue,T,g.actions.close),xq(C?!1:c&&ue,de);let K=Ot(U=>{var me;switch(U.key){case el.Escape:if(g.state.popoverState!==Tn.Open||!D.current)return;let Ce=gf(D.current);if(Ce&&!D.current.contains(Ce))return;U.preventDefault(),U.stopPropagation(),g.actions.close(),(me=g.state.button)==null||me.focus();break}});M.useEffect(()=>{var U;t.static||_===Tn.Closed&&((U=t.unmount)==null||U)&&g.actions.setPanel(null)},[_,t.unmount,t.static,g]),M.useEffect(()=>{if(C||!o||_!==Tn.Open||!D.current)return;let U=gf(D.current);D.current.contains(U)||ju(D.current,Hs.First)},[C,o,D.current,_]);let oe=fm({open:_===Tn.Open,close:g.actions.refocusableClose}),le=$x($?q():{},{ref:z,id:r,onKeyDown:K,onBlur:o&&_===Tn.Open?U=>{var me,Ce,Ie,Ve,rt;let Ue=U.relatedTarget;Ue&&D.current&&((me=D.current)!=null&&me.contains(Ue)||(g.actions.close(),((Ie=(Ce=k.current)==null?void 0:Ce.contains)!=null&&Ie.call(Ce,Ue)||(rt=(Ve=N.current)==null?void 0:Ve.contains)!=null&&rt.call(Ve,Ue))&&Ue.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...f.style,...j,"--button-width":zz(ue,T,!0).width},...dk(fe)}),Ee=Ok(),H=Ot(()=>{let U=D.current;if(!U)return;function me(){ss(Ee.current,{[$s.Forwards]:()=>{var Ce;ju(U,Hs.First)===_v.Error&&((Ce=g.state.afterPanelSentinel.current)==null||Ce.focus())},[$s.Backwards]:()=>{var Ce;(Ce=g.state.button)==null||Ce.focus({preventScroll:!0})}})}me()}),V=Ot(()=>{let U=D.current;if(!U)return;function me(){ss(Ee.current,{[$s.Forwards]:()=>{var Ce;if(!g.state.button)return;let Ie=(Ce=Yu(g.state.button))!=null?Ce:document.body,Ve=zv(Ie),rt=Ve.indexOf(g.state.button),Ue=Ve.slice(0,rt+1),Xt=[...Ve.slice(rt+1),...Ue];for(let hn of Xt.slice())if(hn.dataset.headlessuiFocusGuard==="true"||ee!=null&&ee.contains(hn)){let fr=Xt.indexOf(hn);fr!==-1&&Xt.splice(fr,1)}ju(Xt,Hs.First,{sorted:!1})},[$s.Backwards]:()=>{var Ce;ju(U,Hs.Previous)===_v.Error&&((Ce=g.state.button)==null||Ce.focus())}})}me()}),re=Qs();return We.createElement(tH,null,We.createElement(Wv.Provider,{value:r},We.createElement(tk,{value:g.actions.refocusableClose},We.createElement(fH,{enabled:l?t.static||ue:!1,ownerDocument:te},ue&&y&&We.createElement(wv,{id:I,ref:k,features:nm.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:H}),re({ourProps:le,theirProps:f,slot:oe,defaultTag:CH,features:AH,visible:ue,name:"Popover.Panel"}),ue&&y&&We.createElement(wv,{id:L,ref:N,features:nm.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:V})))))}let IH="div";function RH(t,e){let n=M.useRef(null),r=Js(n,e),[o,a]=M.useState([]),l=Ot(k=>{a(N=>{let I=N.indexOf(k);if(I!==-1){let L=N.slice();return L.splice(I,1),L}return N})}),c=Ot(k=>(a(N=>[...N,k]),()=>l(k))),h=Ot(()=>{var k;let N=Yu(n.current);if(!N)return!1;let I=gf(n.current);return(k=n.current)!=null&&k.contains(I)?!0:o.some(L=>{var D,$;return((D=N.getElementById(L.buttonId.current))==null?void 0:D.contains(I))||(($=N.getElementById(L.panelId.current))==null?void 0:$.contains(I))})}),f=Ot(k=>{for(let N of o)N.buttonId.current!==k&&N.close()}),g=M.useMemo(()=>({registerPopover:c,unregisterPopover:l,isFocusWithinPopoverGroup:h,closeOthers:f}),[c,l,h,f]),y=fm({}),_=t,T={ref:r},C=Qs();return We.createElement(Pk,null,We.createElement($w.Provider,{value:g},C({ourProps:T,theirProps:_,slot:y,defaultTag:IH,name:"Popover.Group"})))}let NH=cs(wH),jk=cs(SH),MH=cs(Fk),DH=cs(Fk),zk=cs(kH),PH=cs(RH),LH=Object.assign(NH,{Button:jk,Backdrop:DH,Overlay:MH,Panel:zk,Group:PH});function OH({sources:t,buttonText:e="Sources",className:n=""}){return!t||t.length===0?null:b.jsxs(LH,{className:`popover ${n}`,children:[b.jsx(jk,{className:"popover-button",children:e}),b.jsxs(zk,{transition:!0,className:"popover-panel",children:[b.jsx("div",{className:"GMP-attribution",children:"Google Maps Grounded Result"}),t.map(r=>b.jsx("a",{href:r.uri,target:"_blank",rel:"noopener noreferrer",className:"source-link",children:r.title},r.uri))]})]})}var rx,M1;function UH(){return M1||(M1=1,rx=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;o--!==0;){var l=a[o];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n}),rx}var BH=UH();const FH=sl(BH),jH="1.7.1";function Kv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Qx(t,e,n,r){function o(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function c(g){try{f(r.next(g))}catch(y){l(y)}}function h(g){try{f(r.throw(g))}catch(y){l(y)}}function f(g){g.done?a(g.value):o(g.value).then(c,h)}f((r=r.apply(t,[])).next())})}const nl={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},zH="https://maps.googleapis.com/maps/api/js";class Cv{static load(e,n){return Qx(this,void 0,void 0,function*(){var r,o;const a=e.libraries?e.libraries.split(","):[],l=this.serializeParams(e);this.listeners.push(n),!((o=(r=window.google)===null||r===void 0?void 0:r.maps)===null||o===void 0)&&o.importLibrary?(this.serializedApiParams||(this.loadingStatus=nl.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=l,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==l&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const c=["maps",...a];yield Promise.all(c.map(h=>google.maps.importLibrary(h)))})}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let n=null;const r=()=>n||(n=new Promise((o,a)=>{var l;const c=document.createElement("script"),h=new URLSearchParams;for(const[f,g]of Object.entries(e)){const y=f.replace(/[A-Z]/g,_=>"_"+_[0].toLowerCase());h.set(y,String(g))}h.set("loading","async"),h.set("callback","__googleMapsCallback__"),c.async=!0,c.src=zH+"?"+h.toString(),c.nonce=((l=document.querySelector("script[nonce]"))===null||l===void 0?void 0:l.nonce)||"",c.onerror=()=>{this.loadingStatus=nl.FAILED,this.notifyLoadingStatusListeners(),a(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=nl.LOADED,this.notifyLoadingStatusListeners(),o()},window.gm_authFailure=()=>{this.loadingStatus=nl.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=nl.LOADING,this.notifyLoadingStatusListeners(),document.head.append(c)}),n);google.maps.importLibrary=o=>r().then(()=>google.maps.importLibrary(o))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}Cv.loadingStatus=nl.NOT_LOADED;Cv.listeners=[];const qH="GMP_visgl_rgmlibrary_v1_default",HH=[`gmp_visgl_reactgooglemaps_v${jH}`],Xv=We.createContext(null);function VH(){const[t,e]=M.useState({});return{mapInstances:t,addMapInstance:(a,l="default")=>{e(c=>Object.assign(Object.assign({},c),{[l]:a}))},removeMapInstance:(a="default")=>{e(l=>{var c=a;l[c];var h=Kv(l,[typeof c=="symbol"?c:c+""]);return h})},clearMapInstances:()=>{e({})}}}function $H(t){const{onLoad:e,onError:n,apiKey:r,version:o,libraries:a=[]}=t,l=Kv(t,["onLoad","onError","apiKey","version","libraries"]),[c,h]=M.useState(Cv.loadingStatus),[f,g]=M.useReducer((C,k)=>C[k.name]?C:Object.assign(Object.assign({},C),{[k.name]:k.value}),{}),y=M.useMemo(()=>a==null?void 0:a.join(","),[a]),_=M.useMemo(()=>JSON.stringify(Object.assign({apiKey:r,version:o},l)),[r,o,l]),T=M.useCallback(C=>Qx(this,void 0,void 0,function*(){var k;if(f[C])return f[C];if(!(!((k=google==null?void 0:google.maps)===null||k===void 0)&&k.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const N=yield window.google.maps.importLibrary(C);return g({name:C,value:N}),N}),[f]);return M.useEffect(()=>{Qx(this,void 0,void 0,function*(){try{const C=Object.assign({key:r},l);o&&(C.v=o),(y==null?void 0:y.length)>0&&(C.libraries=y),(C.channel===void 0||C.channel<0||C.channel>999)&&delete C.channel,C.solutionChannel===void 0?C.solutionChannel=qH:C.solutionChannel===""&&delete C.solutionChannel,yield Cv.load(C,k=>h(k));for(const k of["core","maps",...a])yield T(k);e&&e()}catch(C){n?n(C):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",C)}})},[r,y,_]),{status:c,loadedLibraries:f,importLibrary:T}}function GH(t){return M.useMemo(()=>t.disableUsageAttribution?null:HH,[t.disableUsageAttribution])}const JH=t=>{const{children:e}=t,n=Kv(t,["children"]),{mapInstances:r,addMapInstance:o,removeMapInstance:a,clearMapInstances:l}=VH(),{status:c,loadedLibraries:h,importLibrary:f}=$H(n),g=GH(n),y=M.useMemo(()=>({mapInstances:r,addMapInstance:o,removeMapInstance:a,clearMapInstances:l,status:c,loadedLibraries:h,importLibrary:f,internalUsageAttributionIds:g}),[r,o,a,l,c,h,f,g]);return We.createElement(Xv.Provider,{value:y},e)};function YH(){var t;return((t=M.useContext(Xv))===null||t===void 0?void 0:t.status)||nl.NOT_LOADED}function WH(){return YH()===nl.LOADED}const KH=We.createContext(null),D1=new Set;function XH(...t){const e=JSON.stringify(t);D1.has(e)||(D1.add(e),console.error(...t))}const qk=(t=null)=>{const e=M.useContext(Xv),{map:n}=M.useContext(KH)||{};if(e===null)return XH("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:r}=e;return t!==null?r[t]||null:n||r.default||null};function qu(t){const e=WH(),n=M.useContext(Xv);return M.useEffect(()=>{!e||!n||n.importLibrary(t)},[e,n,t]),(n==null?void 0:n.loadedLibraries[t])||null}function tv(t,e,n){M.useEffect(()=>{if(!t||!e||!n)return;const r=google.maps.event.addListener(t,e,n);return()=>r.remove()},[t,e,n])}function nv(t,e,n){M.useEffect(()=>{t&&(t[e]=n)},[t,e,n])}function P1(t,e,n){M.useEffect(()=>{if(!(!t||!e||!n))return t.addEventListener(e,n),()=>t.removeEventListener(e,n)},[t,e,n])}class QH{constructor(){this.renderedStyles=new Set,this.styleElement=null}getStyleElement(){return this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.setAttribute("data-rgm-anchor-styles",""),document.head.appendChild(this.styleElement)),this.styleElement}addAdvancedMarkerPointerEventsOverwrite(){if(this.renderedStyles.has("marker-pointer-events"))return;const e=this.getStyleElement();e.textContent+=`
      gmp-advanced-marker[data-origin='rgm'] {
        pointer-events: none !important;
      }
    `,this.renderedStyles.add("marker-pointer-events")}cleanup(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null,this.renderedStyles.clear())}}const ZH=new QH;function e7(t,e){var n;if(!(!((n=google==null?void 0:google.maps)===null||n===void 0)&&n.version))return;const r=google.maps.version.split("."),o=parseInt(r[0],10),a=parseInt(r[1],10);return o>t||o===t&&a>=e}const t7=We.createContext(null),n7={BOTTOM:["50%","100%"]},r7=M.forwardRef((t,e)=>{const{children:n,style:r,className:o,anchorPoint:a}=t,[l,c]=o7(t),h=M.useMemo(()=>l?{marker:l}:null,[l]);return M.useImperativeHandle(e,()=>l,[l]),c?We.createElement(t7.Provider,{value:h},mf.createPortal(We.createElement(i7,{anchorPoint:a,styles:r,className:o},n),c)):null});r7.displayName="AdvancedMarker";function Zx(t){return t.nodeType===Node.ELEMENT_NODE}const i7=({children:t,styles:e,className:n})=>We.createElement("div",{className:n,style:e},t);function o7(t){const[e,n]=M.useState(null),[r,o]=M.useState(null),a=qk(),l=qu("marker"),{children:c,onClick:h,className:f,onMouseEnter:g,onMouseLeave:y,onDrag:_,onDragStart:T,onDragEnd:C,collisionBehavior:k,clickable:N,draggable:I,position:L,title:D,zIndex:$,anchorPoint:G,anchorLeft:j,anchorTop:q}=t,ee=M.Children.count(c);return M.useEffect(()=>{if(!a||!l)return;const W=new l.AdvancedMarkerElement;W.map=a,n(W);let z=null;return ee>0&&(z=document.createElement("div"),W.content=z,o(z)),()=>{W.map=null,z==null||z.remove(),n(null),o(null)}},[a,l,ee]),M.useEffect(()=>{!(e!=null&&e.content)||!Zx(e.content)||ee>0||(e.content.className=f??"")},[e,f,ee]),s7(e,G,j,q,ee>0),nv(e,"position",L),nv(e,"title",D??""),nv(e,"zIndex",$),nv(e,"collisionBehavior",k),M.useEffect(()=>{e&&(I!==void 0?e.gmpDraggable=I:_||T||C?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,I,_,C,T]),M.useEffect(()=>{if(!e)return;const W=N!==void 0||!!h||!!g||!!y;e.gmpClickable=W,W&&(e!=null&&e.content)&&Zx(e.content)&&(e.content.style.pointerEvents="all",h&&(e.content.style.cursor="pointer"))},[e,N,h,g,y]),tv(e,"click",h),tv(e,"drag",_),tv(e,"dragstart",T),tv(e,"dragend",C),P1(e==null?void 0:e.element,"mouseenter",g),P1(e==null?void 0:e.element,"mouseleave",y),[e,r]}function s7(t,e,n,r,o){M.useEffect(()=>{if(!t||!o)return;const a=e7(3,62),l=t.content;if(!(!l||!Zx(l))){if(n!==void 0||r!==void 0){a||console.warn(`AdvancedMarker: The anchorLeft and anchorTop props are only supported in Google Maps API version 3.62 and above. The current version is ${google.maps.version}.`),t.anchorLeft=n,t.anchorTop=r,e!==void 0&&console.warn("AdvancedMarker: the anchorPoint prop is ignored when anchorLeft and/or anchorTop are set.");return}if(e!==void 0){const[c,h]=e??n7.BOTTOM,f=`calc(-1 * ${c})`,g=`calc(-1 * ${h})`;a?(t.anchorLeft=f,t.anchorTop=g,l.style.transform=""):(l.style.transform=`translate(50%, 100%) translate(${f}, ${g})`,t.dataset.origin="rgm",ZH.addAdvancedMarkerPointerEventsOverwrite())}}},[t,e,n,r,o])}function a7(t){const[e,n]=M.useState(null),r=qk(),{onClick:o,onDrag:a,onDragStart:l,onDragEnd:c,onMouseOver:h,onMouseOut:f}=t,g=Kv(t,["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"]),{position:y,draggable:_}=g;return M.useEffect(()=>{if(!r){r===void 0&&console.error("<Marker> has to be inside a Map component.");return}const T=new google.maps.Marker(g);return T.setMap(r),n(T),()=>{T.setMap(null),n(null)}},[r]),M.useEffect(()=>{if(!e)return;const T=e,C=google.maps.event;return o&&C.addListener(T,"click",o),a&&C.addListener(T,"drag",a),l&&C.addListener(T,"dragstart",l),c&&C.addListener(T,"dragend",c),h&&C.addListener(T,"mouseover",h),f&&C.addListener(T,"mouseout",f),e.setDraggable(!!_),()=>{C.clearInstanceListeners(T)}},[e,_,o,a,l,c,h,f]),M.useEffect(()=>{e&&g&&e.setOptions(g)},[e,g]),M.useEffect(()=>{_||!y||!e||e.setPosition(y)},[_,y,e]),e}const l7=M.forwardRef((t,e)=>{const n=a7(t);return M.useImperativeHandle(e,()=>n,[n]),We.createElement(We.Fragment,null)});l7.displayName="Marker";function u7({contextToken:t,mapHidden:e=!1}){const n=M.useRef(null),r=qu("places");return M.useEffect(()=>{if(!r||!t)return;const o=n.current;async function a(){if(o&&r){const l=new r.PlaceContextualElement;l.id="widget",l.contextToken=t;const c=new r.PlaceContextualListConfigElement;e&&(c.mapHidden=!0),l.appendChild(c),o.appendChild(l)}}return a(),()=>{o&&(o.innerHTML="")}},[r,t,e]),b.jsx("div",{className:"widget",ref:n})}const c7=t=>{const e=new Date(t),n=(c,h=2)=>c.toString().padStart(h,"0"),r=n(e.getHours()),o=n(e.getMinutes()),a=n(e.getSeconds()),l=n(e.getMilliseconds(),3);return`${r}:${o}:${a}.${l}`},d7=t=>{const[e,n]=M.useState(!1);return M.useEffect(()=>{const r=window.matchMedia(t);r.matches!==e&&n(r.matches);const o=()=>{n(r.matches)};return r.addEventListener("change",o),()=>r.removeEventListener("change",o)},[e,t]),e};function f7(){const{client:t,setConfig:e,heldGroundingChunks:n,clearHeldGroundingChunks:r,heldGroundedResponse:o,clearHeldGroundedResponse:a}=Pv(),{systemPrompt:l,voice:c}=Qp(),{tools:h}=hC(),f=vn(I=>I.turns),{showSystemMessages:g}=yw(),y=vn(I=>I.isAwaitingFunctionResponse),_=M.useRef(null),T=d7("(max-width: 768px)"),[C,k]=M.useState(!0),N=g?f:f.filter(I=>I.role!=="system");return M.useEffect(()=>{const I=h.filter(D=>D.isEnabled).map(D=>({functionDeclarations:[{name:D.name,description:D.description,parameters:D.parameters}]})),L={responseModalities:[hf.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:c}}},inputAudioTranscription:{},outputAudioTranscription:{},systemInstruction:{parts:[{text:l}]},tools:I,thinkingConfig:{thinkingBudget:0}};e(L)},[e,l,h,c]),M.useEffect(()=>{const{addTurn:I,updateLastTurn:L,mergeIntoLastAgentTurn:D}=vn.getState(),$=(ee,W)=>{const z=vn.getState().turns,te=z[z.length-1];te&&te.role==="user"&&!te.isFinal?L({text:te.text+ee,isFinal:W}):I({role:"user",text:ee,isFinal:W})},G=(ee,W)=>{const{turns:z,updateLastTurn:te,addTurn:de,mergeIntoLastAgentTurn:xe}=vn.getState(),ue=z[z.length-1];if(ue&&ue.role==="agent"&&!ue.isFinal)te({text:ue.text+ee,isFinal:W});else{const fe=z.map(le=>le.role).lastIndexOf("agent");let K=!1;if(fe!==-1){const le=z.slice(fe+1);le.length>0&&le.every(Ee=>Ee.role==="system")&&(K=!0)}const oe={text:ee,isFinal:W};n&&(oe.groundingChunks=n,r()),o&&(oe.toolResponse=o,a()),K?xe(oe):de({...oe,role:"agent"})}},j=ee=>{var K,oe,le;const{turns:W,updateLastTurn:z,addTurn:te,mergeIntoLastAgentTurn:de}=vn.getState(),xe=((oe=(K=ee.modelTurn)==null?void 0:K.parts)==null?void 0:oe.map(Ee=>Ee.text).filter(Boolean).join(""))??"",ue=(le=ee.groundingMetadata)==null?void 0:le.groundingChunks;if(!xe&&!ue)return;const fe=W[W.length-1];if((fe==null?void 0:fe.role)==="agent"&&!fe.isFinal){const Ee={text:fe.text+xe};ue&&(Ee.groundingChunks=[...fe.groundingChunks||[],...ue]),z(Ee)}else{const Ee=W.map(re=>re.role).lastIndexOf("agent");let H=!1;if(Ee!==-1){const re=W.slice(Ee+1);re.length>0&&re.every(U=>U.role==="system")&&(H=!0)}const V={text:xe,isFinal:!1,groundingChunks:ue};if(n){const re=[...n||[],...V.groundingChunks||[]];V.groundingChunks=re,r()}o&&(V.toolResponse=o,a()),H?de(V):te({...V,role:"agent"})}},q=()=>{const ee=vn.getState().turns,W=ee[ee.length-1];W&&!W.isFinal&&L({isFinal:!0})};return t.on("inputTranscription",$),t.on("outputTranscription",G),t.on("content",j),t.on("turncomplete",q),t.on("generationcomplete",q),()=>{t.off("inputTranscription",$),t.off("outputTranscription",G),t.off("content",j),t.off("turncomplete",q),t.off("generationcomplete",q)}},[t,n,r,o,a]),M.useEffect(()=>{if(_.current){const I=setTimeout(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},350);return()=>clearTimeout(I)}},[f,y]),M.useEffect(()=>{(N.length>0||y)&&k(!0)},[N.length,y]),b.jsx("div",{className:"transcription-container",children:N.length===0&&!y?b.jsx("div",{}):C?b.jsxs("div",{className:"transcription-view",ref:_,children:[b.jsx("button",{className:"transcription-close-button",onClick:()=>k(!1),"aria-label":"Close transcription",children:b.jsx("span",{className:"icon",children:"close"})}),N.map(I=>{var G,j,q,ee,W;if(I.role==="system")return b.jsxs("div",{className:"transcription-entry system",children:[b.jsxs("div",{className:"transcription-header",children:[b.jsx("div",{className:"transcription-source",children:"System"}),b.jsx("div",{className:"transcription-timestamp",children:c7(I.timestamp)})]}),b.jsx("div",{className:"transcription-text-content",children:b.jsx(JE,{remarkPlugins:[t1],children:I.text})})]},I.timestamp);const L=(ee=(q=(j=(G=I.toolResponse)==null?void 0:G.candidates)==null?void 0:j[0])==null?void 0:q.groundingMetadata)==null?void 0:ee.googleMapsWidgetContextToken;let D=[];if(I.groundingChunks&&(D=I.groundingChunks.map(z=>{const te=z.web||z.maps;return te&&te.uri?{uri:te.uri,title:te.title||te.uri}:null}).filter(z=>z!==null),I.groundingChunks.length===1)){const te=(W=I.groundingChunks[0].maps)==null?void 0:W.placeAnswerSources;if(te&&Array.isArray(te.reviewSnippets)){const de=te.reviewSnippets.map(xe=>xe.googleMapsUri&&xe.title?{uri:xe.googleMapsUri,title:xe.title}:null).filter(xe=>xe!==null);D.push(...de)}}const $=D.length>0;return b.jsxs("div",{className:`transcription-entry ${I.role} ${I.isFinal?"":"interim"}`,children:[b.jsx("div",{className:"avatar",children:b.jsx("span",{className:"icon",children:I.role==="user"?"person":"auto_awesome"})}),b.jsxs("div",{className:"message-bubble",children:[b.jsx("div",{className:"transcription-text-content",children:b.jsx(JE,{remarkPlugins:[t1],children:I.text})}),$&&b.jsx(OH,{className:"grounding-chunks",sources:D}),L&&!T&&b.jsx("div",{style:{marginTop:"12px"},children:b.jsx(u7,{contextToken:L,mapHidden:!0})})]})]},I.timestamp)}),y&&b.jsxs("div",{className:"spinner-container",children:[b.jsx("div",{className:"spinner"}),b.jsx("p",{children:"Calling tool..."})]})]}):null})}const h7=({onClose:t})=>b.jsx("div",{className:"popup-overlay",children:b.jsxs("div",{className:"popup-content",children:[b.jsx("h2",{children:"Welcome to the Interactive Dubai Real Estate Explorer"}),b.jsxs("div",{className:"popup-scrollable-content",children:[b.jsx("p",{children:"This interactive demo showcases how Gemini can be integrated with your own data and Google Maps to create a powerful, voice-driven real estate exploration tool."}),b.jsx("p",{children:"Plan a property search using natural language:"}),b.jsxs("ol",{children:[b.jsxs("li",{children:[b.jsx("span",{className:"icon",children:"play_circle"}),b.jsxs("div",{children:["Press the ",b.jsx("strong",{children:" Play "})," button to start the conversation."]})]}),b.jsxs("li",{children:[b.jsx("span",{className:"icon",children:"record_voice_over"}),b.jsxs("div",{children:[b.jsx("strong",{children:"Speak naturally "}),'to find properties. Try saying, "Show me Dubai Hills Estate."']})]}),b.jsxs("li",{children:[b.jsx("span",{className:"icon",children:"apartment"}),b.jsxs("div",{children:["Ask to find specific property types, like ",b.jsx("strong",{children:'"Show me villas in that area."'})]})]}),b.jsxs("li",{children:[b.jsx("span",{className:"icon",children:"map"}),b.jsxs("div",{children:["Watch as the map ",b.jsx("strong",{children:" dynamically updates "})," with communities and project locations."]})]}),b.jsxs("li",{children:[b.jsx("span",{className:"icon",children:"school"}),b.jsxs("div",{children:["Ask for nearby amenities, like ",b.jsx("strong",{children:'"Where are the closest schools?"'})]})]})]})]}),b.jsx("button",{onClick:t,children:"Let's Get Started!"})]})}),p7=["center","range","heading","tilt","roll"],m7={center:{lat:0,lng:0,altitude:0},range:0,heading:0,tilt:0,roll:0};function g7(t,e){const n=M.useRef(m7);M.useEffect(()=>{if(!t)return;const r=[];let o=!1;for(const a of p7){const l=y7(t,`gmp-${a}change`,()=>{const c=t[a];c!=null&&(a==="center"?n.current.center=c.toJSON():n.current[a]=c,e&&!o&&(o=!0,queueMicrotask(()=>{o=!1,e(n.current)})))});r.push(l)}return()=>{for(const a of r)a()}},[t,e])}function y7(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}function v7(){const[t,e]=M.useState(null),n=M.useCallback(r=>e(r),[e]);return[t,n]}function b7(t,e){const n=M.useRef(void 0);(!n.current||!FH(e,n.current))&&(n.current=e),M.useEffect(t,n.current)}const Hk=M.forwardRef((t,e)=>{qu("maps3d");const[n,r]=v7();g7(n,_=>{t.onCameraChange&&t.onCameraChange(_)});const[o,a]=M.useState(!1);M.useEffect(()=>{customElements.whenDefined("gmp-map-3d").then(()=>{a(!0)})},[]);const{center:l,heading:c,tilt:h,range:f,roll:g,...y}=t;return b7(()=>{n&&Object.assign(n,y)},[n,y]),M.useImperativeHandle(e,()=>n,[n]),o?b.jsx("gmp-map-3d",{ref:r,center:l,range:f,heading:c,tilt:h,roll:g,defaultUIHidden:!0,mode:"SATELLITE"}):null});Hk.displayName="Map3D";/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/async function x7(t,e,n){const r={locations:[{lat:t,lng:e}]};try{const{results:o}=await n.getElevationForLocations(r);if(o&&o[0])return o[0].elevation}catch(o){console.error("Elevation service failed due to: "+o)}return 0}async function w7(t,e,n=0,r=[0,0,0,0]){const o=await x7(t[0].lat,t[0].lng,e),a=Math.PI/180,l=6371e3;let c=1/0,h=-1/0,f=1/0,g=-1/0;t.forEach(Ue=>{Ue.lat<c&&(c=Ue.lat),Ue.lat>h&&(h=Ue.lat),Ue.lng<f&&(f=Ue.lng),Ue.lng>g&&(g=Ue.lng)});const y=(c+h)/2,_=(f+g)/2;let T=0,C=0;t.forEach(Ue=>{T+=o+(Ue.alt??0),C++});const k=C>0?T/C:0;function N(Ue,Xt,hn,fr){const fs=(hn-Ue)*a,nn=(fr-Xt)*a,hr=Math.sin(fs/2)**2+Math.cos(Ue*a)*Math.cos(hn*a)*Math.sin(nn/2)**2;return 2*Math.atan2(Math.sqrt(hr),Math.sqrt(1-hr))}let I=0;t.forEach(Ue=>{const Xt=N(y,_,Ue.lat,Ue.lng);Xt>I&&(I=Xt)});const[L,D,$,G]=r,j=1-G-D,q=1-L-$,ee=Math.max(1/j,1/q),te=I*l*2*ee,de=(G-D)/2,xe=(L-$)/2,ue=de*te,fe=xe*te,K={x:-ue,y:fe},oe=n*a,le=Math.cos(oe),Ee=Math.sin(oe),H=K.x*le-K.y*Ee,re=(K.x*Ee+K.y*le)/111e3,U=H/(111e3*Math.cos(y*a)),me=y+re,Ce=_+U,Ie=60,Ve=te/Math.tan(Ie*a),rt=Math.sqrt(te**2+Ve**2);return{lat:me,lng:Ce,altitude:k,range:rt,tilt:Ie,heading:n}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*//**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */class _7{constructor(e){this.map=e.map,this.maps3dLib=e.maps3dLib,this.elevationLib=e.elevationLib}clearMap(){this.map.innerHTML=""}addMarkers(e){for(const n of e){const r=new this.maps3dLib.Marker3DInteractiveElement({position:n.position,altitudeMode:"RELATIVE_TO_MESH",label:n.showLabel?n.label:null,title:n.label,drawsWhenOccluded:!0});this.map.appendChild(r)}}flyTo(e){this.map.flyCameraTo({durationMillis:5e3,endCamera:{center:{lat:e.center.lat,lng:e.center.lng,altitude:e.center.altitude},range:e.range,heading:e.heading,tilt:e.tilt,roll:e.roll}})}async frameEntities(e,n){if(e.length===0)return;const r=new this.elevationLib.ElevationService,o=await w7(e.map(a=>a.position),r,0,n);this.flyTo({center:{lat:o.lat,lng:o.lng,altitude:o.altitude},range:o.range+1e3,heading:o.heading,tilt:o.tilt,roll:0})}}const S7="AIzaSyCCbXfjrXEP24S_91o2B1ktZUGo4kE4LeI",E7="AIzaSyCYTvt7YMcKjSNTnBa42djlndCeDvZHkr0",T7={center:{lat:25.12,lng:55.22,altitude:1e3},range:35e3,heading:0,tilt:30,roll:0};function C7(){const[t,e]=M.useState(null),n=qu("places"),r=qu("geocoding"),[o,a]=M.useState(null),[l,c]=M.useState(T7),{markers:h,cameraTarget:f,setCameraTarget:g,preventAutoFrame:y}=os(),_=M.useRef(null),T=qu("maps3d"),C=qu("elevation"),[k,N]=M.useState(!0),I=M.useRef(null),L=M.useRef(null),[D,$]=M.useState([.05,.05,.05,.05]);M.useEffect(()=>{r&&a(new r.Geocoder)},[r]),M.useEffect(()=>(t&&T&&C&&(_.current=new _7({map:t,maps3dLib:T,elevationLib:C})),()=>{_.current=null}),[t,T,C]),M.useEffect(()=>{const q=()=>{const z=I.current,te=L.current,de=window.innerWidth;if(!z||!te)return;const xe=window.matchMedia("(max-width: 768px)").matches,ue=.05,fe=.05;let K=.05,oe=.05;xe||(oe=Math.max(oe,z.offsetWidth/de+.02)),$([ue,fe,K,oe])},ee=new ResizeObserver(q);I.current&&ee.observe(I.current),L.current&&ee.observe(L.current),window.addEventListener("resize",q);const W=setTimeout(q,100);return()=>{window.removeEventListener("resize",q),ee.disconnect(),clearTimeout(W)}},[]);const G=()=>{N(!1)};M.useEffect(()=>{if(t){const q=document.querySelector(".vAygCK-api-load-alpha-banner");q&&(q.style.display="none")}},[t]),M.useEffect(()=>{if(!_.current)return;const q=_.current;q.clearMap(),h.length>0&&q.addMarkers(h);const W=[...h.map(z=>z.position)].map(z=>({position:z}));W.length>0&&!y&&q.frameEntities(W,D)},[h,D,y]),M.useEffect(()=>{f&&_.current&&(_.current.flyTo(f),g(null),os.getState().setPreventAutoFrame(!1))},[f,g]);const j=M.useCallback(q=>{c(ee=>({...ee,...q}))},[]);return b.jsxs(d5,{apiKey:S7,map:t,placesLib:n,elevationLib:C,geocoder:o,padding:D,children:[b.jsx(A3,{}),b.jsx(vC,{}),k&&b.jsx(h7,{onClose:G}),b.jsxs("div",{className:"streaming-console",children:[b.jsxs("div",{className:"console-panel",ref:I,children:[b.jsx(f7,{}),b.jsx(C3,{trayRef:L})]}),b.jsx("div",{className:"map-panel",children:b.jsx(Hk,{ref:q=>e(q??null),onCameraChange:j,...l})})]})]})}function A7(){return b.jsx("div",{className:"App",children:b.jsx(JH,{version:"alpha",apiKey:E7,solutionChannel:"gmp_aistudio_itineraryapplet_v1.0.0",children:b.jsx(C7,{})})})}const Vk=()=>b.jsx("div",{className:"daire-map-assistant-container",children:b.jsx(A7,{})}),k7=({currentUser:t})=>{const[e,n]=M.useState(zi.AI),r=()=>{switch(e){case zi.Listings:return b.jsx(s3,{currentUser:t});case zi.AI:return b.jsx(uE,{currentUser:t});case zi.MapAssistant:return b.jsx(Vk,{});case zi.Mortgage:return b.jsx(d3,{});case zi.Vault:return b.jsx(f3,{currentUser:t});default:return b.jsx(uE,{currentUser:t})}};return b.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[b.jsx(c3,{currentView:e,setCurrentView:n}),b.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r()})]})},I7=({onSuccess:t,onBack:e})=>{const[n,r]=M.useState("input"),[o,a]=M.useState(""),[l,c]=M.useState(""),[h,f]=M.useState(""),[g,y]=M.useState(""),[_,T]=M.useState(""),[C,k]=M.useState(""),[N,I]=M.useState(""),[L,D]=M.useState(""),[$,G]=M.useState(null),[j,q]=M.useState(!1),[ee,W]=M.useState(""),[z,te]=M.useState(""),[de,xe]=M.useState(null),ue=le=>/^[+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(le)&&le.replace(/\D/g,"").length>=10,fe=async le=>{if(le.preventDefault(),W(""),te(""),C.length<8){W("Password must be at least 8 characters long");return}if(C!==N){W("Passwords do not match");return}if(!ue(g)){W("Please enter a valid phone number (minimum 10 digits)");return}q(!0);try{const V=await fetch("https://diuorqykbykouqnlxcxe.supabase.co/functions/v1/generate-client-otp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw"},body:JSON.stringify({firstName:o,lastName:l,email:h,phone:g,location:_,password:C})}),re=await V.json();if(!V.ok)throw re.alreadyRegistered&&alert(re.error),new Error(re.error||"Failed to send OTP");te(re.message||"OTP code sent successfully! Check your email."),re.developmentOTP&&G(re.developmentOTP),r("verify")}catch(Ee){W(Ee.message||"An error occurred")}finally{q(!1)}},K=async le=>{le.preventDefault(),W(""),q(!0);try{const V=await fetch("https://diuorqykbykouqnlxcxe.supabase.co/functions/v1/verify-client-otp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw"},body:JSON.stringify({firstName:o,lastName:l,email:h,phone:g,location:_,password:C,emailOTP:L.trim()})}),re=await V.json();if(!V.ok)throw re.attemptsRemaining!==void 0&&xe(re.attemptsRemaining),new Error(re.error||"Failed to verify OTP");t(re.userId,re.email)}catch(Ee){W(Ee.message||"An error occurred")}finally{q(!1)}},oe=()=>{n==="verify"?(r("input"),D(""),W(""),te(""),xe(null),G(null)):e()};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-primary via-brand-primary to-brand-secondary flex items-center justify-center p-4",children:b.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h1",{className:"text-3xl font-bold text-brand-primary mb-2",children:"Client Login"}),b.jsx("p",{className:"text-gray-600",children:n==="input"?"Register to access your personalized real estate portal":"Enter the OTP code sent to your email"})]}),ee&&b.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:[b.jsx("p",{className:"text-sm",children:ee}),de!==null&&b.jsxs("p",{className:"text-xs mt-1",children:["Attempts remaining: ",de]})]}),z&&n==="verify"&&b.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4",children:[b.jsx("p",{className:"text-sm font-medium",children:z}),$?b.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[b.jsx("p",{className:"text-xs font-semibold text-yellow-800 mb-1",children:"Development Mode - Your OTP Code:"}),b.jsx("p",{className:"text-2xl font-mono font-bold text-yellow-900 text-center tracking-wider",children:$}),b.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Copy this code and paste it in the field below"})]}):b.jsx("p",{className:"text-xs mt-1",children:"Please check your email for the verification code."})]}),n==="input"?b.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),b.jsx("input",{type:"text",id:"firstName",value:o,onChange:le=>a(le.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"John",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),b.jsx("input",{type:"text",id:"lastName",value:l,onChange:le=>c(le.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Doe",required:!0})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),b.jsx("input",{type:"email",id:"email",value:h,onChange:le=>f(le.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"your@email.com",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),b.jsx("input",{type:"tel",id:"phone",value:g,onChange:le=>y(le.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"+971 XX XXX XXXX",required:!0}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a valid phone number (min 10 digits)"})]}),b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:["Home Location ",b.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),b.jsx("input",{type:"text",id:"location",value:_,onChange:le=>T(le.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"e.g., Dubai Marina"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),b.jsx("input",{type:"password",id:"password",value:C,onChange:le=>k(le.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Enter password",required:!0,minLength:8}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 8 characters"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),b.jsx("input",{type:"password",id:"confirmPassword",value:N,onChange:le=>I(le.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Confirm password",required:!0,minLength:8})]}),b.jsx("button",{type:"submit",disabled:j,className:"w-full bg-brand-gold text-brand-primary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Sending...":"Send OTP Code"})]}):b.jsxs("form",{onSubmit:K,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"emailOTP",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email OTP Code"}),b.jsx("input",{type:"text",id:"emailOTP",value:L,onChange:le=>D(le.target.value.replace(/\D/g,"")),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all text-center text-2xl font-mono tracking-widest",placeholder:"000000",maxLength:6,pattern:"[0-9]{6}",required:!0})]}),b.jsx("button",{type:"submit",disabled:j,className:"w-full bg-brand-gold text-brand-primary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Verifying...":"Verify & Login"}),b.jsx("button",{type:"button",onClick:()=>{r("input"),D(""),W(""),te(""),xe(null),G(null)},disabled:j,className:"w-full text-brand-primary hover:text-brand-secondary transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Resend OTP Code"})]}),b.jsx("button",{type:"button",onClick:oe,className:"w-full mt-6 text-gray-600 hover:text-gray-800 transition-colors text-sm font-medium",children:n==="verify"?"Back to Login Details":"Back to Home"})]})})},R7=({onClientSuccess:t,onStaffSuccess:e,onBack:n,onForgotPassword:r})=>{const[o,a]=M.useState(""),[l,c]=M.useState(""),[h,f]=M.useState(!1),[g,y]=M.useState(""),_=async T=>{T.preventDefault(),y(""),f(!0);try{const N=await fetch("https://diuorqykbykouqnlxcxe.supabase.co/functions/v1/unified-login",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw"},body:JSON.stringify({email:o,password:l})}),I=await N.json();if(!N.ok)throw new Error(I.error||"Failed to login");I.userType==="client"?t(I.userId,I.email):I.userType==="staff"&&e(I.userId,I.email,I.requiresPasswordChange||!1)}catch(C){y(C.message||"An error occurred")}finally{f(!1)}};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-primary via-brand-primary to-brand-secondary flex items-center justify-center p-4",children:b.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h1",{className:"text-3xl font-bold text-brand-primary mb-2",children:"Login"}),b.jsx("p",{className:"text-gray-600",children:"Enter your credentials to access your dashboard"})]}),g&&b.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:b.jsx("p",{className:"text-sm",children:g})}),b.jsxs("form",{onSubmit:_,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),b.jsx("input",{type:"email",id:"email",value:o,onChange:T=>a(T.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"your@email.com",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),b.jsx("input",{type:"password",id:"password",value:l,onChange:T=>c(T.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Enter your password",required:!0})]}),b.jsx("div",{className:"text-right",children:b.jsx("button",{type:"button",onClick:r,className:"text-sm text-brand-primary hover:text-brand-secondary transition-colors font-medium",children:"Forgot Password?"})}),b.jsx("button",{type:"submit",disabled:h,className:"w-full bg-brand-gold text-brand-primary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Logging in...":"Login"})]}),b.jsx("button",{type:"button",onClick:n,className:"w-full mt-6 text-gray-600 hover:text-gray-800 transition-colors text-sm font-medium",children:"Back to Home"})]})})},N7=({onBack:t,onSuccess:e})=>{const[n,r]=M.useState("request"),[o,a]=M.useState(""),[l,c]=M.useState(""),[h,f]=M.useState(""),[g,y]=M.useState(""),[_,T]=M.useState(""),[C,k]=M.useState(!1),[N,I]=M.useState(""),[L,D]=M.useState(null),$=async j=>{j.preventDefault(),I(""),k(!0);try{const W=await fetch("https://diuorqykbykouqnlxcxe.supabase.co/functions/v1/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw"},body:JSON.stringify({email:o,phone:l})}),z=await W.json();if(!W.ok)throw new Error(z.error||"Failed to send reset code");z.debug&&D(z.debug.otp),r("verify")}catch(q){I(q.message||"An error occurred")}finally{k(!1)}},G=async j=>{if(j.preventDefault(),I(""),g.length<8){I("Password must be at least 8 characters long");return}if(g!==_){I("Passwords do not match");return}k(!0);try{const W=await fetch("https://diuorqykbykouqnlxcxe.supabase.co/functions/v1/reset-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw"},body:JSON.stringify({email:o,phone:l,otp:h.trim(),newPassword:g})}),z=await W.json();if(!W.ok)throw new Error(z.error||"Failed to reset password");alert("Password reset successfully! You can now login with your new password."),e()}catch(q){I(q.message||"An error occurred")}finally{k(!1)}};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-primary via-brand-primary to-brand-secondary flex items-center justify-center p-4",children:b.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h1",{className:"text-3xl font-bold text-brand-primary mb-2",children:"Reset Password"}),b.jsx("p",{className:"text-gray-600",children:n==="request"?"Enter your email and phone to receive a reset code":"Enter the code and your new password"})]}),N&&b.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:b.jsx("p",{className:"text-sm",children:N})}),L&&n==="verify"&&b.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg mb-4",children:[b.jsx("p",{className:"text-xs font-semibold mb-2",children:"Development Mode - Reset Code:"}),b.jsxs("p",{className:"text-sm",children:["OTP: ",b.jsx("span",{className:"font-mono font-bold",children:L})]})]}),n==="request"?b.jsxs("form",{onSubmit:$,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),b.jsx("input",{type:"email",id:"email",value:o,onChange:j=>a(j.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"your@email.com",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),b.jsx("input",{type:"tel",id:"phone",value:l,onChange:j=>c(j.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"+971 XX XXX XXXX",required:!0})]}),b.jsx("button",{type:"submit",disabled:C,className:"w-full bg-brand-gold text-brand-primary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Sending...":"Send Reset Code"})]}):b.jsxs("form",{onSubmit:G,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reset Code"}),b.jsx("input",{type:"text",id:"otp",value:h,onChange:j=>f(j.target.value.replace(/\D/g,"")),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all text-center text-2xl font-mono tracking-widest",placeholder:"000000",maxLength:6,pattern:"[0-9]{6}",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),b.jsx("input",{type:"password",id:"newPassword",value:g,onChange:j=>y(j.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Enter new password",required:!0,minLength:8}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 8 characters"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),b.jsx("input",{type:"password",id:"confirmPassword",value:_,onChange:j=>T(j.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Confirm new password",required:!0,minLength:8})]}),b.jsx("button",{type:"submit",disabled:C,className:"w-full bg-brand-gold text-brand-primary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Resetting...":"Reset Password"}),b.jsx("button",{type:"button",onClick:()=>r("request"),className:"w-full text-brand-primary hover:text-brand-secondary transition-colors text-sm font-medium",children:"Resend Reset Code"})]}),b.jsx("button",{type:"button",onClick:t,className:"w-full mt-6 text-gray-600 hover:text-gray-800 transition-colors text-sm font-medium",children:"Back to Login"})]})})},M7=({onSuccess:t,onBack:e})=>{const[n,r]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState(""),[h,f]=M.useState(""),[g,y]=M.useState(""),[_,T]=M.useState("Property Advisor"),[C,k]=M.useState(""),[N,I]=M.useState(""),[L,D]=M.useState(!1),[$,G]=M.useState(""),[j,q]=M.useState(""),ee=async W=>{if(W.preventDefault(),G(""),q(""),h.length<8){G("Password must be at least 8 characters long");return}if(h!==g){G("Passwords do not match");return}D(!0);try{const de=await fetch("https://diuorqykbykouqnlxcxe.supabase.co/functions/v1/staff-register",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw"},body:JSON.stringify({email:o,name:n,phone:l||null,password:h,role:_,adminEmail:C,adminPassword:N})}),xe=await de.json();if(!de.ok)throw new Error(xe.error||"Failed to create staff account");q("Staff account created successfully! Logging in..."),setTimeout(()=>{t(xe.user.id,xe.user.email,xe.user.name,xe.user.role)},1500)}catch(z){G(z.message||"An error occurred")}finally{D(!1)}};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-primary via-brand-primary to-brand-secondary flex items-center justify-center p-4",children:b.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-2xl",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h1",{className:"text-3xl font-bold text-brand-primary mb-2",children:"Staff Registration"}),b.jsx("p",{className:"text-gray-600",children:"Create a new staff account (Admin or Property Advisor)"})]}),$&&b.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:b.jsx("p",{className:"text-sm",children:$})}),j&&b.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4",children:b.jsx("p",{className:"text-sm font-medium",children:j})}),b.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),b.jsx("input",{type:"text",id:"name",value:n,onChange:W=>r(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"John Smith",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),b.jsxs("select",{id:"role",value:_,onChange:W=>T(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",required:!0,children:[b.jsx("option",{value:"Property Advisor",children:"Property Advisor"}),b.jsx("option",{value:"Admin",children:"Admin"})]})]})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),b.jsx("input",{type:"email",id:"email",value:o,onChange:W=>a(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"john@lockwoodcarter.com",required:!0})]}),b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",b.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),b.jsx("input",{type:"tel",id:"phone",value:l,onChange:W=>c(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"+971 XX XXX XXXX"})]})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),b.jsx("input",{type:"password",id:"password",value:h,onChange:W=>f(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Enter password",required:!0,minLength:8}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 8 characters"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),b.jsx("input",{type:"password",id:"confirmPassword",value:g,onChange:W=>y(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Confirm password",required:!0,minLength:8})]})]}),b.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-6",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Admin Authorization Required"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"An existing Owner or Admin must authorize this account creation"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"adminEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Email"}),b.jsx("input",{type:"email",id:"adminEmail",value:C,onChange:W=>k(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"admin@lockwoodcarter.com",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"adminPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Password"}),b.jsx("input",{type:"password",id:"adminPassword",value:N,onChange:W=>I(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none transition-all",placeholder:"Enter admin password",required:!0})]})]})]}),b.jsx("button",{type:"submit",disabled:L,className:"w-full bg-brand-gold text-brand-primary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:L?"Creating Account...":"Create Staff Account"})]}),b.jsx("button",{type:"button",onClick:e,className:"w-full mt-6 text-gray-600 hover:text-gray-800 transition-colors text-sm font-medium",children:"Back to Login"})]})})},D7=()=>{const[t,e]=M.useState(null),[n,r]=M.useState("dashboard"),[o,a]=M.useState(!1),[l,c]=M.useState(!1),[h,f]=M.useState(!1),[g,y]=M.useState(!1),[_,T]=M.useState(!1),[C,k]=M.useState(!1),N=()=>{c(!0)},I=()=>{f(!0)},L=()=>{y(!0)},D=()=>{T(!0),c(!1)},$=(z,te,de,xe,ue)=>{const fe=xe||te.split("@")[0].charAt(0).toUpperCase()+te.split("@")[0].slice(1),K=ue||Ft.Admin,oe={id:z,name:fe,email:te,role:K,avatar:fe.split(" ").map(le=>le.charAt(0)).join("").toUpperCase().substring(0,2)};e(oe),c(!1),y(!1),de?k(!0):a(!0)},G=()=>{k(!1),a(!0)},j=async(z,te)=>{try{const de="https://diuorqykbykouqnlxcxe.supabase.co",xe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpdW9ycXlrYnlrb3Vxbmx4Y3hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzMwNTksImV4cCI6MjA3Nzk0OTA1OX0.scP9B9klRZYXnYCIlF_zPpLTh8BLQ1FdMZIE3bhDahw",fe=await(await fetch(`${de}/rest/v1/client_profiles?user_id=eq.${z}&select=*`,{headers:{apikey:xe,Authorization:`Bearer ${xe}`}})).json();let K=te.split("@")[0],oe=K.substring(0,2).toUpperCase();if(fe&&fe[0]){const Ee=fe[0];K=`${Ee.first_name} ${Ee.last_name}`,oe=`${Ee.first_name.charAt(0)}${Ee.last_name.charAt(0)}`.toUpperCase()}const le={id:z,name:K,email:te,role:Ft.Client,avatar:oe};e(le),a(!0),c(!1),f(!1)}catch(de){console.error("Error loading client profile:",de);const xe=te.split("@")[0],ue=xe.charAt(0).toUpperCase()+xe.slice(1),fe={id:z,name:ue,email:te,role:Ft.Client,avatar:ue.substring(0,2).toUpperCase()};e(fe),a(!0),c(!1),f(!1)}},q=z=>{e(z),z.role===Ft.Client||r("dashboard")},ee=()=>{e(null),a(!1),c(!1),f(!1),y(!1),r("dashboard")},W=()=>{switch(n){case"dashboard":return b.jsx($y,{currentUser:t});case"daire-assistant":return b.jsx(Vk,{});case"content-studio":return b.jsx(L5,{currentUser:t});case"market-intelligence":return b.jsx(q5,{});case"clients":return b.jsx($5,{currentUser:t});case"contracts":return t.role!==Ft.Owner&&t.role!==Ft.Admin?b.jsx($y,{currentUser:t}):b.jsx(X5,{currentUser:t});case"master-prompts":return t.role!==Ft.Owner&&t.role!==Ft.Admin?b.jsx($y,{currentUser:t}):b.jsx(r3,{});default:return b.jsx($y,{currentUser:t})}};return C&&t?b.jsx(V1,{userId:t.id,email:t.email,isForced:!0,onSuccess:G}):_?b.jsx(N7,{onBack:()=>{T(!1),c(!0)},onSuccess:()=>{T(!1),c(!0)}}):h?b.jsx(I7,{onSuccess:j,onBack:()=>f(!1)}):g?b.jsx(M7,{onSuccess:(z,te,de,xe)=>$(z,te,!1,de,xe),onBack:()=>{y(!1),c(!0)}}):l?b.jsx(R7,{onClientSuccess:j,onStaffSuccess:$,onBack:()=>c(!1),onForgotPassword:D}):o?t?t.role===Ft.Client?b.jsxs("div",{className:"h-screen w-screen bg-brand-primary text-brand-text flex flex-col",children:[b.jsx(U_,{currentUser:t,setCurrentUser:q,onLogout:ee}),b.jsx(k7,{currentUser:t})]}):b.jsxs("div",{className:"h-screen w-screen bg-brand-primary text-brand-text flex flex-col overflow-hidden",children:[b.jsx(U_,{currentUser:t,setCurrentUser:q,onLogout:ee}),b.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[b.jsx(vC,{currentView:n,setCurrentView:r,currentUser:t}),b.jsxs("main",{className:"flex-1 overflow-hidden",children:[" ",W()]})]})]}):null:b.jsx(i3,{onLogin:N,onClientLogin:I,onStaffRegister:L})},$k=document.getElementById("root");if(!$k)throw new Error("Could not find root element to mount to");const P7=aI.createRoot($k);P7.render(b.jsx(We.StrictMode,{children:b.jsx(D7,{})}));
